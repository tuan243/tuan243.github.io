System.register("chunks:///_virtual/AdClient.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t.EventTarget}],execute:function(){e._RF.push({},"913ddXSZoBEo5AGp798igBP","AdClient",void 0);t("AdClient",function(t){function e(){for(var n,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(n=t.call.apply(t,[this].concat(i))||this).unitId=void 0,n}return n(e,t),e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/AdListener.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"f6d88RBS9tPzIA7DyZtLjZT","AdListener",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/AdmobTestRewarded.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RewardedAdClient.ts","./TestUnitId.ts"],(function(e){var o,n,d,t,a,i,r,c,l,s;return{setters:[function(e){o=e.inheritsLoose},function(e){n=e.cclegacy,d=e._decorator,t=e.Node,a=e.log,i=e.Label,r=e.Component},function(e){c=e.RewardedAdClient},function(e){l=e.getTestAdUnitId,s=e.AdFormat}],execute:function(){var u;n._RF.push({},"678782NbRFKJLaZoC++FP/J","AdmobTestRewarded",void 0);var w=d.ccclass,C=(d.property,"[AdmobTestRewarded]");e("AdmobTestRewarded",w("AdmobTestRewarded")(u=function(e){function n(){return e.apply(this,arguments)||this}o(n,e);var d=n.prototype;return d.start=function(){var e=this,o=this.node.getChildByName("DialogRewarded");o.active=!1,this.node.on(t.EventType.TOUCH_END,(function(){e.onClickLoadRewardedAd()})),o.on(t.EventType.TOUCH_END,(function(){e.onBtnClickCloseRewardDialogue()}))},d.onClickLoadRewardedAd=function(){a(C,"onClickLoadRewardedAd");var e=this.node.getChildByName("DialogRewarded"),o=new c;o.load(l(s.Rewarded),{onAdLoaded:function(){a(C,"onClickLoadRewardedAd","onAdLoaded"),o.show()},onAdFailedToLoad:function(e){a(C,"onClickLoadRewardedAd","onAdFailedToLoad",e)},onEarn:function(o,n){a(C,"onClickLoadRewardedAd","onEarn, rewardType = "+o+", amount = "+n),e.active=!0,e.getChildByName("Tip").getComponent(i).string="You have won the reward, type = "+o+", amount = "+n+"!"},onAdDismissedFullScreenContent:function(){a(C,"onAdDismissedFullScreenContent"),o.destroy()},onAdFailedToShowFullScreenContent:function(e){a(C,"onAdFailedToShowFullScreenContent, adError: ",e),o.destroy()},onPaidEvent:function(e){a(C,"onPaidEvent",e)}})},d.onBtnClickCloseRewardDialogue=function(){this.node.getChildByName("DialogRewarded").active=!1},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/AdStore.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mobx.cjs.development.mjs_cjs=&original=.js","./Global.ts","./Networking.ts","./mobx.cjs.development.js"],(function(e){var t,r,i,n,o,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy},null,function(e){n=e.default},function(e){o=e.default},function(e){a=e.default}],execute:function(){var s,c,u,p,h,l,f;i._RF.push({},"3cb20M8sGhBlb5E3ok2T7e5","AdStore",void 0);var d=a.observable,b=a.makeObservable,m=(a.autorun,a.reaction,a.action),w=(c=t((s=function(){function e(){r(this,"adRemaining",c,this),r(this,"resetTime",u,this),r(this,"nextReward",p,this),r(this,"nextRewardIdx",h,this),r(this,"rewards",l,this),r(this,"shareResetTime",f,this),b(this)}var t=e.prototype;return t.setData=function(e){var t=e.adRemaining,r=e.resetTime,i=e.nextReward,n=e.nextRewardIdx,o=e.rewards;this.adRemaining=t,this.resetTime=r,this.nextReward=i,this.nextRewardIdx=n,o&&(this.rewards=o)},t.fetchData=function(){var e=this;o.getAdInfo().then((function(t){e.setData(t)}))},t.setShareResetTime=function(e){this.shareResetTime=e},t.fetchShareInfo=function(){var e=this;o.getShareInfo().then((function(t){e.setShareResetTime(t.resetTime)}))},t.receiveShareReward=function(){var e=this;return o.receiveShareReward().then((function(t){return n.setCoins(t.coins),e.setShareResetTime(t.resetTime),t}))},t.watchAd=function(){var e=this;return o.verifyRewardAd().then((function(t){return e.setData(t),t}))},e}()).prototype,"adRemaining",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=t(s.prototype,"resetTime",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),p=t(s.prototype,"nextReward",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=t(s.prototype,"nextRewardIdx",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=t(s.prototype,"rewards",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=t(s.prototype,"shareResetTime",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(s.prototype,"setData",[m],Object.getOwnPropertyDescriptor(s.prototype,"setData"),s.prototype),t(s.prototype,"setShareResetTime",[m],Object.getOwnPropertyDescriptor(s.prototype,"setShareResetTime"),s.prototype),t(s.prototype,"fetchShareInfo",[m],Object.getOwnPropertyDescriptor(s.prototype,"fetchShareInfo"),s.prototype),t(s.prototype,"receiveShareReward",[m],Object.getOwnPropertyDescriptor(s.prototype,"receiveShareReward"),s.prototype),s);e("AdStore",new w);i._RF.pop()}}}));

System.register("chunks:///_virtual/AlertPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Popup.ts","./l10n-manager.ts"],(function(t){var e,n,o,i,l,a,r,u,c,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){l=t.cclegacy,a=t._decorator,r=t.Button,u=t.Label},null,function(t){c=t.Popup},function(t){s=t.default}],execute:function(){var p,v,h,f,d,b,B,g,y;l._RF.push({},"ac50fZWWB1HQp1WN5pmJV0/","AlertPopup",void 0);var C=a.ccclass,_=a.property;t("AlertPopup",(p=C("AlertPopup"),v=_(r),h=_(r),f=_(u),p((B=e((b=function(t){function e(){for(var e,n=arguments.length,l=new Array(n),a=0;a<n;a++)l[a]=arguments[a];return e=t.call.apply(t,[this].concat(l))||this,o(e,"cancelButton",B,i(e)),o(e,"okButton",g,i(e)),o(e,"messageLabel",y,i(e)),e}n(e,t);var l=e.prototype;return l._setUpCallback=function(t,e,n){var o=this;void 0===e&&(e=null),void 0===n&&(n=null),t.node.on(r.EventType.CLICK,(function(){n&&n(),o._resolveValue=e,o.close()}))},l._setButtonText=function(t,e){t.getComponentInChildren(u).string=s.t(e)},l.onEnable=function(){var t=this._data,e=t.okCb,n=void 0===e?null:e,o=t.cancelCb,i=void 0===o?null:o,l=t.okText,a=void 0===l?"OK":l,r=t.cancelText,u=void 0===r?"cancel":r,c=t.showCancel,s=void 0!==c&&c,p=t.showCloseButton,v=void 0!==p&&p,h=t.resolveValues,f=void 0===h?["Ok","Cancel"]:h,d=t.message,b=void 0===d?"":d;this._setUpCallback(this.okButton,f[0],n),this._setUpCallback(this.cancelButton,f[1],i),this._setButtonText(this.okButton,a),this._setButtonText(this.cancelButton,u),this.closeButton.node.active=v,this.cancelButton.node.active=s,this.messageLabel.string=b},e}(c)).prototype,"cancelButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(b.prototype,"okButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(b.prototype,"messageLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=b))||d));l._RF.pop()}}}));

System.register("chunks:///_virtual/AndroidSDK.ts",["./rollupPluginModLoBabelHelpers.js","cc","./InterstitialAdClient.ts","./RewardedAdClient.ts","./Bridge.ts","./Constant.ts","./HttpHelper.ts","./PlaySignInACK.ts","./PlaySignInREQ.ts"],(function(e){var t,n,r,i,o,a,d,s,u,l,c,A,h;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime,r=e.createClass},function(e){i=e.cclegacy,o=e.js,a=e.log},function(e){d=e.InterstitialAdClient},function(e){s=e.RewardedAdClient},function(e){u=e.bridge},function(e){l=e.SERVER_URL},function(e){c=e.httpRequest},function(e){A=e.PlaySignInACK},function(e){h=e.PlaySignInREQ}],execute:function(){i._RF.push({},"bb72bMl+qlCsZpwKjrNIbPc","AndroidSDK",void 0);var f="_AndroidSDK";e("default",new(function(){function e(){this._rewardedAdClient=null,this._rewardedAdResolvers=[],this._rewardedAdLoadingState=0,this._interstitialAdClient=null,this._interstitialAdResolvers=[],this._interstitialAdLoadingState=0,this._token=null,this._user=null,this._rewardedAdUnit="ca-app-pub-7899736863160702/3340560387",this._interstitialAdUnit="ca-app-pub-7899736863160702/8656687044"}var i=e.prototype;return i.getUser=function(){return this.signIn()},i.signIn=function(e){var r=this;return void 0===e&&(e=!1),new Promise((function(i,a){console.log("start sign in",e),u.sendToNative(o.getClassName(h),{forceSignIn:e},o.getClassName(A),t(n().mark((function t(o){var d,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=o){t.next=3;break}return a(new Error("Android login failed")),t.abrupt("return");case 3:return console.log("is force",e),console.log("server auth token",o.serverAuthToken),d=l+"/user/get-auth-token",t.next=8,c("GET",d,{"server-auth-code":o.serverAuthToken});case 8:s=t.sent,r._token=s.output.token,r._user=s.output.user,console.log("resp data Android sign in",s),i(r._user);case 13:case"end":return t.stop()}}),t)}))),r)}))},i._onSignInAck=function(){var e=t(n().mark((function e(t){var r,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("ack serverAuthToken",t.serverAuthToken),r=l,e.next=5,c("GET",r,{"server-auth-code":t.serverAuthToken});case 5:i=e.sent,this._token=i.output.token,this._user=i.output.user,console.log("resp data Android sign in",i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),i.preloadRewardedAd=function(){var e=this;return new Promise((function(t){var n;2!==e._rewardedAdLoadingState?1!==e._rewardedAdLoadingState?0===e._rewardedAdLoadingState&&(e._rewardedAdLoadingState=1,e._rewardedAdResolvers.push(t),null==(n=e._rewardedAdClient)||n.destroy(),e._rewardedAdClient=new s,e._rewardedAdClient.load(e._rewardedAdUnit,{onAdLoaded:function(){a(f,"RewardedAd","onAdLoaded"),e._rewardedAdResolvers.forEach((function(e){e(!0)})),e._rewardedAdResolvers=[],e._rewardedAdLoadingState=2},onAdFailedToLoad:function(t){a(f,"RewardedAd","onAdFailedToLoad",t),e._rewardedAdResolvers.forEach((function(e){e(!1)})),e._rewardedAdResolvers=[],e._rewardedAdLoadingState=0}})):e._rewardedAdResolvers.push(t):t(!0)}))},i.showRewardedAd=function(){var e=t(n().mark((function e(){var t,r=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.preloadRewardedAd();case 3:if(t=e.sent,console.log("have ad",t),t){e.next=7;break}throw new Error("Currently have no ad");case 7:return e.abrupt("return",new Promise((function(e,t){var n=!1,i=function(){r.preloadRewardedAd(),n?e(!0):t()},o={onEarn:function(e,t){a(f,"onClickLoadRewardedAd","onEarn, rewardType = "+e+", amount = "+t),n=!0},onAdDismissedFullScreenContent:function(){a(f,"onAdDismissedFullScreenContent"),i()},onAdFailedToShowFullScreenContent:function(e){a(f,"onAdFailedToShowFullScreenContent, adError: ",e),i()},onPaidEvent:function(e){a(f,"onPaidEvent",e)}};r._rewardedAdClient.rewardedListener=o,r._rewardedAdClient.show(),r._rewardedAdLoadingState=0})));case 10:throw e.prev=10,e.t0=e.catch(0),console.error(e.t0),this._rewardedAdLoadingState=0,e.t0;case 15:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),i.preloadInterstitialAd=function(){var e=t(n().mark((function e(){var t=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n;2!==t._interstitialAdLoadingState?1!==t._interstitialAdLoadingState?0===t._interstitialAdLoadingState&&(t._interstitialAdLoadingState=1,t._interstitialAdResolvers.push(e),null==(n=t._interstitialAdClient)||n.destroy(),t._interstitialAdClient=new d,t._interstitialAdClient.load(t._interstitialAdUnit,{onAdLoaded:function(){a(f,"InterstitialAd","onAdLoaded"),t._interstitialAdResolvers.forEach((function(e){e(!0)})),t._interstitialAdResolvers=[],t._interstitialAdLoadingState=2},onAdFailedToLoad:function(e){a(f,"InterstitialAd","onAdFailedToLoad",e),t._interstitialAdResolvers.forEach((function(e){e(!1)})),t._interstitialAdResolvers=[],t._interstitialAdLoadingState=0}})):t._interstitialAdResolvers.push(e):e(!0)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i.showInterstitialAd=function(){var e=t(n().mark((function e(){var t=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.preloadInterstitialAd();case 3:if(e.sent){e.next=6;break}throw new Error("Currently have no ad");case 6:return e.abrupt("return",new Promise((function(e,n){var r=function(){t.preloadInterstitialAd(),e(!0)},i={onAdDismissedFullScreenContent:function(){a(f,"onAdDismissedFullScreenContent"),r()},onAdFailedToShowFullScreenContent:function(e){a(f,"onAdFailedToShowFullScreenContent, adError: ",e),r()},onPaidEvent:function(e){a(f,"onPaidEvent",e)}};t._interstitialAdClient.interstitialListener=i,t._interstitialAdClient.show(),t._interstitialAdLoadingState=0})));case 9:throw e.prev=9,e.t0=e.catch(0),console.error(e.t0),this._interstitialAdLoadingState=0,e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),i.testSendSignInNoti=function(){u.sendToNative(o.getClassName(h),{},o.getClassName(A),(function(e){console.log("server auth token",e.serverAuthToken)}),this)},r(e,[{key:"token",get:function(){return this._token}},{key:"user",get:function(){return this._user}}]),e}()));i._RF.pop()}}}));

System.register("chunks:///_virtual/AppOpenAd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Base.ts"],(function(n){var t,e,p,r;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,p=n._decorator},function(n){r=n.Base}],execute:function(){var o,a,i,u,A,l,c,d,s;e._RF.push({},"1b2e4BJmARLoYFp0UFuCx/t","AppOpenAd",void 0);var h=p.ccclass;p.property,n("LoadAppOpenAdREQ",h("LoadAppOpenAdREQ")(o=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e}(r))||o),n("LoadAppOpenAdACK",h("LoadAppOpenAdACK")(a=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e}(r))||a),n("ShowAppOpenAdREQ",h("ShowAppOpenAdREQ")(i=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e}(r))||i),n("ShowAppOpenAdACK",h("ShowAppOpenAdACK")(u=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e}(r))||u),n("ShowAppOpenAdCompleteNTF",h("ShowAppOpenAdCompleteNTF")(A=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e}(r))||A),n("AppOpenAdFullScreenContentCallbackNTF",h("AppOpenAdFullScreenContentCallbackNTF")(l=function(n){function e(){for(var t,e=arguments.length,p=new Array(e),r=0;r<e;r++)p[r]=arguments[r];return(t=n.call.apply(n,[this].concat(p))||this).method=void 0,t.adError=void 0,t}return t(e,n),e}(r))||l),n("AppOpenAdLoadCallbackNTF",h("AppOpenAdLoadCallbackNTF")(c=function(n){function e(){for(var t,e=arguments.length,p=new Array(e),r=0;r<e;r++)p[r]=arguments[r];return(t=n.call.apply(n,[this].concat(p))||this).method=void 0,t.loadAdError=void 0,t}return t(e,n),e}(r))||c),n("IsAdAvailableREQ",h("IsAdAvailableREQ")(d=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e}(r))||d),n("IsAdAvailableACK",h("IsAdAvailableACK")(s=function(n){function e(){for(var t,e=arguments.length,p=new Array(e),r=0;r<e;r++)p[r]=arguments[r];return(t=n.call.apply(n,[this].concat(p))||this).valid=!1,t}return t(e,n),e}(r))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/AppOpenAdClient.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Bridge.ts","./Route.ts","./AppOpenAd.ts","./AdClient.ts","./PaidEventNTF.ts"],(function(e){var n,t,i,a,s,o,p,l,d,A,r,h,c,u,C,f,N,O;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){i=e.cclegacy,a=e.js,s=e.log},function(e){o=e.bridge},function(e){p=e.route},function(e){l=e.LoadAppOpenAdREQ,d=e.LoadAppOpenAdACK,A=e.IsAdAvailableREQ,r=e.IsAdAvailableACK,h=e.ShowAppOpenAdREQ,c=e.ShowAppOpenAdACK,u=e.AppOpenAdLoadCallbackNTF,C=e.AppOpenAdFullScreenContentCallbackNTF,f=e.ShowAppOpenAdCompleteNTF},function(e){N=e.AdClient},function(e){O=e.AppOpenPaidEventNTF}],execute:function(){i._RF.push({},"de391JGZ7RFmILooPgf1Zbb","AppOpenAdClient",void 0);var v="[AppOpenAdClient]";e("AppOpenAdClient",function(e){function i(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return(n=e.call.apply(e,[this].concat(i))||this)._appOpenAdListener=void 0,n}n(i,e);var N=i.prototype;return N.loadAd=function(e,n){this.appOpenAdListener=n,this.unitId=e,o.sendToNative(a.getClassName(l),{unitId:e},a.getClassName(d),(function(e){}),this)},N.isValid=function(e,n){o.sendToNative(a.getClassName(A),{unitId:this.unitId},a.getClassName(r),(function(t){s(v,"isValid",t.valid),e&&n&&e.call(n,t.valid)}))},N.show=function(e){o.sendToNative(a.getClassName(h),{unitId:this.unitId},a.getClassName(c),(function(n){s(v,"showAdIfAvailable",n),e&&e()}))},N.destroy=function(){this.appOpenAdListener=null},N.onAppOpenAdLoadCallbackNTF=function(e){if(this.appOpenAdListener){var n=this.appOpenAdListener[e.method];n&&n(e.loadAdError)}},N.onFullScreenContentCallbackNTF=function(e){if(e&&e.method&&this.appOpenAdListener){var n=this.appOpenAdListener[e.method];n&&n(e.adError)}},N.onShowCompleteNTF=function(e){var n=this.appOpenAdListener;n&&n.onShowAdComplete&&n.onShowAdComplete(e.unitId)},N.onPaidEvent=function(e){var n=this.appOpenAdListener;n&&n.onPaidEvent&&n.onPaidEvent(e)},t(i,[{key:"appOpenAdListener",get:function(){return this._appOpenAdListener},set:function(e){this._appOpenAdListener&&(p.off(a.getClassName(u),this.onAppOpenAdLoadCallbackNTF,this),p.off(a.getClassName(O),this.onPaidEvent,this),p.off(a.getClassName(C),this.onFullScreenContentCallbackNTF,this),p.off(a.getClassName(f),this.onShowCompleteNTF,this)),this._appOpenAdListener=e,e&&(p.on(a.getClassName(u),this.onAppOpenAdLoadCallbackNTF,this),p.on(a.getClassName(O),this.onPaidEvent,this),p.on(a.getClassName(C),this.onFullScreenContentCallbackNTF,this),p.on(a.getClassName(f),this.onShowCompleteNTF,this))}}]),i}(N));i._RF.pop()}}}));

System.register("chunks:///_virtual/AppOpenAdFullScreenContentCallback.ts",["cc"],(function(){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"a57d6Vr4nlN9pl61y73AbVj","AppOpenAdFullScreenContentCallback",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/AppOpenAdListener.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"515ea1S85lFFpJR2p7bWBrP","AppOpenAdListener",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/AppOpenAdLoadCallback.ts",["cc"],(function(){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"22adflecGJOkqbjch9VPNzC","AppOpenAdLoadCallback",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/ArenaInvitePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Global.ts","./Popup.ts","./SDK.ts","./ToastUI.ts","./StringUtils.ts","./l10n-manager.ts"],(function(n){var t,e,i,r,o,a,u,l,s,c,p,f,d,v,h,b,y,I,k,L;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,r=n.assertThisInitialized,o=n.asyncToGenerator,a=n.regeneratorRuntime},function(n){u=n.cclegacy,l=n._decorator,s=n.Button,c=n.Label,p=n.EditBox,f=n.Node,d=n.sys,v=n.UITransform},null,function(n){h=n.default},function(n){b=n.Popup},function(n){y=n.default},function(n){I=n.ToastUI},function(n){k=n.StringUtils},function(n){L=n.default}],execute:function(){var g,m,_,w,C,B,x,U,z,E,P,T,A,D,S,K,R;u._RF.push({},"37033f9eHBD0IWSw3rOHylA","ArenaInvitePopup",void 0);var H=l.ccclass,M=l.property;n("ArenaInvitePopup",(g=H("ArenaInvitePopup"),m=M(s),_=M(c),w=M(p),C=M(s),B=M(s),x=M(f),U=M(f),g((P=t((E=function(n){function t(){for(var t,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o))||this,i(t,"copyLinkButton",P,r(t)),i(t,"linkLabel",T,r(t)),i(t,"pairCodeEditBox",A,r(t)),i(t,"pairButton",D,r(t)),i(t,"sendInviteButton",S,r(t)),i(t,"copyLinkUI",K,r(t)),i(t,"sendLinkUI",R,r(t)),t._link="",t._pairCode="",t._room=null,t}e(t,n);var u=t.prototype;return u.onLoad=function(){var t=this;if(n.prototype.onLoad.call(this),this.copyLinkUI.active=!(y.isZMPEnable||d.isNative&&d.os===d.OS.ANDROID),this.sendLinkUI.active=!this.copyLinkUI.active,this.copyLinkButton.node.on(s.EventType.CLICK,o(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,navigator.clipboard.writeText(t._link);case 2:I.Instance.show(L.t("copy-invite-link"));case 3:case"end":return n.stop()}}),n)})))),this.pairButton.node.on(s.EventType.CLICK,(function(){var n;null==(n=t._room)||n.send(3,t.pairCodeEditBox.string.trim())})),this.sendInviteButton.node.on(s.EventType.CLICK,o(a().mark((function n(){var e;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!y.isZMPEnable){n.next=4;break}return e=h.userInfo.name+" mời bạn cùng chơi Đấu Trường",n.next=4,y.sendInvite({pairCode:t._pairCode},e);case 4:case"end":return n.stop()}}),n)})))),!this.copyLinkUI.active){var e=this.container.getComponent(v);e.setContentSize(e.width,350)}},u._init=function(){var n=o(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.getInviteLink({pairCode:this._pairCode});case 2:this._link=n.sent,this.linkLabel.string=k.truncate(this._link,33);case 4:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),u.onEnable=function(){if(null!=this._data){var n=this._data,t=n.room,e=n.pairCode;null!=t&&(this._room=t,this._pairCode=e,this._init())}},t}(b)).prototype,"copyLinkButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(E.prototype,"linkLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(E.prototype,"pairCodeEditBox",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(E.prototype,"pairButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(E.prototype,"sendInviteButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(E.prototype,"copyLinkUI",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(E.prototype,"sendLinkUI",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=E))||z));u._RF.pop()}}}));

System.register("chunks:///_virtual/ArenaLeaderboard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Global.ts","./ListView.ts","./LeaderboardItem.ts","./Networking.ts","./PopupManager.ts","./StringUtils.ts","./l10n-manager.ts"],(function(e){var t,i,n,r,a,o,l,u,s,c,d,f,p,b,m,h,L,g,v,w,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){l=e.cclegacy,u=e._decorator,s=e.Prefab,c=e.Node,d=e.Label,f=e.Button,p=e.Component,b=e.macro},null,function(e){m=e.default},function(e){h=e.ListViewCtrl},function(e){L=e.LeaderboardItem},function(e){g=e.default},function(e){v=e.default},function(e){w=e.StringUtils},function(e){y=e.default}],execute:function(){var I,_,T,z,A,P,D,R,V,B,k,C,E,x,U,F,G;l._RF.push({},"33a8eoLVr1No4U5cKiB4Hol","ArenaLeaderboard",void 0);var M=u.ccclass,N=u.property;e("ArenaLeaderboard",(I=M("ArenaLeaderboard"),_=N(s),T=N(h),z=N(L),A=N(c),P=N(d),D=N(f),R=N(d),I((k=t((B=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"listItemPrefab",k,r(t)),n(t,"listView",C,r(t)),n(t,"myLeaderboardItem",E,r(t)),n(t,"loadingIndicator",x,r(t)),n(t,"timerLabel",U,r(t)),n(t,"helpButton",F,r(t)),n(t,"timerTitleLabel",G,r(t)),t._timeLeft=0,t}i(t,e);var l=t.prototype;return l.onLoad=function(){this._fetchLeaderboard(),this.helpButton.node.on(f.EventType.CLICK,(function(){v.Instance.open("ArenaRewardInfoPopup")}))},l._fetchLeaderboard=function(){var e=a(o().mark((function e(){var t,i,n,r,a,l,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loadingIndicator.active=!0,e.next=4,g.getArenaLeaderboardInfo();case 4:t=e.sent,this.loadingIndicator.active=!1,i=t.ranking,n=void 0===i?[]:i,r=t.resetTime,a=void 0===r?0:r,l=t.rewardTime,u=void 0===l?0:l,null!=(s=t.me)&&this.myLeaderboardItem.setData(s),this.listView.init({template:this.listItemPrefab,listData:n}),c=u>0,this.timerTitleLabel.string=y.t(c?"season-end-in":"new-season-start-in"),this._timeLeft=Math.ceil((c?u:a)/1e3),this._updateTimer(),this.schedule(this._countDown,1,b.REPEAT_FOREVER),m.setIsArenaGoing(c),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0);case 20:return e.prev=20,this.loadingIndicator.active=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[0,17,20,23]])})));return function(){return e.apply(this,arguments)}}(),l._countDown=function(){this._timeLeft-=1,this._updateTimer(),this._timeLeft<0&&this.unschedule(this._countDown)},l._updateTimer=function(){var e=this._timeLeft>0;this.timerLabel.node.parent.active=e,e&&(this.timerLabel.string=w.formatTime(this._timeLeft,!0).toUpperCase())},t}(p)).prototype,"listItemPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(B.prototype,"listView",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(B.prototype,"myLeaderboardItem",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(B.prototype,"loadingIndicator",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(B.prototype,"timerLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(B.prototype,"helpButton",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(B.prototype,"timerTitleLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=B))||V));l._RF.pop()}}}));

System.register("chunks:///_virtual/ArenaPreparingRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mobx.cjs.development.mjs_cjs=&original=.js","./l10n.ts","./Constant.ts","./Global.ts","./SkinSelector.ts","./SceneManager.ts","./SubLoading.ts","./Networking.ts","./PopupManager.ts","./PreparingPlayer.ts","./SDK.ts","./ToastUI.ts","./GameHelper.ts","./mobx.cjs.development.js","./l10n-manager.ts"],(function(e){var n,t,i,o,r,a,s,c,u,l,p,d,h,f,m,g,b,_,v,y,S,C,k,P,w,I,L,A,x,B;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.Button,l=e.Label,p=e.Node,d=e.UITransform,h=e.Component,f=e.sys,m=e.macro,g=e.Sprite},null,null,function(e){b=e.SceneName,_=e.SKU_ITEM},function(e){v=e.default},function(e){y=e.SkinSelector},function(e){S=e.SceneManager},function(e){C=e.SubLoading},function(e){k=e.default},function(e){P=e.default},function(e){w=e.PreparingPlayer},function(e){I=e.default},function(e){L=e.ToastUI},function(e){A=e.GameHelper},function(e){x=e.default},function(e){B=e.default}],execute:function(){var D,T,E,R,M,q,G,O,j,z,N,H,U,K,V,F,X,Y,J,Q,W,Z,$;s._RF.push({},"01158I72IxEcbNK+VnsBr8G","ArenaPreparingRoom",void 0);var ee=c.ccclass,ne=c.property,te=(x.observable,x.makeObservable,x.autorun);x.reaction,e("ArenaPreparingRoom",(D=ee("ArenaPreparingRoom"),T=ne(u),E=ne(u),R=ne(w),M=ne(w),q=ne(l),G=ne(y),O=ne(l),j=ne(l),z=ne(l),N=ne(l),D((K=n((U=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,i(n,"backButton",K,o(n)),i(n,"findMatchButton",V,o(n)),i(n,"myPlayer",F,o(n)),i(n,"friendPlayer",X,o(n)),i(n,"myCodeLabel",Y,o(n)),i(n,"skinSelector",J,o(n)),i(n,"findingDetailLabel",Q,o(n)),i(n,"matchingStatusLabel",W,o(n)),i(n,"queueAmountLabel",Z,o(n)),i(n,"betXLabel",$,o(n)),n._room=null,n._finding=!1,n._consentedLeave=!1,n._ownedDice=[],n._ownedBases=[],n._choosableChars=[],n._equippingBase="",n._equippingChar="",n._equippingDice="",n._timer=3,n._disposers=[],n.diceSkinButton=null,n.baseSkinButton=null,n.colorSelector=null,n._mode="classic",n._pairCodeParam=null,n._myPairCode=null,n}t(n,e);var s=n.prototype;return s.onLoad=function(){var e=this;this._joinArenaRoom(),this.betXLabel.string=B.t("bet-x",{bet:"10K"}),this.node.on(p.EventType.TOUCH_END,(function(n){n.target.isChildOf(e.skinSelector.node)||e.skinSelector.hide()}),this,!0),this.backButton.node.on(u.EventType.CLICK,(function(){e._consentedLeave=!0,S.Instance.moveToScene(b.HOME)})),this.friendPlayer.inviteView.on(p.EventType.TOUCH_END,r(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e._checkIsArenaGoing()){n.next=3;break}return n.abrupt("return");case 3:if(!e._finding){n.next=6;break}return L.Instance.show(B.t("arena-stop-finding-match-add-friend")),n.abrupt("return");case 6:return n.next=8,P.Instance.open("ArenaInvitePopup",{room:e._room,pairCode:e._myPairCode});case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.error(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))),this.friendPlayer.kickButton.node.on(u.EventType.CLICK,(function(){e._finding?L.Instance.show(B.t("arena-stop-finding-match-remove-friend")):e._room.send(6)})),this.findMatchButton.node.on(u.EventType.CLICK,r(a().mark((function n(){var t,i,o,r,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e._checkIsArenaGoing()){n.next=3;break}return n.abrupt("return");case 3:if(!e._finding){n.next=7;break}e._room.send(1),n.next=20;break;case 7:return t=null!=e.friendPlayer.playerData,n.next=10,P.Instance.open("FindArenaMatchPopup",{only2V2:t});case 10:if(n.t0=n.sent,n.t0){n.next=13;break}n.t0=[];case 13:if(i=n.t0,o=i[0],r=void 0===o?-1:o,s=i[1],-1!==r){n.next=19;break}return n.abrupt("return");case 19:e._room.send(0,{mode:r,size:s});case 20:n.next=25;break;case 22:n.prev=22,n.t1=n.catch(0),console.error(n.t1);case 25:case"end":return n.stop()}}),n,null,[[0,22]])})))),this._ownedDice=this._getAllOwnedCategoryItems("dice"),this._ownedBases=this._getAllOwnedCategoryItems("bases"),this._choosableChars=this._getAllOwnedCategoryItems("characters"),this._equippingDice=v.userInfo.equippingDice,this._equippingBase=v.userInfo.equippingBase,this._equippingChar=v.userInfo.equippingChar;var n=this.myPlayer;n.setUIViewEnable(!0),this.colorSelector=n.colorSelector,this.colorSelector.setChangeColorCb((function(){e._changeColorCb()})),this._changeColorCb(),this.diceSkinButton=n.diceSkinButton,this.diceSkinButton.node.on(u.EventType.CLICK,(function(){e._setSkinSelectorToNodePosition(e.diceSkinButton.node),e.skinSelector.setData(e._ownedDice,e._equippingDice)})),this.baseSkinButton=n.baseSkinButton,this.baseSkinButton.node.on(u.EventType.CLICK,(function(){e._setSkinSelectorToNodePosition(e.baseSkinButton.node),e.skinSelector.setData(e._ownedBases,e._equippingBase)})),n.charSkinAnchor.on(p.EventType.TOUCH_END,(function(){e._setSkinSelectorToNodePosition(n.charSkinAnchor,50),e.skinSelector.setData(e._choosableChars,e._equippingChar)})),this.skinSelector.setChangeSkinCb((function(n){e._room.send(5,n)}))},s.start=function(){this.myPlayer.setUIViewEnable(!0)},s._joinArenaRoom=function(){var e=r(a().mark((function e(){var n,t,i,o,r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.joinArenaPreparingRoom();case 3:return n=e.sent,t=n.seatReservation,e.next=7,k.client.consumeSeatReservation(t);case 7:this._room=e.sent,this._pairCodeParam&&(this._room.send(3,this._pairCodeParam.trim()),this._pairCodeParam=null),e.next=18;break;case 11:return e.prev=11,e.t0=e.catch(0),console.error(e.t0),e.next=16,S.Instance.moveToScene(b.HOME);case 16:return A.showErrorAlert(e.t0.code),e.abrupt("return");case 18:this._room.onMessage("*",(function(e,n){2===e?r._joinGameRoom(n):4===e&&r._processRespMe(n)})),this._room.onLeave((function(){r._consentedLeave||S.Instance.moveToScene(b.HOME)})),i=this._room.state.listen("queueCount",(function(e){r.queueAmountLabel.string=""+e})),o=te((function(){r.queueAmountLabel.node.parent.active=v.arenaIsGoing})),this._disposers.push(i,o);case 23:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),s._processRespMe=function(e){try{var n=e.command;if(null==n)return;if(0===n){var t=e.status,i=e.mode,o=void 0===i?0:i,r=e.size,a=void 0===r?0:r;this._finding="start-finding-match"===t,this.findingDetailLabel.node.active=this._finding,this.matchingStatusLabel.node.parent.active=this._finding,this.findMatchButton.getComponentInChildren(l).string=this._finding?"Stop":"Find match";var s=0===a?"1V1":"2V2";this.findingDetailLabel.string=B.t(0===o?"classic":"sweety")+" - "+s}else if(1===n){var c=e.me,u=e.friend,p=e.pairCode;this._setPlayerData(this.myPlayer,c),this._setPlayerData(this.friendPlayer,u),c&&c.arenaPoint&&this.myPlayer.setArenaScore(c.arenaPoint),u&&u.arenaPoint&&this.friendPlayer.setArenaScore(u.arenaPoint),p&&(this._myPairCode=p,this.myCodeLabel.string=B.t("pair-code",{code:p}),I.showInviteButton({pairCode:this._myPairCode})),null==u||A.isEmptyObject(u)||P.Instance.closePopup("ArenaInvitePopup")}else if(2===n){var d=e.status;"not-enough-arena-coins"===d?A.showAlert({message:B.t(d),okCb:function(){P.Instance.open("RewardAdPopup")},okText:B.t("watch-ad"),showCancel:!0}):A.showAlert({message:B.t(d)})}}catch(e){console.error(e)}},s._setPlayerData=function(e,n){if(null!=n){e.setData({player:n,isHost:e===this.myPlayer},!0,!0);var t=n.equippingChar,i=void 0===t?null:t,o=n.equippingBase,r=void 0===o?null:o,a=n.equippingDice,s=void 0===a?null:a;e.setBaseSkin(r),e.setCharSkin(i),e.setDiceSkin(s)}},s._joinGameRoom=function(){var e=r(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.client.consumeSeatReservation(n);case 2:k.gameRoom=e.sent,f.localStorage.setItem("reconnectionToken",k.gameRoom.reconnectionToken),this._mode="ClassicModeRoom"===(null==n||null==(t=n.room)?void 0:t.name)?"classic":"sweety",this._updateStartGameLabel(),this.schedule(this._countDownStartGame,1,m.REPEAT_FOREVER),this.findMatchButton.interactable=!1,this.findMatchButton.getComponent(g).grayscale=!0,this.backButton.interactable=!1;case 10:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),s._countDownStartGame=function(){var e=r(a().mark((function e(){var n,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._timer-=1,this._updateStartGameLabel(),!(this._timer<=0)){e.next=21;break}return this.unschedule(this._countDownStartGame),n="classic"===this._mode,C.Instance.setBg(n?0:1),C.Instance.showFull(0),C.Instance.updateLoadingText(B.t("loading-desc-1")),this._consentedLeave=!0,e.prev=9,e.next=12,A.loadAllRequireGameplayAsset(k.gameRoom.state,this._mode,(function(e){C.Instance.showFull(e)})).catch((function(e){console.error(e)}));case 12:C.Instance.updateLoadingText(B.t("loading-desc-2")),t=n?b.GAMEPLAY_CLASSIC:b.GAMEPLAY_SUPER,S.Instance.moveToScene(t).then((function(){C.Instance.updateLoadingText(B.t("loading-desc-3"))})),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(9),console.error(e.t0),S.Instance.moveToScene(b.HOME);case 21:case"end":return e.stop()}}),e,this,[[9,17]])})));return function(){return e.apply(this,arguments)}}(),s._updateStartGameLabel=function(){this.matchingStatusLabel.string=B.t("start-in",{sec:this._timer.toString()}),this.matchingStatusLabel.node.parent.children[1].active=!1},s.onDestroy=function(){var e;null==(e=this._room)||e.leave(),this._disposers.forEach((function(e){e()})),I.hideInviteButton()},s._getAllOwnedCategoryItems=function(e){return v.userInfo.inventoryItems.filter((function(n){return n.sku.includes(e+".")&&(n.owned||n.isTrial||n.expireDate&&new Date(n.expireDate).getTime()>=Date.now())})).map((function(e){return e.sku})).sort((function(e,n){var t=Object.values(_);return t.indexOf(e)-t.indexOf(n)}))},s._changeColorCb=function(){var e=this.colorSelector.choosingColorIdx;this.myPlayer.setColor(e),this.friendPlayer.setColor((e+2)%4)},s._setSkinSelectorToNodePosition=function(e,n){void 0===n&&(n=10);var t=this.skinSelector.node.parent.getComponent(d).convertToNodeSpaceAR(e.worldPosition);t.y+=n,this.skinSelector.node.setPosition(t)},s._checkIsArenaGoing=function(){return!!v.arenaIsGoing||(L.Instance.show(B.t("arena-is-not-going")),!1)},s.setPairCodeParam=function(e){this._pairCodeParam=e},n}(h)).prototype,"backButton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(U.prototype,"findMatchButton",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(U.prototype,"myPlayer",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(U.prototype,"friendPlayer",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(U.prototype,"myCodeLabel",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=n(U.prototype,"skinSelector",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=n(U.prototype,"findingDetailLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(U.prototype,"matchingStatusLabel",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=n(U.prototype,"queueAmountLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=n(U.prototype,"betXLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=U))||H));s._RF.pop()}}}));

System.register("chunks:///_virtual/ArenaRewardInfoPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./RewardInfoTable.ts","./Global.ts","./Networking.ts","./Popup.ts","./l10n-manager.ts"],(function(t){var n,e,r,a,o,i,u,c,s,l,f,p,b,d,h,w,C,g,T;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){u=t.cclegacy,c=t._decorator,s=t.Node,l=t.Label,f=t.RichText,p=t.Button,b=t.Sprite,d=t.Color},null,function(t){h=t.RewardInfoTable},function(t){w=t.default},function(t){C=t.default},function(t){g=t.Popup},function(t){T=t.default}],execute:function(){var y,I,v,R,m,_,x,L,P;u._RF.push({},"f714duwXLxNsbUkLO6yGOoS","ArenaRewardInfoPopup",void 0);var A=c.ccclass,D=c.property;t("ArenaRewardInfoPopup",(y=A("ArenaRewardInfoPopup"),I=D([s]),v=D([s]),R=D(h),y((x=n((_=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,r(n,"tabs",x,a(n)),r(n,"tabContents",L,a(n)),r(n,"rewardTable",P,a(n)),n._curTabIdx=0,n}e(n,t);var u=n.prototype;return u.onLoad=function(){var n=this;t.prototype.onLoad.call(this),[].concat(this.tabContents[0].getComponentsInChildren(l),this.tabContents[0].getComponentsInChildren(f)).forEach((function(t){t.string=T.t("arena-rule-"+t.node.name)})),this.tabs.forEach((function(t,e){t.on(p.EventType.CLICK,(function(){n._curTabIdx!==e&&(n._curTabIdx=e,n._updateTabContents())}))})),this._updateTabContents(),this.fetctData()},u._updateTabContents=function(){var t=this;this.tabs.forEach((function(n,e){n.getComponent(b).color=(new d).fromHEX(t._curTabIdx===e?"#F7D2A8":"#BB9063"),t.tabContents[e].active=t._curTabIdx===e}))},u.fetctData=function(){var t=o(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=w.arenaRewardConfig){t.next=4;break}return t.next=3,C.getArenaConfig();case 3:w.arenaRewardConfig=t.sent;case 4:this.rewardTable.setData(w.arenaRewardConfig);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n}(g)).prototype,"tabs",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=n(_.prototype,"tabContents",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=n(_.prototype,"rewardTable",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=_))||m));u._RF.pop()}}}));

System.register("chunks:///_virtual/AskUsePortalPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Global.ts","./l10n-manager.ts"],(function(t){var e,n,i,o,r,a,l,c,s,u,h,p,f,g,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,c=t.Prefab,s=t.Button,u=t.Label,h=t.instantiate,p=t.UITransform,f=t.Component},null,function(t){g=t.default},function(t){b=t.default}],execute:function(){var d,P,v,y,C,m,w,L,A,k,z,B,T;r._RF.push({},"15d1cDfGPVJzYiT7UL5qx4X","AskUsePortalPopup",void 0);var _=a.ccclass,U=a.property;t("AskUsePortalPopup",(d=_("AskUsePortalPopup"),P=U(l),v=U(c),y=U(s),C=U(s),m=U(u),d((A=e((L=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"highlightContainer",A,o(e)),i(e,"arrowPrefab",k,o(e)),i(e,"acceptButton",z,o(e)),i(e,"declineButton",B,o(e)),i(e,"costLabel",T,o(e)),e._callback=void 0,e}n(e,t);var r=e.prototype;return r.show=function(t,e,n){var i=this;this._callback=t,this.node.active=!0;var o=e.map((function(t){var e=h(t);return e.setParent(i.highlightContainer),e.setPosition(i.highlightContainer.getComponent(p).convertToNodeSpaceAR(t.worldPosition)),e})),r=h(n);r.setParent(this.highlightContainer),r.setPosition(this.highlightContainer.getComponent(p).convertToNodeSpaceAR(n.worldPosition)),n.active=!0;var a=h(this.arrowPrefab),l=o[1].position;a.setParent(this.highlightContainer),a.setPosition(l.x,l.y+50,0)},r.onLoad=function(){var t=this,e=function(e){t._callback(e),t.hide()};this.acceptButton.node.on(s.EventType.CLICK,(function(){e(!0)})),this.declineButton.node.on(s.EventType.CLICK,(function(){e(!1)})),this.costLabel.string=b.t("cost-x",{cost:Math.abs(g.getManaDelta("PORTAL")).toString()})},r.hide=function(){this.highlightContainer.destroyAllChildren(),this.node.active=!1},e}(f)).prototype,"highlightContainer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(L.prototype,"arrowPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(L.prototype,"acceptButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(L.prototype,"declineButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(L.prototype,"costLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=L))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./LoaderManager.ts"],(function(i){var s,t,u,o,n,c,e,a,d,r,l,h;return{setters:[function(i){s=i.createClass},function(i){t=i.cclegacy,u=i.sys,o=i.AudioClip,n=i.Tween,c=i.tween,e=i.resources,a=i.AudioSource,d=i.director,r=i.Scheduler},function(i){l=i.MUSIC},function(i){h=i.LoaderManager}],execute:function(){t._RF.push({},"f75ddMvGvZHwYQByA3oCB44","AudioManager",void 0),i("AudioManager",function(){function i(){this._musicdAudioSrc=null,this._sfxdAudioSrc=null,this._isMusicOn=!0,this._isSfxOn=!0,this._scheduler=null,this._musicIdx=0,this._musicList=[],this._isPlayingMusicList=!1,this.id=void 0,this.uuid=void 0,this._playingSoundMap=new Map,this._audioSrcPool=[];var i=u.localStorage.getItem("music")||"1";this._isMusicOn="1"===i;var s=u.localStorage.getItem("sound")||"1";this._isSfxOn="1"===s,this.uuid="audio-manager",this.id=this.uuid,this._scheduler=d.getScheduler(),r.enableForTarget(this)}var t=i.prototype;return t.toggleMusic=function(){this._isMusicOn=!this._isMusicOn,this._musicdAudioSrc.volume=this.curMusicVol,u.localStorage.setItem("music",this._isMusicOn?"1":"0")},t.toggleSound=function(){this._isSfxOn=!this._isSfxOn,this._sfxdAudioSrc.volume=this.curSfxVol,u.localStorage.setItem("sound",this._isSfxOn?"1":"0")},t.initAudioSrcs=function(i,s){this._musicdAudioSrc=i,this._sfxdAudioSrc=s,this._musicdAudioSrc.volume=this.curMusicVol,this._sfxdAudioSrc.volume=this.curSfxVol},t.isSoundOn=function(){return this._isSfxOn},t.isMusicOn=function(){return this._isMusicOn},t.playSound=function(i){var s=this;h.Instance.loadAsset("audio/sound/"+i,o).then((function(i){s._sfxdAudioSrc.playOneShot(i)}))},t.playMusicGameplay=function(i){this._isPlayingMusicList||(this._isPlayingMusicList=!0,this._musicIdx=0,this._musicList=i,this._playCurMusicIdx())},t._playCurMusicIdx=function(){var i=this;this.playMusic(this._musicList[this._musicIdx]),n.stopAllByTarget(this._musicdAudioSrc),c(this._musicdAudioSrc).set({volume:0}).to(1,{volume:this.curMusicVol}).delay(300).to(1,{volume:0}).call((function(){i.stopMusic(),i._musicIdx=(i._musicIdx+1)%i._musicList.length,i._playCurMusicIdx()})).start()},t.preloadGameplayMusic=function(){var i=Object.values(l).map((function(i){return"audio/music/"+i}));e.preload(i,o)},t.mute=function(){this._musicdAudioSrc.volume=0,this._sfxdAudioSrc.getComponents(a).forEach((function(i){i.volume=0}))},t.unMute=function(){var i=this;this._musicdAudioSrc.volume=this.curMusicVol,this._sfxdAudioSrc.getComponents(a).forEach((function(s){s.volume=i.curSfxVol}))},t.stopMusicGameplay=function(){this._isPlayingMusicList=!1,this.stopMusic(),n.stopAllByTarget(this._musicdAudioSrc)},t.playSoundLoop=function(i){var s=this;if(!this._playingSoundMap.has(i)){var t=this._getSpareAudioSrc();this._playingSoundMap.set(i,t),h.Instance.loadAsset("audio/sound/"+i,o).then((function(u){s._playingSoundMap.has(i)&&(t.clip=u,t.loop=!0,t.play())}))}},t.stopSoundLoop=function(i){if(this._playingSoundMap.has(i)){var s=this._playingSoundMap.get(i);s.stop(),s.clip=null,this._playingSoundMap.delete(i)}},t.playMusic=function(i){var s,t=this;(null==(s=this._musicdAudioSrc.clip)?void 0:s.name)!==i&&(this.stopMusic(),h.Instance.loadAsset("audio/music/"+i,o).then((function(i){t._musicdAudioSrc.clip=i,t._musicdAudioSrc.loop=!0,t._musicdAudioSrc.play()})))},t.stopMusic=function(){this._musicdAudioSrc.stop(),this._musicdAudioSrc.clip=null},t.playSoundClip=function(i){this._sfxdAudioSrc.playOneShot(i)},t._getSpareAudioSrc=function(){for(var i=this._audioSrcPool.length-1;i>=0;i--)if(!this._audioSrcPool[i].playing)return this._audioSrcPool[i];var s=this._sfxdAudioSrc.addComponent(a);return this._audioSrcPool.push(s),s},s(i,[{key:"curMusicVol",get:function(){return this._isMusicOn?.5:0}},{key:"curSfxVol",get:function(){return this._isSfxOn?1:0}}],[{key:"Instance",get:function(){return null==this._instance&&(this._instance=new i),this._instance}}]),i}())._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/auto-config-intl-manager.ts",["cc","./l10n-manager.ts","./env"],(function(){var t,n,e,a;return{setters:[function(e){t=e.cclegacy,n=e.game},function(t){e=t.default},function(t){a=t.EDITOR}],execute:async function(){t._RF.push({},"2f21bx4gAFNj6dct9qDHJHH","auto-config-intl-manager",void 0),t.GAME_VIEW||a?await e.createIntl({}):n.onPostProjectInitDelegate.add((function(){return e.createIntl({})})),t._RF.pop()}}}));

System.register("chunks:///_virtual/Axios.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"431b0tMRMNEQYrP2wFSCjig","Axios",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/BannerAd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Base.ts"],(function(n){var r,t,e,o;return{setters:[function(n){r=n.inheritsLoose},function(n){t=n.cclegacy,e=n._decorator},function(n){o=n.Base}],execute:function(){var a,i,c,u,s,l,h;t._RF.push({},"a3850FFnhpK8LXjWJ/XukPq","BannerAd",void 0);var f=e.ccclass;e.property,n("LoadBannerREQ",f("LoadBannerREQ")(a=function(n){function t(){for(var r,t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return(r=n.call.apply(n,[this].concat(e))||this).bannerSizeType=void 0,r.bannerSize=void 0,r.alignments=void 0,r}return r(t,n),t}(o))||a),n("LoadBannerACK",f("LoadBannerACK")(i=function(n){function t(){return n.apply(this,arguments)||this}return r(t,n),t}(o))||i),n("ShowBannerREQ",f("ShowBannerREQ")(c=function(n){function t(){for(var r,t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return(r=n.call.apply(n,[this].concat(e))||this).visible=void 0,r}return r(t,n),t}(o))||c),n("ShowBannerACK",f("ShowBannerACK")(u=function(n){function t(){for(var r,t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return(r=n.call.apply(n,[this].concat(e))||this).visible=void 0,r}return r(t,n),t}(o))||u),n("DestroyBannerREQ",f("DestroyBannerREQ")(s=function(n){function t(){return n.apply(this,arguments)||this}return r(t,n),t}(o))||s),n("DestroyBannerACK",f("DestroyBannerACK")(l=function(n){function t(){return n.apply(this,arguments)||this}return r(t,n),t}(o))||l),n("BannerAdListenerNTF",f("BannerAdListenerNTF")(h=function(n){function t(){for(var r,t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return(r=n.call.apply(n,[this].concat(e))||this).method=void 0,r.loadAdError=void 0,r}return r(t,n),t}(o))||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/BannerAdListener.ts",["cc"],(function(){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"94014wU+XZGi4mP2AihKg4J","BannerAdListener",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/BannerAlignment.ts",["cc"],(function(T){var n;return{setters:[function(T){n=T.cclegacy}],execute:function(){n._RF.push({},"22c7dg+reFL/bvh46PA4/ED","BannerAlignment",void 0);var A=T("BannerAlignment",function(T){return T.ALIGN_LEFT="ALIGN_LEFT",T.ALIGN_TOP="ALIGN_TOP",T.ALIGN_RIGHT="ALIGN_RIGHT",T.ALIGN_BOTTOM="ALIGN_BOTTOM",T.CENTER_HORIZONTAL="CENTER_HORIZONTAL",T.CENTER_VERTICAL="CENTER_VERTICAL",T.ALIGN_PARENT_BOTTOM="ALIGN_PARENT_BOTTOM",T}({}));T("BottomCenter",[A.ALIGN_PARENT_BOTTOM,A.CENTER_HORIZONTAL]),T("TopCenter",[A.ALIGN_TOP,A.CENTER_HORIZONTAL]);n._RF.pop()}}}));

System.register("chunks:///_virtual/BannerClient.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdClient.ts","./BannerAd.ts","./Bridge.ts","./Route.ts","./BannerSize.ts","./BannerAlignment.ts","./PaidEventNTF.ts","./BannerSizeType.ts"],(function(n){var e,t,i,s,a,r,o,l,u,d,c,f,h,v,g,B,C,L;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass},function(n){i=n.cclegacy,s=n.js,a=n.log},function(n){r=n.AdClient},function(n){o=n.ShowBannerREQ,l=n.LoadBannerREQ,u=n.LoadBannerACK,d=n.DestroyBannerREQ,c=n.DestroyBannerACK,f=n.BannerAdListenerNTF},function(n){h=n.bridge},function(n){v=n.route},function(n){g=n.BannerSize},function(n){B=n.BottomCenter},function(n){C=n.BannerPaidEventNTF},function(n){L=n.BannerSizeType}],execute:function(){i._RF.push({},"67876+xkzJIO6gfVziSiyV8","BannerClient",void 0);n("BannerClient",function(n){function i(){for(var e,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return(e=n.call.apply(n,[this].concat(i))||this)._adListener=null,e}e(i,n);var r=i.prototype;return r.show=function(n){var e=new o(this.unitId);e.visible=n,h.sendToNative(s.getClassName(o),e)},r.load=function(n,e,t){this.adListener=e,this.unitId=n,h.sendToNative(s.getClassName(l),{unitId:n,bannerSize:null!=t&&t.size?null==t?void 0:t.size:g.BANNER,alignments:null!=t&&t.alignments?null==t?void 0:t.alignments:B,bannerSizeType:null!=t&&t.type?null==t?void 0:t.type:L.Builtin},s.getClassName(u),(function(n){}),this)},r.destroy=function(){a("[BannerClient]","destroy",this.unitId);var n=new d(this.unitId);this.adListener=null,h.sendToNative(s.getClassName(d),n,s.getClassName(c),(function(n){}))},r.onAdListenerEvent=function(n){if(this.adListener){var e=this.adListener[n.method];e&&"function"==typeof e&&e(n.loadAdError)}},r.onPaidEvent=function(n){var e=this.adListener;e&&e.onPaidEvent&&e.onPaidEvent(n)},t(i,[{key:"adListener",get:function(){return this._adListener},set:function(n){this._adListener&&(v.off(s.getClassName(f),this.onAdListenerEvent,this),v.off(s.getClassName(C),this.onPaidEvent,this)),this._adListener=n,this._adListener&&(v.on(s.getClassName(f),this.onAdListenerEvent,this),v.on(s.getClassName(C),this.onPaidEvent,this))}}]),i}(r));i._RF.pop()}}}));

System.register("chunks:///_virtual/BannerSize.ts",["cc"],(function(E){var R;return{setters:[function(E){R=E.cclegacy}],execute:function(){R._RF.push({},"e3b6eOKvZVEtZgTOUkZOxTU","BannerSize",void 0);E("BannerSize",function(E){return E.BANNER="BANNER",E.LARGE_BANNER="LARGE_BANNER",E.MEDIUM_RECTANGLE="MEDIUM_RECTANGLE",E.FULL_BANNER="FULL_BANNER",E.LEADERBOARD="LEADERBOARD",E.SMART_BANNER="SMART_BANNER",E}({}));R._RF.pop()}}}));

System.register("chunks:///_virtual/BannerSizeOption.ts",["cc","./BannerAlignment.ts","./BannerSize.ts","./BannerSizeType.ts"],(function(n){var e,t,i,r;return{setters:[function(n){e=n.cclegacy},function(n){t=n.BottomCenter},function(n){i=n.BannerSize},function(n){r=n.BannerSizeType}],execute:function(){e._RF.push({},"5616bT5rtJEcY/73XVD9E9f","BannerSizeOption",void 0);n("BannerSizeOption",(function(){this.type=r.Builtin,this.size=i.BANNER,this.alignments=t}));e._RF.pop()}}}));

System.register("chunks:///_virtual/BannerSizeType.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"79ab0Av5oNO2r9VQTvixCOn","BannerSizeType",void 0);e("BannerSizeType",function(e){return e.Builtin="Builtin",e.Landscape="Landscape",e.Portrait="Portrait",e.Current="Current",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/Base.ts",["cc"],(function(e){var c,t;return{setters:[function(e){c=e.cclegacy,t=e._decorator}],execute:function(){var r;c._RF.push({},"83981cFerZAEJC1MboCagJY","Base",void 0);var s=t.ccclass;t.property,e("Base",s("Base")(r=function(e){this.unitId=e})||r);c._RF.pop()}}}));

System.register("chunks:///_virtual/BaseCellContainer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n,t,i,a,o,l,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Node,c=e.Component}],execute:function(){var s,u,p,f,C;a._RF.push({},"66abaB0E0dNaIdkKK42Rn17","BaseCellContainer",void 0);var d=o.ccclass,y=o.property;e("BaseCellContainer",(s=d("BaseCellContainer"),u=y([l]),s((C=r((f=function(e){function r(){for(var r,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,t(r,"cells",C,i(r)),r}return n(r,e),r}(c)).prototype,"cells",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=f))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/BaseSkin.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,o,a,s,c,l,p,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.SpriteFrame,c=e.Sprite,l=e.Tween,p=e.Color,u=e.tween,d=e.Component}],execute:function(){var h,f,g,v,y;o._RF.push({},"6dcd36h8QFMkrKfRJKExIKI","BaseSkin",void 0);var S=a.ccclass,b=a.property;e("BaseSkin",(h=S("BaseSkin"),f=b([s]),h((y=t((v=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"paddingSfs",y,i(t)),t._obj={r:0},t}r(t,e);var o=t.prototype;return o.setColor=function(e){var t=this.getComponentInChildren(c);t&&(t.spriteFrame=this.paddingSfs[e])},o.setHighlightEnable=function(e){var t=this,r=this.getComponentInChildren(c);if(!e)return l.stopAllByTarget(this._obj),r.color=p.BLACK,void(this._obj.r=0);var n=new p(0,0,0,255),i=function(e,i){t.isValid&&(n.r=e.r,r.color=n)};u(this._obj).to(.5,{r:150},{onUpdate:i}).to(.5,{r:0},{onUpdate:i}).union().repeatForever().start()},t}(d)).prototype,"paddingSfs",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=v))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/BetCard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameHelper.ts"],(function(t){var e,r,n,i,a,l,o,u,c,s,p,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,l=t._decorator,o=t.Label,u=t.UIOpacity,c=t.Tween,s=t.tween,p=t.Component},function(t){y=t.GameHelper}],execute:function(){var b,f,h,d,m,P,g,B,v;a._RF.push({},"c127bfSsadLc7R+8CWYrTld","BetCard",void 0);var L=l.ccclass,w=l.property;t("BetCard",(b=L("BetCard"),f=w(o),h=w(o),d=w(u),b((g=e((P=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a))||this,n(e,"entryLabel",g,i(e)),n(e,"winAmountLabel",B,i(e)),n(e,"blurPanelOpacity",v,i(e)),e._entryBet=0,e}r(e,t);var a=e.prototype;return a.setData=function(t,e){this.entryLabel.string="Entry: "+y.formatCurrency(t),this._entryBet=t,this.setNumPlayerMode(e)},a.focus=function(t){void 0===t&&(t=!1),t?this.blurPanelOpacity.opacity=0:(c.stopAllByTarget(this.blurPanelOpacity),s(this.blurPanelOpacity).to(.1,{opacity:0}).start())},a.blur=function(t){void 0===t&&(t=!1),t?this.blurPanelOpacity.opacity=255:(c.stopAllByTarget(this.blurPanelOpacity),s(this.blurPanelOpacity).to(.1,{opacity:255}).start())},a.setNumPlayerMode=function(t){var e=0===t?.95*this._entryBet*2:.7*this._entryBet*4;this.winAmountLabel.string=y.formatCurrency(e)},a.start=function(){},a.update=function(t){},e}(p)).prototype,"entryLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(P.prototype,"winAmountLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(P.prototype,"blurPanelOpacity",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=P))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/BombItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./AudioManager.ts","./ThrowableItem.ts"],(function(e){var n,t,o,i,r,a,l,c,u,p,s,d,f,y,m,g;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.AudioClip,c=e.Node,u=e.UIOpacity,p=e.tween,s=e.Vec3,d=e.v3,f=e.easing},function(e){y=e.SOUND},function(e){m=e.AudioManager},function(e){g=e.ThrowableItem}],execute:function(){var b,N,v,h,I,w,x,z,C,A,S;r._RF.push({},"dc052i0zd5Ezo85epcCB0k9","BombItem",void 0);var _=a.ccclass,k=a.property;e("BombItem",(b=_("BombItem"),N=k(l),v=k(c),h=k(c),I=k(c),b((z=n((x=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,o(n,"explodeSound",z,i(n)),o(n,"flyingNode",C,i(n)),o(n,"darkNode",A,i(n)),o(n,"explosionNode",S,i(n)),n}t(n,e);var r=n.prototype;return r._startFlyingAnim=function(){m.Instance.playSound(y.THROW)},r._stopFlyingAnim=function(){this.flyingNode.active=!1},r._playContactAnim=function(){var e=this;return new Promise((function(n){m.Instance.playSoundClip(e.explodeSound);var t=e.explosionNode.getComponent(u);p(e.explosionNode).set({scale:s.ZERO,active:!0}).call((function(){t.opacity=255})).to(.3,{scale:d(1.5,1.5,1)},{easing:f.circIn}).call((function(){t.opacity=0,e.darkNode.getComponent(u).opacity=255,p(e.darkNode.getComponent(u)).set({opacity:255}).delay(2).to(.5,{opacity:0}).call((function(){n()})).start()})).start()}))},n}(g)).prototype,"explodeSound",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(x.prototype,"flyingNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(x.prototype,"darkNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(x.prototype,"explosionNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=x))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/Bridge.ts",["cc","./Version.ts","./Route.ts","./Version2.ts"],(function(e){var n,t,i,o,r,c;return{setters:[function(e){n=e.cclegacy,t=e.log,i=e.js},function(e){o=e.VersionREQ},function(e){r=e.route},function(e){c=e.ExtensionVersion}],execute:function(){n._RF.push({},"9fa2b+aj71GBKZ5Ae4Zxwy/","Bridge",void 0);var s="[Bridge]",u=e("Bridge",function(){function e(){this.onNative=function(e,n){t(s,"onNative method: "+e+" | content: "+n);var i=r.codec.decode(n);r.dispatch(e,i)}}var n=e.prototype;return n.init=function(){t(s,"init"),this.overwriteCallback();var e="cocos-"+c;return console.log(s,"init","report engineVersion: "+e+"."),this.sendToNative(i.getClassName(o),new o("",e),null,null),this},n.destroy=function(){t(s,"destroy")},n.overwriteCallback=function(){t(s,"overwriteCallback")},n.sendToNative=function(e,n,i,o,c){t(s,"sendToNative","method = "+e+", req.unitId = "+(null==n?void 0:n.unitId)),o&&r.once(i,o,c)},e}());e("bridge",(new u).init());n._RF.pop()}}}));

System.register("chunks:///_virtual/CaptureScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(e){var t,n,r,a,c,o,i,u,s,d,l;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e._decorator,o=e.sys,i=e.RenderTexture,u=e.director,s=e.Camera,d=e.Component},function(e){l=e.PREVIEW}],execute:function(){var p;a._RF.push({},"15cd0h52WFL2aEaS3oDLQma","CaptureScreen",void 0);var h=c.ccclass;c.property,e("CaptureScreen",h("CaptureScreen")(p=function(e){function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._renderTex=null,t._base64data=null,t}t(a,e);var c=a.prototype;return c.onLoad=function(){var e=this;o.isBrowser&&l&&(window.captureScreen=function(){e._captureScreen()})},c.start=function(){},c._captureScreen=function(){var e=this,t=this._renderTex=new i;t.reset({width:1920,height:1080});var a=u.getScene().getComponentInChildren(s);a.targetTexture=t,this.scheduleOnce(n(r().mark((function n(){var c,o,i,u,s,d,l,p,h,g,f,m,v;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(c=t.readPixels(),console.log("buffer",c),(o=document.createElement("canvas")).style,o.style.margin="0",o.style.padding="0",i=t.width,u=t.height,o.width=i,o.height=u,s=o.getContext("2d"),d=4*i,l=0;l<u;l++){for(p=u-1-l,h=s.createImageData(i,1),g=p*i*4,f=0;f<d;f++)h.data[f]=c[g+f];s.putImageData(h,0,l)}m=o.toDataURL("image/jpeg",.7),e._base64data=m,(v=document.createElement("a")).href=o.toDataURL("image/jpeg"),v.target="_blank",v.download="photo.jpg",document.body.appendChild(v),e.scheduleOnce((function(){var e=new MouseEvent("click");v.dispatchEvent(e),v.dispatchEvent(e),document.body.removeChild(v)}),.5),a.targetTexture=null;case 22:case"end":return n.stop()}}),n)}))),.5)},a}(d))||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/CatItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./ThrowableItem.ts"],(function(t){var n,e,a,i,o,r,c,l,u,s,p,f,y,g,m;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,c=t.AudioClip,l=t.Node,u=t.UIOpacity,s=t.tween,p=t.Sprite,f=t.easing,y=t.v3},function(t){g=t.AudioManager},function(t){m=t.ThrowableItem}],execute:function(){var d,h,b,C,I,v,w,k,A,B,_;o._RF.push({},"fabcaajOXRGJrna4c0wfCt8","CatItem",void 0);var z=r.ccclass,S=r.property;t("CatItem",(d=z("CatItem"),h=S(c),b=S(l),C=S(l),I=S(l),d((k=n((w=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return n=t.call.apply(t,[this].concat(o))||this,a(n,"catSound",k,i(n)),a(n,"flyingNode",A,i(n)),a(n,"catBack",B,i(n)),a(n,"scratch",_,i(n)),n}e(n,t);var o=n.prototype;return o.onLoad=function(){this.catBack.getComponent(u).opacity=0,this.scratch.getComponent(u).opacity=0},o._startFlyingAnim=function(){g.Instance.playSoundClip(this.catSound)},o._stopFlyingAnim=function(){this.flyingNode.active=!1},o._playContactAnim=function(){var t=this;return new Promise((function(n){t.catBack.getComponent(u).opacity=255,t.scratch.getComponent(u).opacity=255,s(t.scratch.getComponent(p)).set({fillRange:0}).delay(.25).to(1.5,{fillRange:-1},{easing:f.quartIn}).start(),s(t.catBack).set({position:y(0,30)}).delay(.25).to(1.5,{position:y(0,-32)},{easing:f.quartIn}).call((function(){s(t.catBack.getComponent(u)).set({opacity:255}).to(.5,{opacity:0},{easing:f.quartIn}).start()})).by(1,{position:y(0,-150)}).call((function(){s(t.scratch.getComponent(u)).set({opacity:255}).delay(1).to(.5,{opacity:0}).call((function(){n()})).start()})).start()}))},n}(m)).prototype,"catSound",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(w.prototype,"flyingNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(w.prototype,"catBack",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(w.prototype,"scratch",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=w))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/CellController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./AudioManager.ts"],(function(n){var o,t,e,i,r,s,l,u,a;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,e=n._decorator,i=n.tween,r=n.v3,s=n.easing,l=n.Component},function(n){u=n.SOUND},function(n){a=n.AudioManager}],execute:function(){var c;t._RF.push({},"8a4f4pfbY1IpLrDD+RWqGA9","CellController",void 0);var p=e.ccclass;e.property,n("CellController",p("CellController")(c=function(n){function t(){for(var o,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return(o=n.call.apply(n,[this].concat(e))||this)._upDownTween=null,o._originPos=r(),o}o(t,n);var e=t.prototype;return e.onLoad=function(){this.node.getPosition(this._originPos),this._upDownTween=i(this.node).set({position:this._originPos}).by(.05,{position:r(0,-6)},{easing:s.cubicOut}).by(.05,{position:r(0,6)},{easing:s.cubicIn})},e.playUpDownAnim=function(){var n;null==(n=this._upDownTween)||n.start(),a.Instance.playSound(u.MOVE)},e.start=function(){},e.update=function(n){},t}(l))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/Character.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./SimpleEventTarget.ts","./AudioManager.ts","./LoaderManager.ts","./ExplodeAnimation.ts"],(function(i){var t,e,n,a,s,l,o,r,c,h,u,d,p,f,m,k,y,_,g,A,S,I,E,b,v,P,C,x,T;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,a=i.assertThisInitialized,s=i.createClass},function(i){l=i.cclegacy,o=i._decorator,r=i.Node,c=i.Label,h=i.ParticleSystem2D,u=i.v3,d=i.misc,p=i.tween,f=i.sp,m=i.easing,k=i.UIOpacity,y=i.Vec3,_=i.Tween,g=i.Color,A=i.Prefab,S=i.instantiate,I=i.SpriteFrame,E=i.Component},function(i){b=i.LAST_INDEX,v=i.SAFE_SQUARE_INDEX},function(i){P=i.SimpleEventTarget},function(i){C=i.AudioManager},function(i){x=i.LoaderManager},function(i){T=i.ExplodeAnimation}],execute:function(){var O,w,L,D,R,B,N,F,z,H,J,M,U,V,Z,K,G;l._RF.push({},"f7240SiU6BEhZWduf+GS3e6","Character",void 0);var W=o.ccclass,X=o.property,j=["BLUE","RED","GREEN","YELLOW"];i("Character",(O=W("Character"),w=X(r),L=X(r),D=X(r),R=X(c),B=X(T),N=X(h),F=X(r),O((J=t((H=function(i){function t(){for(var t,e=arguments.length,s=new Array(e),l=0;l<e;l++)s[l]=arguments[l];return t=i.call.apply(i,[this].concat(s))||this,n(t,"charAnchor",J,a(t)),n(t,"skinAnchor",M,a(t)),n(t,"highlightCircle",U,a(t)),n(t,"stackAmountLabel",V,a(t)),n(t,"onLandAnim",Z,a(t)),n(t,"kickParticle",K,a(t)),n(t,"shieldEffect",G,a(t)),t._charRollingTween=null,t.playerIdx=-1,t.posIdx=-1,t.tokenId=0,t.colorIdx=0,t.uiIdx=0,t.shameStickerPlayed=!1,t._stackAmount=1,t._hideBySamePos=!1,t._hideByPlayerNull=!1,t._hideByFinished=!1,t._defaultJumpDur=-1,t._skinType=null,t._scaleShield=0,t.skinOriginPos=u(),t}e(t,i);var l=t.prototype;return l.canPlayShameSticker=function(){return!this.shameStickerPlayed&&(this.posIdx>=52+6*this.playerIdx&&!b.includes(this.posIdx)||v.includes(this.posIdx))},l.playOnLandAnim=function(){this.onLandAnim.play()},l.setHideBySamePos=function(i){this._hideBySamePos=i,this._updateCharEnable()},l.setHidePlayerNull=function(i){this._hideByPlayerNull=i,this._updateCharEnable()},l.setHideByFinished=function(i){this._hideByFinished=i,this._updateCharEnable()},l.showKickParticles=function(){var i=this;null!=this._skinType&&C.Instance.playSound("characters/"+this._skinType),this.unschedule(this._hideParticle),this.kickParticle.node.active=!0,d.callInNextTick((function(){i.isValid&&i.kickParticle.resetSystem()})),this._charRollingTween.start()},l.hideKickParticles=function(){this.kickParticle.stopSystem(),this.scheduleOnce(this._hideParticle,this.kickParticle.life+this.kickParticle.lifeVar),this._charRollingTween.stop(),this.skinAnchor.angle=0},l._hideParticle=function(){this.kickParticle.node.active=!1},l._updateCharEnable=function(){this.node.active=!(this._hideBySamePos||this._hideByFinished||this._hideByPlayerNull)},l.onLoad=function(){this._charRollingTween=p(this.skinAnchor).set({angle:0}).to(.25,{angle:360}).union().repeatForever(),this.charAnchor.getPosition(this.skinOriginPos),this._scaleShield=this.shieldEffect.scale.x,this.scheduleOnce(this._playSpecialIdleAnimation.bind(this),20*Math.random()+5)},l._playSpecialIdleAnimation=function(){var i=this.skin.getCurrent(0);i&&"Idle"===i.animation.name&&(this.skin.setAnimation(0,"Idle_Random_1",!1),this.skin.addAnimation(0,"Idle",!0)),this.scheduleOnce(this._playSpecialIdleAnimation.bind(this),20*Math.random()+5)},l._chooseToken=function(){P.emit("TOKEN_CHOOSED",this.tokenId)},l.init=function(i,t,e,n,a){var s;this.playerIdx=i,this.posIdx=t,this.tokenId=e,this.colorIdx=n,this.uiIdx=a,null==(s=this.skin)||s.setSkin(j[this.colorIdx]),t>=52+6*i&&(this.shameStickerPlayed=!0)},l.setHighlightEnable=function(i){this.highlightCircle.active=i,i?(this.node.on(r.EventType.TOUCH_END,this._chooseToken,this),this.highlightCircle.getComponent(f.Skeleton).setSkin(j[this.colorIdx])):this.node.off(r.EventType.TOUCH_END)},l.playIdle=function(){this._playAnim("Idle")},l.playReady=function(){this._playAnim("Ready")},l.playJump=function(i){void 0===i&&(i=1),this._playAnim("Jump",i,!1)},l._playAnim=function(i,t,e){var n;void 0===t&&(t=-1),void 0===e&&(e=!0),null!=(n=this.skin)&&n.node.activeInHierarchy&&(this.skin.timeScale=t>0&&this._defaultJumpDur>0?this._defaultJumpDur/t:1,this.skin.setAnimation(0,i,e))},l.showShield=function(){this.node.active?(p(this.shieldEffect).set({scale:u(4*this._scaleShield,4*this._scaleShield,1),active:!0}).to(.25,{scale:u(this._scaleShield,this._scaleShield,1)},{easing:m.cubicIn}).start(),p(this.shieldEffect.getComponent(k)).set({opacity:0}).to(.1,{opacity:255}).start()):(this.shieldEffect.active=!0,this.shieldEffect.getComponent(k).opacity=255)},l.hideShield=function(){p(this.shieldEffect).set({scale:u(this._scaleShield,this._scaleShield,1)}).to(.5,{scale:y.ZERO}).set({active:!1}).start(),p(this.shieldEffect.getComponent(k)).set({opacity:255}).to(.5,{opacity:0}).start()},l.onEnable=function(){this.playerIdx<0||this.init(this.playerIdx,this.posIdx,this.tokenId,this.colorIdx,this.uiIdx)},l.setAmount=function(i){var t=this.stackAmountLabel.node.parent;t.active=i>1,_.stopAllByTarget(t),i>1&&1===this._stackAmount&&p(t).set({scale:y.ZERO}).to(.25,{scale:y.ONE},{easing:m.backOut}).start(),1===i&&p(t).set({scale:y.ONE}).to(.25,{scale:y.ZERO},{easing:m.sineIn}).start(),this._stackAmount=i,this.stackAmountLabel.string=""+this._stackAmount},l.playShowAnim=function(){var i=this;p(this.charAnchor).to(.15,{},{onUpdate:function(t,e){i.isValid&&(i.skin.color=new g(255,255,255,255*e))}}).start(),p(this.charAnchor).set({position:u(0,20)}).to(.15,{position:y.ZERO},{easing:m.sineOut}).start()},l.initSkin=function(i){var t=this;if(null!=i){var e=i.split(".")[1];this._skinType=e,x.Instance.loadAsset("characters/anim/"+e,A).then((function(i){if(t.isValid){var e,n=S(i);t.skinAnchor.insertChild(n,0);var a=n.getComponent(f.Skeleton);a.setSkin(j[t.colorIdx]),t._defaultJumpDur=(null==(e=a.skeletonData.getRuntimeData().animations.find((function(i){return"Jump"===i.name})))?void 0:e.duration)||-1}})),x.Instance.loadAsset("characters/kick-particle-sprite/"+e+"/spriteFrame",I).then((function(i){t.isValid&&(t.kickParticle.spriteFrame=i)}))}},l.onDestroy=function(){this.unscheduleAllCallbacks()},s(t,[{key:"skin",get:function(){return this.skinAnchor.getComponentInChildren(f.Skeleton)}}]),t}(E)).prototype,"charAnchor",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(H.prototype,"skinAnchor",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(H.prototype,"highlightCircle",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(H.prototype,"stackAmountLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(H.prototype,"onLandAnim",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(H.prototype,"kickParticle",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(H.prototype,"shieldEffect",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=H))||z));l._RF.pop()}}}));

System.register("chunks:///_virtual/CircleRotating.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,o,a,s,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.CCFloat,c=t.Component}],execute:function(){var l,u,p,h,d,f,g;o._RF.push({},"63760BohPlME6IME4TcYlS0","CircleRotating",void 0);var y=a.ccclass,m=a.property;t("CircleRotating",(l=y("CircleRotating"),u=m(s),p=m(s),l((f=e((d=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"radius",f,n(e)),r(e,"speed",g,n(e)),e._time=0,e}i(e,t);var o=e.prototype;return o.start=function(){},o.update=function(t){this._time+=t;var e=-Math.cos(this._time*this.speed)*this.radius,i=Math.sin(this._time*this.speed)*this.radius;this.node.setPosition(e,i)},e}(c)).prototype,"radius",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),g=e(d.prototype,"speed",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),h=d))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/ClassicModeGameplay.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./CellController.ts","./Character.ts","./DetailUserInfo.ts","./EmoCloud.ts","./Constant.ts","./SimpleEventTarget.ts","./FinalRankingPopup.ts","./BaseCellContainer.ts","./DiceRoller.ts","./FirstMoveAnimationScreen.ts","./SlotController.ts","./StickerChatPopup.ts","./ThrowableItem.ts","./YouAreHereIndicator.ts","./YourTurnText.ts","./Global.ts","./AudioManager.ts","./LoaderManager.ts","./SceneManager.ts","./SubLoading.ts","./Networking.ts","./PopupManager.ts","./SDK.ts","./ToastUI.ts","./ExplodeAnimation.ts","./GameHelper.ts","./RoomLocalController.ts","./RoomNetworkControllerRefactor.ts","./SmallFlags.ts","./UserPanel.ts","./l10n-manager.ts"],(function(t){var e,n,o,r,i,a,l,s,c,u,d,h,f,p,m,_,g,C,y,I,v,b,P,S,T,x,A,k,E,R,w,O,N,L,B,F,M,H,U,D,z,G,q,K,V,Y,W,J,X,Q,Z,j,$,tt,et,nt,ot,rt,it,at,lt,st,ct,ut,dt,ht,ft,pt,mt;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.createClass,a=t.asyncToGenerator,l=t.regeneratorRuntime},function(t){s=t.cclegacy,c=t._decorator,u=t.Node,d=t.Prefab,h=t.Button,f=t.ParticleSystem2D,p=t.v3,m=t.Tween,_=t.tween,g=t.Vec3,C=t.easing,y=t.UITransform,I=t.instantiate,v=t.Widget,b=t.Sprite,P=t.SpriteFrame,S=t.Label,T=t.Color,x=t.game,A=t.Game,k=t.sys,E=t.Component,R=t.resources},null,function(t){w=t.CellController},function(t){O=t.Character},function(t){N=t.DetailUserInfo},function(t){L=t.EmoCloud},function(t){B=t.MUSIC,F=t.SOUND,M=t.LAST_INDEX,H=t.SAFE_SQUARE_INDEX,U=t.START_INDEX,D=t.SKU_ITEM,z=t.MULTI_TOKEN_POS,G=t.SceneName,q=t.THROW_TYPE},function(t){K=t.SimpleEventTarget},function(t){V=t.FinalRankingPopup},function(t){Y=t.BaseCellContainer},function(t){W=t.DiceRoller},function(t){J=t.FirstMoveAnimationScreen},function(t){X=t.SlotController},function(t){Q=t.StickerChatPopup},function(t){Z=t.ThrowableItem},function(t){j=t.YouAreHereIndicator},function(t){$=t.YourTurnText},function(t){tt=t.default},function(t){et=t.AudioManager},function(t){nt=t.LoaderManager},function(t){ot=t.SceneManager},function(t){rt=t.SubLoading},function(t){it=t.default},function(t){at=t.default},function(t){lt=t.default},function(t){st=t.ToastUI},function(t){ct=t.ExplodeAnimation},function(t){ut=t.GameHelper},function(t){dt=t.RoomLocalController},function(t){ht=t.RoomNetworkControllerRefactor},function(t){ft=t.SmallFlags},function(t){pt=t.UserPanel},function(t){mt=t.default}],execute:function(){var _t,gt,Ct,yt,It,vt,bt,Pt,St,Tt,xt,At,kt,Et,Rt,wt,Ot,Nt,Lt,Bt,Ft,Mt,Ht,Ut,Dt,zt,Gt,qt,Kt,Vt,Yt,Wt,Jt,Xt,Qt,Zt,jt,$t,te,ee,ne,oe,re,ie,ae,le,se,ce,ue,de,he,fe,pe;s._RF.push({},"5fc7e1Y4JpDQI/dTHRzgDbv","ClassicModeGameplay",void 0);var me=c.ccclass,_e=c.property,ge=["1e69aa","d8434f","529c2d","eca83c"];t("ClassicModeGameplay",(_t=me("ClassicModeGameplay"),gt=_e([Y]),Ct=_e(u),yt=_e(J),It=_e(d),vt=_e(h),bt=_e(h),Pt=_e(h),St=_e([pt]),Tt=_e(u),xt=_e(d),At=_e([ft]),kt=_e(u),Et=_e(u),Rt=_e(V),wt=_e(u),Ot=_e(j),Nt=_e(u),Lt=_e(d),Bt=_e(u),Ft=_e(f),Mt=_e(d),Ht=_e(d),Ut=_e(h),Dt=_e(Q),zt=_e($),_t((Kt=e((qt=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,o(e,"charBases",Kt,r(e)),o(e,"cellContainer",Vt,r(e)),o(e,"firstMoveScreen",Yt,r(e)),o(e,"charPrefab",Wt,r(e)),o(e,"rollButton",Jt,r(e)),o(e,"quitRoomButton",Xt,r(e)),o(e,"settingButton",Qt,r(e)),o(e,"userPanels",Zt,r(e)),o(e,"detailUserContainer",jt,r(e)),o(e,"detailUserInfoPrefab",$t,r(e)),o(e,"smallFlagContainers",te,r(e)),o(e,"diceResultAnchor",ee,r(e)),o(e,"diceRollingAnchor",ne,r(e)),o(e,"finalRankingPopup",oe,r(e)),o(e,"uiAnimLayer",re,r(e)),o(e,"youAreHereIndicator",ie,r(e)),o(e,"autoPlayScreen",ae,r(e)),o(e,"kickFogPrefab",le,r(e)),o(e,"portalGate",se,r(e)),o(e,"portalParticle",ce,r(e)),o(e,"emoCloudPrefab",ue,r(e)),o(e,"finishParticlePrefab",de,r(e)),o(e,"stickerButton",he,r(e)),o(e,"stickerChatPopup",fe,r(e)),o(e,"yourTurnText",pe,r(e)),e.bigFlagLabels=[],e._diceRollers=[],e._slotCtrls=[],e._cellNodes=[],e._baseCellContainers=[],e._myIdx=-1,e._toBeKickedTokens=[],e._centerCellPos=p(0,20),e._roomState=null,e._isLeaving=!1,e._preTurn=null,e}n(e,t);var s=e.prototype;return s.onLoad=function(){var t=a(l().mark((function t(){var e,n,o=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:et.Instance.stopMusic(),R.preloadDir("audio/sound"),this.scheduleOnce((function(){rt.Instance.hideFull()}),20),this._initBoard(),this.stickerButton.node.active=!this.isLocal,x.on(A.EVENT_SHOW,(function(){var t;o.isLocal||1!==(null==(t=o._roomState)?void 0:t.phase)||ot.Instance.moveToScene(G.GAMEPLAY_CLASSIC)})),this.node.on(u.EventType.TOUCH_END,(function(t){t.target.isChildOf(o.detailUserContainer)||o.detailUserContainer.destroyAllChildren(),t.target.isChildOf(o.stickerChatPopup.node)||o.stickerChatPopup.hide()}),this,!0),this.stickerButton.node.on(h.EventType.CLICK,(function(){o.stickerChatPopup.isShowing()?o.stickerChatPopup.hide():o.stickerChatPopup.show()})),this.autoPlayScreen.on(u.EventType.TOUCH_END,(function(){K.emit("STOP_AUTO_PLAY"),o.autoPlayScreen.active=!1})),K.on("slots",(function(t){if(!o._inited)try{o.initSlots(t)}catch(t){console.error(t)}}),this),K.on("action",(function(t){o._inited&&o.onActionChange(t)}),this),K.on("phase",(function(t){var e=t.curPhase,n=t.prePhase;o._inited&&o.onPhaseChange(e,n)}),this),K.on("curTurn",(function(t){var e=t.curTurn,n=t.preTurn;o._inited&&o.onTurnChange(e,n)}),this),K.on("gameStarted",a(l().mark((function t(e){var n,r,i,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.curGameStarted,r=e.preGameStarted,n&&rt.Instance.hideFull(),o._inited){t.next=4;break}return t.abrupt("return");case 4:if(null!=r){t.next=6;break}return t.abrupt("return");case 6:return i=o._roomState.slots,(a=o.userPanels.map((function(t){return t.avatarSprite.node}))).forEach((function(t){t.active=!1})),o.userPanels.forEach((function(t){t.setHighlightEnable(!1)})),o.firstMoveScreen.setData(i,i[o._myIdx],a),t.next=13,o.firstMoveScreen.startAnimation(o._roomState.curTurn);case 13:a.forEach((function(t){t.active=!0})),o.youAreHereIndicator.show(o._roomState.is2V2),o._slotCtrls[o.curTurn].userPanel.setHighlightEnable(!0);case 16:case"end":return t.stop()}}),t)}))),this),K.on("onChangeTurnAndAction",(function(t){var e=t.curTurn,n=t.action;e!==o._preTurn&&(o.onTurnChange(e,o._preTurn),o._preTurn=e),o.onActionChange(n)}),this),K.on("ON_GET_ROOM_STATE",(function(){o.isLocal?o._roomState=o.getComponent(dt).state:o._roomState=o.getComponent(ht).state}),this),K.on("ON_ROLL_DICE_RESULT",(function(t){o._inited&&(o._onRollResult(t),o._clearHightLight())}),this),K.on("ON_MOVE_CHAR",(function(t){o._inited&&t.forEach((function(t){var e=t.slotIdx,n=t.tokenIdx,r=t.curPos,i=t.type,a=o._slotCtrls[e].characters[n],l=a.posIdx;if("normal"===i)-1===l?o._moveCharToFirstCell(a):-1===r?o._toBeKickedTokens.push(a):o._onChoosingToken(a,l,r);else if("portal"===i){a.posIdx=r,o._transitionOutCell(l),a.node.setScale(g.ONE),a.node.setPosition(o._centerCellPos),a.node.setParent(o.cellContainer,!0);var s=g.add(p(),o.cellContainer.getComponent(y).convertToNodeSpaceAR(o._cellNodes[r].worldPosition),o._centerCellPos);_(a.node).to(.6,{scale:g.ZERO},{easing:C.elasticIn}).delay(.2).set({position:s}).to(.6,{scale:g.ONE},{easing:C.elasticOut}).call((function(){a.node.setParent(o._cellNodes[r]),a.node.setPosition(o._centerCellPos),o._transitionInCell(r),o._updateTokenCharRotation(a)})).start()}}))}),this),K.on("ON_SPECIAL_NOTI",(function(t){o._inited&&("third-six"===t.desc&&st.Instance.show("You rolled six three consecutive times!"))}),this),K.on("rollResult",(function(t){var e,n=t.curRollResult,r=t.preRollResult;o._inited&&(null==r&&0!==o._roomState.action&&(null==(e=o._slotCtrls[o.curTurn])||e.diceRoller.showResult(n)))}),this),K.on("ON_SHOW_RANKING_POPUP",a(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,lt.showMidGameAd();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error(t.t0);case 8:o.finalRankingPopup.show(),o.finalRankingPopup.setData(e);case 10:case"end":return t.stop()}}),t,null,[[0,5]])}))),this),K.on("SHOW_STICKER",(function(t){var e=t[0],n=t[1];if(o._inited){var r=e<0?o._myIdx:e;o._slotCtrls[r].userPanel.showEmo(n)}}),this),K.on("THROW_ITEM",(function(t){var e=t[0],n=t[1],r=t[2];if(o._inited){var i=q[r];nt.Instance.loadAsset("throwables/anim/"+i,d).then((function(t){var r=I(t).getComponent(Z);r.node.setParent(o._slotCtrls[0].userPanel.node.parent);var i=[e<0?o._myIdx:e,n].map((function(t){var e=o._slotCtrls[t].userPanel;return e.node.parent.getComponent(y).convertToNodeSpaceAR(e.avatarSprite.node.worldPosition)})),a=i[0],l=i[1];r.playThrowAnim(a,l)}))}}),this),K.on("ON_LEAVE",(function(){!o._isLeaving&&o.isValid&&(o._isLeaving=!0,o._roomState.phase>0&&tt.gameCounter++,ot.Instance.moveToScene(G.HOME))}),this),this.rollButton.node.on(h.EventType.CLICK,this._onRollBtnClick,this),e=l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:K.on("slot."+e+".rank",(function(t){var n=t.curRank,r=t.preRank;if(o._inited){var i=o._roomState.slots[e].disconnected,a=o._slotCtrls[e].rankLabel,l=o._slotCtrls[e].userPanel;if(a.string=""+(n+1),i)l.disabled=!0,a.node.parent.active=!1,o._slotCtrls[e].characters.forEach((function(t){t.setHideByFinished(!0)})),o._roomState.slots.every((function(t){return null==t.player||t.rank>=0}))&&o._roomState.slots.forEach((function(t,e){o._slotCtrls[e].rankLabel.node.parent.active=t.rank>=0&&!t.disconnected}));else null==r&&(a.node.parent.active=n>=0,n>=0&&o._slotCtrls[e].characters.forEach((function(t){t.setHideByFinished(!0)})))}}),o),K.on("slot."+e+".player",(function(t){if(o._inited){var n=o._getUiIdxFromSlotIdx(e);o._slotCtrls[e].userPanel.setData(t,o.getColorBySlotIdx(e)),o._slotCtrls[e].userPanel.node.on(h.EventType.CLICK,(function(r){var i;if(r.target===o._slotCtrls[e].userPanel.node&&!o.isLocal&&(r.propagationStopped=!0,(null==(i=o.detailUserContainer.getComponentInChildren(N))?void 0:i.slotIdx)!==e)){o.detailUserContainer.destroyAllChildren();var a=I(o.detailUserInfoPrefab);a.setParent(o.detailUserContainer),a.getComponent(N).setData(t,e,n,o._myIdx!==e)}}))}}),o),K.on("slot."+e+".autoPlay",(function(t){e===o._myIdx&&(o.autoPlayScreen.active=t)}),o);case 3:case"end":return t.stop()}}),t)})),n=0;case 27:if(!(n<4)){t.next=32;break}return t.delegateYield(e(n),"t0",29);case 29:n++,t.next=27;break;case 32:this.isLocal&&(this.quitRoomButton.node.setPosition(this.quitRoomButton.node.position.x,0),this.settingButton.node.setPosition(this.settingButton.node.position.x,0)),this.settingButton.node.on(h.EventType.CLICK,(function(){at.Instance.open("SettingPopup",{showSignOutButton:!1})})),this.quitRoomButton.node.on(h.EventType.CLICK,(function(){if(1===o._roomState.phase){var t=mt.t("ask-quit-game");(o._roomState.slots[o._myIdx].rank<0||o._roomState.is2V2)&&o._roomState.bet>0&&(t=mt.t(o._roomState.isArena?"ask-quit-game-lose-cake":"ask-quit-game-lose-candy",{amount:ut.formatNumber(o._roomState.bet,5)})),ut.showAlert({message:t,okCb:function(){rt.Instance.show(),K.emit("LEAVE")},showCancel:!0})}else rt.Instance.show(),K.emit("LEAVE")})),K.on("TOKEN_CHOOSED",(function(t){o._inited&&(o._clearHightLight(),K.emit("CHOOSING_TOKEN",t))}),this);case 36:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.start=function(){this.isLocal?this.addComponent(dt):this.addComponent(ht),lt.gameplayStart()},s.onPhaseChange=function(t,e){var n=this;rt.Instance.hide(),null==e&&t>=1&&(et.Instance.playMusic(B.GAME_ROOM_CLASSIC),this._roomState.slots.forEach((function(t,e){var o=null!=t.player;t.tokens.forEach((function(t){n._slotCtrls[t.playerIdx].characters[t.id].setHidePlayerNull(!o)})),n._slotCtrls[e].userPanel.node.active=o})))},s._onRollBtnClick=function(){K.emit("REQUEST_ROLL_DICE")},s._highlightPlayableChars=function(t){var e=this._slotCtrls[t.playerIdx].characters[t.id];try{e.playReady()}catch(t){console.error(t)}this.isMyTurn()&&e.setHighlightEnable(!0)},s._getAllCellIdxInRange=function(t,e){var n=[];if(e<0||t<0)return[];if(t<52&&e<52){var o=(e-t+52)%52;n=Array.from({length:o},(function(e,n){return(t+n+1)%52}))}else if(t<52&&e>=52){var r=Math.floor((e-52)/6),i=(U[r]-2+52)%52,a=Array.from({length:(i-t+52)%52},(function(e,n){return(t+n+1)%52})),l=52+6*r,s=Array.from({length:e-l+1},(function(t,e){return l+e}));n=[].concat(a,s)}else if(t>=52&&e>=52){var c=(e-t+76)%76;n=Array.from({length:c},(function(e,n){return(t+n+1)%76}))}return n},s._onChoosingToken=function(t,e,n){var o=this;this._slotCtrls[this.curTurn].diceRoller.hideResult(),this._clearHightLight(),m.stopAllByTarget(t.node),m.stopAllByTarget(t.charAnchor);var r=_(t.node),i=_(t.charAnchor),a=this._getAllCellIdxInRange(e,n);t.posIdx=n;var l=.175;try{t.playJump()}catch(t){console.error(t)}this._transitionOutCell(e),t.node.setParent(this.cellContainer,!0),t.node.setScale(g.ONE),t.setHideBySamePos(!1),t.setAmount(1);var s=M.includes(n);a.forEach((function(n,c){var u=o._cellNodes[n],d=c===a.length-1,h=d?.35:l;d&&s&&(h=3*l);var f=0===c?o._cellNodes[e]:o._cellNodes[a[c-1]];r.call((function(){t.playJump(h),d&&s&&(m.stopAllByTarget(o.portalGate),_(o.portalGate).set({active:!0,scale:g.ZERO}).to(.15,{scale:g.ONE}).start());var e=u.position.x-f.position.x<0?-1:1;t.charAnchor.setScale(e,1)})).to(h,{position:p(u.position.x,u.position.y+20)},{onUpdate:function(t,e){if(o.isValid&&d&&s&&e>=.5){var n=1-C.quintIn(2*(e-.5));t.setScale(n,n)}}}).call((function(){M.includes(n)?(et.Instance.playSound(F.JUMP_IN_PORTAL),o.portalParticle.resetSystem(),m.stopAllByTarget(o.portalGate),_(o.portalGate).set({scale:g.ONE}).delay(.5).to(.15,{scale:g.ZERO}).set({active:!1}).call((function(){var e=o.cellContainer.getComponent(y),n=o._baseCellContainers[t.playerIdx],r=e.convertToNodeSpaceAR(n.node.worldPosition);if(o._slotCtrls[t.playerIdx].characters.every((function(t){return M.includes(t.posIdx)}))){et.Instance.playSound(F.FINISHED);var i=I(o.finishParticlePrefab);i.setParent(o.cellContainer),i.setPosition(r),o.scheduleOnce((function(){i.destroy()}),2),o._roomState.slots.forEach((function(t,e){o.bigFlagLabels[o._getUiIdxFromSlotIdx(e)].node.parent.active=t.rank>=0&&!t.disconnected}))}else{var a=I(o.emoCloudPrefab).getComponent(L);a.node.setParent(o.cellContainer),a.node.setPosition(r),a.playAnim(3)}})).start()):u.getComponent(w).playUpDownAnim()}));var v=d?80:20;i.set({position:t.skinOriginPos}).by(h/2,{position:p(0,v,0)},{easing:C.quartOut}).by(h/2,{position:p(0,-v,0)},{easing:C.quartIn})})),r.call((function(){try{t.playIdle()}catch(t){console.error(t)}t.playOnLandAnim();var e=o._cellNodes[n];t.node.setParent(e),t.node.setPosition(o._centerCellPos),o._updateTokenCharRotation(t);var r=o.cellContainer.getComponent(y),i=r.convertToNodeSpaceAR(t.node.worldPosition);if(t.canPlayShameSticker()){H.includes(t.posIdx)||(t.shameStickerPlayed=!0);var a=I(o.emoCloudPrefab).getComponent(L);a.node.setParent(o.cellContainer),a.node.setPosition(g.add(p(),i,p(10,60))),a.playAnim(1)}o._toBeKickedTokens.forEach((function(t){var a=I(o.kickFogPrefab);a.setParent(o.cellContainer),a.setPosition(g.add(p(),e.position,o._centerCellPos)),a.getComponent(ct).play(),t.posIdx=-1;var l=o._baseCellContainers[t.playerIdx].cells[t.tokenId];t.node.setParent(o.cellContainer),t.node.setPosition(i),t.showKickParticles();var s=r.convertToNodeSpaceAR(l.worldPosition),c=_(t.node);o._getAllCellIdxInRange(U[t.playerIdx],n).filter((function(t,e,n){if(0===e||e===n.length-1)return!0;var r=[e-1,e,e+1].map((function(t){return o._cellNodes[n[t]].position})),i=r[0],a=r[1],l=r[2],s=g.subtract(p(),a,i).normalize(),c=g.subtract(p(),l,a).normalize();return g.dot(s,c)<.9})).map((function(t){return p(o._cellNodes[t].position.x,o._cellNodes[t].position.y+20)})).reverse().forEach((function(t,e,n){if(0!==e){var o=g.subtract(p(),t,n[e-1]).length();c.to(o/1500,{position:t})}}));var u=.35;c.call((function(){_(t.charAnchor).set({position:t.skinOriginPos}).by(.175,{position:p(0,100)},{easing:C.quartOut}).by(.175,{position:p(0,-100)},{easing:C.quartIn}).start()})).to(u,{position:s}).call((function(){t.node.setParent(l),t.node.setPosition(0,0),t.hideKickParticles(),o._updateTokenCharRotation(t);var e=r.convertToNodeSpaceAR(l.parent.worldPosition),n=I(o.emoCloudPrefab).getComponent(L);n.node.setParent(o.cellContainer),n.node.setPosition(e),n.playAnim(0)}));var d=I(o.emoCloudPrefab).getComponent(L);d.node.setParent(o.cellContainer),d.node.setPosition(g.add(p(),i,p(10,60))),d.playAnim(2),c.start()})),o._transitionInCell(n),o._toBeKickedTokens.length=0})).start(),i.start()},s.onTurnChange=function(t,e){if(!(t<0||this.firstMoveScreen.node.active)){this._tryToShowClickOnAvatarGuide();var n=this._slotCtrls[t].userPanel;if(null==n||n.setHighlightEnable(!0),null!=e&&e>=0&&(this._slotCtrls[e].userPanel.setHighlightEnable(!1),this._slotCtrls[e].diceRoller.hideResult()),this.isLocal){var o=this._getUiIdxFromSlotIdx(t),r=this.rollButton.getComponent(v);r.left=12,r.right=12,r.top=120,r.bottom=120,r.isAlignLeft=1===o||2===o,r.isAlignBottom=0===o||1===o,r.isAlignRight=0===o||3===o,r.isAlignTop=2===o||3===o}this.isMyTurn()&&et.Instance.playSound(F.NOTI_MY_TURN)}},s.initSlots=function(t){var e=this;if(this.isLocal?this._myIdx=0:t.forEach((function(t,n){var o;e.isMe(null==(o=t.player)?void 0:o.uid)&&(e._myIdx=n,tt.myIdx=e._myIdx)})),console.assert(-1!==this._myIdx),console.log("my idx",this._myIdx),this._myIdx<0)console.log("abnormal my idx",t);else{this._initCellIdxAndColor();var n=new Set;this._slotCtrls.forEach((function(t,o){var r=e._roomState.slots[o],i=e._getUiIdxFromSlotIdx(o);t.diceRoller=e._diceRollers[i],t.diceRoller.setSkin(r.equippingDice),t.userPanel=e.userPanels[i],t.charFinishedIndicator=e.smallFlagContainers[i],t.rankLabel=e.bigFlagLabels[i],t.characters.forEach((function(t,a){var l=r.tokens[a],s=l.posIdx,c=s<0?e._baseCellContainers[o].cells[a]:e._cellNodes[s];t.node.setParent(c),t.init(o,s,a,e.getColorBySlotIdx(o),i),t.initSkin(r.equippingChar),e._updateTokenCharRotation(t),s>=0&&n.add(l.posIdx)}))}));var o=this._roomState.slots[this._myIdx].equippingDice||D.DICE_DEFAULT;nt.Instance.loadDiceThumb(o).then((function(t){e.isValid&&(e.rollButton.getComponentInChildren(b).spriteFrame=t)})),n.forEach((function(t){e._updateCharPosInOneSquare(t)}))}},s.onActionChange=function(t){var e,n=this;if(!(this.curTurn<0)){var o=this.isMyTurn();this.rollButton.node.active=0===t&&o;var r=null==(e=this._slotCtrls[this.curTurn])?void 0:e.userPanel;if(null!=r)if(0===t&&(r.startCountDown(this._roomState.turnDuration),this.isMyTurn()&&!this.isLocal&&this.yourTurnText.show()),1===t)this.getPlayableTokens().forEach((function(t){n._highlightPlayableChars(t)})),r.startCountDown(this._roomState.turnDuration)}},s._initBoard=function(){this.userPanels.forEach((function(t){t.node.active=!1}));for(var t=0;t<4;t++){for(var e=new X,n=0;n<4;n++){var o=I(this.charPrefab).getComponent(O);o.setHidePlayerNull(!0),e.characters.push(o)}this._slotCtrls.push(e);var r=new u("dice-roller"),i=r.addComponent(W);i.init(this.diceRollingAnchor,this.diceResultAnchor,t),r.setParent(this.diceRollingAnchor),this._diceRollers.push(i)}},s._initCellIdxAndColor=function(){var t=this;this.cellContainer.walk((function(e){var n=parseInt(e.name,10);if(!Number.isNaN(n))return n=n<52?(n+13*t._myIdx)%52:52+(n-52+6*t._myIdx)%24,t._cellNodes[n]=e,void e.addComponent(w);var o=e.name.split("-"),r=o[0],i=o[1],a=t._getSlotIdxFromUiIdx(parseInt(i,10)),l=t.getColorBySlotIdx(a);if(["base_skin","des","flower","arrow","big_flag","last"].includes(r))if("base_skin"!==r){var s=(["des","flower","arrow","big_flag"].includes(r)?"gameplay-common":"color-tile-classic")+"/"+r+"-"+l+"/spriteFrame";nt.Instance.loadAsset(s,P).then((function(t){e.getComponent(b).spriteFrame=t})),"des"===r&&nt.Instance.loadAsset("gameplay-common/small-flag-"+l+"/spriteFrame",P).then((function(t){e.children.forEach((function(e){e.getComponent(b).spriteFrame=t}))})),"big_flag"===r&&(t.bigFlagLabels[i]=e.getComponentInChildren(S),e.getComponentInChildren(S).color=(new T).fromHEX("#"+ge[l]))}else{var c=t._roomState.slots[a].equippingBase||"bases.default";nt.Instance.loadAsset("bases/ingame/"+c.split(".")[1],d).then((function(n){if(t.isValid){var o=I(n);e.addChild(o),t._slotCtrls[a].userPanel.setBaseSkin(o,l)}}))}})),this.charBases.forEach((function(e,n){t._baseCellContainers[n]=t.charBases[(n-t._myIdx+4)%4]}))},s._moveCharToFirstCell=function(t){var e,n=this,o=U[t.playerIdx],r=this._cellNodes[o];null==(e=this._slotCtrls[this.curTurn])||e.diceRoller.hideResult(),this._clearHightLight();var i=this.cellContainer.getComponent(y).convertToNodeSpaceAR(r.worldPosition);t.node.setParent(this.cellContainer,!0),t.posIdx=o;var a=.35;et.Instance.playSound(F.MOVE_FROM_START),m.stopAllByTarget(t.node),m.stopAllByTarget(t.charAnchor);var l=_(t.node),s=_(t.charAnchor);l.to(a,{position:p(i.x,i.y+20)}).call((function(){t.node.setParent(r),t.node.setPosition(n._centerCellPos),t.playIdle(),r.getComponent(w).playUpDownAnim(),t.playOnLandAnim(),n._updateTokenCharRotation(t),n._transitionInCell(o)})).start(),t.playJump(),s.set({position:t.skinOriginPos}).by(.175,{position:p(0,100)},{easing:C.quartOut}).by(.175,{position:p(0,-100)},{easing:C.quartIn}).start()},s._updateCharPosInOneSquare=function(t){var e=this;if(!(t<0||M.includes(t))){var n=this._getAllTokensInCellMap(t),o=n.reduce((function(t,e){return e.length>0?t+1:t}),0);if(0!==o)if(o>1){[2,1,3,0].forEach((function(t,o){var r=e._getSlotIdxFromUiIdx(t),i=n[r],a=z[t],l=a[0],s=a[1];i.forEach((function(t,n){var o=e._slotCtrls[t.playerIdx].characters[t.tokenId];o.node.setSiblingIndex(-1),o.setHideBySamePos(n!==i.length-1),o.setAmount(i.length),o.node.setRTS(null,p(l,s),p(.8,.8,1))}))}))}else{var r=n.find((function(t){return t.length>0}));r.forEach((function(t,n){var o=e._slotCtrls[t.playerIdx].characters[t.tokenId];o.node.setRTS(null,e._centerCellPos,g.ONE),o.setHideBySamePos(n!==r.length-1),o.setAmount(r.length)}))}}},s._transitionInCell=function(t){var e=this;if(!(t<0||M.includes(t))){var n=this._getAllTokensInCellMap(t),o=n.reduce((function(t,e){return e.length>0?t+1:t}),0);if(0!==o)if(o>1){[2,1,3,0].forEach((function(t,o){var r=e._getSlotIdxFromUiIdx(t),i=n[r],a=z[t],l=a[0],s=a[1];i.forEach((function(t,n){var o=e._slotCtrls[t.playerIdx].characters[t.tokenId];o.node.setSiblingIndex(-1),_(o.node).to(.35,{position:p(l,s),scale:p(.8,.8,1)}).call((function(){o.setHideBySamePos(n!==i.length-1),o.setAmount(i.length)})).start()}))}))}else{var r=n.find((function(t){return t.length>0}));r.forEach((function(t,n){var o=e._slotCtrls[t.playerIdx].characters[t.tokenId];_(o.node).to(.25,{position:e._centerCellPos,scale:p(1,1,1)}).call((function(){o.setHideBySamePos(n!==r.length-1),o.setAmount(r.length)})).start()}))}}},s._transitionOutCell=function(t){var e=this,n=this._getAllTokensInCellMap(t),o=n.reduce((function(t,e){return e.length>0?t+1:t}),0);if(0!==o)if(o>1){[2,1,3,0].forEach((function(t,o){var r=e._getSlotIdxFromUiIdx(t),i=n[r];i.forEach((function(t,n){var o=e._slotCtrls[t.playerIdx].characters[t.tokenId];o.setHideBySamePos(n!==i.length-1),o.setAmount(i.length)}))}))}else{var r=n.find((function(t){return t.length>0}));r.forEach((function(t,n){var o=e._slotCtrls[t.playerIdx].characters[t.tokenId];o.setHideBySamePos(n!==r.length-1),o.setAmount(r.length),_(o.node).to(.25,{position:e._centerCellPos,scale:g.ONE}).start()}))}},s._getAllTokensInCellMap=function(t){var e=this,n=[];return this._slotCtrls.forEach((function(o,r){var i=e._roomState.slots[r],a=i.player,l=i.rank;null==a||l>=0?n.push([]):n.push(o.characters.filter((function(e){return e.posIdx===t})))})),n},s.getPlayableTokens=function(){var t=this,e=this._roomState.slots[this.curTurn];e.tokens.every((function(t){return t.posIdx===57+6*e.idx}))&&(e=this._roomState.slots[(this.curTurn+2)%4]);var n=e.tokens,o=[];return n.forEach((function(e){(e.posIdx<0&&t._roomState.rollResult>=6||e.posIdx>=0&&e.posIdx+t._roomState.stepAmount<=57+6*e.playerIdx)&&o.push(e)})),o},s._clearHightLight=function(){try{this._slotCtrls.forEach((function(t){t.userPanel.node.active&&t.characters.forEach((function(t){t.setHighlightEnable(!1);var e=t.skin.getCurrent(0);null!=e&&["Idle","Idle_Random_1"].includes(e.animation.name)||t.playIdle()}))}))}catch(t){console.error(t)}this._slotCtrls[this.curTurn].userPanel.stopCountDown()},s._onRollResult=function(t){this._slotCtrls[this.curTurn].diceRoller.rollDice(t)},s.isMyTurn=function(){return this.isLocal?!this._roomState.slots[this.curTurn].isBot:this.curTurn===this._myIdx},s.isMe=function(t){return tt.userInfo._id===t},s.getColorBySlotIdx=function(t){var e;return(((null==(e=this._roomState)?void 0:e.slots[this._myIdx].colorIdx)||0)+this._getUiIdxFromSlotIdx(t))%4},s._getNextCellOfToken=function(t){var e=(t.posIdx+1)%(t.posIdx<=51?52:this._cellNodes.length);return e===U[t.playerIdx]&&(e=52+6*t.playerIdx),this._cellNodes[e]},s._updateTokenCharRotation=function(t){var e=1;t.posIdx<0?e=0===t.uiIdx||1===t.uiIdx?1:-1:e=this._getNextCellOfToken(t).position.x-this._cellNodes[t.posIdx].position.x<0?-1:1;t.charAnchor.setScale(e,1),M.includes(t.posIdx)&&(this._updateFlagAmount(t.playerIdx),t.setHideByFinished(!0))},s._updateFlagAmount=function(t){var e=this._roomState.slots[t].tokens.filter((function(t){return M.includes(t.posIdx)})).length||0;this._slotCtrls[t].charFinishedIndicator.setFlagAmount(e)},s._getUiIdxFromSlotIdx=function(t){return(4-this._myIdx+t)%4},s._getSlotIdxFromUiIdx=function(t){return(this._myIdx+t)%4},s.onDestroy=function(){K.removeAll(this),lt.gameplayStop(),x.off(A.EVENT_SHOW)},s._tryToShowClickOnAvatarGuide=function(){var t=this;this.isLocal||this._roomState.curTurn===this._myIdx||"0"===(k.localStorage.getItem("click-on-avatar")||"0")&&(nt.Instance.loadAsset("first-time-guide/ClickOnAvatarGuide",d).then((function(e){t.isValid&&t.detailUserContainer.addChild(I(e))})),k.localStorage.setItem("click-on-avatar","1"))},i(e,[{key:"curTurn",get:function(){var t;return null==(t=this._roomState)?void 0:t.curTurn}},{key:"isLocal",get:function(){return null==it.gameRoom}},{key:"_inited",get:function(){return this._myIdx>=0}}]),e}(E)).prototype,"charBases",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Vt=e(qt.prototype,"cellContainer",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yt=e(qt.prototype,"firstMoveScreen",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wt=e(qt.prototype,"charPrefab",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jt=e(qt.prototype,"rollButton",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xt=e(qt.prototype,"quitRoomButton",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qt=e(qt.prototype,"settingButton",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zt=e(qt.prototype,"userPanels",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),jt=e(qt.prototype,"detailUserContainer",[Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$t=e(qt.prototype,"detailUserInfoPrefab",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=e(qt.prototype,"smallFlagContainers",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ee=e(qt.prototype,"diceResultAnchor",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=e(qt.prototype,"diceRollingAnchor",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=e(qt.prototype,"finalRankingPopup",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=e(qt.prototype,"uiAnimLayer",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=e(qt.prototype,"youAreHereIndicator",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=e(qt.prototype,"autoPlayScreen",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=e(qt.prototype,"kickFogPrefab",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=e(qt.prototype,"portalGate",[Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=e(qt.prototype,"portalParticle",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=e(qt.prototype,"emoCloudPrefab",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=e(qt.prototype,"finishParticlePrefab",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=e(qt.prototype,"stickerButton",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=e(qt.prototype,"stickerChatPopup",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=e(qt.prototype,"yourTurnText",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gt=qt))||Gt));s._RF.pop()}}}));

System.register("chunks:///_virtual/Codec.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"5fc3csE8LBMtJ0kAlIAJVfi","Codec",void 0);e("Codec",function(){function e(){}var t=e.prototype;return t.decode=function(e){return JSON.parse(e)},t.encode=function(e){return JSON.stringify(e)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ColorSelector.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var o,e,t,n,c,i,l,a,u,s;return{setters:[function(r){o=r.applyDecoratedDescriptor,e=r.inheritsLoose,t=r.initializerDefineProperty,n=r.assertThisInitialized,c=r.createClass},function(r){i=r.cclegacy,l=r._decorator,a=r.Node,u=r.Button,s=r.Component}],execute:function(){var h,C,p,f,d;i._RF.push({},"7db82mjpqVAMoNiAKGbfNjA","ColorSelector",void 0);var _=l.ccclass,g=l.property;r("ColorSelector",(h=_("ColorSelector"),C=g(a),h((d=o((f=function(r){function o(){for(var o,e=arguments.length,c=new Array(e),i=0;i<e;i++)c[i]=arguments[i];return o=r.call.apply(r,[this].concat(c))||this,t(o,"checkMark",d,n(o)),o._changeColorCb=function(r){},o._currentColor=0,o}e(o,r);var i=o.prototype;return i.onLoad=function(){var r=this;this.node.children.forEach((function(o,e){o.on(u.EventType.CLICK,(function(){r.setColor(e)}))})),this._updateView()},i._updateView=function(){var r=this;this.node.children.forEach((function(o,e){o.children[0].children[0].active=r._currentColor===e,e===r._currentColor&&r.checkMark.setParent(o)}))},i.setChangeColorCb=function(r){this._changeColorCb=r},i.setColor=function(r){this._currentColor!==r&&(this._currentColor=r,this._updateView(),this._changeColorCb(this._currentColor))},c(o,[{key:"choosingColorIdx",get:function(){return this._currentColor}}]),o}(s)).prototype,"checkMark",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/colyseus.js",["./cjs-loader.mjs"],(function(t,e){var n;return{setters:[function(t){n=t.default}],execute:function(){t("default",void 0);var o=t("__cjsMetaURL",e.meta.url);n.define(o,(function(e,n,o,r,i){!function(t,n){"object"==typeof e&&void 0!==o?n(e):"function"==typeof define&&define.amd?define("colyseus.js",["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).Colyseus={})}(this,(function(t){function e(t,e){return e.forEach((function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach((function(n){if("default"!==n&&!(n in t)){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}}))})),Object.freeze(t)}ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return null!==t&&"object"==typeof t&&t.buffer instanceof ArrayBuffer}),"undefined"==typeof globalThis&&"undefined"!=typeof window&&(window.globalThis=window);var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}var r,i=function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function s(t,e,n,o){return new(n||(n=Promise))((function(r,i){function s(t){try{c(o.next(t))}catch(t){i(t)}}function a(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((o=o.apply(t,e||[])).next())}))}function a(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function c(t,e,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(t):o?o.value:e.get(t)}function f(t,e,n,o,r){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?r.call(t,n):r?r.value=n:e.set(t,n),n}!function(t){t[t.CONSENTED=4e3]="CONSENTED",t[t.DEVMODE_RESTART=4010]="DEVMODE_RESTART"}(r||(r={}));var h=function(t){function e(e,n){var o=t.call(this,n)||this;return o.name="ServerError",o.code=e,o}return o(e,t),e}(Error);function u(t,e){if(this._offset=e,t instanceof ArrayBuffer)this._buffer=t,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(t))throw new Error("Invalid argument");this._buffer=t.buffer,this._view=new DataView(this._buffer,t.byteOffset,t.byteLength)}}u.prototype._array=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this._parse();return e},u.prototype._map=function(t){for(var e={},n=0;n<t;n++)e[this._parse()]=this._parse();return e},u.prototype._str=function(t){var e=function(t,e,n){for(var o="",r=0,i=e,s=e+n;i<s;i++){var a=t.getUint8(i);if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(r=(7&a)<<18|(63&t.getUint8(++i))<<12|(63&t.getUint8(++i))<<6|(63&t.getUint8(++i))<<0)>=65536?(r-=65536,o+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):o+=String.fromCharCode(r)}else o+=String.fromCharCode((15&a)<<12|(63&t.getUint8(++i))<<6|(63&t.getUint8(++i))<<0);else o+=String.fromCharCode((31&a)<<6|63&t.getUint8(++i));else o+=String.fromCharCode(a)}return o}(this._view,this._offset,t);return this._offset+=t,e},u.prototype._bin=function(t){var e=this._buffer.slice(this._offset,this._offset+t);return this._offset+=t,e},u.prototype._parse=function(){var t,e=this._view.getUint8(this._offset++),n=0,o=0,r=0,i=0;if(e<192)return e<128?e:e<144?this._map(15&e):e<160?this._array(15&e):this._str(31&e);if(e>223)return-1*(255-e+1);switch(e){case 192:return null;case 194:return!1;case 195:return!0;case 196:return n=this._view.getUint8(this._offset),this._offset+=1,this._bin(n);case 197:return n=this._view.getUint16(this._offset),this._offset+=2,this._bin(n);case 198:return n=this._view.getUint32(this._offset),this._offset+=4,this._bin(n);case 199:if(n=this._view.getUint8(this._offset),o=this._view.getInt8(this._offset+1),this._offset+=2,-1===o){var s=this._view.getUint32(this._offset);return r=this._view.getInt32(this._offset+4),i=this._view.getUint32(this._offset+8),this._offset+=12,new Date(1e3*(4294967296*r+i)+s/1e6)}return[o,this._bin(n)];case 200:return n=this._view.getUint16(this._offset),o=this._view.getInt8(this._offset+2),this._offset+=3,[o,this._bin(n)];case 201:return n=this._view.getUint32(this._offset),o=this._view.getInt8(this._offset+4),this._offset+=5,[o,this._bin(n)];case 202:return t=this._view.getFloat32(this._offset),this._offset+=4,t;case 203:return t=this._view.getFloat64(this._offset),this._offset+=8,t;case 204:return t=this._view.getUint8(this._offset),this._offset+=1,t;case 205:return t=this._view.getUint16(this._offset),this._offset+=2,t;case 206:return t=this._view.getUint32(this._offset),this._offset+=4,t;case 207:return r=this._view.getUint32(this._offset)*Math.pow(2,32),i=this._view.getUint32(this._offset+4),this._offset+=8,r+i;case 208:return t=this._view.getInt8(this._offset),this._offset+=1,t;case 209:return t=this._view.getInt16(this._offset),this._offset+=2,t;case 210:return t=this._view.getInt32(this._offset),this._offset+=4,t;case 211:return r=this._view.getInt32(this._offset)*Math.pow(2,32),i=this._view.getUint32(this._offset+4),this._offset+=8,r+i;case 212:return o=this._view.getInt8(this._offset),this._offset+=1,0===o?void(this._offset+=1):[o,this._bin(1)];case 213:return o=this._view.getInt8(this._offset),this._offset+=1,[o,this._bin(2)];case 214:return o=this._view.getInt8(this._offset),this._offset+=1,-1===o?(t=this._view.getUint32(this._offset),this._offset+=4,new Date(1e3*t)):[o,this._bin(4)];case 215:return o=this._view.getInt8(this._offset),this._offset+=1,0===o?(r=this._view.getInt32(this._offset)*Math.pow(2,32),i=this._view.getUint32(this._offset+4),this._offset+=8,new Date(r+i)):-1===o?(r=this._view.getUint32(this._offset),i=this._view.getUint32(this._offset+4),this._offset+=8,new Date(1e3*(4294967296*(3&r)+i)+(r>>>2)/1e6)):[o,this._bin(8)];case 216:return o=this._view.getInt8(this._offset),this._offset+=1,[o,this._bin(16)];case 217:return n=this._view.getUint8(this._offset),this._offset+=1,this._str(n);case 218:return n=this._view.getUint16(this._offset),this._offset+=2,this._str(n);case 219:return n=this._view.getUint32(this._offset),this._offset+=4,this._str(n);case 220:return n=this._view.getUint16(this._offset),this._offset+=2,this._array(n);case 221:return n=this._view.getUint32(this._offset),this._offset+=4,this._array(n);case 222:return n=this._view.getUint16(this._offset),this._offset+=2,this._map(n);case 223:return n=this._view.getUint32(this._offset),this._offset+=4,this._map(n)}throw new Error("Could not parse")};function d(t,e,n){for(var o=0,r=0,i=n.length;r<i;r++)(o=n.charCodeAt(r))<128?t.setUint8(e++,o):o<2048?(t.setUint8(e++,192|o>>6),t.setUint8(e++,128|63&o)):o<55296||o>=57344?(t.setUint8(e++,224|o>>12),t.setUint8(e++,128|o>>6&63),t.setUint8(e++,128|63&o)):(r++,o=65536+((1023&o)<<10|1023&n.charCodeAt(r)),t.setUint8(e++,240|o>>18),t.setUint8(e++,128|o>>12&63),t.setUint8(e++,128|o>>6&63),t.setUint8(e++,128|63&o))}function l(t,e,n){var o=typeof n,r=0,i=0,s=0,a=0,c=0,f=0;if("string"===o){if((c=function(t){for(var e=0,n=0,o=0,r=t.length;o<r;o++)(e=t.charCodeAt(o))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(o++,n+=4);return n}(n))<32)t.push(160|c),f=1;else if(c<256)t.push(217,c),f=2;else if(c<65536)t.push(218,c>>8,c),f=3;else{if(!(c<4294967296))throw new Error("String too long");t.push(219,c>>24,c>>16,c>>8,c),f=5}return e.push({_str:n,_length:c,_offset:t.length}),f+c}if("number"===o)return Math.floor(n)===n&&isFinite(n)?n>=0?n<128?(t.push(n),1):n<256?(t.push(204,n),2):n<65536?(t.push(205,n>>8,n),3):n<4294967296?(t.push(206,n>>24,n>>16,n>>8,n),5):(s=n/Math.pow(2,32)>>0,a=n>>>0,t.push(207,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),9):n>=-32?(t.push(n),1):n>=-128?(t.push(208,n),2):n>=-32768?(t.push(209,n>>8,n),3):n>=-2147483648?(t.push(210,n>>24,n>>16,n>>8,n),5):(s=Math.floor(n/Math.pow(2,32)),a=n>>>0,t.push(211,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),9):(t.push(203),e.push({_float:n,_length:8,_offset:t.length}),9);if("object"===o){if(null===n)return t.push(192),1;if(Array.isArray(n)){if((c=n.length)<16)t.push(144|c),f=1;else if(c<65536)t.push(220,c>>8,c),f=3;else{if(!(c<4294967296))throw new Error("Array too large");t.push(221,c>>24,c>>16,c>>8,c),f=5}for(r=0;r<c;r++)f+=l(t,e,n[r]);return f}if(n instanceof Date){var h=n.getTime(),u=Math.floor(h/1e3),d=1e6*(h-1e3*u);return u>=0&&d>=0&&u<=17179869183?0===d&&u<=4294967295?(t.push(214,255,u>>24,u>>16,u>>8,u),6):(s=u/4294967296,a=4294967295&u,t.push(215,255,d>>22,d>>14,d>>6,s,a>>24,a>>16,a>>8,a),10):(s=Math.floor(u/4294967296),a=u>>>0,t.push(199,12,255,d>>24,d>>16,d>>8,d,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),15)}if(n instanceof ArrayBuffer){if((c=n.byteLength)<256)t.push(196,c),f=2;else if(c<65536)t.push(197,c>>8,c),f=3;else{if(!(c<4294967296))throw new Error("Buffer too large");t.push(198,c>>24,c>>16,c>>8,c),f=5}return e.push({_bin:n,_length:c,_offset:t.length}),f+c}if("function"==typeof n.toJSON)return l(t,e,n.toJSON());var p=[],v="",y=Object.keys(n);for(r=0,i=y.length;r<i;r++)void 0!==n[v=y[r]]&&"function"!=typeof n[v]&&p.push(v);if((c=p.length)<16)t.push(128|c),f=1;else if(c<65536)t.push(222,c>>8,c),f=3;else{if(!(c<4294967296))throw new Error("Object too large");t.push(223,c>>24,c>>16,c>>8,c),f=5}for(r=0;r<c;r++)f+=l(t,e,v=p[r]),f+=l(t,e,n[v]);return f}if("boolean"===o)return t.push(n?195:194),1;if("undefined"===o)return t.push(192),1;if("function"==typeof n.toJSON)return l(t,e,n.toJSON());throw new Error("Could not encode")}function p(t){var e=[],n=[],o=l(e,n,t),r=new ArrayBuffer(o),i=new DataView(r),s=0,a=0,c=-1;n.length>0&&(c=n[0]._offset);for(var f,h=0,u=0,p=0,v=e.length;p<v;p++)if(i.setUint8(a+p,e[p]),p+1===c){if(h=(f=n[s])._length,u=a+c,f._bin)for(var y=new Uint8Array(f._bin),g=0;g<h;g++)i.setUint8(u+g,y[g]);else f._str?d(i,u,f._str):void 0!==f._float&&i.setFloat64(u,f._float);a+=h,n[++s]&&(c=n[s]._offset)}return r}var v,y,g=globalThis.WebSocket||function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")},m=function(){function t(t){this.events=t}return t.prototype.send=function(t){t instanceof ArrayBuffer?this.ws.send(t):Array.isArray(t)&&this.ws.send(new Uint8Array(t).buffer)},t.prototype.connect=function(t){this.ws=new g(t,this.protocols),this.ws.binaryType="arraybuffer",this.ws.onopen=this.events.onopen,this.ws.onmessage=this.events.onmessage,this.ws.onclose=this.events.onclose,this.ws.onerror=this.events.onerror},t.prototype.close=function(t,e){this.ws.close(t,e)},Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.ws.readyState===g.OPEN},enumerable:!1,configurable:!0}),t}(),w=function(){function t(){this.events={},this.transport=new m(this.events)}return t.prototype.send=function(t){this.transport.send(t)},t.prototype.connect=function(t){this.transport.connect(t)},t.prototype.close=function(t,e){this.transport.close(t,e)},Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.transport.isOpen},enumerable:!1,configurable:!0}),t}();function E(t,e){for(var n=t[e++],o="",r=0,i=e,s=e+n;i<s;i++){var a=t[i];if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(r=(7&a)<<18|(63&t[++i])<<12|(63&t[++i])<<6|(63&t[++i])<<0)>=65536?(r-=65536,o+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):o+=String.fromCharCode(r)}else o+=String.fromCharCode((15&a)<<12|(63&t[++i])<<6|(63&t[++i])<<0);else o+=String.fromCharCode((31&a)<<6|63&t[++i]);else o+=String.fromCharCode(a)}return o}function A(t){void 0===t&&(t="");for(var e=0,n=0,o=0,r=t.length;o<r;o++)(e=t.charCodeAt(o))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(o++,n+=4);return n+1}t.Protocol=void 0,(v=t.Protocol||(t.Protocol={}))[v.HANDSHAKE=9]="HANDSHAKE",v[v.JOIN_ROOM=10]="JOIN_ROOM",v[v.ERROR=11]="ERROR",v[v.LEAVE_ROOM=12]="LEAVE_ROOM",v[v.ROOM_DATA=13]="ROOM_DATA",v[v.ROOM_STATE=14]="ROOM_STATE",v[v.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",v[v.ROOM_DATA_SCHEMA=16]="ROOM_DATA_SCHEMA",v[v.ROOM_DATA_BYTES=17]="ROOM_DATA_BYTES",t.ErrorCode=void 0,(y=t.ErrorCode||(t.ErrorCode={}))[y.MATCHMAKE_NO_HANDLER=4210]="MATCHMAKE_NO_HANDLER",y[y.MATCHMAKE_INVALID_CRITERIA=4211]="MATCHMAKE_INVALID_CRITERIA",y[y.MATCHMAKE_INVALID_ROOM_ID=4212]="MATCHMAKE_INVALID_ROOM_ID",y[y.MATCHMAKE_UNHANDLED=4213]="MATCHMAKE_UNHANDLED",y[y.MATCHMAKE_EXPIRED=4214]="MATCHMAKE_EXPIRED",y[y.AUTH_FAILED=4215]="AUTH_FAILED",y[y.APPLICATION_ERROR=4216]="APPLICATION_ERROR";var _={};function O(t,e){_[t]=e}function $(t){var e=_[t];if(!e)throw new Error("missing serializer: "+t);return e}var b=function(){function t(){this.handlers=[]}return t.prototype.register=function(t,e){return this.handlers.push(t),this},t.prototype.invoke=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.handlers.forEach((function(n){return n.apply(t,e)}))},t.prototype.invokeAsync=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Promise.all(this.handlers.map((function(n){return n.apply(t,e)})))},t.prototype.remove=function(t){var e=this.handlers.indexOf(t);this.handlers[e]=this.handlers[this.handlers.length-1],this.handlers.pop()},t.prototype.clear=function(){this.handlers=[]},t}();function I(){var t=new b;function e(e){return t.register(e,null===this)}return e.once=function(e){t.register((function n(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];e.apply(this,o),t.remove(n)}))},e.remove=function(e){return t.remove(e)},e.invoke=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.invoke.apply(t,e)},e.invokeAsync=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.invokeAsync.apply(t,e)},e.clear=function(){return t.clear()},e}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var x=function(t){var e={exports:{}};return t(e,e.exports),e.exports}((function(t,e){!function(t){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,n)};function n(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}function o(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function r(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var i,s=255,a=213;t.OPERATION=void 0,(i=t.OPERATION||(t.OPERATION={}))[i.ADD=128]="ADD",i[i.REPLACE=0]="REPLACE",i[i.DELETE=64]="DELETE",i[i.DELETE_AND_ADD=192]="DELETE_AND_ADD",i[i.TOUCH=1]="TOUCH",i[i.CLEAR=10]="CLEAR";var c=function(){function e(t,e,n){this.changed=!1,this.changes=new Map,this.allChanges=new Set,this.caches={},this.currentCustomOperation=0,this.ref=t,this.setParent(e,n)}return e.prototype.setParent=function(t,e,n){var o=this;if(this.indexes||(this.indexes=this.ref instanceof Rt?this.ref._definition.indexes:{}),this.parent=t,this.parentIndex=n,e)if(this.root=e,this.ref instanceof Rt){var r=this.ref._definition;for(var i in r.schema){var s=this.ref[i];if(s&&s.$changes){var a=r.indexes[i];s.$changes.setParent(this.ref,e,a)}}}else"object"==typeof this.ref&&this.ref.forEach((function(t,e){if(t instanceof Rt){var n=t.$changes,r=o.ref.$changes.indexes[e];n.setParent(o.ref,o.root,r)}}))},e.prototype.operation=function(t){this.changes.set(--this.currentCustomOperation,t)},e.prototype.change=function(e,n){void 0===n&&(n=t.OPERATION.ADD);var o="number"==typeof e?e:this.indexes[e];this.assertValidIndex(o,e);var r=this.changes.get(o);r&&r.op!==t.OPERATION.DELETE&&r.op!==t.OPERATION.TOUCH||this.changes.set(o,{op:r&&r.op===t.OPERATION.DELETE?t.OPERATION.DELETE_AND_ADD:n,index:o}),this.allChanges.add(o),this.changed=!0,this.touchParents()},e.prototype.touch=function(e){var n="number"==typeof e?e:this.indexes[e];this.assertValidIndex(n,e),this.changes.has(n)||this.changes.set(n,{op:t.OPERATION.TOUCH,index:n}),this.allChanges.add(n),this.touchParents()},e.prototype.touchParents=function(){this.parent&&this.parent.$changes.touch(this.parentIndex)},e.prototype.getType=function(t){if(this.ref._definition)return(e=this.ref._definition).schema[e.fieldsByIndex[t]];var e,n=(e=this.parent._definition).schema[e.fieldsByIndex[this.parentIndex]];return Object.values(n)[0]},e.prototype.getChildrenFilter=function(){var t=this.parent._definition.childFilters;return t&&t[this.parentIndex]},e.prototype.getValue=function(t){return this.ref.getByIndex(t)},e.prototype.delete=function(e){var n="number"==typeof e?e:this.indexes[e];if(void 0!==n){var o=this.getValue(n);this.changes.set(n,{op:t.OPERATION.DELETE,index:n}),this.allChanges.delete(n),delete this.caches[n],o&&o.$changes&&(o.$changes.parent=void 0),this.changed=!0,this.touchParents()}else console.warn("@colyseus/schema ".concat(this.ref.constructor.name,": trying to delete non-existing index: ").concat(e," (").concat(n,")"))},e.prototype.discard=function(e,n){var o=this;void 0===e&&(e=!1),void 0===n&&(n=!1),this.ref instanceof Rt||this.changes.forEach((function(e){if(e.op===t.OPERATION.DELETE){var n=o.ref.getIndex(e.index);delete o.indexes[n]}})),this.changes.clear(),this.changed=e,n&&this.allChanges.clear(),this.currentCustomOperation=0},e.prototype.discardAll=function(){var t=this;this.changes.forEach((function(e){var n=t.getValue(e.index);n&&n.$changes&&n.$changes.discardAll()})),this.discard()},e.prototype.cache=function(t,e){this.caches[t]=e},e.prototype.clone=function(){return new e(this.ref,this.parent,this.root)},e.prototype.ensureRefId=function(){void 0===this.refId&&(this.refId=this.root.getNextUniqueId())},e.prototype.assertValidIndex=function(t,e){if(void 0===t)throw new Error('ChangeTree: missing index for field "'.concat(e,'"'))},e}();function f(t,e,n,o){return t[e]||(t[e]=[]),t[e].push(n),null==o||o.forEach((function(t,e){return n(t,e)})),function(){return u(t[e],t[e].indexOf(n))}}function h(e){var n=this,o="string"!=typeof this.$changes.getType();this.$items.forEach((function(r,i){e.push({refId:n.$changes.refId,op:t.OPERATION.DELETE,field:i,value:void 0,previousValue:r}),o&&n.$changes.root.removeRef(r.$changes.refId)}))}function u(t,e){if(-1===e||e>=t.length)return!1;for(var n=t.length-1,o=e;o<n;o++)t[o]=t[o+1];return t.length=n,!0}var d=function(t,e){var n=t.toString(),o=e.toString();return n<o?-1:n>o?1:0};function l(t){return t.$proxy=!0,t=new Proxy(t,{get:function(t,e){return"symbol"==typeof e||isNaN(e)?t[e]:t.at(e)},set:function(t,e,n){if("symbol"==typeof e||isNaN(e))t[e]=n;else{var o=Array.from(t.$items.keys()),r=parseInt(o[e]||e);null==n?t.deleteAt(r):t.setAt(r,n)}return!0},deleteProperty:function(t,e){return"number"==typeof e?t.deleteAt(e):delete t[e],!0}})}var p=function(){function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,this.push.apply(this,t)}return e.prototype.onAdd=function(e,n){return void 0===n&&(n=!0),f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.ADD,e,n?this.$items:void 0)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.is=function(t){return Array.isArray(t)||void 0!==t.array},Object.defineProperty(e.prototype,"length",{get:function(){return this.$items.size},set:function(t){0===t?this.clear():this.splice(t,this.length-t)},enumerable:!1,configurable:!0}),e.prototype.push=function(){for(var t,e=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return n.forEach((function(n){t=e.$refId++,e.setAt(t,n)})),t},e.prototype.pop=function(){var t=Array.from(this.$indexes.values()).pop();if(void 0!==t){this.$changes.delete(t),this.$indexes.delete(t);var e=this.$items.get(t);return this.$items.delete(t),e}},e.prototype.at=function(t){var e=Array.from(this.$items.keys())[t];return this.$items.get(e)},e.prototype.setAt=function(e,n){var o,r;void 0!==n.$changes&&n.$changes.setParent(this,this.$changes.root,e);var i=null!==(r=null===(o=this.$changes.indexes[e])||void 0===o?void 0:o.op)&&void 0!==r?r:t.OPERATION.ADD;this.$changes.indexes[e]=e,this.$indexes.set(e,e),this.$items.set(e,n),this.$changes.change(e,i)},e.prototype.deleteAt=function(t){var e=Array.from(this.$items.keys())[t];return void 0!==e&&this.$deleteAt(e)},e.prototype.$deleteAt=function(t){return this.$changes.delete(t),this.$indexes.delete(t),this.$items.delete(t)},e.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&h.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.concat=function(){for(var t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return new(e.bind.apply(e,r([void 0],(t=Array.from(this.$items.values())).concat.apply(t,n),!1)))},e.prototype.join=function(t){return Array.from(this.$items.values()).join(t)},e.prototype.reverse=function(){var t=this,e=Array.from(this.$items.keys());return Array.from(this.$items.values()).reverse().forEach((function(n,o){t.setAt(e[o],n)})),this},e.prototype.shift=function(){var t=Array.from(this.$items.keys()).shift();if(void 0!==t){var e=this.$items.get(t);return this.$deleteAt(t),e}},e.prototype.slice=function(t,n){var o=new e;return o.push.apply(o,Array.from(this.$items.values()).slice(t,n)),o},e.prototype.sort=function(t){var e=this;void 0===t&&(t=d);var n=Array.from(this.$items.keys());return Array.from(this.$items.values()).sort(t).forEach((function(t,o){e.setAt(n[o],t)})),this},e.prototype.splice=function(t,e){void 0===e&&(e=this.length-t);for(var n=Array.from(this.$items.keys()),o=[],r=t;r<t+e;r++)o.push(this.$items.get(n[r])),this.$deleteAt(n[r]);return o},e.prototype.unshift=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=this.length,r=e.length,i=Array.from(this.$items.values());return e.forEach((function(e,n){t.setAt(n,e)})),i.forEach((function(e,n){t.setAt(r+n,e)})),o+r},e.prototype.indexOf=function(t,e){return Array.from(this.$items.values()).indexOf(t,e)},e.prototype.lastIndexOf=function(t,e){return void 0===e&&(e=this.length-1),Array.from(this.$items.values()).lastIndexOf(t,e)},e.prototype.every=function(t,e){return Array.from(this.$items.values()).every(t,e)},e.prototype.some=function(t,e){return Array.from(this.$items.values()).some(t,e)},e.prototype.forEach=function(t,e){Array.from(this.$items.values()).forEach(t,e)},e.prototype.map=function(t,e){return Array.from(this.$items.values()).map(t,e)},e.prototype.filter=function(t,e){return Array.from(this.$items.values()).filter(t,e)},e.prototype.reduce=function(t,e){return Array.prototype.reduce.apply(Array.from(this.$items.values()),arguments)},e.prototype.reduceRight=function(t,e){return Array.prototype.reduceRight.apply(Array.from(this.$items.values()),arguments)},e.prototype.find=function(t,e){return Array.from(this.$items.values()).find(t,e)},e.prototype.findIndex=function(t,e){return Array.from(this.$items.values()).findIndex(t,e)},e.prototype.fill=function(t,e,n){throw new Error("ArraySchema#fill() not implemented")},e.prototype.copyWithin=function(t,e,n){throw new Error("ArraySchema#copyWithin() not implemented")},e.prototype.toString=function(){return this.$items.toString()},e.prototype.toLocaleString=function(){return this.$items.toLocaleString()},e.prototype[Symbol.iterator]=function(){return Array.from(this.$items.values())[Symbol.iterator]()},e.prototype.entries=function(){return this.$items.entries()},e.prototype.keys=function(){return this.$items.keys()},e.prototype.values=function(){return this.$items.values()},e.prototype.includes=function(t,e){return Array.from(this.$items.values()).includes(t,e)},e.prototype.flatMap=function(t,e){throw new Error("ArraySchema#flatMap() is not supported.")},e.prototype.flat=function(t){throw new Error("ArraySchema#flat() is not supported.")},e.prototype.findLast=function(){var t=Array.from(this.$items.values());return t.findLast.apply(t,arguments)},e.prototype.findLastIndex=function(){var t=Array.from(this.$items.values());return t.findLastIndex.apply(t,arguments)},e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){return this.toArray().map((function(t){return"function"==typeof t.toJSON?t.toJSON():t}))},e.prototype.clone=function(t){return t?new(e.bind.apply(e,r([void 0],Array.from(this.$items.values()),!1))):new(e.bind.apply(e,r([void 0],this.map((function(t){return t.$changes?t.clone():t})),!1)))},e}();function v(t){return t.$proxy=!0,t=new Proxy(t,{get:function(t,e){return"symbol"!=typeof e&&void 0===t[e]?t.get(e):t[e]},set:function(t,e,n){return"symbol"!=typeof e&&-1===e.indexOf("$")&&"onAdd"!==e&&"onRemove"!==e&&"onChange"!==e?t.set(e,n):t[e]=n,!0},deleteProperty:function(t,e){return t.delete(e),!0}})}var y=function(){function e(t){var n=this;if(this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t)if(t instanceof Map||t instanceof e)t.forEach((function(t,e){return n.set(e,t)}));else for(var o in t)this.set(o,t[o])}return e.prototype.onAdd=function(e,n){return void 0===n&&(n=!0),f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.ADD,e,n?this.$items:void 0)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.is=function(t){return void 0!==t.map},e.prototype[Symbol.iterator]=function(){return this.$items[Symbol.iterator]()},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return this.$items[Symbol.toStringTag]},enumerable:!1,configurable:!0}),e.prototype.set=function(e,n){if(null==n)throw new Error("MapSchema#set('".concat(e,"', ").concat(n,"): trying to set ").concat(n," value on '").concat(e,"'."));var o=void 0!==this.$changes.indexes[e],r=o?this.$changes.indexes[e]:this.$refId++,i=o?t.OPERATION.REPLACE:t.OPERATION.ADD,s=void 0!==n.$changes;return s&&n.$changes.setParent(this,this.$changes.root,r),o?s&&this.$items.get(e)!==n&&(i=t.OPERATION.ADD):(this.$changes.indexes[e]=r,this.$indexes.set(r,e)),this.$items.set(e,n),this.$changes.change(e,i),this},e.prototype.get=function(t){return this.$items.get(t)},e.prototype.delete=function(t){return this.$changes.delete(t),this.$items.delete(t)},e.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&h.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){return this.$items.has(t)},e.prototype.forEach=function(t){this.$items.forEach(t)},e.prototype.entries=function(){return this.$items.entries()},e.prototype.keys=function(){return this.$items.keys()},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toJSON=function(){var t={};return this.forEach((function(e,n){t[n]="function"==typeof e.toJSON?e.toJSON():e})),t},e.prototype.clone=function(t){var n;return t?n=Object.assign(new e,this):(n=new e,this.forEach((function(t,e){t.$changes?n.set(e,t.clone()):n.set(e,t)}))),n},e}(),g={};function m(t,e){g[t]=e}function w(t){return g[t]}var E=function(){function t(){this.indexes={},this.fieldsByIndex={},this.deprecated={},this.descriptors={}}return t.create=function(e){var n=new t;return n.schema=Object.assign({},e&&e.schema||{}),n.indexes=Object.assign({},e&&e.indexes||{}),n.fieldsByIndex=Object.assign({},e&&e.fieldsByIndex||{}),n.descriptors=Object.assign({},e&&e.descriptors||{}),n.deprecated=Object.assign({},e&&e.deprecated||{}),n},t.prototype.addField=function(t,e){var n=this.getNextFieldIndex();this.fieldsByIndex[n]=t,this.indexes[t]=n,this.schema[t]=Array.isArray(e)?{array:e[0]}:e},t.prototype.hasField=function(t){return void 0!==this.indexes[t]},t.prototype.addFilter=function(t,e){return this.filters||(this.filters={},this.indexesWithFilters=[]),this.filters[this.indexes[t]]=e,this.indexesWithFilters.push(this.indexes[t]),!0},t.prototype.addChildrenFilter=function(t,e){var n=this.indexes[t],o=this.schema[t];if(w(Object.keys(o)[0]))return this.childFilters||(this.childFilters={}),this.childFilters[n]=e,!0;console.warn("@filterChildren: field '".concat(t,"' can't have children. Ignoring filter."))},t.prototype.getChildrenFilter=function(t){return this.childFilters&&this.childFilters[this.indexes[t]]},t.prototype.getNextFieldIndex=function(){return Object.keys(this.schema||{}).length},t}();function A(t){return t._context&&t._context.useFilters}var _=function(){function t(){this.types={},this.schemas=new Map,this.useFilters=!1}return t.prototype.has=function(t){return this.schemas.has(t)},t.prototype.get=function(t){return this.types[t]},t.prototype.add=function(t,e){void 0===e&&(e=this.schemas.size),t._definition=E.create(t._definition),t._typeid=e,this.types[e]=t,this.schemas.set(t,e)},t.create=function(e){return void 0===e&&(e={}),function(n){return e.context||(e.context=new t),$(n,e)}},t}(),O=new _;function $(t,e){return void 0===e&&(e={}),function(n,o){var i=e.context||O,s=n.constructor;if(s._context=i,!t)throw new Error("".concat(s.name,': @type() reference provided for "').concat(o,"\" is undefined. Make sure you don't have any circular dependencies."));i.has(s)||i.add(s);var a=s._definition;if(a.addField(o,t),a.descriptors[o]){if(a.deprecated[o])return;try{throw new Error("@colyseus/schema: Duplicate '".concat(o,"' definition on '").concat(s.name,"'.\nCheck @type() annotation"))}catch(t){var c=t.stack.split("\n")[4].trim();throw new Error("".concat(t.message," ").concat(c))}}var f=p.is(t),h=!f&&y.is(t);if("string"!=typeof t&&!Rt.is(t)){var u=Object.values(t)[0];"string"==typeof u||i.has(u)||i.add(u)}if(e.manual)a.descriptors[o]={enumerable:!0,configurable:!0,writable:!0};else{var d="_".concat(o);a.descriptors[d]={enumerable:!1,configurable:!1,writable:!0},a.descriptors[o]={get:function(){return this[d]},set:function(t){t!==this[d]&&(null!=t?(!f||t instanceof p||(t=new(p.bind.apply(p,r([void 0],t,!1)))),!h||t instanceof y||(t=new y(t)),void 0===t.$proxy&&(h?t=v(t):f&&(t=l(t))),this.$changes.change(o),t.$changes&&t.$changes.setParent(this,this.$changes.root,this._definition.indexes[o])):this[d]&&this.$changes.delete(o),this[d]=t)},enumerable:!0,configurable:!0}}}}function b(t){return function(e,n){var o=e.constructor;o._definition.addFilter(n,t)&&(o._context.useFilters=!0)}}function I(t){return function(e,n){var o=e.constructor;o._definition.addChildrenFilter(n,t)&&(o._context.useFilters=!0)}}function x(t){return void 0===t&&(t=!0),function(e,n){var o=e.constructor._definition;o.deprecated[n]=!0,t&&(o.descriptors[n]={get:function(){throw new Error("".concat(n," is deprecated."))},set:function(t){},enumerable:!1,configurable:!0})}}function T(t,e,n){for(var o in void 0===n&&(n={}),n.context||(n.context=t._context||n.context||O),e)$(e[o],n)(t.prototype,o);return t}function R(t){for(var e=0,n=0,o=0,r=t.length;o<r;o++)(e=t.charCodeAt(o))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(o++,n+=4);return n}function C(t,e,n){for(var o=0,r=0,i=n.length;r<i;r++)(o=n.charCodeAt(r))<128?t[e++]=o:o<2048?(t[e++]=192|o>>6,t[e++]=128|63&o):o<55296||o>=57344?(t[e++]=224|o>>12,t[e++]=128|o>>6&63,t[e++]=128|63&o):(r++,o=65536+((1023&o)<<10|1023&n.charCodeAt(r)),t[e++]=240|o>>18,t[e++]=128|o>>12&63,t[e++]=128|o>>6&63,t[e++]=128|63&o)}function P(t,e){t.push(255&e)}function D(t,e){t.push(255&e)}function k(t,e){t.push(255&e),t.push(e>>8&255)}function S(t,e){t.push(255&e),t.push(e>>8&255)}function N(t,e){t.push(255&e),t.push(e>>8&255),t.push(e>>16&255),t.push(e>>24&255)}function M(t,e){var n=e>>24,o=e>>16,r=e>>8,i=e;t.push(255&i),t.push(255&r),t.push(255&o),t.push(255&n)}function L(t,e){var n=Math.floor(e/Math.pow(2,32));M(t,e>>>0),M(t,n)}function j(t,e){var n=e/Math.pow(2,32)>>0;M(t,e>>>0),M(t,n)}function U(t,e){z(t,e)}function B(t,e){J(t,e)}var F=new Int32Array(2),H=new Float32Array(F.buffer),V=new Float64Array(F.buffer);function z(t,e){H[0]=e,N(t,F[0])}function J(t,e){V[0]=e,N(t,F[0]),N(t,F[1])}function W(t,e){return D(t,e?1:0)}function q(t,e){e||(e="");var n=R(e),o=0;if(n<32)t.push(160|n),o=1;else if(n<256)t.push(217),D(t,n),o=2;else if(n<65536)t.push(218),S(t,n),o=3;else{if(!(n<4294967296))throw new Error("String too long");t.push(219),M(t,n),o=5}return C(t,t.length,e),o+n}function K(t,e){return isNaN(e)?K(t,0):isFinite(e)?e!==(0|e)?(t.push(203),J(t,e),9):e>=0?e<128?(D(t,e),1):e<256?(t.push(204),D(t,e),2):e<65536?(t.push(205),S(t,e),3):e<4294967296?(t.push(206),M(t,e),5):(t.push(207),j(t,e),9):e>=-32?(t.push(224|e+32),1):e>=-128?(t.push(208),P(t,e),2):e>=-32768?(t.push(209),k(t,e),3):e>=-2147483648?(t.push(210),N(t,e),5):(t.push(211),L(t,e),9):K(t,e>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER)}var X=Object.freeze({__proto__:null,utf8Write:C,int8:P,uint8:D,int16:k,uint16:S,int32:N,uint32:M,int64:L,uint64:j,float32:U,float64:B,writeFloat32:z,writeFloat64:J,boolean:W,string:q,number:K});function Y(t,e,n){for(var o="",r=0,i=e,s=e+n;i<s;i++){var a=t[i];0!=(128&a)?192!=(224&a)?224!=(240&a)?240!=(248&a)?console.error("Invalid byte "+a.toString(16)):(r=(7&a)<<18|(63&t[++i])<<12|(63&t[++i])<<6|(63&t[++i])<<0)>=65536?(r-=65536,o+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):o+=String.fromCharCode(r):o+=String.fromCharCode((15&a)<<12|(63&t[++i])<<6|(63&t[++i])<<0):o+=String.fromCharCode((31&a)<<6|63&t[++i]):o+=String.fromCharCode(a)}return o}function G(t,e){return Q(t,e)<<24>>24}function Q(t,e){return t[e.offset++]}function Z(t,e){return tt(t,e)<<16>>16}function tt(t,e){return t[e.offset++]|t[e.offset++]<<8}function et(t,e){return t[e.offset++]|t[e.offset++]<<8|t[e.offset++]<<16|t[e.offset++]<<24}function nt(t,e){return et(t,e)>>>0}function ot(t,e){return ht(t,e)}function rt(t,e){return ut(t,e)}function it(t,e){var n=nt(t,e);return et(t,e)*Math.pow(2,32)+n}function st(t,e){var n=nt(t,e);return nt(t,e)*Math.pow(2,32)+n}var at=new Int32Array(2),ct=new Float32Array(at.buffer),ft=new Float64Array(at.buffer);function ht(t,e){return at[0]=et(t,e),ct[0]}function ut(t,e){return at[0]=et(t,e),at[1]=et(t,e),ft[0]}function dt(t,e){return Q(t,e)>0}function lt(t,e){var n,o=t[e.offset++];o<192?n=31&o:217===o?n=Q(t,e):218===o?n=tt(t,e):219===o&&(n=nt(t,e));var r=Y(t,e.offset,n);return e.offset+=n,r}function pt(t,e){var n=t[e.offset];return n<192&&n>160||217===n||218===n||219===n}function vt(t,e){var n=t[e.offset++];return n<128?n:202===n?ht(t,e):203===n?ut(t,e):204===n?Q(t,e):205===n?tt(t,e):206===n?nt(t,e):207===n?st(t,e):208===n?G(t,e):209===n?Z(t,e):210===n?et(t,e):211===n?it(t,e):n>223?-1*(255-n+1):void 0}function yt(t,e){var n=t[e.offset];return n<128||n>=202&&n<=211}function gt(t,e){return t[e.offset]<160}function mt(t,e){return t[e.offset-1]===s&&(t[e.offset]<128||t[e.offset]>=202&&t[e.offset]<=211)}var wt=Object.freeze({__proto__:null,int8:G,uint8:Q,int16:Z,uint16:tt,int32:et,uint32:nt,float32:ot,float64:rt,int64:it,uint64:st,readFloat32:ht,readFloat64:ut,boolean:dt,string:lt,stringCheck:pt,number:vt,numberCheck:yt,arrayCheck:gt,switchStructureCheck:mt}),Et=function(){function e(t){var e=this;this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t&&t.forEach((function(t){return e.add(t)}))}return e.prototype.onAdd=function(e,n){return void 0===n&&(n=!0),f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.ADD,e,n?this.$items:void 0)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.is=function(t){return void 0!==t.collection},e.prototype.add=function(t){var e=this.$refId++;return void 0!==t.$changes&&t.$changes.setParent(this,this.$changes.root,e),this.$changes.indexes[e]=e,this.$indexes.set(e,e),this.$items.set(e,t),this.$changes.change(e),e},e.prototype.at=function(t){var e=Array.from(this.$items.keys())[t];return this.$items.get(e)},e.prototype.entries=function(){return this.$items.entries()},e.prototype.delete=function(t){for(var e,n,o=this.$items.entries();(n=o.next())&&!n.done;)if(t===n.value[1]){e=n.value[0];break}return void 0!==e&&(this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e))},e.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&h.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){return Array.from(this.$items.values()).some((function(e){return e===t}))},e.prototype.forEach=function(t){var e=this;this.$items.forEach((function(n,o,r){return t(n,o,e)}))},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){var t=[];return this.forEach((function(e,n){t.push("function"==typeof e.toJSON?e.toJSON():e)})),t},e.prototype.clone=function(t){var n;return t?n=Object.assign(new e,this):(n=new e,this.forEach((function(t){t.$changes?n.add(t.clone()):n.add(t)}))),n},e}(),At=function(){function e(t){var e=this;this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t&&t.forEach((function(t){return e.add(t)}))}return e.prototype.onAdd=function(e,n){return void 0===n&&(n=!0),f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.ADD,e,n?this.$items:void 0)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.is=function(t){return void 0!==t.set},e.prototype.add=function(e){var n,o;if(this.has(e))return!1;var r=this.$refId++;void 0!==e.$changes&&e.$changes.setParent(this,this.$changes.root,r);var i=null!==(o=null===(n=this.$changes.indexes[r])||void 0===n?void 0:n.op)&&void 0!==o?o:t.OPERATION.ADD;return this.$changes.indexes[r]=r,this.$indexes.set(r,r),this.$items.set(r,e),this.$changes.change(r,i),r},e.prototype.entries=function(){return this.$items.entries()},e.prototype.delete=function(t){for(var e,n,o=this.$items.entries();(n=o.next())&&!n.done;)if(t===n.value[1]){e=n.value[0];break}return void 0!==e&&(this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e))},e.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&h.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){for(var e,n=this.$items.values(),o=!1;(e=n.next())&&!e.done;)if(t===e.value){o=!0;break}return o},e.prototype.forEach=function(t){var e=this;this.$items.forEach((function(n,o,r){return t(n,o,e)}))},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){var t=[];return this.forEach((function(e,n){t.push("function"==typeof e.toJSON?e.toJSON():e)})),t},e.prototype.clone=function(t){var n;return t?n=Object.assign(new e,this):(n=new e,this.forEach((function(t){t.$changes?n.add(t.clone()):n.add(t)}))),n},e}(),_t=function(){function t(){this.refIds=new WeakSet,this.containerIndexes=new WeakMap}return t.prototype.addRefId=function(t){this.refIds.has(t)||(this.refIds.add(t),this.containerIndexes.set(t,new Set))},t.get=function(e){return void 0===e.$filterState&&(e.$filterState=new t),e.$filterState},t}(),Ot=function(){function t(){this.refs=new Map,this.refCounts={},this.deletedRefs=new Set,this.nextUniqueId=0}return t.prototype.getNextUniqueId=function(){return this.nextUniqueId++},t.prototype.addRef=function(t,e,n){void 0===n&&(n=!0),this.refs.set(t,e),n&&(this.refCounts[t]=(this.refCounts[t]||0)+1)},t.prototype.removeRef=function(t){this.refCounts[t]=this.refCounts[t]-1,this.deletedRefs.add(t)},t.prototype.clearRefs=function(){this.refs.clear(),this.deletedRefs.clear(),this.refCounts={}},t.prototype.garbageCollectDeletedRefs=function(){var t=this;this.deletedRefs.forEach((function(e){if(!(t.refCounts[e]>0)){var n=t.refs.get(e);if(n instanceof Rt)for(var o in n._definition.schema)"string"!=typeof n._definition.schema[o]&&n[o]&&n[o].$changes&&t.removeRef(n[o].$changes.refId);else{var r=n.$changes.parent._definition,i=r.schema[r.fieldsByIndex[n.$changes.parentIndex]];"function"==typeof Object.values(i)[0]&&Array.from(n.values()).forEach((function(e){return t.removeRef(e.$changes.refId)}))}t.refs.delete(e),delete t.refCounts[e]}})),this.deletedRefs.clear()},t}(),$t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(Error);function bt(t,e,n,o){var r,i=!1;switch(e){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":r="number",isNaN(t)&&console.log('trying to encode "NaN" in '.concat(n.constructor.name,"#").concat(o));break;case"string":r="string",i=!0;break;case"boolean":return}if(typeof t!==r&&(!i||i&&null!==t)){var s="'".concat(JSON.stringify(t),"'").concat(t&&t.constructor&&" (".concat(t.constructor.name,")")||"");throw new $t("a '".concat(r,"' was expected, but ").concat(s," was provided in ").concat(n.constructor.name,"#").concat(o))}}function It(t,e,n,o){if(!(t instanceof e))throw new $t("a '".concat(e.name,"' was expected, but '").concat(t.constructor.name,"' was provided in ").concat(n.constructor.name,"#").concat(o))}function xt(t,e,n,o,r){bt(n,t,o,r);var i=X[t];if(!i)throw new $t("a '".concat(t,"' was expected, but ").concat(n," was provided in ").concat(o.constructor.name,"#").concat(r));i(e,n)}function Tt(t,e,n){return wt[t](e,n)}var Rt=function(){function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Object.defineProperties(this,{$changes:{value:new c(this,void 0,new Ot),enumerable:!1,writable:!0},$callbacks:{value:void 0,enumerable:!1,writable:!0}});var n=this._definition.descriptors;n&&Object.defineProperties(this,n),t[0]&&this.assign(t[0])}return e.onError=function(t){console.error(t)},e.is=function(t){return t._definition&&void 0!==t._definition.schema},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.assign=function(t){return Object.assign(this,t),this},Object.defineProperty(e.prototype,"_definition",{get:function(){return this.constructor._definition},enumerable:!1,configurable:!0}),e.prototype.setDirty=function(t,e){this.$changes.change(t,e)},e.prototype.listen=function(t,e,n){var o=this;return void 0===n&&(n=!0),this.$callbacks||(this.$callbacks={}),this.$callbacks[t]||(this.$callbacks[t]=[]),this.$callbacks[t].push(e),n&&void 0!==this[t]&&e(this[t],void 0),function(){return u(o.$callbacks[t],o.$callbacks[t].indexOf(e))}},e.prototype.decode=function(n,o,r){var i;void 0===o&&(o={offset:0}),void 0===r&&(r=this);var a=[],c=this.$changes.root,f=n.length,h=0;for(c.refs.set(h,this);o.offset<f;){var u=n[o.offset++];if(u!=s){var d=r.$changes,l=void 0!==r._definition,v=l?u>>6<<6:u;if(v!==t.OPERATION.CLEAR){var g=l?u%(v||255):vt(n,o),m=l?r._definition.fieldsByIndex[g]:"",E=d.getType(g),A=void 0,_=void 0,O=void 0;if(l?_=r["_".concat(m)]:(_=r.getByIndex(g),(v&t.OPERATION.ADD)===t.OPERATION.ADD?(O=r instanceof y?lt(n,o):g,r.setIndex(g,O)):O=r.getIndex(g)),(v&t.OPERATION.DELETE)===t.OPERATION.DELETE&&(v!==t.OPERATION.DELETE_AND_ADD&&r.deleteByIndex(g),_&&_.$changes&&c.removeRef(_.$changes.refId),A=null),void 0!==m){if(v===t.OPERATION.DELETE);else if(e.is(E)){var $=vt(n,o);if(A=c.refs.get($),v!==t.OPERATION.REPLACE){var b=this.getSchemaType(n,o,E);A||((A=this.createTypeInstance(b)).$changes.refId=$,_&&(A.$callbacks=_.$callbacks,_.$changes.refId&&$!==_.$changes.refId&&c.removeRef(_.$changes.refId))),c.addRef($,A,A!==_)}}else if("string"==typeof E)A=Tt(E,n,o);else{var I=w(Object.keys(E)[0]),x=vt(n,o),T=c.refs.has(x)?_||c.refs.get(x):new I.constructor;if((A=T.clone(!0)).$changes.refId=x,_&&(A.$callbacks=_.$callbacks,_.$changes.refId&&x!==_.$changes.refId)){c.removeRef(_.$changes.refId);for(var R=_.entries(),C=void 0;(C=R.next())&&!C.done;){var P=(i=C.value)[0],D=i[1];a.push({refId:x,op:t.OPERATION.DELETE,field:P,value:void 0,previousValue:D})}}c.addRef(x,A,T!==_)}if(null!=A)if(A.$changes&&A.$changes.setParent(d.ref,d.root,g),r instanceof e)r[m]=A;else if(r instanceof y)P=O,r.$items.set(P,A),r.$changes.allChanges.add(g);else if(r instanceof p)r.setAt(g,A);else if(r instanceof Et){var k=r.add(A);r.setIndex(g,k)}else r instanceof At&&!1!==(k=r.add(A))&&r.setIndex(g,k);_!==A&&a.push({refId:h,op:v,field:m,dynamicIndex:O,value:A,previousValue:_})}else{console.warn("@colyseus/schema: definition mismatch");for(var S={offset:o.offset};o.offset<f&&(!mt(n,o)||(S.offset=o.offset+1,!c.refs.has(vt(n,S))));)o.offset++}}else r.clear(a)}else{h=vt(n,o);var N=c.refs.get(h);if(!N)throw new Error('"refId" not found: '.concat(h));r=N}}return this._triggerChanges(a),c.garbageCollectDeletedRefs(),a},e.prototype.encode=function(n,o,r){void 0===n&&(n=!1),void 0===o&&(o=[]),void 0===r&&(r=!1);for(var i=this.$changes,a=new WeakSet,c=[i],f=1,h=0;h<f;h++){var u=c[h],d=u.ref,l=d instanceof e;u.ensureRefId(),a.add(u),u!==i&&(u.changed||n)&&(D(o,s),K(o,u.refId));for(var p=n?Array.from(u.allChanges):Array.from(u.changes.values()),v=0,g=p.length;v<g;v++){var m=n?{op:t.OPERATION.ADD,index:p[v]}:p[v],E=m.index,A=l?d._definition.fieldsByIndex&&d._definition.fieldsByIndex[E]:E,_=o.length;if(m.op!==t.OPERATION.TOUCH)if(l)D(o,E|m.op);else{if(D(o,m.op),m.op===t.OPERATION.CLEAR)continue;K(o,E)}if(l||(m.op&t.OPERATION.ADD)!=t.OPERATION.ADD||d instanceof y&&q(o,u.ref.$indexes.get(E)),m.op!==t.OPERATION.DELETE){var O=u.getType(E),$=u.getValue(E);if($&&$.$changes&&!a.has($.$changes)&&(c.push($.$changes),$.$changes.ensureRefId(),f++),m.op!==t.OPERATION.TOUCH){if(e.is(O))It($,O,d,A),K(o,$.$changes.refId),(m.op&t.OPERATION.ADD)===t.OPERATION.ADD&&this.tryEncodeTypeId(o,O,$.constructor);else if("string"==typeof O)xt(O,o,$,d,A);else{var b=w(Object.keys(O)[0]);It(d["_".concat(A)],b.constructor,d,A),K(o,$.$changes.refId)}r&&u.cache(E,o.slice(_))}}}n||r||u.discard()}return o},e.prototype.encodeAll=function(t){return this.encode(!0,[],t)},e.prototype.applyFilters=function(n,o){var r,i;void 0===o&&(o=!1);for(var a=this,c=new Set,f=_t.get(n),h=[this.$changes],u=1,d=[],l=function(l){var p=h[l];if(c.has(p.refId))return"continue";var v=p.ref,g=v instanceof e;D(d,s),K(d,p.refId);var m=f.refIds.has(p),w=o||!m;f.addRefId(p);var E=f.containerIndexes.get(p),A=w?Array.from(p.allChanges):Array.from(p.changes.values());!o&&g&&v._definition.indexesWithFilters&&v._definition.indexesWithFilters.forEach((function(e){!E.has(e)&&p.allChanges.has(e)&&(w?A.push(e):A.push({op:t.OPERATION.ADD,index:e}))}));for(var _=0,O=A.length;_<O;_++){var $=w?{op:t.OPERATION.ADD,index:A[_]}:A[_];if($.op!==t.OPERATION.CLEAR){var b=$.index;if($.op!==t.OPERATION.DELETE){var I=p.getValue(b),x=p.getType(b);if(g){if((T=v._definition.filters&&v._definition.filters[b])&&!T.call(v,n,I,a)){I&&I.$changes&&c.add(I.$changes.refId);continue}}else{var T,R=p.parent;if((T=p.getChildrenFilter())&&!T.call(R,n,v.$indexes.get(b),I,a)){I&&I.$changes&&c.add(I.$changes.refId);continue}}if(I.$changes&&(h.push(I.$changes),u++),$.op!==t.OPERATION.TOUCH)if($.op===t.OPERATION.ADD||g)d.push.apply(d,null!==(r=p.caches[b])&&void 0!==r?r:[]),E.add(b);else if(E.has(b))d.push.apply(d,null!==(i=p.caches[b])&&void 0!==i?i:[]);else{if(E.add(b),D(d,t.OPERATION.ADD),K(d,b),v instanceof y){var C=p.ref.$indexes.get(b);q(d,C)}I.$changes?K(d,I.$changes.refId):X[x](d,I)}else I.$changes&&!g&&(D(d,t.OPERATION.ADD),K(d,b),v instanceof y&&(C=p.ref.$indexes.get(b),q(d,C)),K(d,I.$changes.refId))}else g?D(d,$.op|b):(D(d,$.op),K(d,b))}else D(d,$.op)}},p=0;p<u;p++)l(p);return d},e.prototype.clone=function(){var t,e=new this.constructor,n=this._definition.schema;for(var o in n)"object"==typeof this[o]&&"function"==typeof(null===(t=this[o])||void 0===t?void 0:t.clone)?e[o]=this[o].clone():e[o]=this[o];return e},e.prototype.toJSON=function(){var t=this._definition.schema,e=this._definition.deprecated,n={};for(var o in t)e[o]||null===this[o]||void 0===this[o]||(n[o]="function"==typeof this[o].toJSON?this[o].toJSON():this["_".concat(o)]);return n},e.prototype.discardAllChanges=function(){this.$changes.discardAll()},e.prototype.getByIndex=function(t){return this[this._definition.fieldsByIndex[t]]},e.prototype.deleteByIndex=function(t){this[this._definition.fieldsByIndex[t]]=void 0},e.prototype.tryEncodeTypeId=function(t,e,n){e._typeid!==n._typeid&&(D(t,a),K(t,n._typeid))},e.prototype.getSchemaType=function(t,e,n){var o;return t[e.offset]===a&&(e.offset++,o=this.constructor._context.get(vt(t,e))),o||n},e.prototype.createTypeInstance=function(t){var e=new t;return e.$changes.root=this.$changes.root,e},e.prototype._triggerChanges=function(n){for(var o,r,i,s,a,c,f,h,u,d=new Set,l=this.$changes.root.refs,p=function(p){var v=n[p],y=v.refId,g=l.get(y),m=g.$callbacks;if((v.op&t.OPERATION.DELETE)===t.OPERATION.DELETE&&v.previousValue instanceof e&&(null===(r=null===(o=v.previousValue.$callbacks)||void 0===o?void 0:o[t.OPERATION.DELETE])||void 0===r||r.forEach((function(t){return t()}))),!m)return"continue";if(g instanceof e){if(!d.has(y))try{null===(i=null==m?void 0:m[t.OPERATION.REPLACE])||void 0===i||i.forEach((function(t){return t(n)}))}catch(t){e.onError(t)}try{m.hasOwnProperty(v.field)&&(null===(s=m[v.field])||void 0===s||s.forEach((function(t){return t(v.value,v.previousValue)})))}catch(t){e.onError(t)}}else v.op===t.OPERATION.ADD&&void 0===v.previousValue?null===(a=m[t.OPERATION.ADD])||void 0===a||a.forEach((function(t){var e;return t(v.value,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)})):v.op===t.OPERATION.DELETE?void 0!==v.previousValue&&(null===(c=m[t.OPERATION.DELETE])||void 0===c||c.forEach((function(t){var e;return t(v.previousValue,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)}))):v.op===t.OPERATION.DELETE_AND_ADD&&(void 0!==v.previousValue&&(null===(f=m[t.OPERATION.DELETE])||void 0===f||f.forEach((function(t){var e;return t(v.previousValue,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)}))),null===(h=m[t.OPERATION.ADD])||void 0===h||h.forEach((function(t){var e;return t(v.value,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)}))),v.value!==v.previousValue&&(null===(u=m[t.OPERATION.REPLACE])||void 0===u||u.forEach((function(t){var e;return t(v.value,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)})));d.add(y)},v=0;v<n.length;v++)p(v)},e._definition=E.create(),e}();function Ct(t){for(var e=[t.$changes],n=1,o={},r=o,i=function(t){var n=e[t];n.changes.forEach((function(t){var e=n.ref,o=t.index,i=e._definition?e._definition.fieldsByIndex[o]:e.$indexes.get(o);r[i]=n.getValue(o)}))},s=0;s<n;s++)i(s);return o}var Pt={context:new _},Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([$("string",Pt)],e.prototype,"name",void 0),o([$("string",Pt)],e.prototype,"type",void 0),o([$("number",Pt)],e.prototype,"referencedType",void 0),e}(Rt),kt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fields=new p,e}return n(e,t),o([$("number",Pt)],e.prototype,"id",void 0),o([$([Dt],Pt)],e.prototype,"fields",void 0),e}(Rt),St=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.types=new p,e}return n(e,t),e.encode=function(t){var n=t.constructor,o=new e;o.rootType=n._typeid;var r=function(t,e){for(var n in e){var r=new Dt;r.name=n;var i=void 0;if("string"==typeof e[n])i=e[n];else{var s=e[n],a=void 0;Rt.is(s)?(i="ref",a=e[n]):"string"==typeof s[i=Object.keys(s)[0]]?i+=":"+s[i]:a=s[i],r.referencedType=a?a._typeid:-1}r.type=i,t.fields.push(r)}o.types.push(t)},i=n._context.types;for(var s in i){var a=new kt;a.id=Number(s),r(a,i[s]._definition.schema)}return o.encodeAll()},e.decode=function(t,o){var r=new _,i=new e;i.decode(t,o);var s=i.types.reduce((function(t,e){var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(Rt),i=e.id;return t[i]=o,r.add(o,i),t}),{});i.types.forEach((function(t){var e=s[t.id];t.fields.forEach((function(t){var n;if(void 0!==t.referencedType){var o=t.type,i=s[t.referencedType];if(!i){var a=t.type.split(":");o=a[0],i=a[1]}"ref"===o?$(i,{context:r})(e.prototype,t.name):$(((n={})[o]=i,n),{context:r})(e.prototype,t.name)}else $(t.type,{context:r})(e.prototype,t.name)}))}));var a=s[i.rootType],c=new a;for(var f in a._definition.schema){var h=a._definition.schema[f];"string"!=typeof h&&(c[f]="function"==typeof h?new h:new(w(Object.keys(h)[0]).constructor))}return c},o([$([kt],Pt)],e.prototype,"types",void 0),o([$("number",Pt)],e.prototype,"rootType",void 0),e}(Rt);m("map",{constructor:y}),m("array",{constructor:p}),m("set",{constructor:At}),m("collection",{constructor:Et}),t.ArraySchema=p,t.CollectionSchema=Et,t.Context=_,t.MapSchema=y,t.Reflection=St,t.ReflectionField=Dt,t.ReflectionType=kt,t.Schema=Rt,t.SchemaDefinition=E,t.SetSchema=At,t.decode=wt,t.defineTypes=T,t.deprecated=x,t.dumpChanges=Ct,t.encode=X,t.filter=b,t.filterChildren=I,t.hasFilter=A,t.registerType=m,t.type=$,Object.defineProperty(t,"__esModule",{value:!0})}(e)})),T=function(){function e(t,e){var n=this;this.onStateChange=I(),this.onError=I(),this.onLeave=I(),this.onJoin=I(),this.hasJoined=!1,this.onMessageHandlers={emit:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=this.events[t]||[],r=0,i=o.length;r<i;r++)o[r].apply(o,e)},events:{},on:function(t,e){var n,o=this;return(null===(n=this.events[t])||void 0===n?void 0:n.push(e))||(this.events[t]=[e]),function(){var n;o.events[t]=null===(n=o.events[t])||void 0===n?void 0:n.filter((function(t){return e!==t}))}}},this.roomId=null,this.name=t,e&&(this.serializer=new($("schema")),this.rootSchema=e,this.serializer.state=new e),this.onError((function(t,e){var n;return null===(n=console.warn)||void 0===n?void 0:n.call(console,"colyseus.js - onError => (".concat(t,") ").concat(e))})),this.onLeave((function(){return n.removeAllListeners()}))}return Object.defineProperty(e.prototype,"id",{get:function(){return this.roomId},enumerable:!1,configurable:!0}),e.prototype.connect=function(t,n,o){void 0===o&&(o=this);var i=new w;o.connection=i,i.events.onmessage=e.prototype.onMessageCallback.bind(o),i.events.onclose=function(t){var e;if(!o.hasJoined)return null===(e=console.warn)||void 0===e||e.call(console,"Room connection was closed unexpectedly (".concat(t.code,"): ").concat(t.reason)),void o.onError.invoke(t.code,t.reason);t.code===r.DEVMODE_RESTART&&n?n():(o.onLeave.invoke(t.code),o.destroy())},i.events.onerror=function(t){var e;null===(e=console.warn)||void 0===e||e.call(console,"Room, onError (".concat(t.code,"): ").concat(t.reason)),o.onError.invoke(t.code,t.reason)},i.connect(t)},e.prototype.leave=function(e){var n=this;return void 0===e&&(e=!0),new Promise((function(o){n.onLeave((function(t){return o(t)})),n.connection?e?n.connection.send([t.Protocol.LEAVE_ROOM]):n.connection.close():n.onLeave.invoke(r.CONSENTED)}))},e.prototype.onMessage=function(t,e){return this.onMessageHandlers.on(this.getMessageHandlerKey(t),e)},e.prototype.send=function(e,n){var o,r=[t.Protocol.ROOM_DATA];if("string"==typeof e?x.encode.string(r,e):x.encode.number(r,e),void 0!==n){var i=p(n);(o=new Uint8Array(r.length+i.byteLength)).set(new Uint8Array(r),0),o.set(new Uint8Array(i),r.length)}else o=new Uint8Array(r);this.connection.send(o.buffer)},e.prototype.sendBytes=function(e,n){var o,r=[t.Protocol.ROOM_DATA_BYTES];"string"==typeof e?x.encode.string(r,e):x.encode.number(r,e),(o=new Uint8Array(r.length+(n.byteLength||n.length))).set(new Uint8Array(r),0),o.set(new Uint8Array(n),r.length),this.connection.send(o.buffer)},Object.defineProperty(e.prototype,"state",{get:function(){return this.serializer.getState()},enumerable:!1,configurable:!0}),e.prototype.removeAllListeners=function(){this.onJoin.clear(),this.onStateChange.clear(),this.onError.clear(),this.onLeave.clear(),this.onMessageHandlers.events={}},e.prototype.onMessageCallback=function(e){var n=Array.from(new Uint8Array(e.data)),o=n[0];if(o===t.Protocol.JOIN_ROOM){var r=1,i=E(n,r);if(r+=A(i),this.serializerId=E(n,r),r+=A(this.serializerId),!this.serializer){var s=$(this.serializerId);this.serializer=new s}n.length>r&&this.serializer.handshake&&this.serializer.handshake(n,{offset:r}),this.reconnectionToken="".concat(this.roomId,":").concat(i),this.hasJoined=!0,this.onJoin.invoke(),this.connection.send([t.Protocol.JOIN_ROOM])}else if(o===t.Protocol.ERROR){var a={offset:1},c=x.decode.number(n,a),f=x.decode.string(n,a);this.onError.invoke(c,f)}else if(o===t.Protocol.LEAVE_ROOM)this.leave();else if(o===t.Protocol.ROOM_DATA_SCHEMA){var h={offset:1};(f=new(l=this.serializer.getState().constructor._context.get(x.decode.number(n,h)))).decode(n,h),this.dispatchMessage(l,f)}else if(o===t.Protocol.ROOM_STATE)n.shift(),this.setState(n);else if(o===t.Protocol.ROOM_STATE_PATCH)n.shift(),this.patch(n);else if(o===t.Protocol.ROOM_DATA){var d={offset:1},l=x.decode.stringCheck(n,d)?x.decode.string(n,d):x.decode.number(n,d);f=n.length>d.offset?function(t,e){void 0===e&&(e=0);var n=new u(t,e),o=n._parse();if(n._offset!==t.byteLength)throw new Error(t.byteLength-n._offset+" trailing bytes");return o}(e.data,d.offset):void 0;this.dispatchMessage(l,f)}else if(o===t.Protocol.ROOM_DATA_BYTES){var p={offset:1};l=x.decode.stringCheck(n,p)?x.decode.string(n,p):x.decode.number(n,p);this.dispatchMessage(l,new Uint8Array(n.slice(p.offset)))}},e.prototype.setState=function(t){this.serializer.setState(t),this.onStateChange.invoke(this.serializer.getState())},e.prototype.patch=function(t){this.serializer.patch(t),this.onStateChange.invoke(this.serializer.getState())},e.prototype.dispatchMessage=function(t,e){var n,o=this.getMessageHandlerKey(t);this.onMessageHandlers.events[o]?this.onMessageHandlers.emit(o,e):this.onMessageHandlers.events["*"]?this.onMessageHandlers.emit("*",t,e):null===(n=console.warn)||void 0===n||n.call(console,"colyseus.js: onMessage() not registered for type '".concat(t,"'."))},e.prototype.destroy=function(){this.serializer&&this.serializer.teardown()},e.prototype.getMessageHandlerKey=function(t){switch(typeof t){case"function":return"$".concat(t._typeid);case"string":return t;case"number":return"i".concat(t);default:throw new Error("invalid message type.")}},e}();function R(t,e){e.headers=t.headers||{},e.statusMessage=t.statusText,e.statusCode=t.status,e.data=t.response}function C(t,e,n){return new Promise((function(o,r){n=n||{};var i,s,a,c=new XMLHttpRequest,f=n.body,h=n.headers||{};for(i in n.timeout&&(c.timeout=n.timeout),c.ontimeout=c.onerror=function(t){t.timeout="timeout"==t.type,r(t)},c.open(t,e.href||e),c.onload=function(){for(a=c.getAllResponseHeaders().trim().split(/[\r\n]+/),R(c,c);s=a.shift();)s=s.split(": "),c.headers[s.shift().toLowerCase()]=s.join(": ");if((s=c.headers["content-type"])&&~s.indexOf("application/json"))try{c.data=JSON.parse(c.data,n.reviver)}catch(t){return R(c,t),r(t)}(c.status>=400?r:o)(c)},typeof FormData<"u"&&f instanceof FormData||f&&"object"==typeof f&&(h["content-type"]="application/json",f=JSON.stringify(f)),c.withCredentials=!!n.withCredentials,h)c.setRequestHeader(i,h[i]);c.send(f)}))}var P,D,k,S,N,M=C.bind(C,"GET"),L=C.bind(C,"POST"),j=C.bind(C,"PATCH"),U=C.bind(C,"DELETE"),B=C.bind(C,"PUT"),F={del:U,get:M,patch:j,post:L,put:B,send:C},H=e({__proto__:null,default:F,del:U,get:M,patch:j,post:L,put:B,send:C},[F]),V=function(){function t(t){this.client=t}return t.prototype.get=function(t,e){return void 0===e&&(e={}),this.request("get",t,e)},t.prototype.post=function(t,e){return void 0===e&&(e={}),this.request("post",t,e)},t.prototype.del=function(t,e){return void 0===e&&(e={}),this.request("del",t,e)},t.prototype.put=function(t,e){return void 0===e&&(e={}),this.request("put",t,e)},t.prototype.request=function(t,e,n){return void 0===n&&(n={}),H[t](this.client.getHttpEndpoint(e),this.getOptions(n)).catch((function(t){var e,n=t.statusCode,o=(null===(e=t.data)||void 0===e?void 0:e.error)||t.statusMessage||t.message;if(!n&&!o)throw t;throw new h(n,o)}))},t.prototype.getOptions=function(t){return this.authToken&&(t.headers||(t.headers={}),t.headers.Authorization="Bearer ".concat(this.authToken)),"undefined"!=typeof cc&&cc.sys&&cc.sys.isNative||(t.withCredentials=!0),t},t}();function z(){if(!P)try{P="undefined"!=typeof cc&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:window.localStorage}catch(t){}return P||(P={cache:{},setItem:function(t,e){this.cache[t]=e},getItem:function(t){this.cache[t]},removeItem:function(t){delete this.cache[t]}}),P}var J,W=function(){function t(t){var e,n,o,r=this;this.http=t,this.settings={path:"/auth",key:"colyseus-auth-token"},D.set(this,!1),k.set(this,void 0),S.set(this,void 0),N.set(this,{emit:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=this.events[t]||[],r=0,i=o.length;r<i;r++)o[r].apply(o,e)},events:{},on:function(t,e){var n,o=this;return(null===(n=this.events[t])||void 0===n?void 0:n.push(e))||(this.events[t]=[e]),function(){var n;o.events[t]=null===(n=o.events[t])||void 0===n?void 0:n.filter((function(t){return e!==t}))}}}),e=this.settings.key,n=function(t){return r.token=t},o=z().getItem(e),"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(t){return n(t)})):n(o)}return Object.defineProperty(t.prototype,"token",{get:function(){return this.http.authToken},set:function(t){this.http.authToken=t},enumerable:!1,configurable:!0}),t.prototype.onChange=function(t){var e=this,n=c(this,N,"f").on("change",t);return c(this,D,"f")||f(this,k,new Promise((function(t,n){e.getUserData().then((function(t){e.emitChange(i(i({},t),{token:e.token}))})).catch((function(t){e.emitChange({user:null,token:void 0})})).finally((function(){t()}))})),"f"),f(this,D,!0,"f"),n},t.prototype.getUserData=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.token?[4,this.http.get("".concat(this.settings.path,"/userdata"))]:[3,2];case 1:return[2,t.sent().data];case 2:throw new Error("missing auth.token")}}))}))},t.prototype.registerWithEmailAndPassword=function(t,e,n){return s(this,void 0,void 0,(function(){var o;return a(this,(function(r){switch(r.label){case 0:return[4,this.http.post("".concat(this.settings.path,"/register"),{body:{email:t,password:e,options:n}})];case 1:return o=r.sent().data,this.emitChange(o),[2,o]}}))}))},t.prototype.signInWithEmailAndPassword=function(t,e){return s(this,void 0,void 0,(function(){var n;return a(this,(function(o){switch(o.label){case 0:return[4,this.http.post("".concat(this.settings.path,"/login"),{body:{email:t,password:e}})];case 1:return n=o.sent().data,this.emitChange(n),[2,n]}}))}))},t.prototype.signInAnonymously=function(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return[4,this.http.post("".concat(this.settings.path,"/anonymous"),{body:{options:t}})];case 1:return e=n.sent().data,this.emitChange(e),[2,e]}}))}))},t.prototype.sendPasswordResetEmail=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.http.post("".concat(this.settings.path,"/forgot-password"),{body:{email:t}})];case 1:return[2,e.sent().data]}}))}))},t.prototype.signInWithProvider=function(t,e){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){var n=this;return a(this,(function(o){return[2,new Promise((function(o,r){var i=e.width||480,s=e.height||768,a=n.token?"?token=".concat(n.token):"",h="Login with ".concat(t[0].toUpperCase()+t.substring(1)),u=n.http.client.getHttpEndpoint("".concat(e.prefix||"".concat(n.settings.path,"/provider"),"/").concat(t).concat(a)),d=screen.width/2-i/2,l=screen.height/2-s/2;f(n,S,window.open(u,h,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+i+", height="+s+", top="+l+", left="+d),"f");var p=function t(e){void 0===e.data.user&&void 0===e.data.token||(clearInterval(v),c(n,S,"f").close(),f(n,S,void 0,"f"),window.removeEventListener("message",t),void 0!==e.data.error?r(e.data.error):(o(e.data),n.emitChange(e.data)))},v=setInterval((function(){c(n,S,"f")&&!c(n,S,"f").closed||(f(n,S,void 0,"f"),r("cancelled"),window.removeEventListener("message",p))}),200);window.addEventListener("message",p)}))]}))}))},t.prototype.signOut=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return this.emitChange({user:null,token:null}),[2]}))}))},t.prototype.emitChange=function(t){var e;void 0!==t.token&&(this.token=t.token,null===t.token?(e=this.settings.key,z().removeItem(e)):function(t,e){z().setItem(t,e)}(this.settings.key,t.token)),c(this,N,"f").emit("change",t)},t}();function q(t){var e,n=(null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.hostname)||"localhost",o=t.hostname.split("."),r=!t.hostname.includes("trycloudflare.com")&&!t.hostname.includes("discordsays.com")&&o.length>2?"/".concat(o[0]):"";return t.pathname.startsWith("/.proxy")?"".concat(t.protocol,"//").concat(n).concat(r).concat(t.pathname).concat(t.search):"".concat(t.protocol,"//").concat(n,"/.proxy/colyseus").concat(r).concat(t.pathname).concat(t.search)}D=new WeakMap,k=new WeakMap,S=new WeakMap,N=new WeakMap;var K=function(t){function e(n,o){var r=t.call(this,n)||this;return r.code=o,Object.setPrototypeOf(r,e.prototype),r}return o(e,t),e}(Error),X="undefined"!=typeof window&&void 0!==(null===(J=null===window||void 0===window?void 0:window.location)||void 0===J?void 0:J.hostname)?"".concat(window.location.protocol.replace("http","ws"),"//").concat(window.location.hostname).concat(window.location.port&&":".concat(window.location.port)):"ws://127.0.0.1:2567",Y=function(){function t(t,e){var n,o;if(void 0===t&&(t=X),"string"==typeof t){var r=t.startsWith("/")?new URL(t,X):new URL(t),i="https:"===r.protocol||"wss:"===r.protocol,s=Number(r.port||(i?443:80));this.settings={hostname:r.hostname,pathname:r.pathname,port:s,secure:i}}else void 0===t.port&&(t.port=t.secure?443:80),void 0===t.pathname&&(t.pathname=""),this.settings=t;this.settings.pathname.endsWith("/")&&(this.settings.pathname=this.settings.pathname.slice(0,-1)),this.http=new V(this),this.auth=new W(this.http),this.urlBuilder=e,!this.urlBuilder&&"undefined"!=typeof window&&(null===(o=null===(n=null===window||void 0===window?void 0:window.location)||void 0===n?void 0:n.hostname)||void 0===o?void 0:o.includes("discordsays.com"))&&(this.urlBuilder=q,console.log("Colyseus SDK: Discord Embedded SDK detected. Using custom URL builder."))}return t.prototype.joinOrCreate=function(t,e,n){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){return a(this,(function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("joinOrCreate",t,e,n)];case 1:return[2,o.sent()]}}))}))},t.prototype.create=function(t,e,n){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){return a(this,(function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("create",t,e,n)];case 1:return[2,o.sent()]}}))}))},t.prototype.join=function(t,e,n){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){return a(this,(function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("join",t,e,n)];case 1:return[2,o.sent()]}}))}))},t.prototype.joinById=function(t,e,n){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){return a(this,(function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("joinById",t,e,n)];case 1:return[2,o.sent()]}}))}))},t.prototype.reconnect=function(t,e){return s(this,void 0,void 0,(function(){var n,o,r;return a(this,(function(i){switch(i.label){case 0:if("string"==typeof t&&"string"==typeof e)throw new Error("DEPRECATED: .reconnect() now only accepts 'reconnectionToken' as argument.\nYou can get this token from previously connected `room.reconnectionToken`");if(n=t.split(":"),o=n[0],r=n[1],!o||!r)throw new Error("Invalid reconnection token format.\nThe format should be roomId:reconnectionToken");return[4,this.createMatchMakeRequest("reconnect",o,{reconnectionToken:r},e)];case 1:return[2,i.sent()]}}))}))},t.prototype.getAvailableRooms=function(t){return void 0===t&&(t=""),s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.http.get("matchmake/".concat(t),{headers:{Accept:"application/json"}})];case 1:return[2,e.sent().data]}}))}))},t.prototype.consumeSeatReservation=function(t,e,n){return s(this,void 0,void 0,(function(){var o,r,i,c=this;return a(this,(function(f){return(o=this.createRoom(t.room.name,e)).roomId=t.room.roomId,o.sessionId=t.sessionId,r={sessionId:o.sessionId},t.reconnectionToken&&(r.reconnectionToken=t.reconnectionToken),i=n||o,o.connect(this.buildEndpoint(t.room,r),t.devMode&&function(){return s(c,void 0,void 0,(function(){var n,r,c=this;return a(this,(function(f){return console.info("[Colyseus devMode]: ".concat(String.fromCodePoint(128260)," Re-establishing connection with room id '").concat(o.roomId,"'...")),n=0,8,r=function(){return s(c,void 0,void 0,(function(){return a(this,(function(s){switch(s.label){case 0:n++,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.consumeSeatReservation(t,e,i)];case 2:return s.sent(),console.info("[Colyseus devMode]: ".concat(String.fromCodePoint(9989)," Successfully re-established connection with room '").concat(o.roomId,"'")),[3,4];case 3:return s.sent(),n<8?(console.info("[Colyseus devMode]: ".concat(String.fromCodePoint(128260)," retrying... (").concat(n," out of ").concat(8,")")),setTimeout(r,2e3)):console.info("[Colyseus devMode]: ".concat(String.fromCodePoint(10060)," Failed to reconnect. Is your server running? Please check server logs.")),[3,4];case 4:return[2]}}))}))},setTimeout(r,2e3),[2]}))}))},i),[2,new Promise((function(t,e){var n=function(t,n){return e(new h(t,n))};i.onError.once(n),i.onJoin.once((function(){i.onError.remove(n),t(i)}))}))]}))}))},t.prototype.createMatchMakeRequest=function(t,e,n,o,r){return void 0===n&&(n={}),s(this,void 0,void 0,(function(){var i;return a(this,(function(s){switch(s.label){case 0:return[4,this.http.post("matchmake/".concat(t,"/").concat(e),{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})];case 1:if((i=s.sent().data).error)throw new K(i.error,i.code);return"reconnect"===t&&(i.reconnectionToken=n.reconnectionToken),[4,this.consumeSeatReservation(i,o,r)];case 2:return[2,s.sent()]}}))}))},t.prototype.createRoom=function(t,e){return new T(t,e)},t.prototype.buildEndpoint=function(t,e){void 0===e&&(e={});var n=[];for(var o in e)e.hasOwnProperty(o)&&n.push("".concat(o,"=").concat(e[o]));var r=this.settings.secure?"wss://":"ws://";t.publicAddress?r+="".concat(t.publicAddress):r+="".concat(this.settings.hostname).concat(this.getEndpointPort()).concat(this.settings.pathname);var i="".concat(r,"/").concat(t.processId,"/").concat(t.roomId,"?").concat(n.join("&"));return this.urlBuilder?this.urlBuilder(new URL(i)):i},t.prototype.getHttpEndpoint=function(t){void 0===t&&(t="");var e=t.startsWith("/")?t:"/".concat(t),n="".concat(this.settings.secure?"https":"http","://").concat(this.settings.hostname).concat(this.getEndpointPort()).concat(this.settings.pathname).concat(e);return this.urlBuilder?this.urlBuilder(new URL(n)):n},t.prototype.getEndpointPort=function(){return 80!==this.settings.port&&443!==this.settings.port?":".concat(this.settings.port):""},t}(),G=function(){function t(){}return t.prototype.setState=function(t){return this.state.decode(t)},t.prototype.getState=function(){return this.state},t.prototype.patch=function(t){return this.state.decode(t)},t.prototype.teardown=function(){var t,e;null===(e=null===(t=this.state)||void 0===t?void 0:t.$changes)||void 0===e||e.root.clearRefs()},t.prototype.handshake=function(t,e){this.state?(new x.Reflection).decode(t,e):this.state=x.Reflection.decode(t,e)},t}(),Q=function(){function t(){}return t.prototype.setState=function(t){},t.prototype.getState=function(){return null},t.prototype.patch=function(t){},t.prototype.teardown=function(){},t.prototype.handshake=function(t){},t}();O("schema",G),O("none",Q),t.Auth=W,t.Client=Y,t.Room=T,t.SchemaSerializer=G,t.registerSerializer=O,Object.defineProperty(t,"__esModule",{value:!0})})),t("default",o.exports),o.exports.Protocol,o.exports.ErrorCode,o.exports.OPERATION,o.exports.ArraySchema,o.exports.CollectionSchema,o.exports.Context,o.exports.MapSchema,o.exports.Reflection,o.exports.ReflectionField,o.exports.ReflectionType,o.exports.Schema,o.exports.SchemaDefinition,o.exports.SetSchema,o.exports.decode,o.exports.defineTypes,o.exports.deprecated,o.exports.dumpChanges,o.exports.encode,o.exports.filter,o.exports.filterChildren,o.exports.hasFilter,o.exports.registerType,o.exports.type,o.exports.__esModule,o.exports.Auth,o.exports.Client,o.exports.Room,o.exports.SchemaSerializer,o.exports.registerSerializer}),{})}}}));

System.register("chunks:///_virtual/colyseus.mjs_cjs=&original=.js",["./colyseus.js","./cjs-loader.mjs"],(function(e,s){var t,r;return{setters:[function(s){t=s.__cjsMetaURL;var r={};r.__cjsMetaURL=s.__cjsMetaURL,r.default=s.default,e(r)},function(e){r=e.default}],execute:function(){t||r.throwInvalidWrapper("./colyseus.js",s.meta.url),r.require(t)}}}));

System.register("chunks:///_virtual/Commands.ts",["cc"],(function(n){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"e815e2h+BlC2pVRrLmyJqEN","Commands",void 0);n("Command",function(n){return n[n.ROLL_DICE=0]="ROLL_DICE",n[n.CHOOSING_TOKEN=1]="CHOOSING_TOKEN",n}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/Constant.ts",["cc"],(function(E){var e,A;return{setters:[function(E){e=E.cclegacy,A=E.sys}],execute:function(){var _,a,c;e._RF.push({},"d4f13ObDVtCRZHEcRwboe54","Constant",void 0);E("SCALE_IN_SQUARE",[1,.7,.7,.7,.5,.5]),E("POS_IN_SQUARE",[[[0,0]],[[15,5],[-12,-9]],[[-12,5],[23,0],[-3,-14]],[[0,11],[-23,0],[23,0],[0,-14]],[[0,18],[-27,0],[0,0],[27,0],[0,-18]],[[0,18],[-27,0],[-13,-8],[13,9],[27,0],[0,-18]]]),E("Transfer",function(E){return E[E.ROLL_DICE=0]="ROLL_DICE",E[E.CHOOSING_TOKEN=1]="CHOOSING_TOKEN",E[E.END_RESULT=2]="END_RESULT",E[E.START_GAME=3]="START_GAME",E[E.CLIENT_READY=4]="CLIENT_READY",E[E.READY_ALL=5]="READY_ALL",E[E.KICK_PLAYER=6]="KICK_PLAYER",E[E.NOTI_BET=7]="NOTI_BET",E[E.WATCH_AD=8]="WATCH_AD",E[E.RECEIVE_AD_REWARD=9]="RECEIVE_AD_REWARD",E[E.AUTO_PLAY=10]="AUTO_PLAY",E[E.STOP_AUTO_PLAY=11]="STOP_AUTO_PLAY",E[E.THROW_ITEM=12]="THROW_ITEM",E[E.REQUEST_STICKER=13]="REQUEST_STICKER",E[E.ROOM_TIME_LEFT=14]="ROOM_TIME_LEFT",E[E.READY_PREPARING=15]="READY_PREPARING",E[E.READY_PLAYING=16]="READY_PLAYING",E[E.CHANGE_COLOR=17]="CHANGE_COLOR",E[E.CHANGE_SKIN=18]="CHANGE_SKIN",E}({})),E("SceneName",function(E){return E.Loading="Loading",E.HOME="Home",E.GAMEPLAY_SUPER="SuperModeGameplay",E.GAMEPLAY_CLASSIC="ClassicModeGameplay",E.PREPARING_ROOM="PreparingRoom",E.SHOP="Shop",E.LOBBY="Lobby",E.TUTORIAL="Tutorial",E.INVENTORY="Inventory",E.ARENA_PREPARING_ROOM="ArenaPreparingRoom",E}({})),E("ENTRY_BETS",[500,2e3,1e4,5e4,2e5]),E("SAFE_SQUARE_INDEX",[1,9,14,22,27,35,40,48]),E("START_INDEX",[1,14,27,40]),E("LAST_INDEX",[57,63,69,75]),E("MAX_DESIGN_RES_SIZE",{width:1448,height:720}),E("MULTI_TOKEN_POS",[[0,3],[-26,19.5],[0,36],[26,19.5]]);var C=E("SKU_ITEM",{COIN:"currency.coin",GEM:"currency.gem",DICE_DEFAULT:"dice.default",DICE_CANDY:"dice.candy",DICE_CHEESE:"dice.cheese",DICE_PIXEL:"dice.pixel",THROWABLES_BOMB:"throwables.bomb",THROWABLES_ICE_CREAM:"throwables.ice_cream",THROWABLES_CAT:"throwables.cat",BASE_DEFAULT:"bases.default",BASE_JELLY:"bases.jelly",CHAR_CHICKEN:"characters.chicken",CHAR_CAPY:"characters.capybara",CHAR_CAT:"characters.cat",CHAR_OCTOPUS:"characters.octopus",CHAR_BEE:"characters.bee",CHAR_HIPPO:"characters.hippo",CHAR_SNAIL:"characters.snail"}),r=(E("EQUIPABLE_AVATARS",["0","11","12","13"]),E("ErrorMessages",{1005:"unexpected-error",1006:"unexpected-error",4001:"not-enough-candy",4002:"already-in-other-room",4003:"kicked-from-room",4005:"The room is expired.",4006:"not-enough-candy",4007:"server-maintenance",4008:"is-profanity",4212:"room-not-exist"}),E("MUSIC",{HOME_BGM:"home",GAME_ROOM_CLASSIC:"game-room-classic",GAME_ROOM_SWEETY:"game-room-sweety"}),E("SOUND",{DICE:"dice",CLICK:"button-click",MOVE:"move",MOVE_FROM_START:"move-from-start",CANDY_TO_JAR:"candy-to-jar",ON_LAND_KICK:"crash",CHICKEN:"chicken-squeal",NOTI_MY_TURN:"noti-my-turn",SHOW_REWARD:"show-reward",JUMP_IN_PORTAL:"jump-in-portal",WIN:"win",LOSE:"lose",THROW:"throw",SPLASH:"tomato-squish",FINISHED:"finished",SKILL_ACTIVATE:"skill-activate",TELEPORT:"teleport",COLLECT_GOLDEN_CANDY:"collect-golden-candy"}),E("CHAT_TEXT",["chat-1","chat-2","chat-3","chat-4","chat-5","chat-6"]),E("ITEM_NAME",((_={})[C.DICE_DEFAULT]="dice-default",_[C.DICE_CANDY]="dice-candy",_[C.DICE_CHEESE]="dice-cheese",_[C.DICE_PIXEL]="dice-pixel",_[C.THROWABLES_ICE_CREAM]="throwables-ice-cream",_[C.THROWABLES_BOMB]="throwables-bomb",_[C.THROWABLES_CAT]="throwables-cat",_[C.BASE_DEFAULT]="bases-default",_[C.BASE_JELLY]="bases-jelly",_[C.CHAR_CHICKEN]="characters-chicken",_[C.CHAR_CAPY]="characters-capybara",_[C.CHAR_CAT]="characters-cat",_[C.CHAR_OCTOPUS]="characters-octopus",_[C.CHAR_BEE]="characters-bee",_[C.CHAR_HIPPO]="characters-hippo",_[C.CHAR_SNAIL]="characters-snail",_)),E("FULL_ITEM_NAME",((a={})[C.DICE_DEFAULT]="dice-default-full",a[C.DICE_CANDY]="dice-candy-full",a[C.DICE_CHEESE]="dice-cheese-full",a[C.DICE_PIXEL]="dice-pixel-full",a[C.THROWABLES_ICE_CREAM]="throwables-ice-cream-full",a[C.THROWABLES_BOMB]="throwables-bomb-full",a[C.THROWABLES_CAT]="throwables-cat-full",a[C.BASE_DEFAULT]="bases-default-full",a[C.BASE_JELLY]="bases-jelly-full",a[C.CHAR_CHICKEN]="characters-chicken-full",a[C.CHAR_CAPY]="characters-capybara-full",a[C.CHAR_CAT]="characters-cat-full",a[C.CHAR_OCTOPUS]="characters-octopus-full",a[C.CHAR_BEE]="characters-bee-full",a[C.CHAR_HIPPO]="characters-hippo-full",a[C.CHAR_SNAIL]="characters-snail-full",a)),E("ITEM_STARS",((c={})[C.DICE_DEFAULT]=1,c[C.DICE_CANDY]=1,c[C.DICE_CHEESE]=1,c[C.DICE_PIXEL]=2,c[C.THROWABLES_ICE_CREAM]=1,c[C.THROWABLES_BOMB]=1,c[C.THROWABLES_CAT]=1,c[C.BASE_DEFAULT]=1,c[C.BASE_JELLY]=1,c[C.CHAR_CHICKEN]=1,c[C.CHAR_CAPY]=1,c[C.CHAR_CAT]=1,c[C.CHAR_OCTOPUS]=2,c[C.CHAR_BEE]=1,c[C.CHAR_HIPPO]=2,c[C.CHAR_SNAIL]=3,c)),function(E){return E.split(".")[1]});E("THROW_TYPE",{0:"tomato",1:r(C.THROWABLES_ICE_CREAM),2:r(C.THROWABLES_BOMB),3:r(C.THROWABLES_CAT)}),E("GameMode",function(E){return E[E.PUBLIC=0]="PUBLIC",E[E.PRIVATE=1]="PRIVATE",E[E.LOCAL=2]="LOCAL",E}({}));var t=function(){var E="45-63-39-100.colyseus.dev";A.isBrowser&&(window.location&&(window.location.hostname.includes("localhost")||window.location.hostname.includes("192."))&&(E=window.location.hostname),window.location&&window.location.host.includes("web.app")&&(E="dev.tuan-server-01.name.vn")),A.isNative&&(E="45-63-39-100.colyseus.dev");var e=E.includes("localhost")||E.includes("192"),_="https://"+E;return e&&(_="http://"+E+":2567"),[{hostname:E,secure:!e,port:e?2567:void 0},_]}(),R=t[0],o=t[1];E("SERVER_URL",o),E("COLYSEUS_CONFIG",R);e._RF.pop()}}}));

System.register("chunks:///_virtual/CrazySDK.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,i,s,o,a,u;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime,r=e.createClass},function(e){i=e.cclegacy,s=e.error,o=e.sys,a=e.DebugMode,u=e.game}],execute:function(){i._RF.push({},"954943rZC9D25RCFh4kmaEB","CrazySDK",void 0);var c=function(){function e(){}return e.Log=function(){var e;if(!([a.VERBOSE,a.INFO].indexOf(u.config.debugMode)<0)){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,["[CrazySDK]"].concat(n))}},e}(),d=function(e){return e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.REQUESTED=1]="REQUESTED",e[e.INITIALIZED=2]="INITIALIZED",e}(d||{}),f=e("default",new(function(){function e(){this.initResolvers=[],this.initState=d.UNINITIALIZED,this.sdk=void 0,this._isSupportedPlatform=void 0,this._version="2.0.0",this._userToken=null,this._lastTimeRequestToken=new Date(0);var e=[o.Platform.MOBILE_BROWSER,o.Platform.DESKTOP_BROWSER];this._isSupportedPlatform=e.indexOf(o.platform)>=0}var i=e.prototype;return i.ensureInitialized=function(){if(this.initState!==d.INITIALIZED)throw new Error("CrazySDK is not initialized yet. Please call CrazySDK.init() first.")},i.initInternal=function(){var e=this;if(this.initState===d.UNINITIALIZED){this.initState=d.REQUESTED;var r=document.createElement("script");r.src="https://sdk.crazygames.com/crazygames-sdk-v3.js",r.async=!0,r.onload=t(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.Log("JS SDK loaded"),e.sdk=window.CrazyGames.SDK,t.next=4,e.sdk.init({wrapper:{engine:"cocos",sdkVersion:e._version}});case 4:e.initState=d.INITIALIZED,e.initResolvers.forEach((function(e){return e()})),e.initResolvers=[];case 7:case"end":return t.stop()}}),t)}))),r.onerror=function(){return s("Failed to load CrazySDK JS. Please check your internet connection.")},document.head.appendChild(r)}},i.init=function(){var e=this;if(!this.isSupportedPlatform)throw new Error("CrazySDK is not enabled on this platform");return new Promise((function(t){e.initState===d.INITIALIZED?t():(e.initResolvers.push(t),e.initInternal())}))},i.createUserToken=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getUserToken();case 3:this._userToken=e.sent,this._lastTimeRequestToken=new Date,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i.getUserToken=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.user.getUserToken());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.showRewardedAd=function(){var e=this;return new Promise((function(t,n){e.ad.requestAd("rewarded",{adError:function(e){n(e)},adStarted:function(){},adFinished:function(){t()}})}))},i.showMidgameAd=function(){return new Promise((function(e,t){f.ad.requestAd("midgame",{adError:function(e){t(e)},adStarted:function(){},adFinished:function(){e()}})}))},r(e,[{key:"isSupportedPlatform",get:function(){return this._isSupportedPlatform}},{key:"environment",get:function(){return this.ensureInitialized(),this.sdk.environment}},{key:"isQaTool",get:function(){return this.ensureInitialized(),this.sdk.isQaTool}},{key:"ad",get:function(){return this.ensureInitialized(),this.sdk.ad}},{key:"game",get:function(){return this.ensureInitialized(),this.sdk.game}},{key:"user",get:function(){return this.ensureInitialized(),this.sdk.user}},{key:"data",get:function(){return this.ensureInitialized(),this.sdk.data}}]),e}()));i._RF.pop()}}}));

System.register("chunks:///_virtual/CrazySDK.types.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,t;return{setters:[function(r){e=r.inheritsLoose},function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"b581fU4oyxMdp3d+3NdYqW4","CrazySDK.types",void 0);var n=r("GeneralError",(function(r,e){this.code=r,this.message=e}));r("AdError",function(r){function t(e,t){var n;return(n=r.call(this,e,t)||this).code=e,n.message=t,n}return e(t,r),t}(n)),r("UserError",function(r){function t(e,t){var n;return(n=r.call(this,e,t)||this).code=e,n.message=t,n}return e(t,r),t}(n)),r("DataError",function(r){function t(e,t){var n;return(n=r.call(this,e,t)||this).code=e,n.message=t,n}return e(t,r),t}(n)),r("BannerError",function(r){function t(e,t,n){var s;return(s=r.call(this,e,t)||this).code=e,s.message=t,s.containerId=n,s}return e(t,r),t}(n));t._RF.pop()}}}));

System.register("chunks:///_virtual/CrazySDKDemo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CrazySDK.ts"],(function(e){var t,a,n,r,i,o,c,s,d,l,u,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){c=e.cclegacy,s=e._decorator,d=e.Label,l=e.log,u=e.Component,p=e.error},function(e){f=e.default}],execute:function(){var b,g,m,k,h,y,v,L,S,w,D;c._RF.push({},"2b9c8PBkTNLKZmCD6gzqFNl","CrazySDKDemo",void 0);var z=s.ccclass,A=s.property;e("CrazySDKDemo",(b=z("CrazySDKDemo"),g=A({type:d}),m=A({type:d}),k=A({type:d}),h=A({type:d}),b((L=t((v=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"sdkStatus",L,r(t)),n(t,"adblockUsageLabel",S,r(t)),n(t,"inviteLinkLabel",w,r(t)),n(t,"userLabel",D,r(t)),t}a(t,e);var c=t.prototype;return c.onLoad=function(){var e=this;f.getEnvironment().then((function(t){e.sdkStatus.string="Environment: "+t+", SDK is "+(f.isEnabled?"enabled":"disabled")}))},c.showRewardedVideo=function(){f.ad.requestAd("rewarded",{adError:function(e,t){l("Rewarded video error",e,t)},adStarted:function(){l("Rewarded video started")},adFinished:function(){l("Rewarded video finished")}})},c.showAdBreakVideo=function(){f.ad.requestAd("midgame",{adError:function(e,t){l("Ad break video error",e,t)},adStarted:function(){l("Ad break video started")},adFinished:function(){l("Ad break video finished")}})},c.checkAdblockUsage=function(){var e=i(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.ad.hasAdblock();case 3:t=e.sent,this.adblockUsageLabel.string="Adblock: "+(t?"on":"off"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),this.adblockUsageLabel.string="Adblock check failed",p("Adblock check failed",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),c.gameplayStart=function(){f.game.gameplayStart()},c.gameplayStop=function(){f.game.gameplayStop()},c.sdkGameLoadingStart=function(){f.game.sdkGameLoadingStart()},c.sdkGameLoadingStop=function(){f.game.sdkGameLoadingStop()},c.happytime=function(){f.game.happytime()},c.inviteLink=function(){var e=i(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.game.inviteLink({roomId:"123"});case 2:t=e.sent,this.inviteLinkLabel.string=t;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(u)).prototype,"sdkStatus",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(v.prototype,"adblockUsageLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(v.prototype,"inviteLinkLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(v.prototype,"userLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=v))||y));c._RF.pop()}}}));

System.register("chunks:///_virtual/CreateRoomPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Constant.ts","./Global.ts","./Networking.ts","./Popup.ts","./PopupManager.ts","./PlayerButton.ts","./SceneManager.ts","./SubLoading.ts","./GameHelper.ts","./l10n-manager.ts"],(function(t){var e,n,o,a,i,r,u,s,c,l,p,h,g,f,b,B,y,d,m,_,P,v,C,I,w,M,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,a=t.assertThisInitialized,i=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){u=t.cclegacy,s=t._decorator,c=t.Button,l=t.Label,p=t.Node,h=t.Prefab,g=t.tween,f=t.easing,b=t.instantiate,B=t.Sprite,y=t.misc},null,function(t){d=t.ENTRY_BETS},function(t){m=t.default},function(t){_=t.default},function(t){P=t.Popup},function(t){v=t.default},function(t){C=t.PlayerButton},function(t){I=t.SceneManager},function(t){w=t.SubLoading},function(t){M=t.GameHelper},function(t){L=t.default}],execute:function(){var T,E,S,R,z,x,D,G,N,k,q,H,K,O,F,A,V,j,W,Y,J;u._RF.push({},"4139cNs4VNN6p1HF9n8I59w","CreateRoomPopup",void 0);var Q=s.ccclass,U=s.property;t("CreateRoomPopup",(T=Q("CreateRoomPopup"),E=U(c),S=U([c]),R=U(l),z=U([c]),x=U(c),D=U(p),G=U(p),N=U(h),k=U(h),T((K=e((H=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,o(e,"createButton",K,a(e)),o(e,"changeBetButtons",O,a(e)),o(e,"betLabel",F,a(e)),o(e,"modeButtons",A,a(e)),o(e,"helpButton",V,a(e)),o(e,"hotTag",j,a(e)),o(e,"playerButtonsContainer",W,a(e)),o(e,"playerButtonPrefab",Y,a(e)),o(e,"reddotPrefab",J,a(e)),e._entryBets=[0].concat(d),e._choosingBet=1,e._choosingPlayerMode=0,e._equipData={},e._isPublic=!1,e._playerButtons=[],e}n(e,t);var u=e.prototype;return u.onLoad=function(){var e=this;t.prototype.onLoad.call(this),g(this.hotTag).delay(2).by(.05,{angle:10},{easing:f.sineOut}).by(.1,{angle:-20},{easing:f.sineInOut}).by(.1,{angle:20},{easing:f.sineInOut}).by(.1,{angle:-20},{easing:f.sineInOut}).by(.1,{angle:20},{easing:f.sineInOut}).by(.05,{angle:-10},{easing:f.sineIn}).union().repeatForever().start();var n=function(t){var n=e._choosingBet+t;n>e._entryBets.length-1||n<0||(e._choosingBet=y.clampf(e._choosingBet+t,0,e._entryBets.length-1),e._updateBet())};this.changeBetButtons[0].node.on(c.EventType.CLICK,(function(){n(-1)})),this.changeBetButtons[1].node.on(c.EventType.CLICK,(function(){n(1)})),this._updateBet(),this._updateModeButtonsState(),this.modeButtons.forEach((function(t,n){t.node.on(c.EventType.CLICK,(function(){m.choosingGameMode!==n&&(m.choosingGameMode=n,e._updateModeButtonsState())}))})),this.createButton.node.on(c.EventType.CLICK,i(r().mark((function t(){var n,o,a,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=e._entryBets[e._choosingBet],!(m.userInfo.coins<n)){t.next=5;break}return M.promptWatchAdPopup(),t.abrupt("return");case 5:return w.Instance.show(),o=4,e._isPublic&&(o=0===e._choosingPlayerMode?2:4),t.next=10,_.createRoom(n,o,0===m.choosingGameMode?"classic":"sweety",e._isPublic,e._choosingPlayerMode===e.playerButtonsContainer.children.length-1,e._equipData);case 10:return a=t.sent,i=a.seatReservation,t.next=14,_.client.consumeSeatReservation(i);case 14:_.gameRoom=t.sent,I.Instance.moveToScene("PreparingRoom"),t.next=23;break;case 18:t.prev=18,t.t0=t.catch(0),console.error(t.t0),w.Instance.hide(),M.showErrorAlert(t.t0.code);case 23:case"end":return t.stop()}}),t,null,[[0,18]])})))),this.helpButton.node.on(c.EventType.CLICK,(function(){v.Instance.open("HelpPopup",{tabIdx:1})}))},u.setData=function(t){var e=this,n=(t||{}).isPublic,o=void 0===n||n;this._equipData=m.getEquipOption(),console.log("equip data",this._equipData),this._isPublic=o;var a=L.t("players"),i=L.t("team-up");(this._isPublic?[["2",a,!1],["4",a,!1],["2V2",i,!1]]:[["2-4",a,!1],["2V2",i,!1]]).forEach((function(t,n){var o=b(e.playerButtonPrefab),a=t[0],i=t[1],r=t[2],u=o.getComponent(C);o.getComponent(C).setData({topText:a,bottomText:i,locked:r}),o.setParent(e.playerButtonsContainer),e._playerButtons.push(u),o.on(c.EventType.CLICK,(function(){e._choosingPlayerMode!==n&&(e._choosingPlayerMode=n,e._updatePlayersButtonState())}))})),this._updatePlayersButtonState()},u._updatePlayersButtonState=function(){var t=this;this._playerButtons.forEach((function(e,n){e.setHighlightEnable(t._choosingPlayerMode===n)}))},u._updateModeButtonsState=function(){this.modeButtons.forEach((function(t,e){t.node.getChildByName("highlight-frame").active=m.choosingGameMode===e}))},u._updateBet=function(){this.betLabel.string=M.formatNumber(this._entryBets[this._choosingBet],5);var t=this._choosingBet===this._entryBets.length-1;this.changeBetButtons[1].interactable=!t,this.changeBetButtons[1].getComponent(B).grayscale=t;var e=0===this._choosingBet;this.changeBetButtons[0].interactable=!e,this.changeBetButtons[0].getComponent(B).grayscale=e},e}(P)).prototype,"createButton",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(H.prototype,"changeBetButtons",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=e(H.prototype,"betLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(H.prototype,"modeButtons",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=e(H.prototype,"helpButton",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(H.prototype,"hotTag",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(H.prototype,"playerButtonsContainer",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(H.prototype,"playerButtonPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(H.prototype,"reddotPrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=H))||q));u._RF.pop()}}}));

System.register("chunks:///_virtual/CustomSafeArea.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,a,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,a=t.sys,r=t.SafeArea,s=t.Component}],execute:function(){var u;o._RF.push({},"bfa223csxtLWpL8aWzavC4Z","CustomSafeArea",void 0);var i=n.ccclass;n.property,t("CustomSafeArea",i("CustomSafeArea")(u=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var n=o.prototype;return n.onLoad=function(){a.isNative&&a.isMobile&&this.addComponent(r)},n.start=function(){},n.update=function(t){},o}(s))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/DeltaManaUI.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,a,o,i,r,l,s,u,c,p,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,l=t.Label,s=t.tween,u=t.v3,c=t.easing,p=t.UIOpacity,f=t.Color,y=t.Component}],execute:function(){var b,h,m,g,d;i._RF.push({},"6204fLK4a5Mt7kFfyblvu3g","DeltaManaUI",void 0);var v=r.ccclass,D=r.property;t("DeltaManaUI",(b=v("DeltaManaUI"),h=D(l),b((d=e((g=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,a(e,"amountLabel",d,o(e)),e}n(e,t);var i=e.prototype;return i.onLoad=function(){s(this.node).by(.8,{position:u(0,75,0)},{easing:c.sineOut}).delay(.5).destroySelf().start(),s(this.getComponent(p)).set({opacity:255}).delay(.8).to(.5,{opacity:0},{easing:c.sineIn}).start()},i.setAmount=function(t){var e=t>=0;this.amountLabel.string=" "+(e?"+":"-")+Math.abs(t)+" ",this.amountLabel.color=(new f).fromHEX(e?"#E4FD70":"#FFFFFF"),this.amountLabel.outlineColor=(new f).fromHEX(e?"#AD7318":"#75726D")},e}(y)).prototype,"amountLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=g))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/DetailUserInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./SimpleEventTarget.ts","./ThrowItemButton.ts","./Global.ts","./LoaderManager.ts","./GameHelper.ts"],(function(t){var e,n,i,o,r,a,l,s,u,c,f,h,m,b,d,p,g,v,w,y,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,l=t._decorator,s=t.Label,u=t.Sprite,c=t.Node,f=t.UITransform,h=t.Widget,m=t.Prefab,b=t.instantiate,d=t.sys,p=t.Component},null,function(t){g=t.SimpleEventTarget},function(t){v=t.ThrowItemButton},function(t){w=t.default},function(t){y=t.LoaderManager},function(t){I=t.GameHelper}],execute:function(){var L,S,T,z,A,U,D,P,_,C,R,E,x,G,N,H,M;a._RF.push({},"3fa24Y3zQ1HJ79ivSUyI9xC","DetailUserInfo",void 0);var k=l.ccclass,F=l.property;t("DetailUserInfo",(L=k("DetailUserInfo"),S=F(s),T=F(s),z=F(s),A=F(s),U=F(s),D=F(u),P=F(c),L((R=e((C=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"userNameLabel",R,o(e)),i(e,"candyAmountLabel",E,o(e)),i(e,"winLabel",x,o(e)),i(e,"totalLabel",G,o(e)),i(e,"winRateLabel",N,o(e)),i(e,"avatarSprite",H,o(e)),i(e,"bottomUI",M,o(e)),e._slotIdx=0,e}n(e,t);var a=e.prototype;return a.onLoad=function(){var t=this;g.on("REQUEST_THROW_ITEM",(function(){t.close()}),this)},a.setData=function(t,e,n,i){var o=this;void 0===i&&(i=!0),this._slotIdx=e;var r=t.win,a=t.total,l=t.coins;if(I.loadAvatar(I.getAvatarStrFromPlayer(t),this.avatarSprite),this.userNameLabel.string=I.getNameFromPlayer(t),this.candyAmountLabel.string=I.formatNumber(l,6),this.winLabel.string=""+r,this.totalLabel.string=""+a,this.winRateLabel.string=0!==a?Math.round(100*r/a*100)/100+"%":"---",i)this._tryToShowThrowItemGuide();else{var s=this.getComponent(f);s.setContentSize(s.contentSize.width,160)}var u=this.getComponent(h);[0,1].includes(n)?this.node.setPosition(0,-168):this.node.setPosition(0,100),[0,3].includes(n)?(u.isAlignRight=!0,u.right=12):(u.isAlignLeft=!0,u.left=12),u.updateAlignment();var c=[];w.userInfo.inventoryItems.filter((function(t){return t.sku.includes("throwables")&&t.owned})).forEach((function(t){var e=y.Instance.loadAsset("throwable-button/"+t.sku.split(".")[1],m).then((function(t){return Promise.resolve(t)})).catch((function(t){return console.error(t),Promise.resolve(null)}));c.push(e)})),Promise.all(c).then((function(t){o.isValid&&(t.forEach((function(t){var n=b(t).getComponent(v);n.node.setParent(o.bottomUI),n.setData(e)})),o.bottomUI.children[0].getComponent(v).setData(e),o.bottomUI.active=i)}))},a.close=function(){this.node.destroy()},a.onDestroy=function(){g.removeAll(this)},a._tryToShowThrowItemGuide=function(){var t=this;"0"===(d.localStorage.getItem("throw-item-guide")||"0")&&(y.Instance.loadAsset("first-time-guide/ThrowItemGuide",m).then((function(e){t.isValid&&t.node.addChild(b(e))})),d.localStorage.setItem("throw-item-guide","1"))},r(e,[{key:"slotIdx",get:function(){return this._slotIdx}}]),e}(p)).prototype,"userNameLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(C.prototype,"candyAmountLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(C.prototype,"winLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(C.prototype,"totalLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(C.prototype,"winRateLabel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(C.prototype,"avatarSprite",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(C.prototype,"bottomUI",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=C))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/DiceAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,r,n,a,o,s,l,u,c,p,m;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,r=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){a=i.cclegacy,o=i._decorator,s=i.SpriteFrame,l=i.Sprite,u=i.AudioClip,c=i.macro,p=i.clamp,m=i.Component}],execute:function(){var h,f,d,b,F,A,S,y,_,g,v;a._RF.push({},"beab3hEb2RPfKUq75zVMoj/","DiceAnimation",void 0);var z=o.ccclass,D=o.property;i("DiceAnimation",(h=z("DiceAnimation"),f=D([s]),d=D([s]),b=D(l),F=D(u),h((y=e((S=function(i){function e(){for(var e,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=i.call.apply(i,[this].concat(a))||this,r(e,"animSpriteFrames",y,n(e)),r(e,"resultSpriteFrames",_,n(e)),r(e,"diceSprite",g,n(e)),r(e,"rollAudio",v,n(e)),e._idx=0,e}t(e,i);var a=e.prototype;return a.startAnim=function(){this.schedule(this._setAnimFrame,.05,c.REPEAT_FOREVER)},a._setAnimFrame=function(){this._idx=(this._idx+1)%7,this.diceSprite.spriteFrame=this.animSpriteFrames[this._idx]},a.showResult=function(i){this.unschedule(this._setAnimFrame),this.diceSprite.spriteFrame=this.resultSpriteFrames[p(i-1,0,5)]},e}(m)).prototype,"animSpriteFrames",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=e(S.prototype,"resultSpriteFrames",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=e(S.prototype,"diceSprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(S.prototype,"rollAudio",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=S))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/DiceButtonAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,i,o,s,a,l,r,c,u,p,h;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,l=e.Node,r=e.tween,c=e.easing,u=e.v3,p=e.Vec3,h=e.Component}],execute:function(){var g,w,_,d,f,T,m;s._RF.push({},"66580l5VplGA5O7vm/QzOkY","DiceButtonAnimation",void 0);var y=a.ccclass,v=a.property;e("DiceButtonAnimation",(g=y("DiceButtonAnimation"),w=v(l),_=v(l),g((T=n((f=function(e){function n(){for(var n,t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return n=e.call.apply(e,[this].concat(s))||this,i(n,"lightNode",T,o(n)),i(n,"diceIcon",m,o(n)),n._animTween=null,n._lightTween=null,n._scaleTween=null,n}t(n,e);var s=n.prototype;return s.onLoad=function(){this._animTween=r(this.diceIcon).set({angle:0}).to(.05,{angle:-10},{easing:c.sineOut}).to(.1,{angle:10},{easing:c.sineInOut}).to(.1,{angle:-10},{easing:c.sineInOut}).to(.1,{angle:10},{easing:c.sineInOut}).to(.05,{angle:0},{easing:c.sineIn}).delay(1).union().repeatForever(),this._lightTween=r(this.lightNode).set({position:u(0,-100)}).to(1,{position:u(0,100)}).union().repeatForever(),this._scaleTween=r(this.node).to(.125,{scale:u(1.2,1.2)},{easing:c.cubicOut}).to(.125,{scale:p.ONE},{easing:c.cubicIn})},s.onEnable=function(){this._animTween.stop(),this._animTween.start(),this._lightTween.stop(),this._lightTween.start(),this._scaleTween.stop(),this._scaleTween.start()},s.onDestroy=function(){this._animTween.stop(),this._lightTween.stop()},n}(h)).prototype,"lightNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=n(f.prototype,"diceIcon",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=f))||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/DiceRoller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./AudioManager.ts","./LoaderManager.ts","./DiceAnimation.ts"],(function(t){var n,i,e,o,a,s,r,c,l,u,h,_,d,m,A,f,p;return{setters:[function(t){n=t.inheritsLoose,i=t.createClass},function(t){e=t.cclegacy,o=t._decorator,a=t.v3,s=t.Node,r=t.instantiate,c=t.misc,l=t.Tween,u=t.tween,h=t.Vec3,_=t.easing,d=t.Component},function(t){m=t.SOUND},function(t){A=t.AudioManager},function(t){f=t.LoaderManager},function(t){p=t.DiceAnimation}],execute:function(){var v;e._RF.push({},"14ea7S5xC5HMovl2MTxOqg+","DiceRoller",void 0);var S=o.ccclass,g=(o.property,a(0,33)),y=.6;t("DiceRoller",S("DiceRoller")(v=function(t){function e(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this)._rollingAnchor=null,n._resultAnchor=null,n._animAnchor=null,n._uiIdx=-1,n._startPos=a(),n._tempVec=a(),n._animState=0,n._curResult=0,n}n(e,t);var o=e.prototype;return o.onLoad=function(){this._animAnchor=new s("dice-anchor")},o.init=function(t,n,i){this._rollingAnchor=t,this._resultAnchor=n,this._uiIdx=i;var e=0===this._uiIdx||3===this._uiIdx?670:-670,o=0===this._uiIdx||1===this._uiIdx?-420:420;this._startPos.set(e,o)},o.setSkin=function(t){var n=this;f.Instance.loadDiceAnimPrefab(t).then((function(t){n.isValid&&(n._animAnchor.addChild(r(t)),c.callInNextTick((function(){n._updateAnimState()})))}))},o.rollDice=function(t,n){var i=this;this._curResult=t,l.stopAllByTarget(this._animAnchor),u(this._animAnchor).to(.5,null,{onStart:function(){var t;if(i.isValid){var n;if(null!=(t=i._diceAnimation)&&t.rollAudio)A.Instance.playSoundClip(null==(n=i._diceAnimation)?void 0:n.rollAudio);else A.Instance.playSound(m.DICE);i._animState=1,i._updateAnimState()}},onUpdate:function(t,n){if(i.isValid){var e=h.lerp(i._tempVec,i._startPos,g,n),o=.3,a=.2,s=0;n<o?e.y+=200*_.quadOut(n/o):n<y?(s=n-o,e.y+=200*(1-_.quadIn(s/o))):n<.8?(s=n-y,e.y+=100*_.quadOut(s/a)):(s=n-.8,e.y+=100*(1-_.quadIn(s/a))),t.setPosition(e)}},onComplete:function(){i.isValid&&i.showResult()}}).start()},o.hideResult=function(){this._animState=0,this._updateAnimState()},o.showResult=function(t){void 0===t&&(t=-1),t>0&&(this._curResult=t),this._animState=2,this._updateAnimState()},o.onDestroy=function(){this._animAnchor&&this._animAnchor.isValid&&(this._animAnchor.destroy(),this._animAnchor=null)},o._updateAnimState=function(){var t;if(1===this._animState)this._animAnchor.setParent(this._rollingAnchor),null==(t=this._diceAnimation)||t.startAnim();else if(2===this._animState){var n,i;null==(n=this._resultAnchor)||n.insertChild(this._animAnchor,0),this._animAnchor.setPosition(0,0),null==(i=this._diceAnimation)||i.showResult(this._curResult)}else this._animAnchor.setPosition(1e4,1e4)},i(e,[{key:"_diceAnimation",get:function(){return this._animAnchor.getComponentInChildren(p)}}]),e}(d))||v);e._RF.pop()}}}));

System.register("chunks:///_virtual/EmoCloud.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,n,o,s,l,r,a,p,c,u,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.SpriteFrame,a=t.Animation,p=t.Sprite,c=t.tween,u=t.Vec3,m=t.Component}],execute:function(){var h,d,_,f,y;s._RF.push({},"b5640XutIlNY6ssEtj1mqP7","EmoCloud",void 0);var C=l.ccclass,g=l.property;t("EmoCloud",(h=C("EmoCloud"),d=g(r),h((y=i((f=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),l=0;l<e;l++)s[l]=arguments[l];return i=t.call.apply(t,[this].concat(s))||this,n(i,"emptyCloudSf",y,o(i)),i._clipIdx=-1,i._anim=null,i._sprite=null,i}e(i,t);var s=i.prototype;return s.onLoad=function(){this._anim=this.getComponent(a),this._sprite=this.getComponent(p),this._sprite.spriteFrame=this.emptyCloudSf},s.playAnim=function(t){this._clipIdx=t,this._playAnim()},s._playAnim=function(){var t=this;this._anim=this.getComponent(a),this._sprite=this.getComponent(p),this._clipIdx<0||this._clipIdx>=this._anim.clips.length?this.node.destroy():(this._anim.defaultClip=this._anim.clips[this._clipIdx],c(this.node).set({scale:u.ZERO}).to(.15,{scale:u.ONE}).call((function(){t._anim.play()})).delay(1.5).call((function(){t._anim.stop(),t._sprite.spriteFrame=t.emptyCloudSf})).to(.15,{scale:u.ZERO}).destroySelf().start())},s.update=function(t){},i}(m)).prototype,"emptyCloudSf",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=f))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/ExplodeAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,i,t,n,a,o,s,l,p,c,u;return{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.SpriteFrame,l=e.Sprite,p=e.CCFloat,c=e.CCBoolean,u=e.Component}],execute:function(){var d,m,f,h,b,y,F,v,x,_,S;a._RF.push({},"cb2f3LJJHhAO4zP87swfcaV","ExplodeAnimation",void 0);var g=o.ccclass,A=o.property;e("ExplodeAnimation",(d=g("ExplodeAnimation"),m=A([s]),f=A(l),h=A(p),b=A(c),d((v=r((F=function(e){function r(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,t(r,"spriteFrames",v,n(r)),t(r,"sprite",x,n(r)),t(r,"frameTime",_,n(r)),t(r,"destroyOnFinished",S,n(r)),r._curSpriteIdx=0,r}i(r,e);var a=r.prototype;return a.play=function(){var e=this;this.node.active=!0,this.unscheduleAllCallbacks(),this._curSpriteIdx=0,this.sprite.spriteFrame=this.spriteFrames[this._curSpriteIdx],this.schedule((function(){e._curSpriteIdx++;var r=e.spriteFrames[e._curSpriteIdx];e.sprite.spriteFrame=e.spriteFrames[e._curSpriteIdx],null==r&&(e.unscheduleAllCallbacks(),e.destroyOnFinished?e.node.destroy():e.node.active=!1)}),this.frameTime)},a.onEnable=function(){this.sprite.spriteFrame=null},r}(u)).prototype,"spriteFrames",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=r(F.prototype,"sprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=r(F.prototype,"frameTime",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),S=r(F.prototype,"destroyOnFinished",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=F))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/FadeInOut.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,r,i,a,s,c,u,p,l,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.UIRenderer,c=e.CCFloat,u=e.Color,p=e.tween,l=e.Tween,d=e.Component}],execute:function(){var f,h,y,v,F,b;i._RF.push({},"f7300ztzZxCjZbHa57KeF73","FadeInOut",void 0);var g=a.ccclass,C=a.property,_=a.requireComponent;e("FadeInOut",(f=g("FadeInOut"),h=_(s),y=C(c),f(v=h((b=t((F=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"speed",b,r(t)),t._obj={a:255},t}n(t,e);var i=t.prototype;return i.onLoad=function(){var e=this,t=this.getComponent(s),n=new u(255,255,255,255),o=function(o,r){e.isValid&&(n.a=o.a,t.color=n)},r=1/this.speed;p(this._obj).to(r,{a:0},{onUpdate:o}).to(r,{a:255},{onUpdate:o}).union().repeatForever().start()},i.onDestroy=function(){l.stopAllByTarget(this._obj)},t}(d)).prototype,"speed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=F))||v)||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/FadeTransition.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,o,i,r,s,a;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.UIOpacity,r=t.Tween,s=t.tween,a=t.Component}],execute:function(){var c;e._RF.push({},"03be7Q8k0JHXKDUs+84VYWp","FadeTransition",void 0);var p=o.ccclass,u=(o.property,o.requireComponent);t("FadeTransition",p("FadeTransition")(c=u(i)(c=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.show=function(){var t=this.getComponent(i);r.stopAllByTarget(t),this.node.active=!0,s(t).to(.1,{opacity:255}).start()},o.hide=function(){var t=this,n=this.getComponent(i);r.stopAllByTarget(n),s(n).to(.1,{opacity:0}).call((function(){t.isValid&&(t.node.active=!1)})).start()},o.onDestroy=function(){r.stopAllByTarget(this.getComponent(i))},e}(a))||c)||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/FinalRankingPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./RankingProfile.ts","./Constant.ts","./SimpleEventTarget.ts","./Global.ts","./AudioManager.ts","./l10n-manager.ts"],(function(n){var t,e,i,o,a,r,l,u,c,s,p,f,g,b,d,v,y,m,h,w;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,l=n.Button,u=n.Node,c=n.Label,s=n.tween,p=n.v3,f=n.easing,g=n.UIOpacity,b=n.Component},null,function(n){d=n.RankingProfile},function(n){v=n.SOUND},function(n){y=n.SimpleEventTarget},function(n){m=n.default},function(n){h=n.AudioManager},function(n){w=n.default}],execute:function(){var k,L,P,B,z,F,I,C,E,R,S,D,O,T,A,H,M;a._RF.push({},"0c6d3ZSILJG2Lr3sBZMrdly","FinalRankingPopup",void 0);var _=r.ccclass,x=r.property;n("FinalRankingPopup",(k=_("FinalRankingPopup"),L=x([d]),P=x(l),B=x(l),z=x(u),F=x(u),I=x(c),C=x(u),k((S=t((R=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,i(t,"rankingProfiles",S,o(t)),i(t,"goHomeButton",D,o(t)),i(t,"continueButton",O,o(t)),i(t,"container",T,o(t)),i(t,"confetti",A,o(t)),i(t,"titleLabel",H,o(t)),i(t,"glowFrame",M,o(t)),t}e(t,n);var a=t.prototype;return a.onLoad=function(){var n=this;this.continueButton.node.on(l.EventType.CLICK,(function(){n.node.active=!1})),this.goHomeButton.node.on(l.EventType.CLICK,(function(){y.emit("LEAVE")}))},a.show=function(){this.node.active||(this.node.active=!0,s(this.container).set({scale:p(.75,.75,1)}).to(.25,{scale:p(1,1,1)},{easing:f.backOut}).start(),s(this.container.getComponent(g)).set({opacity:100}).to(.25,{opacity:255},{easing:f.sineOut}).start())},a.setData=function(n){var t=this;console.log("ranking data",n);var e=0;this.confetti.active=!1,n.forEach((function(n,i){if(t.rankingProfiles[i].setData(n),null==n&&e++,(null==n?void 0:n.slotIdx)===m.myIdx){t.glowFrame.setParent(t.rankingProfiles[i].avatarSprite.node);var o=n.isWin;t.confetti.active=o,t.titleLabel.string=w.t(o?"win":"lose").toUpperCase(),h.Instance.playSound(o?v.WIN:v.LOSE)}})),this.continueButton.node.active=e>=2},a.start=function(){},a.update=function(n){},t}(b)).prototype,"rankingProfiles",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(R.prototype,"goHomeButton",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(R.prototype,"continueButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(R.prototype,"container",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(R.prototype,"confetti",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(R.prototype,"titleLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(R.prototype,"glowFrame",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=R))||E));a._RF.pop()}}}));

System.register("chunks:///_virtual/FindArenaMatchPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./PlayerButton.ts","./Global.ts","./Popup.ts","./l10n-manager.ts"],(function(t){var o,e,n,a,i,r,u,c,s,l,p;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,u=t.Button},null,function(t){c=t.PlayerButton},function(t){s=t.default},function(t){l=t.Popup},function(t){p=t.default}],execute:function(){var d,h,f,y,g,B,M,P,m;i._RF.push({},"dc63buiWn9M2KRU6wEVuAh5","FindArenaMatchPopup",void 0);var v=r.ccclass,_=r.property;t("FindArenaMatchPopup",(d=v("FindArenaMatchPopup"),h=_(u),f=_([c]),y=_([u]),d((M=o((B=function(t){function o(){for(var o,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return o=t.call.apply(t,[this].concat(i))||this,n(o,"findButton",M,a(o)),n(o,"playerButtons",P,a(o)),n(o,"modeButtons",m,a(o)),o._choosingPlayerMode=0,o}e(o,t);var i=o.prototype;return i.onLoad=function(){var o=this;t.prototype.onLoad.call(this),this._updateModeButtonsState(),this.modeButtons.forEach((function(t,e){t.node.on(u.EventType.CLICK,(function(){s.choosingGameMode!==e&&(s.choosingGameMode=e,o._updateModeButtonsState())}))})),this.findButton.node.on(u.EventType.CLICK,(function(){o._resolveValue=[s.choosingGameMode,o._choosingPlayerMode],o.close()}))},i.setData=function(t){var o=this,e=t.only2V2,n=void 0!==e&&e,a=[["2",p.t("players"),n],["2V2",p.t("team-up"),!1]];n&&(this._choosingPlayerMode=1),a.forEach((function(t,e){var n=t[0],a=t[1],i=t[2];o.playerButtons[e].setData({topText:n,bottomText:a,locked:i}),o.playerButtons[e].node.on(u.EventType.CLICK,(function(){o._choosingPlayerMode!==e&&(o._choosingPlayerMode=e,o._updatePlayersButtonState())}))})),this._updatePlayersButtonState()},i._updatePlayersButtonState=function(){var t=this;this.playerButtons.forEach((function(o,e){o.setHighlightEnable(t._choosingPlayerMode===e)}))},i._updateModeButtonsState=function(){this.modeButtons.forEach((function(t,o){t.node.getChildByName("highlight-frame").active=s.choosingGameMode===o}))},o}(l)).prototype,"findButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=o(B.prototype,"playerButtons",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=o(B.prototype,"modeButtons",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=B))||g));i._RF.pop()}}}));

System.register("chunks:///_virtual/FirstMoveAnimationScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Constant.ts","./AudioManager.ts","./LoaderManager.ts","./GameHelper.ts","./StringUtils.ts","./l10n-manager.ts"],(function(e){var n,t,r,i,a,o,l,s,c,u,f,d,p,m,g,v,h,y,C,_,b,S,O;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Node,s=e.UIOpacity,c=e.UITransform,u=e.Label,f=e.Sprite,d=e.tween,p=e.easing,m=e.v3,g=e.Vec3,v=e.Tween,h=e.Component},null,function(e){y=e.SOUND},function(e){C=e.AudioManager},function(e){_=e.LoaderManager},function(e){b=e.GameHelper},function(e){S=e.StringUtils},function(e){O=e.default}],execute:function(){var x,I,M,P,T,A,F,w,D,N,E,z,R;a._RF.push({},"ccabeCdMR1EJZeHVm8D+XD+","FirstMoveAnimationScreen",void 0);var B=o.ccclass,L=o.property;e("FirstMoveAnimationScreen",(x=B("FirstMoveAnimationScreen"),I=L(l),M=L(l),P=L(l),T=L(s),A=L(c),x((D=n((w=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,r(n,"frameContainer",D,i(n)),r(n,"goldFrame",N,i(n)),r(n,"firstMoveTextPanel",E,i(n)),r(n,"darkBgOpa",z,i(n)),r(n,"uiContainerTf",R,i(n)),n._tweenObj={val:0},n._curIdx=0,n._slots=[],n._mySlot=null,n._desNodes=[],n}t(n,e);var a=n.prototype;return a.onLoad=function(){this.firstMoveTextPanel.setScale(0,0)},a.setData=function(e,n,t){this._slots=e,this._mySlot=n,this._desNodes=t},a.startAnimation=function(e){var n=this,t=null,r=new Promise((function(e,n){t=e}));this.node.active=!0,this.frameContainer.children.forEach((function(e){e.active=!1,e.getComponentInChildren(u).node.active=!1}));var i=O.t("first-move-goes-to",{name:S.truncate(this._slots[e].player.name,9)});this.firstMoveTextPanel.getComponentInChildren(u).string=i;var a=this._mySlot.idx,o=function(e){return(4-a+e)%4},l=[1,2,3,0];this._slots.filter((function(e){return null!=e.player})).forEach((function(e){var t=o(e.idx),r=n.frameContainer.children[l.indexOf(t)];r.active=!0;var i=b.getAvatarStrFromPlayer(e.player),a=b.getNameFromPlayer(e.player),s=r.getComponentInChildren(u);s.node.active=!0,s.string=S.truncate(a,9),b.loadAvatar(i,r.getComponent(f));var c,d="gameplay-common/frame-"+(c=e.idx,(n._mySlot.colorIdx+o(c))%4+"/spriteFrame");_.Instance.loadSfToSprite(d,r.getComponentInChildren(f))}));var s=[0,1,2,3].filter((function(e){return n.frameContainer.children[e].active})),c=s.indexOf(l.indexOf(o(e)));return d(this._tweenObj).set({val:0}).by(2,{val:6*s.length+c},{easing:p.sineOut,onUpdate:function(e,t){var r=Math.floor(e.val%s.length);n._curIdx!==r&&C.Instance.playSound(y.CANDY_TO_JAR),n._curIdx=Math.floor(e.val%s.length),n.goldFrame.setPosition(n.frameContainer.children[s[n._curIdx]].position)}}).delay(.25).call((function(){if(n.isValid){C.Instance.playSound(y.SHOW_REWARD),n.frameContainer.getComponentsInChildren(u).forEach((function(e){e.node.setParent(n.node,!0)}));var e=n.frameContainer.children[s[n._curIdx]];n.goldFrame.setParent(e,!0),d(e).by(.125,{scale:m(.2,.2,0)}).by(.125,{scale:m(-.2,-.2,0)}).union().repeat(2).call((function(){n.isValid&&d(n.firstMoveTextPanel).to(.5,{scale:g.ONE},{easing:p.sineOut}).delay(.75).call((function(){if(n.isValid){n.goldFrame.setParent(n.darkBgOpa.node,!0),d(n.darkBgOpa).to(.25,{opacity:0}).start();var e=n.frameContainer.children.slice();e.forEach((function(r,i){if(r.active){r.setParent(n.uiContainerTf.node,!0);var a=l[i],o=n.uiContainerTf.convertToNodeSpaceAR(n._desNodes[a].worldPosition);d(r).delay(.25).to(.75,{position:o,scale:g.ONE},{easing:p.sineInOut}).call((function(){n.isValid&&i===e.length-1&&(t(),n.node.active=!1)})).delay(.05).destroySelf().start()}}))}})).start()})).start()}})).start(),r},a.onDestroy=function(){v.stopAllByTarget(this._tweenObj)},n}(h)).prototype,"frameContainer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(w.prototype,"goldFrame",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(w.prototype,"firstMoveTextPanel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(w.prototype,"darkBgOpa",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(w.prototype,"uiContainerTf",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=w))||F));a._RF.pop()}}}));

System.register("chunks:///_virtual/FullScreenContentCallback.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"37fb7dk2tpKnKLMY9BVIgk4","FullScreenContentCallback",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/GameHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./AndroidSDK.ts","./Constant.ts","./Global.ts","./LoaderManager.ts","./SceneManager.ts","./SubLoading.ts","./Networking.ts","./PopupManager.ts","./SDK.ts","./l10n-manager.ts"],(function(e){var t,n,r,a,o,s,c,i,u,l,f,p,h,m,d,g,v,b,A,w;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e.assetManager,o=e.SpriteFrame,s=e.Texture2D,c=e.sys,i=e.Prefab},null,function(e){u=e.default},function(e){l=e.ErrorMessages,f=e.SKU_ITEM,p=e.SceneName},function(e){h=e.default},function(e){m=e.LoaderManager},function(e){d=e.SceneManager},function(e){g=e.SubLoading},function(e){v=e.default},function(e){b=e.default},function(e){A=e.default},function(e){w=e.default}],execute:function(){r._RF.push({},"a1b28BEQE1EJLbMMMPZJ6/V","GameHelper",void 0);e("GameHelper",function(){function e(){}return e.loadImage=function(e,t){a.loadRemote(e,{ext:".png"},(function(e,n){if(e)console.error(e);else{var r=new o,a=new s;a.image=n,r.texture=a,t.spriteFrame=r}}))},e.convertToTimeString=function(e){var t=Math.floor(e/60),n=Math.floor(e-60*t);return t.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")},e.loadAvatar=function(e,t){if(this._isValidHttpUrl(e))this.loadImage(e+"?w=100&h=100",t);else{var n=null==e?"big-questionmark":e;m.Instance.loadAsset("default-avatar/"+n+"/spriteFrame",o).then((function(e){t.isValid&&(t.spriteFrame=e)}))}},e._isValidHttpUrl=function(e){return null!=e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g)},e.getAvatarStrFromPlayer=function(e){var t=e||{},n=t.avatar,r=void 0===n?"0":n,a=t.customAvatar||r;return A.isPokiEnable&&this._isValidHttpUrl(a)&&(a="0"),a},e.getNameFromPlayer=function(e){var t=e||{},n=t.name;return t.nickName||n},e.roundNumber=function(e,t,n){void 0===n&&(n=2);var r=Math.min(Math.pow(10,n),t),a=(""+r).length-1,o=e/(t/r)|0,s=o/r|0;if(0===(o-=r*s))return""+s;if(o<=Math.pow(10,a-1)-1){for(var c=a-(""+o).length;o%10==0;)o/=10;return s+"."+"".padStart(c,"0")+o}for(;o%10==0;)o/=10;return s+"."+o},e.formatCurrency=function(e,t){void 0===t&&(t=2);var n=e<0?"-":"",r=Math.floor(Math.abs(e));return r>=1e9?""+n+this.roundNumber(r,1e9,t)+"B":r>=1e6?""+n+this.roundNumber(r,1e6,t)+"M":r>=1e3?""+n+this.roundNumber(r,1e3,t)+"K":""+n+r},e.pointNumber=function(e,t){void 0===t&&(t=",");var n=t||".",r=Math.floor(Math.abs(e));return(e<0?"-":"")+String(r).replace(/\B(?=(\d{3})+(?!\d))/g,n)},e.formatNumber=function(e,t){return void 0===t&&(t=4),e>=Math.pow(10,t)?this.formatCurrency(e):this.pointNumber(e)},e.showAlert=function(e,t){return void 0===t&&(t=!1),b.Instance.open("AlertPopup",e,t)},e.getErrorMessage=function(e){var t=w.t(l[e]||"error-occurred");return null!=e&&(t+="\ncode: "+e),t},e.showErrorAlert=function(e){var t=this.getErrorMessage(e);this.showAlert({message:t},!0)},e.showReconnectAlert=function(t){var n=this;this.showAlert({message:e.getErrorMessage(t),okText:w.t("reconnect"),showCloseButton:!0},!0).then((function(e){"Ok"===e&&n._tryToReconnect()}))},e._tryToReconnect=function(){var r=t(n().mark((function t(){var r,a,o,s,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,g.Instance.show(),null==(r=c.localStorage.getItem("reconnectionToken"))){t.next=16;break}return t.next=6,v.reconnect(r);case 6:return a=t.sent,o=a.seatReservation,t.next=10,v.client.consumeSeatReservation(o);case 10:return v.gameRoom=t.sent,c.localStorage.setItem("reconnectionToken",v.gameRoom.reconnectionToken),s="ClassicModeRoom"===v.gameRoom.name?"classic":"sweety",t.next=15,e.loadAllRequireGameplayAsset(v.gameRoom.state,s);case 15:d.Instance.moveToScene("classic"===s?p.GAMEPLAY_CLASSIC:p.GAMEPLAY_SUPER);case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),console.error(t.t0),this.showReconnectAlert((null==(i=t.t0.response)||null==(i=i.data)?void 0:i.code)||t.t0.code);case 22:return t.prev=22,g.Instance.hide(),t.finish(22);case 25:case"end":return t.stop()}}),t,this,[[0,18,22,25]])})));return function(){return r.apply(this,arguments)}}(),e.showFeatureNotAvailableAlert=function(){this.showAlert({message:w.t("feature-not-available")})},e.loadAllRequireGameplayAsset=function(){var e=t(n().mark((function e(t,r,a){var s,c,u,l,f,h,d,g,v,b,A,w,x,I,y;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r="classic"),void 0===a&&(a=null),s=0,c=[],u=function(e){return null==a?null:(c.push(0),function(t){c[e]=t/c.length,s=Math.max(c.reduce((function(e,t){return e+t}),0),s),a(s)})},l=0,f=function(e){console.error(e)},h="classic"===r?p.GAMEPLAY_CLASSIC:p.GAMEPLAY_SUPER,d=m.Instance.loadScene(h,u(l++)).catch(f),g=m.Instance.loadDir("color-tile-"+r,o,u(l++)).catch(f),v=m.Instance.loadDir("gameplay-common",o,u(l++)).catch(f),b=t.slots.filter((function(e){return null!=e.player})),w=(A=function(e){return("characters"===e?b.map((function(e){return e.equippingChar})):"bases"===e?b.map((function(e){return e.equippingBase})):b.map((function(e){return e.equippingDice}))).filter((function(e,t,n){return null!=e&&n.indexOf(e)===t}))})("characters").map((function(e){return m.Instance.loadAsset("characters/anim/"+e.split(".")[1],i,u(l++)).catch(f)})),x=A("bases").map((function(e){return m.Instance.loadAsset("bases/ingame/"+e.split(".")[1],i,u(l++)).catch(f)})),I=A("dice").map((function(e){return Promise.all([m.Instance.loadDiceAnimPrefab(e).catch(f),m.Instance.loadDiceThumb(e).catch(f)])})),y=[d,g,v,v].concat(w,x,I),e.abrupt("return",Promise.all(y));case 19:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),e.onSignInButtonClick=function(){var r=t(n().mark((function t(){var r,a,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,g.Instance.show(),!c.isNative||c.os!==c.OS.ANDROID){t.next=18;break}return t.next=5,u.signIn(!0);case 5:if(null==(r=t.sent)){t.next=16;break}return h.setUserClient(r),h.accountType="android",t.t0=h,t.next=12,v.getUserInfo();case 12:return t.t1=t.sent,t.t0.setUserInfo.call(t.t0,t.t1),t.next=16,v.client.auth.signOut();case 16:t.next=44;break;case 18:if(!A.isCrazyGameEnable){t.next=26;break}return t.next=21,A.showAuthPrompt();case 21:return a=t.sent,t.next=24,this.tryToSignInCrazyGame(a);case 24:t.next=44;break;case 26:if(!A.isZMPEnable){t.next=42;break}return t.next=29,A.getUser();case 29:if(o=t.sent,h.setUserClient(o),null==o){t.next=40;break}return h.accountType="zmp",t.t2=h,t.next=36,v.getUserInfo();case 36:return t.t3=t.sent,t.t2.setUserInfo.call(t.t2,t.t3),t.next=40,v.client.auth.signOut();case 40:t.next=44;break;case 42:return t.next=44,v.client.auth.signInWithProvider("google");case 44:t.next=50;break;case 46:t.prev=46,t.t4=t.catch(0),e.showAlert({message:w.t("login-failed")}),console.error(t.t4);case 50:return t.prev=50,g.Instance.hide(),t.finish(50);case 53:case"end":return t.stop()}}),t,this,[[0,46,50,53]])})));return function(){return r.apply(this,arguments)}}(),e.tryToSignInCrazyGame=function(){var e=t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.setUserClient(t),null==t){e.next=10;break}return h.accountType="crazygame",e.t0=h,e.next=6,v.getUserInfo();case 6:return e.t1=e.sent,e.t0.setUserInfo.call(e.t0,e.t1),e.next=10,v.client.auth.signOut();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.getItemConfig=function(e){var t=e.split("."),n=t[0];t[1];return(h.inventoryData[n]||[]).find((function(t){return t.sku===e}))||{}},e.isReddotActive=function(e,t){var n=this,r=e.split(".").reduce((function(e,t){return null!=e?e[t]:null}),t);return!!r&&("boolean"==typeof r?r:Object.keys(r).some((function(e){return n.isReddotActive(e,r)})))},e.promptWatchAdPopup=function(t){void 0===t&&(t=f.COIN);var n=t===f.COIN?"not-enough-candy-watch-ad":"not-enough-gem-watch-ad";e.showAlert({message:w.t(n),okCb:function(){b.Instance.open("RewardAdPopup")},okText:w.t("watch-ad"),showCancel:!0})},e.quickPlay=function(){var e=t(n().mark((function e(t){var r,a,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),g.Instance.show(),e.next=4,v.quickPlay(t);case 4:return r=e.sent,a=r.seatReservation,e.next=8,v.client.consumeSeatReservation(a);case 8:o=e.sent,v.gameRoom=o,d.Instance.moveToScene(p.PREPARING_ROOM);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.showNoAdAlert=function(){e.showAlert({message:w.t("no-ad")})},e.isEmptyObject=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/GameSharingPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mobx.cjs.development.mjs_cjs=&original=.js","./Popup.ts","./PopupManager.ts","./SDK.ts","./AdStore.ts","./SubLoading.ts","./StringUtils.ts","./mobx.cjs.development.js"],(function(e){var t,n,r,o,i,a,s,u,c,p,l,h,m,f,d,b,v,L,_,g,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,u=e._decorator,c=e.Button,p=e.Label,l=e.Sprite,h=e.macro,m=e.Layout,f=e.UITransform},null,function(e){d=e.Popup},function(e){b=e.default},function(e){v=e.default},function(e){L=e.AdStore},function(e){_=e.SubLoading},function(e){g=e.StringUtils},function(e){y=e.default}],execute:function(){var S,T,P,w,D,R,x;s._RF.push({},"69696XPn5ZFirHVX/C0uAzT","GameSharingPopup",void 0);y.observable,y.makeObservable;var B=y.autorun,j=(y.reaction,y.action,u.ccclass),I=u.property;e("GameSharingPopup",(S=j("GameSharingPopup"),T=I(c),P=I(p),S((R=t((D=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"shareButton",R,o(t)),r(t,"timerLabel",x,o(t)),t._timeLeft=0,t._mobXDisosers=[],t}n(t,e);var s=t.prototype;return s.onLoad=function(){var t=this;e.prototype.onLoad.call(this),L.fetchShareInfo(),this.shareButton.node.on(c.EventType.CLICK,i(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_.Instance.show(),e.next=4,v.shareGameOnPostFeed();case 4:return e.next=6,L.receiveShareReward();case 6:t=e.sent,b.Instance.open("ReceiveReward",{amount:t.reward}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:return e.prev=13,_.Instance.hide(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])}))));var n=B((function(){var e=L.shareResetTime;t.shareButton.interactable=e<0,t.shareButton.getComponent(l).grayscale=!t.shareButton.interactable,t._timeLeft=Math.ceil(e/1e3),t._updateTimer(),t._updateTimerTextLayout(),t.schedule(t._countDown,1,h.REPEAT_FOREVER)}));this._mobXDisosers.push(n)},s._countDown=function(){this._timeLeft-=1,this._updateTimer(),this._timeLeft<0&&this.unschedule(this._countDown)},s._updateTimer=function(){var e=this._timeLeft>0;this.timerLabel.node.parent.active=e,e&&(this.timerLabel.string=g.formatTime(this._timeLeft))},s._updateTimerTextLayout=function(){this.timerLabel.updateRenderData(!0),this.timerLabel.node.parent.getComponent(m).updateLayout();var e=this.timerLabel.node.parent.getComponent(f);e.setAnchorPoint(0,.5),e.node.setPosition(-e.width/2,e.node.position.y)},s.onDestroy=function(){e.prototype.onDestroy.call(this),this._mobXDisosers.forEach((function(e){e()}))},t}(d)).prototype,"shareButton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(D.prototype,"timerLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=D))||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/Global.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mobx.cjs.development.mjs_cjs=&original=.js","./mobx.cjs.development.js"],(function(t){var e,r,o,n,i,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.createClass,o=t.initializerDefineProperty},function(t){n=t.cclegacy,i=t.sys},null,function(t){s=t.default}],execute:function(){var u,a,p,c,l,f;n._RF.push({},"47066iP3CNJzZOJt4pbP9nj","Global",void 0);var y=s.observable,d=s.makeObservable,h=s.action,m=s.computed,g=(a=e((u=function(){function t(){this.myIdx=0,o(this,"userClient",a,this),o(this,"userInfo",p,this),o(this,"coins",c,this),o(this,"reddotTree",l,this),o(this,"arenaIsGoing",f,this),this.accountType="crazygame",this.localPlayers=[],this.firstTimeLoadedHome=!0,this.hasAdBlock=!1,this.gameCounter=0,this.watchedAdAtEndGame=!1,this.watchedAdHome=!1,this.inventoryData=null,this.choosingGameMode=1,this.manaMetric=null,this.startedFirstMoveAnimation=!1,this.weeklyRewardsConfig=null,this.arenaRewardConfig=null,d(this)}var e=t.prototype;return e.getManaDelta=function(t){return this.manaMetric[t]||1},e.updateReddotTree=function(t,e){for(var r=t.split("."),o=this.reddotTree;null!=o||0!=r.length;){var n=r.shift(),s=o[n];if("boolean"==typeof s)return o[n]=e,void i.localStorage.setItem("reddot-tree",JSON.stringify(this.reddotTree));o=s}console.warn("Invalid reddot tree path! "+t)},e.setIsArenaGoing=function(t){this.arenaIsGoing=t},e.setReddotTree=function(t){this.reddotTree=t},e.isReddotActive=function(t,e){var r=this;void 0===e&&(e=this.reddotTree);var o=t.split(".").reduce((function(t,e){return null!=t?t[e]:null}),e);return"boolean"==typeof o?o:Object.keys(o).some((function(t){return r.isReddotActive(t,o)}))},e.setUserClient=function(t){this.userClient=t},e.setUserInfo=function(t){this.userInfo=t},e.setCoins=function(t){this.userInfo.coins=t},e.setGems=function(t){this.userInfo.gems=t},e.setInfo=function(t){Object.assign(this.userInfo,t)},e.setNickName=function(t){this.userInfo.nickName=t},e.setCustomeAvatar=function(t){this.userInfo.customAvatar=t},e.isItemOwned=function(t){var e;return(null==(e=this.userInfo.inventoryItems.find((function(e){return e.sku===t})))?void 0:e.owned)||!1},e.isCharTryable=function(t){var e;return(null==(e=this.inventoryData.characters.find((function(e){return e.sku===t})))?void 0:e.canTryByAd)||!1},e.isItemTrial=function(t){var e;return(null==(e=this.userInfo.inventoryItems.find((function(e){return e.sku===t})))?void 0:e.isTrial)||!1},e.isInExpireDate=function(t){var e,r=null==(e=this.userInfo.inventoryItems.find((function(e){return e.sku===t})))?void 0:e.expireDate;return!!r&&(console.log("expire date",r),new Date(r).getTime()>=Date.now())},e.getMyItem=function(t){return this.userInfo.inventoryItems.find((function(e){return e.sku===t}))||{}},e.getTotalMatch=function(){var t,e;return(null==(t=this.userInfo)?void 0:t.total)||0+(null==(e=this.userInfo)?void 0:e.sweetyTotal)||0},e.getEquipOption=function(){return{char:this.userInfo.equippingChar,dice:this.userInfo.equippingDice,base:this.userInfo.equippingBase,colorIdx:0}},r(t,[{key:"myCurName",get:function(){return this.userInfo.nickName||this.userInfo.name}},{key:"myCurAvatar",get:function(){return this.userInfo.customAvatar||this.userInfo.avatar}},{key:"userDice",get:function(){return this.userInfo.inventoryItems.filter((function(t){return t.sku.includes("dices.")}))}}]),t}()).prototype,"userClient",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=e(u.prototype,"userInfo",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=e(u.prototype,"coins",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=e(u.prototype,"reddotTree",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{shop:{throwables:!0,dice:!0,characters:!0,bases:!0},avatar:!0,mode_2v2:!0}}}),f=e(u.prototype,"arenaIsGoing",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(u.prototype,"updateReddotTree",[h],Object.getOwnPropertyDescriptor(u.prototype,"updateReddotTree"),u.prototype),e(u.prototype,"setIsArenaGoing",[h],Object.getOwnPropertyDescriptor(u.prototype,"setIsArenaGoing"),u.prototype),e(u.prototype,"setReddotTree",[h],Object.getOwnPropertyDescriptor(u.prototype,"setReddotTree"),u.prototype),e(u.prototype,"setUserClient",[h],Object.getOwnPropertyDescriptor(u.prototype,"setUserClient"),u.prototype),e(u.prototype,"setUserInfo",[h],Object.getOwnPropertyDescriptor(u.prototype,"setUserInfo"),u.prototype),e(u.prototype,"setCoins",[h],Object.getOwnPropertyDescriptor(u.prototype,"setCoins"),u.prototype),e(u.prototype,"setGems",[h],Object.getOwnPropertyDescriptor(u.prototype,"setGems"),u.prototype),e(u.prototype,"setInfo",[h],Object.getOwnPropertyDescriptor(u.prototype,"setInfo"),u.prototype),e(u.prototype,"setNickName",[h],Object.getOwnPropertyDescriptor(u.prototype,"setNickName"),u.prototype),e(u.prototype,"setCustomeAvatar",[h],Object.getOwnPropertyDescriptor(u.prototype,"setCustomeAvatar"),u.prototype),e(u.prototype,"myCurName",[m],Object.getOwnPropertyDescriptor(u.prototype,"myCurName"),u.prototype),e(u.prototype,"myCurAvatar",[m],Object.getOwnPropertyDescriptor(u.prototype,"myCurAvatar"),u.prototype),u);t("default",new g);n._RF.pop()}}}));

System.register("chunks:///_virtual/GoToSceneController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SceneManager.ts"],(function(e){var n,t,o,r,c,i,a,l,s,u;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){c=e.cclegacy,i=e._decorator,a=e.CCString,l=e.Button,s=e.Component},function(e){u=e.SceneManager}],execute:function(){var p,f,S,y,C;c._RF.push({},"a0b950pmUpEyLq4VRw+WeHn","GoToSceneController",void 0);var g=i.ccclass,h=i.property;e("GoToSceneController",(p=g("GoToSceneController"),f=h(a),p((C=n((y=function(e){function n(){for(var n,t=arguments.length,c=new Array(t),i=0;i<t;i++)c[i]=arguments[i];return n=e.call.apply(e,[this].concat(c))||this,o(n,"nextScene",C,r(n)),n}return t(n,e),n.prototype.onLoad=function(){var e=this;this.getComponent(l).node.on(l.EventType.CLICK,(function(){u.Instance.moveToScene(e.nextScene)}))},n}(s)).prototype,"nextScene",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),S=y))||S));c._RF.pop()}}}));

System.register("chunks:///_virtual/GuideTooltip.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,i,n,c,r;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,n=t.UIOpacity,c=t.tween,r=t.Component}],execute:function(){var p;e._RF.push({},"5de0444hIdPd5VqN/pfd6Fe","GuideTooltip",void 0);var u=i.ccclass;i.property,t("GuideTooltip",u("GuideTooltip")(p=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){var t=this,o=this.getComponent(n);c(o).set({opacity:0}).to(.25,{opacity:255}).delay(3).to(.25,{opacity:0}).call((function(){t.node.destroy()})).start()},e}(r))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/HelpPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Constant.ts","./Global.ts","./Popup.ts","./SceneManager.ts","./l10n-manager.ts"],(function(t){var n,e,o,a,r,i,u,c,s,l,p,b,f,d,h,C,T,v;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.extends},function(t){i=t.cclegacy,u=t._decorator,c=t.Node,s=t.Button,l=t.Label,p=t.RichText,b=t.Sprite,f=t.Color},null,function(t){d=t.SceneName},function(t){h=t.default},function(t){C=t.Popup},function(t){T=t.SceneManager},function(t){v=t.default}],execute:function(){var y,g,m,I,_,x,L,B,E;i._RF.push({},"46bbdQ2AfBOR4KMzJLLBEs7","HelpPopup",void 0);var P=u.ccclass,M=u.property;t("HelpPopup",(y=P("HelpPopup"),g=M([c]),m=M([c]),I=M(s),y((L=n((x=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=t.call.apply(t,[this].concat(r))||this,o(n,"tabs",L,a(n)),o(n,"tabContents",B,a(n)),o(n,"tutorialButton",E,a(n)),n._curTabIdx=0,n}e(n,t);var i=n.prototype;return i.onLoad=function(){var n=this;t.prototype.onLoad.call(this),this.tabs.forEach((function(t,e){t.on(s.EventType.CLICK,(function(){n._curTabIdx!==e&&(n._curTabIdx=e,n._updateTabContents())}))}));var e=Object.keys(h.manaMetric).reduce((function(t,n){var e;return r({},t,((e={})[n]=Math.abs(h.manaMetric[n]),e))}),{});[].concat(this.tabContents[1].getComponentsInChildren(l),this.tabContents[1].getComponentsInChildren(p)).forEach((function(t){t.string=v.t("help-sw-"+t.node.name,e)})),this.tutorialButton.node.on(s.EventType.CLICK,(function(){T.Instance.moveToScene(d.TUTORIAL)}))},i._updateTabContents=function(){var t=this;this.tabs.forEach((function(n,e){n.getComponent(b).color=(new f).fromHEX(t._curTabIdx===e?"#F7D2A8":"#BB9063"),t.tabContents[e].active=t._curTabIdx===e}))},i.onEnable=function(){this._curTabIdx=this._data.tabIdx||0,this._updateTabContents()},n}(C)).prototype,"tabs",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=n(x.prototype,"tabContents",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=n(x.prototype,"tutorialButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=x))||_));i._RF.pop()}}}));

System.register("chunks:///_virtual/HighLightTile.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,o,n,l,c,a,s,u,p,h,f,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,c=e.Sprite,a=e.SpriteFrame,s=e.Node,u=e.color,p=e.tween,h=e.easing,f=e.Tween,g=e.Component}],execute:function(){var y,d,b,v,_,m,T,w,C;n._RF.push({},"c4033dXkeVM+IsDy6w/hube","HighLightTile",void 0);var D=l.ccclass,L=l.property;e("HighLightTile",(y=D("HighLightTile"),d=L(c),b=L([a]),v=L(s),y((T=t((m=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,r(t,"sprite",T,o(t)),r(t,"tileSfs",w,o(t)),r(t,"touchReceiver",C,o(t)),t._tempColor=u(),t._cb=function(){},t}i(t,e);var n=t.prototype;return n.onLoad=function(){var e=this;this.touchReceiver.on(s.EventType.TOUCH_END,(function(){e._cb()}));try{p(this.sprite).to(.75,null,{onUpdate:function(t,i){e.isValid&&(e._tempColor.set(255*h.quadIn(i)*.8,255,255,255),e.sprite.color=e._tempColor)}}).to(.75,null,{onUpdate:function(t,i){e.isValid&&(e._tempColor.set(204*(1-h.quadOut(i)),255,255,255),e.sprite.color=e._tempColor)}}).union().repeatForever().start()}catch(e){console.error(e)}},n.setData=function(e,t){this.sprite.spriteFrame=this.tileSfs[e],this._cb=t},n.start=function(){},n.update=function(e){},n.onDestroy=function(){f.stopAllByTarget(this.sprite)},t}(g)).prototype,"sprite",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(m.prototype,"tileSfs",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(m.prototype,"touchReceiver",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=m))||_));n._RF.pop()}}}));

System.register("chunks:///_virtual/Home.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupManager.ts","./mobx.cjs.development.mjs_cjs=&original=.js","./Constant.ts","./CustomSafeArea.ts","./Global.ts","./AudioManager.ts","./LoaderManager.ts","./SceneManager.ts","./Networking.ts","./SDK.ts","./AdStore.ts","./GameHelper.ts","./mobx.cjs.development.js"],(function(e){var n,t,o,a,r,i,u,l,c,s,p,f,d,h,y,b,m,v,g,I,B,w,C,P,R,T,A,L,E;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){u=e.cclegacy,l=e._decorator,c=e.Button,s=e.Node,p=e.sys,f=e.Label,d=e.Prefab,h=e.instantiate,y=e.director,b=e.Component},function(e){m=e.default},null,function(e){v=e.MUSIC,g=e.SceneName},function(e){I=e.CustomSafeArea},function(e){B=e.default},function(e){w=e.AudioManager},function(e){C=e.LoaderManager},function(e){P=e.SceneManager},function(e){R=e.default},function(e){T=e.default},function(e){A=e.AdStore},function(e){L=e.GameHelper},function(e){E=e.default}],execute:function(){var S,_,k,N,z,x,D,M,O,K,F,G,H,j,W,U,X,Y,V,J,Z,q,Q,$,ee,ne,te,oe,ae,re,ie;u._RF.push({},"9cb9f1vAvJC9o0XgxiNb0wc","Home",void 0);E.observable,E.makeObservable;var ue=E.autorun,le=(E.reaction,l.ccclass),ce=l.property;e("Home",(S=le("Home"),_=ce(c),k=ce(c),N=ce(c),z=ce(c),x=ce(c),D=ce(c),M=ce(c),O=ce(c),K=ce(c),F=ce(c),G=ce(c),H=ce([c]),j=ce(s),W=ce(s),S((Y=n((X=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return n=e.call.apply(e,[this].concat(r))||this,o(n,"playNowButton",Y,a(n)),o(n,"playWithFriendButton",V,a(n)),o(n,"playLocalButton",J,a(n)),o(n,"signInButton",Z,a(n)),o(n,"settingButton",q,a(n)),o(n,"helpButton",Q,a(n)),o(n,"watchAdButton",$,a(n)),o(n,"shareButton",ee,a(n)),o(n,"shopButton",ne,a(n)),o(n,"changeNameButton",te,a(n)),o(n,"arenaButton",oe,a(n)),o(n,"featureNotAvailableButtons",ae,a(n)),o(n,"privacyPolicyText",re,a(n)),o(n,"avatarReddot",ie,a(n)),n._mobXDisPosers=[],n}t(n,e);var u=n.prototype;return u.onLoad=function(){var e=this;this.signInButton.node.active=!1,w.Instance.playMusic(v.HOME_BGM),m.Instance.preloadAllPopup(),this.playNowButton.node.on(c.EventType.CLICK,r(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P.Instance.moveToScene(g.LOBBY);case 1:case"end":return e.stop()}}),e)})))),this.playWithFriendButton.node.on(c.EventType.CLICK,(function(){e._openPopupIfSignedIn("PlayWithFriendPopup")})),this.playLocalButton.node.on(c.EventType.CLICK,(function(){m.Instance.open("PlayLocalPopup")})),this.settingButton.node.on(c.EventType.CLICK,(function(){m.Instance.open("SettingPopup")})),this.watchAdButton.node.on(c.EventType.CLICK,(function(){m.Instance.open("RewardAdPopup")})),this.shareButton.node.on(c.EventType.CLICK,(function(){m.Instance.open("GameSharingPopup")})),T.isPokiEnable?this.changeNameButton.node.on(c.EventType.CLICK,(function(){m.Instance.open("ProfileUpdatePopup")})):this.avatarReddot.destroy(),this.shareButton.node.active=T.isZMPEnable,this.featureNotAvailableButtons.forEach((function(e){e.node.on(c.EventType.CLICK,(function(){L.showFeatureNotAvailableAlert()}))})),this.shopButton.node.on(c.EventType.CLICK,(function(){P.Instance.moveToScene(g.INVENTORY)})),this.signInButton.node.on(c.EventType.CLICK,(function(){L.onSignInButtonClick()})),this.helpButton.node.on(c.EventType.CLICK,(function(){m.Instance.open("HelpPopup")})),this.arenaButton.node.on(c.EventType.CLICK,(function(){P.Instance.moveToScene(g.ARENA_PREPARING_ROOM)})),this.privacyPolicyText.active=p.isBrowser&&T.isCrazyGameEnable,this.privacyPolicyText.on(s.EventType.TOUCH_END,(function(){p.isBrowser&&T.isCrazyGameEnable&&window.open("https://tuan243.github.io/sweety-ludo-privacy-policy/","_blank").focus()})),R.getUserCoins().then((function(e){B.setInfo(e)}));var n=ue((function(){e.shopButton.node.active=null!=B.userInfo,e.watchAdButton.node.active=null!=B.userInfo,null!=B.userInfo&&(A.fetchData(),A.fetchShareInfo(),e.signInButton.node.active="anonymous"===B.userInfo.account.type&&!T.isPokiEnable)})),t=ue((function(){var n=e.watchAdButton.getComponentInChildren(f);n.node.parent.active=A.adRemaining>0,n.string=" "+A.adRemaining+" ",A.resetTime>0&&e.scheduleOnce(e._reFetchAdData,A.resetTime/1e3)})),o=ue((function(){e.shareButton.node.getChildByName("reddot").active=A.shareResetTime<0,A.shareResetTime>0&&e.scheduleOnce(e._reFetchShareData,A.shareResetTime/1e3)}));this._mobXDisPosers.push(n,t,o),console.log("BUILD"),T.isCrazyGameEnable&&C.Instance.loadAsset("crazygame-logo/crazygame-logo",d).then((function(n){e.isValid&&e.getComponentInChildren(I).node.addChild(h(n))}))},u._reFetchAdData=function(){A.fetchData()},u._reFetchShareData=function(){A.fetchShareInfo()},u.start=function(){y.preloadScene(g.LOBBY),y.preloadScene(g.PREPARING_ROOM),y.preloadScene(g.ARENA_PREPARING_ROOM),B.firstTimeLoadedHome&&this._tryToClaimLeaderboardRewards(),B.firstTimeLoadedHome=!1,B.startedFirstMoveAnimation=!1},u._tryToClaimLeaderboardRewards=function(){var e=r(i().mark((function e(){var n,t,o,a,r,u,l,c,s,p,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!((null==(n=B.userInfo)?void 0:n.weeklyRank)>0)){e.next=11;break}return e.next=4,R.claimWeeklyLeaderboardRewards();case 4:if(o=e.sent,a=o.rewards,r=void 0===a?[]:a,u=o.updateData,l=void 0===u?{}:u,B.userInfo.weeklyRank=-1,B.setInfo(l),!(r.length>0)){e.next=11;break}return e.next=11,m.Instance.open("WeeklyRewardPopup",o);case 11:if(!((null==(t=B.userInfo)?void 0:t.arenaRank)>0)){e.next=21;break}return e.next=14,R.claimArenaRewards();case 14:if(c=e.sent,s=c.rewards,p=void 0===s?[]:s,f=c.updateData,B.userInfo.arenaRank=-1,B.setInfo(f),!(p.length>0)){e.next=21;break}return e.next=21,m.Instance.open("WeeklyRewardPopup",c);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}(),u.onDestroy=function(){this._mobXDisPosers.forEach((function(e){e()}))},u._openPopupIfSignedIn=function(e,n){void 0===n&&(n=null),null!=B.userInfo?m.Instance.open(e,n):L.showAlert({message:"The server is under maintenance. Please try again later."},!0)},n}(b)).prototype,"playNowButton",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(X.prototype,"playWithFriendButton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=n(X.prototype,"playLocalButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=n(X.prototype,"signInButton",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=n(X.prototype,"settingButton",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=n(X.prototype,"helpButton",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=n(X.prototype,"watchAdButton",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=n(X.prototype,"shareButton",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=n(X.prototype,"shopButton",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=n(X.prototype,"changeNameButton",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=n(X.prototype,"arenaButton",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=n(X.prototype,"featureNotAvailableButtons",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),re=n(X.prototype,"privacyPolicyText",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=n(X.prototype,"avatarReddot",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=X))||U));u._RF.pop()}}}));

System.register("chunks:///_virtual/HttpHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,s,n,o,u;return{setters:[function(t){e=t.asyncToGenerator,r=t.regeneratorRuntime,s=t.extends},function(t){n=t.cclegacy,o=t._decorator,u=t.sys}],execute:function(){t("httpRequest",(function(t,e,r,s){return a.apply(this,arguments)})),n._RF.push({},"52e2aElWZxF3rYzC4/LWnYu","HttpHelper",void 0);o.ccclass,o.property;function a(){return(a=e(r().mark((function t(e,n,o,a){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e="GET"),void 0===a&&(a=null),t.abrupt("return",new Promise((function(t,r){var i=new XMLHttpRequest;i.open(e.toUpperCase(),n),u.isBrowser&&(i.withCredentials=!0),i.timeout=7e3,i.responseType="json";var p=s({},o,{"Content-Type":"application/json"});Object.keys(p).forEach((function(t){i.setRequestHeader(t,p[t])})),i.onload=function(){var e;i.status>=200&&i.status<300?t(i.response):r({status:i.status,statusText:i.statusText,error:(null==(e=i.response)?void 0:e.error)||-1})},i.onerror=function(){var t;r({status:i.status,statusText:i.statusText,error:(null==(t=i.response)?void 0:t.error)||-1})},i.send(a?JSON.stringify(a):null)})));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n._RF.pop()}}}));

System.register("chunks:///_virtual/ICallbackNTF.ts",["cc"],(function(){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"6c8dadexLJGwqjGQ2usL63Y","ICallbackNTF",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/icu-component.ts",["cc"],(function(){var e,c;return{setters:[function(t){e=t.cclegacy,c=t._decorator}],execute:function(){e._RF.push({},"7a9702ZfUJLAYlcof0GxBG1","icu-component",void 0);c.ccclass,c.property,c.requireComponent,c.executeInEditMode;e._RF.pop()}}}));

System.register("chunks:///_virtual/icu-options.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"dc153GItvdCNIAlIBY8vQ+M","icu-options",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/icu-type.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"e5dc4ljkiFFpI9LqK8hBCPl","icu-type",void 0);var i=e("default",function(e){return e[e.DateTime=0]="DateTime",e[e.Number=1]="Number",e[e.List=2]="List",e[e.RelativeTime=3]="RelativeTime",e}(i||{}));t._RF.pop()}}}));

System.register("chunks:///_virtual/INativeResponse.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"03548ZFhZZARbvS8YmyP/AH","INativeResponse",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/InterstitailAd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Base.ts"],(function(t){var n,r,i,a;return{setters:[function(t){n=t.inheritsLoose},function(t){r=t.cclegacy,i=t._decorator},function(t){a=t.Base}],execute:function(){var e,o,l,s,c,u;r._RF.push({},"351a6cGhWdHlaZa5uq/AsZ8","InterstitailAd",void 0);var d=i.ccclass;i.property,t("LoadInterstitialAdREQ",d("LoadInterstitialAdREQ")(e=function(t){function r(){return t.apply(this,arguments)||this}return n(r,t),r}(a))||e),t("LoadInterstitialAdACK",d("LoadInterstitialAdACK")(o=function(t){function r(){return t.apply(this,arguments)||this}return n(r,t),r}(a))||o),t("ShowInterstitialAdREQ",d("ShowInterstitialAdREQ")(l=function(t){function r(){return t.apply(this,arguments)||this}return n(r,t),r}(a))||l),t("ShowInterstitialAdACK",d("ShowInterstitialAdACK")(s=function(t){function r(){return t.apply(this,arguments)||this}return n(r,t),r}(a))||s),t("InterstitialAdLoadCalLBackNTF",d("InterstitialAdLoadCalLBackNTF")(c=function(t){function r(){for(var n,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=t.call.apply(t,[this].concat(i))||this).method=void 0,n.loadAdError=void 0,n}return n(r,t),r}(a))||c),t("InterstitialFullScreenContentCallbackNTF",d("InterstitialFullScreenContentCallbackNTF")(u=function(t){function r(){for(var n,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=t.call.apply(t,[this].concat(i))||this).method=void 0,n.loadAdError=void 0,n}return n(r,t),r}(a))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/InterstitialAdClient.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Bridge.ts","./Route.ts","./InterstitailAd.ts","./AdClient.ts","./PaidEventNTF.ts"],(function(t){var i,n,e,s,a,l,o,r,d,c,u,h,C,f,I;return{setters:[function(t){i=t.inheritsLoose,n=t.createClass},function(t){e=t.cclegacy,s=t.log,a=t.js},function(t){l=t.bridge},function(t){o=t.route},function(t){r=t.LoadInterstitialAdREQ,d=t.LoadInterstitialAdACK,c=t.ShowInterstitialAdREQ,u=t.ShowInterstitialAdACK,h=t.InterstitialFullScreenContentCallbackNTF,C=t.InterstitialAdLoadCalLBackNTF},function(t){f=t.AdClient},function(t){I=t.InterstitialPaidEventNTF}],execute:function(){e._RF.push({},"0133a1I+utKjZdl7GATzhls","InterstitialAdClient",void 0);var L="[InterstitialAdClient]";t("InterstitialAdClient",function(t){function e(){for(var i,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return(i=t.call.apply(t,[this].concat(e))||this)._interstitialListener=void 0,i}i(e,t);var f=e.prototype;return f.load=function(t,i){this.destroy(),s(L,"load, unitId = "+t),this.unitId=t,this.interstitialListener=i,l.sendToNative(a.getClassName(r),{unitId:t},a.getClassName(d),(function(t){s(L,"load, LoadInterstitialAdACK, "+t)}))},f.destroy=function(){s(L,"destroy"),this.interstitialListener=null},f.show=function(t){s(L,"show"),l.sendToNative(a.getClassName(c),{unitId:this.unitId},a.getClassName(u),(function(i){t&&t()}))},f.onInterstitialAdLoadCalLBackNTF=function(t){if(s(L,"onInterstitialAdLoadCalLBackNTF, "+t),this.interstitialListener){var i=this.interstitialListener[t.method];i&&i(t.loadAdError)}},f.onInterstitialFullScreenContentCallback=function(t){s(L,"onInterstitialFullScreenContentCallback, "+t);var i=this.interstitialListener[t.method];i&&i()},f.onPaidEvent=function(t){var i=this.interstitialListener;i&&i.onPaidEvent&&i.onPaidEvent(t)},n(e,[{key:"interstitialListener",get:function(){return this._interstitialListener},set:function(t){t||(o.off(a.getClassName(h),this.onInterstitialFullScreenContentCallback,this),o.off(a.getClassName(C),this.onInterstitialAdLoadCalLBackNTF,this),o.off(a.getClassName(I),this.onPaidEvent,this)),this._interstitialListener=t,t&&(o.on(a.getClassName(h),this.onInterstitialFullScreenContentCallback,this),o.on(a.getClassName(C),this.onInterstitialAdLoadCalLBackNTF,this),o.on(a.getClassName(I),this.onPaidEvent,this))}}]),e}(f));e._RF.pop()}}}));

System.register("chunks:///_virtual/InterstitialAdListener.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"4f5447hMxxIepLeOECu2PRF","InterstitialAdListener",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/InterstitialAdLoadCallback.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"95c6biRenVPv70yEzTspX+h","InterstitialAdLoadCallback",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/InterstitialFullScreenContentCallback.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"26862PsMLhAsYZJMHVxZiYj","InterstitialFullScreenContentCallback",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Intl.PluralRules.ts",["cc","./polyfill.mjs_cjs=&original=.js"],(function(){var l;return{setters:[function(n){l=n.cclegacy},null],execute:function(){l._RF.push({},"c9594RdIOFIPIqnCMoH103U","Intl.PluralRules",void 0),l._RF.pop()}}}));

System.register("chunks:///_virtual/Inventory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Constant.ts","./BaseSkin.ts","./Global.ts","./LoaderManager.ts","./SceneManager.ts","./SubLoading.ts","./Networking.ts","./PopupManager.ts","./SDK.ts","./ColorSelector.ts","./GameHelper.ts","./PingPongAnimation.ts","./InventoryItem.ts","./l10n-manager.ts"],(function(e){var t,n,r,i,o,a,s,u,c,l,p,d,h,f,v,m,b,g,I,w,C,y,_,x,k,B,P,E,A,T,S,D,L,q,N,z;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime,s=e.extends},function(e){u=e.cclegacy,c=e._decorator,l=e.Button,p=e.Node,d=e.Prefab,h=e.Label,f=e.sp,v=e.Sprite,m=e.Color,b=e.ScrollView,g=e.instantiate,I=e.Component,w=e.SpriteFrame},null,function(e){C=e.SceneName,y=e.SKU_ITEM,_=e.FULL_ITEM_NAME},function(e){x=e.BaseSkin},function(e){k=e.default},function(e){B=e.LoaderManager},function(e){P=e.SceneManager},function(e){E=e.SubLoading},function(e){A=e.default},function(e){T=e.default},function(e){S=e.default},function(e){D=e.ColorSelector},function(e){L=e.GameHelper},function(e){q=e.PingPongAnimation},function(e){N=e.InventoryItem},function(e){z=e.default}],execute:function(){var R,M,F,K,G,O,U,H,j,V,W,X,Y,Z,J,Q,$,ee,te,ne,re,ie,oe,ae,se,ue,ce,le,pe,de,he,fe,ve;u._RF.push({},"95dd21ukqFMv6HEtLnjPo9Z","Inventory",void 0);var me=c.ccclass,be=c.property;e("Inventory",(R=me("Inventory"),M=be(l),F=be([p]),K=be([p]),G=be(d),O=be(D),U=be(p),H=be(l),j=be(l),V=be(l),W=be(l),X=be(l),Y=be(p),Z=be(p),J=be(h),Q=be(p),R((te=t((ee=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"backButton",te,i(t)),r(t,"tabs",ne,i(t)),r(t,"tabContents",re,i(t)),r(t,"inventoryItemPrefab",ie,i(t)),r(t,"colorSelector",oe,i(t)),r(t,"itemPreviewAnchor",ae,i(t)),r(t,"candyButton",se,i(t)),r(t,"gemButton",ue,i(t)),r(t,"adButton",ce,i(t)),r(t,"tryByAdButton",le,i(t)),r(t,"equipButton",pe,i(t)),r(t,"trialPreviewNode",de,i(t)),r(t,"exclusiveUI",he,i(t)),r(t,"itemName",fe,i(t)),r(t,"buttonLayoutContainer",ve,i(t)),t._curTabIdx=0,t._categories=["dice","throwables","characters","bases"],t._charColors=["BLUE","RED","GREEN","YELLOW"],t._previewingItem=null,t._clickCb=null,t._waitForEquipping=!1,t}n(t,e);var u=t.prototype;return u.onLoad=function(){var e=this;this._clickCb=this._onClickItem.bind(this),this.colorSelector.setChangeColorCb((function(t){var n,r=e._categories[e._curTabIdx];if("characters"===r)null==(n=e.itemPreviewAnchor.getComponentInChildren(f.Skeleton))||n.setSkin(e._charColors[t]);else if("bases"===r){var i;null==(i=e.itemPreviewAnchor.getComponentInChildren(x))||i.setColor(t)}})),this.tabs.forEach((function(t,n){t.on(l.EventType.CLICK,(function(){e._curTabIdx!==n&&(e._curTabIdx=n,e._updateTabContents())}))})),this._updateTabContents(),this.backButton.node.on(l.EventType.CLICK,(function(){P.Instance.moveToPreviousScene()})),this.candyButton.node.on(l.EventType.CLICK,(function(){e._buyItem(0)})),this.gemButton.node.on(l.EventType.CLICK,(function(){e._buyItem(1)})),this.adButton.node.on(l.EventType.CLICK,o(a().mark((function t(){var n,r,i,o,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e._previewingItem){t.next=2;break}return t.abrupt("return");case 2:return n=!0,t.prev=3,t.next=6,S.showRewardedAd();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),n=!1;case 11:if(n){t.next=14;break}return L.showAlert({message:z.t("no-ad")}),t.abrupt("return");case 14:return E.Instance.show(),r=e._previewingItem.itemData.sku,t.next=18,A.increaseAdCount(r);case 18:i=t.sent,o=i.inventoryItems,s=i.updatedItem,k.userInfo.inventoryItems=o,e._previewingItem.updateData(s),e._updatePreviewingContent(),s.owned&&e._showReward(r),E.Instance.hide();case 26:case"end":return t.stop()}}),t,null,[[3,8]])})))),this.tryByAdButton.node.on(l.EventType.CLICK,o(a().mark((function t(){var n,r,i,o,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!0,t.prev=1,t.next=4,S.showRewardedAd();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),n=!1;case 9:if(n){t.next=12;break}return L.showAlert({message:z.t("no-ad")}),t.abrupt("return");case 12:return r=e._previewingItem.itemData.sku,E.Instance.show(),t.next=16,A.tryItemByAd(r);case 16:i=t.sent,o=i.inventoryItems,s=i.updatedItem,k.userInfo.inventoryItems=o,e._previewingItem.updateData(s),e._updateButtonsState(),E.Instance.hide();case 23:case"end":return t.stop()}}),t,null,[[1,6]])})))),this.equipButton.node.on(l.EventType.CLICK,o(a().mark((function t(){var n,r,i,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._waitForEquipping){t.next=2;break}return t.abrupt("return");case 2:if(e._waitForEquipping=!0,t.prev=3,n=e._previewingItem.itemData.sku,r=n.split("."),i=r[0],r[1],["dice","bases","characters"].includes(i)){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,A.equipItem(n);case 10:(o={})[{dice:"equippingDice",characters:"equippingChar",bases:"equippingBase"}[i]]=n,k.setInfo(o),e.tabContents[e._categories.indexOf(i)].getComponentsInChildren(N).find((function(e){return e.itemData.using})).updateData({using:!1}),e._previewingItem.updateData({using:!0}),e._updateButtonsState(),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(3),console.error(t.t0);case 23:return t.prev=23,e._waitForEquipping=!1,t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[3,20,23,26]])})))),this.exclusiveUI.getComponentInChildren(l).node.on(l.EventType.CLICK,(function(){P.Instance.moveToScene(C.ARENA_PREPARING_ROOM)}))},u._updateTabContents=function(){var e=this;this.tabs.forEach((function(t,n){t.getComponent(v).color=(new m).fromHEX(e._curTabIdx===n?"#FEA13D":"#BB9063"),e.tabContents[n].active=e._curTabIdx===n}));var t=this.tabContents[this._curTabIdx].getComponent(b).content,n=this._categories[this._curTabIdx];if(0===t.children.length){var r=Object.values(y);k.inventoryData[n].filter((function(e){return r.includes(e.sku)})).forEach((function(r,i){var o=g(e.inventoryItemPrefab);o.setParent(t);var a=r.sku,u=!1;u="dice"===n?k.userInfo.equippingDice===a:"bases"===n?k.userInfo.equippingBase===a:"characters"===n?k.userInfo.equippingChar===a:k.isItemOwned(a);var c=k.isItemTrial(a),l=k.isInExpireDate(a),p=s({},r,{owned:k.isItemOwned(a),using:u,isTrial:c,isInExpireDate:l}),d=o.getComponent(N);d.setData(p),d.setClickCb(e._clickCb)}))}var i=t.getComponentsInChildren(N).find((function(e){return"throwables"===n||e.itemData.using}));null==i||i.click(),this.itemPreviewAnchor.parent.children[0].active="bases"!==n,this.colorSelector.node.active=["bases","characters"].includes(n),this.colorSelector.setColor(0);k.updateReddotTree("shop."+["dice","throwables","characters","bases"][this._curTabIdx],!1)},u._onClickItem=function(){var e=o(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._previewingItem!==t){e.next=2;break}return e.abrupt("return");case 2:this._previewingItem=t,this.tabContents[this._curTabIdx].getComponent(b).content.getComponentsInChildren(N).forEach((function(e){e.setPrewviewing(!1)})),this._updatePreviewingContent();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u._buyItem=function(){var e=o(a().mark((function e(t){var n,r,i,o,s,u,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this._previewingItem){e.next=2;break}return e.abrupt("return");case 2:return E.Instance.show(),e.prev=3,n=this._previewingItem.itemData.sku,r=void 0===n?"":n,e.next=7,A.buyItem(r,t);case 7:i=e.sent,o=i.inventoryItems,s=i.coins,u=i.gems,c=i.updatedItem,k.userInfo.inventoryItems=o,k.setCoins(s),k.setGems(u),this._previewingItem.updateData(c),this._updateButtonsState(),this._showReward(r),e.next=29;break;case 20:if(e.prev=20,e.t0=e.catch(3),console.error(e.t0),4006!==(null==(l=e.t0.response)||null==(l=l.data)?void 0:l.error.code)){e.next=28;break}return L.promptWatchAdPopup(0===t?y.COIN:y.GEM),e.abrupt("return");case 28:L.showErrorAlert(e.t0.code);case 29:return e.prev=29,E.Instance.hide(),e.finish(29);case 32:case"end":return e.stop()}}),e,this,[[3,20,29,32]])})));return function(t){return e.apply(this,arguments)}}(),u._showReward=function(e){T.Instance.open("ReceiveReward",{sku:e})},u._updatePreviewingContent=function(){var e=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._updateButtonsState(),this._updatePreviewThumb();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u._updateButtonsState=function(){var e=this._previewingItem.itemData,t=e.sku,n=void 0===t?"":t,r=e.using,i=void 0!==r&&r,o=e.isTrial,a=void 0!==o&&o,s=e.owned,u=void 0!==s&&s,c=e.isInExpireDate,l=void 0!==c&&c,p=e.exclusive,d=n.split("."),f=d[0],m=(d[1],k.inventoryData[f].find((function(e){return e.sku===n}))),b=m.canTryByAd,g=void 0!==b&&b,I=m.gemAmount,w=void 0===I?0:I,C=m.goldAmount,y=void 0===C?0:C,x=m.requireAdCount,B=void 0===x?0:x;if(this.adButton.node.active=!u&&B>0,this.adButton.node.active){var P=(k.userInfo.inventoryItems.find((function(e){return e.sku===n}))||{}).watchedAdCount,E=void 0===P?0:P;this.adButton.getComponentInChildren(h).string=E+"/"+B}this.gemButton.node.active=!u&&w>0,this.gemButton.node.active&&(this.gemButton.getComponentInChildren(h).string=L.formatNumber(w,5)),this.candyButton.node.active=!u&&y>0,this.candyButton.node.active&&(this.candyButton.getComponentInChildren(h).string=L.formatNumber(y,5));var A=u||a||l;if(this.tryByAdButton.node.active=!A&&g,this.equipButton.node.active=A,this.equipButton.node.active&&(this.equipButton.getComponent(v).grayscale=i,this.equipButton.getComponentInChildren(h).string=z.t(i?"used":"use"),this.equipButton.interactable=!i),this.buttonLayoutContainer.children.filter((function(e){return e.active})).forEach((function(e,t,n){var r=n.length%2!=0&&t===n.length-1?0:140*(t%2==0?-1:1);e.setPosition(r,-88*Math.floor(t/2))})),this.trialPreviewNode.active=!u&&(a||l),this.trialPreviewNode.active){var T=z.t("1-match");if(l){var S=new Date(k.userInfo.inventoryItems.find((function(e){return e.sku===n})).expireDate),D=Math.ceil((S.getTime()-Date.now())/864e5);T=z.t("xday",{count:D})}this.trialPreviewNode.getComponentInChildren(h).string=T}this.exclusiveUI.active=null!=p&&!A,this.itemName.string=z.t(_[n])},u._updatePreviewThumb=function(){var e=o(a().mark((function e(){var t,n,r,i,o,s,u,c,l,h,m;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._previewingItem.itemData.sku,r=(n=void 0===t?"":t).split("."),i=r[0],o=r[1],this.itemPreviewAnchor.children.forEach((function(e){e.destroy()})),e.prev=3,!["throwables","dice"].includes(i)){e.next=14;break}return u="dice"===i?"dice/thumb/"+o+"/spriteFrame":"inventory/throwables/"+o+"/spriteFrame",e.next=8,B.Instance.loadAsset(u,w);case 8:c=e.sent,(s=new p).addComponent(q).setData({speed:.2,range:5,isVertical:!0}),s.addComponent(v).spriteFrame=c,l="dice"===i?1.25:1.5,s.setScale(l,l);case 14:if("characters"!==i){e.next=20;break}return e.next=17,B.Instance.loadAsset("characters/anim/"+o,d);case 17:h=e.sent,(s=g(h)).getComponent(f.Skeleton).setSkin(this._charColors[this.colorSelector.choosingColorIdx]);case 20:if("bases"!==i){e.next=26;break}return e.next=23,B.Instance.loadAsset("bases/ingame/"+o,d);case 23:m=e.sent,(s=g(m)).getComponent(x).setColor(this.colorSelector.choosingColorIdx);case 26:this._previewingItem.itemData.sku===n?s.setParent(this.itemPreviewAnchor):s.destroy(),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(3),console.error(e.t0);case 32:case"end":return e.stop()}}),e,this,[[3,29]])})));return function(){return e.apply(this,arguments)}}(),t}(I)).prototype,"backButton",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(ee.prototype,"tabs",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),re=t(ee.prototype,"tabContents",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ie=t(ee.prototype,"inventoryItemPrefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(ee.prototype,"colorSelector",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(ee.prototype,"itemPreviewAnchor",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(ee.prototype,"candyButton",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(ee.prototype,"gemButton",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(ee.prototype,"adButton",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(ee.prototype,"tryByAdButton",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(ee.prototype,"equipButton",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(ee.prototype,"trialPreviewNode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(ee.prototype,"exclusiveUI",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(ee.prototype,"itemName",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(ee.prototype,"buttonLayoutContainer",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=ee))||$));u._RF.pop()}}}));

System.register("chunks:///_virtual/InventoryItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./LoaderManager.ts"],(function(t){var e,i,n,r,o,a,l,c,u,s,p,d,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,l=t._decorator,c=t.Node,u=t.Sprite,s=t.Button,p=t.Component},function(t){d=t.ITEM_STARS},function(t){h=t.LoaderManager}],execute:function(){var f,v,g,b,m,y,C,_,k,I,w,D,N,S,z;a._RF.push({},"274488Ho+pGyatYofosT3Xd","InventoryItem",void 0);var T=l.ccclass,F=l.property;t("InventoryItem",(f=T("InventoryItem"),v=F(c),g=F(c),b=F(c),m=F(u),y=F(c),C=F(c),f((I=e((k=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"trialNode",I,r(e)),n(e,"equippedNode",w,r(e)),n(e,"starsContainer",D,r(e)),n(e,"itemSprite",N,r(e)),n(e,"lockedBgNode",S,r(e)),n(e,"highlightFrame",z,r(e)),e._clickCb=null,e._itemData=null,e}i(e,t);var a=e.prototype;return a.onLoad=function(){this.node.on(s.EventType.CLICK,this._onClick,this)},a._onClick=function(){this._clickCb&&this._clickCb(this),this.setPrewviewing(!0)},a.setData=function(t){this._itemData=t,this.updateRender()},a.updateRender=function(){var t=this._itemData,e=t.sku,i=void 0===e?"":e,n=t.using,r=void 0!==n&&n,o=t.isTrial,a=void 0!==o&&o,l=t.owned,c=void 0!==l&&l,u=t.isInExpireDate,s=c||a||void 0!==u&&u;this.trialNode.active=!c&&a,this.lockedBgNode.active=!s,this.equippedNode.active=s&&r;var p=i.split("."),f=p[0],v=p[1];h.Instance.loadSfToSprite("inventory/"+f+"/"+v+"/spriteFrame",this.itemSprite);var g=d[i]||1;this.starsContainer.children.forEach((function(t,e){t.active=e<g}))},a.updateData=function(t){Object.assign(this._itemData,t),this.updateRender()},a.setPrewviewing=function(t){this.highlightFrame.active=t},a.setClickCb=function(t){this._clickCb=t},a.click=function(){this._onClick()},o(e,[{key:"itemData",get:function(){return this._itemData}}]),e}(p)).prototype,"trialNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(k.prototype,"equippedNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(k.prototype,"starsContainer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(k.prototype,"itemSprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(k.prototype,"lockedBgNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(k.prototype,"highlightFrame",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=k))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/InviteLinkPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Popup.ts","./ToastUI.ts","./StringUtils.ts"],(function(n){var t,i,e,o,r,a,u,l,c,s,p,f,k;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,e=n.initializerDefineProperty,o=n.assertThisInitialized,r=n.asyncToGenerator,a=n.regeneratorRuntime},function(n){u=n.cclegacy,l=n._decorator,c=n.Button,s=n.Label},function(n){p=n.Popup},function(n){f=n.ToastUI},function(n){k=n.StringUtils}],execute:function(){var v,y,L,h,d,b,g;u._RF.push({},"4378d5taLJAT6b19gWXsBny","InviteLinkPopup",void 0);var I=l.ccclass,_=l.property;n("InviteLinkPopup",(v=I("InviteLinkPopup"),y=_(c),L=_(s),v((b=t((d=function(n){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r))||this,e(t,"copyLinkButton",b,o(t)),e(t,"linkLabel",g,o(t)),t._link="",t}i(t,n);var u=t.prototype;return u.onLoad=function(){var t=this;n.prototype.onLoad.call(this),this.copyLinkButton.node.on(c.EventType.CLICK,r(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,navigator.clipboard.writeText(t._link);case 2:t.copyLinkButton.getComponentInChildren(s).string="Copied!",f.Instance.show("Copied invite link succesfully!");case 4:case"end":return n.stop()}}),n)}))))},u.onEnable=function(){if(null!=this._data){var n=this._data.inviteLink,t=void 0===n?"":n;this._link=t,this.linkLabel.string=k.truncate(this._link,33)}},t}(p)).prototype,"copyLinkButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(d.prototype,"linkLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=d))||h));u._RF.pop()}}}));

System.register("chunks:///_virtual/l10n-component.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(t){var e,n,o,r,i,l,a,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.createClass},function(t){r=t.cclegacy,i=t._decorator,l=t.Label,a=t.Component},function(t){s=t.EDITOR}],execute:function(){var c,p,u,d,h,f,g;r._RF.push({},"64a56e3cKhJIYlOsrVQprpv","l10n-component",void 0);var v=i.ccclass,b=i.property,y=i.disallowMultiple,m=i.requireComponent,L=i.menu;t("default",(c=v("L10nComponent"),p=m(l),u=y(),d=L("hidden:LocalizationEditor/L10nComponent"),h=b({readonly:!0}),c(f=p(f=u(f=d((e((g=function(t){function e(){var e;return(e=t.call(this)||this).label=void 0,e}n(e,t);var r=e.prototype;return r.onLoad=function(){this.label=this.node.getComponent(l)},r.start=function(){this.render()},r.render=function(){},r.preview=function(t){if(this.label&&s){var e=this.label.string;this.label._string=t,this.label.updateRenderData(!0),cce.Engine.repaintInEditMode(),this.label._string=e}},o(e,[{key:"string",get:function(){var t;return(null==(t=this.label)?void 0:t.string)||""}}]),e}(a)).prototype,"string",[h],Object.getOwnPropertyDescriptor(g.prototype,"string"),g.prototype),f=g))||f)||f)||f)||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/l10n-label.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n-manager.ts","./l10n-component.ts"],(function(t){var e,n,o,r,i,c,l,u,a,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.createClass},function(t){c=t.cclegacy,l=t._decorator,u=t.CCInteger},function(t){a=t.default},function(t){s=t.default}],execute:function(){var p,y,f,d,b,h,v,_,g,k,L;c._RF.push({},"30d83qzRfZHLYMFn4KA9PG4","l10n-label",void 0);var m=l.ccclass,z=l.property,w=l.executeInEditMode,D=l.menu;t("default",(p=m("L10nLabel"),y=w(!0),f=D("LocalizationEditor/L10nLabel"),d=z({visible:!1}),b=z({visible:!0}),h=z({visible:!1}),v=z({type:u,visible:!0}),p(_=y(_=f((k=e((g=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i))||this,o(e,"_key",k,r(e)),o(e,"_count",L,r(e)),e}n(e,t);var c=e.prototype;return c.onLoad=function(){"function"==typeof t.prototype.onLoad&&t.prototype.onLoad.call(this)},c.render=function(){var t=a.t(this._key,{count:this._count});void 0!==this.label&&void 0!==t&&(this.label.string=t)},i(e,[{key:"key",get:function(){return this._key},set:function(t){this._key=t,this.render()}},{key:"count",get:function(){return this._count},set:function(t){this._count=t,this.render()}}]),e}(s)).prototype,"_key",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(g.prototype,"key",[b],Object.getOwnPropertyDescriptor(g.prototype,"key"),g.prototype),L=e(g.prototype,"_count",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(g.prototype,"count",[v],Object.getOwnPropertyDescriptor(g.prototype,"count"),g.prototype),_=g))||_)||_)||_));c._RF.pop()}}}));

System.register("chunks:///_virtual/l10n-listen-event.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"34153BqzJ9LR4lhJDevpA4f","l10n-listen-event",void 0);var t=e("default",function(e){return e.languageChanged="languageChanged",e.onMissingKey="missingKey",e}(t||{}));n._RF.pop()}}}));

System.register("chunks:///_virtual/l10n-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./i18next.js","./resource-data-manager.ts","./localization-global.ts"],(function(e){var t,n,r,a,i,l,s,u,o,c,g;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator,r=e.regeneratorRuntime,a=e.extends},function(e){i=e.cclegacy,l=e.assetManager,s=e.game},function(e){u=e.createInstance},function(e){o=e.default},function(e){c=e.mainName,g=e.pluginName}],execute:function(){var h;i._RF.push({},"2856a7GSV9Fbb53nOimJ33J","l10n-manager",void 0);var f=e("L10nManager",function(){function e(){this._intl=void 0,this._options={},this.resourceList=void 0,this.resourceBundle={},this.resourceDataManager=void 0,this.resourceDataManager=new o}var i=e.prototype;return i.isInitialized=function(){var e,t;return null!=(e=null==(t=this._intl)?void 0:t.isInitialized)&&e},i.createIntl=function(){var t=n(r().mark((function t(n){var i,l,s,o,c,g,h,f,v,_;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.reloadResourceData();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return this._options=n,this._intl=u(),c=void 0,c=localStorage.getItem(null!=(g=d._options.localStorageLanguageKey)?g:e.LOCAL_STORAGE_LANGUAGE_KEY),c=this.checkLanguage(c),h=null!=(i=null!=(l=c)?l:n.language)?i:this.resourceList.defaultLanguage,f=null!=(s=n.fallbackLanguage)?s:this.resourceList.fallbackLanguage,v=null!=(o=n.resources)?o:this.resourceBundle,_={lng:h,fallbackLng:f,resources:a({},v),ns:e.ALLOW_NAMESPACE,defaultNS:e.DEFAULT_NAMESPACE,initImmediate:!1,load:"currentOnly"},t.next=15,this._intl.init(_);case 15:this.setAssetOverrideMap(v[h][e.ASSET_NAMESPACE]);case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.checkLanguage=function(e){if(e&&0!==e.length&&"null"!==e&&null!==e&&"undefined"!==e&&void 0!==e)return this.resourceList&&this.resourceList.languages.length>0&&this.resourceList.languages.find((function(t){return t===e}))?e:void 0},i.cloneIntl=function(e){if(!this._intl)throw new Error("i18next not init, please use 'l10n.createIntl'");this._intl=this._intl.cloneInstance(e)},i.reloadResourceData=function(){var e=n(r().mark((function e(){var t,n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resourceDataManager.readResourceList();case 2:if(this.resourceList=e.sent,this.resourceList){e.next=6;break}return console.log("["+g+"] not found translate language list, skip init l10n"),e.abrupt("return",!1);case 6:return e.next=8,this.resourceDataManager.readResourceBundle(null!=(t=null==(n=this.resourceList)?void 0:n.languages)?t:[]);case 8:if(this.resourceBundle=e.sent,null!=(a=this.resourceList)&&a.defaultLanguage){e.next=12;break}return console.log("["+g+"] not found translate language data, skip init l10n"),e.abrupt("return",!1);case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.config=function(e){this.cloneIntl(e)},i.changeLanguage=function(){var t=n(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return console.warn("["+g+"] invalid language tag"),t.abrupt("return");case 3:if(console.log("["+g+"] will change language to",n),!this._intl){t.next=12;break}return this.currentLanguage&&this.releaseOverrideMap(this.resourceBundle[this.currentLanguage][e.ASSET_NAMESPACE]),t.next=8,this._intl.changeLanguage(n);case 8:this.setAssetOverrideMap(this.resourceBundle[n][e.ASSET_NAMESPACE]),localStorage.setItem(e.LOCAL_STORAGE_LANGUAGE_KEY,n),console.log("["+g+"] game will restart"),s.restart(),t.next=13;break;case 12:console.log("["+g+"] language data not load, please confirm whether the language data is included in the build");case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.t=function(e,t){var n,r;return null!=(n=null==(r=this._intl)?void 0:r.isInitialized)&&n?this._intl.t(e,t):e},i.tn=function(e,t){var n,r,a;if(null==(n=null==(r=this._intl)?void 0:r.isInitialized)||!n)return e.toString();var i={};Object.assign(i,t);for(var l=0,s=Object.keys(i);l<s.length;l++){var u=s[l];("string"==typeof i[u]&&0===i[u].length||"number"==typeof i[u]&&0===i[u])&&delete i[u]}return new Intl.NumberFormat(null==(a=this._intl)?void 0:a.language,i).format(e)},i.td=function(e,t){var n,r,a;if(null==(n=null==(r=this._intl)?void 0:r.isInitialized)||!n)return e.toString();var i={};Object.assign(i,t);for(var l=0,s=Object.keys(i);l<s.length;l++){var u=s[l];"string"==typeof i[u]&&0===i[u].length&&delete i[u]}return new Intl.DateTimeFormat(null==(a=this._intl)?void 0:a.language,i).format(e)},i.tt=function(e,t,n){var r,a,i;if(null==(r=null==(a=this._intl)?void 0:a.isInitialized)||!r)return e.toString();var l={};Object.assign(l,n);for(var s=0,u=Object.keys(l);s<u.length;s++){var o=u[s];"string"==typeof l[o]&&0===l[o].length&&delete l[o]}return new Intl.RelativeTimeFormat(null==(i=this._intl)?void 0:i.language,l).format(e,t)},i.tl=function(e){var t,n,r;return null!=(t=null==(n=this._intl)?void 0:n.isInitialized)&&t?new Intl.ListFormat(null==(r=this._intl)?void 0:r.language).format(e):e.toString()},i.exists=function(e){var t,n;return null!=(t=null==(n=this._intl)?void 0:n.exists(e))&&t},i.direction=function(e){return(e?new Intl.Locale(e):new Intl.Locale(this._intl.language)).textInfo().direction},i.on=function(e,t){var n;null==(n=this._intl)||n.on(e,t)},i.off=function(e,t){var n;null==(n=this._intl)||n.off(e,t)},i.getResourceBundle=function(e,t){var n;return null==(n=this._intl)?void 0:n.getResourceBundle(e,t)},i.setAssetOverrideMap=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];l.assetsOverrideMap.set(r,e[r])}},i.releaseOverrideMap=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];l.assetsOverrideMap.delete(r)}},t(e,[{key:"currentLanguage",get:function(){var e,t;return null!=(e=null==(t=this._intl)?void 0:t.language)?e:""}},{key:"languages",get:function(){var e,t;return null!=(e=null==(t=this.resourceList)?void 0:t.languages)?e:[]}}]),e}());h=f,f.LOCAL_STORAGE_LANGUAGE_KEY=c+"/language",f.DEFAULT_NAMESPACE="translation",f.ASSET_NAMESPACE="asset",f.ALLOW_NAMESPACE=[h.DEFAULT_NAMESPACE,h.ASSET_NAMESPACE],f.l10n=new h;var d=e("default",f.l10n);i._RF.pop()}}}));

System.register("chunks:///_virtual/l10n-options.ts",["cc"],(function(){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"b4618IbsRtLLbRp2dQrE3EI","l10n-options",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/l10n.ts",["cc","./l10n-manager.ts","./l10n-listen-event.ts","./l10n-label.ts"],(function(n){var t;return{setters:[function(n){t=n.cclegacy},function(t){var e={};e.L10nManager=t.L10nManager,e.l10n=t.default,n(e)},function(t){n("L10nListenEvent",t.default)},function(t){n("L10nLabel",t.default)}],execute:function(){t._RF.push({},"07b54nOFPVJZJ/ENmuVbfjY","l10n",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageSelectorItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SimpleEventTarget.ts"],(function(e){var t,n,o,a,c,r,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,a=e.Button,c=e.Label,r=e.Component},function(e){i=e.SimpleEventTarget}],execute:function(){var u;n._RF.push({},"c3465JRUmFJNJL6iA/6PY9y","LanguageSelectorItem",void 0);var l=o.ccclass;o.property,e("LanguageSelectorItem",l("LanguageSelectorItem")(u=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._code=null,t}t(n,e);var o=n.prototype;return o.onLoad=function(){var e=this;this.node.on(a.EventType.CLICK,(function(){console.log("emit changelangeuage",e._code),i.emit("CHANGE_LANGUAGE",e._code)}))},o.setData=function(e){var t=e.code,n=e.languageName;this.getComponent(c).string=n,this._code=t},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/LeaderboardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ListItem.ts","./GameHelper.ts","./StringUtils.ts"],(function(e){var t,r,a,i,n,o,l,u,s,c,p,b,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,l=e.Label,u=e.Sprite,s=e.SpriteFrame,c=e.clamp},function(e){p=e.ListItem},function(e){b=e.GameHelper},function(e){f=e.StringUtils}],execute:function(){var m,g,d,h,v,S,L,y,k,z,w,I,F,B,D,N,A;n._RF.push({},"1e40cvqXZhJm6t9AFyu5/pB","LeaderboardItem",void 0);var _=o.ccclass,H=o.property;e("LeaderboardItem",(m=_("LeaderboardItem"),g=H(l),d=H(l),h=H(l),v=H(u),S=H(u),L=H([s]),y=H([s]),m((w=t((z=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(t,"rankLabel",w,i(t)),a(t,"userNameLabel",I,i(t)),a(t,"scoreLabel",F,i(t)),a(t,"avatarSprite",B,i(t)),a(t,"badgeSprite",D,i(t)),a(t,"rankBadgeSfs",N,i(t)),a(t,"bgSfs",A,i(t)),t}return r(t,e),t.prototype.setData=function(t,r){void 0===r&&(r=-1),e.prototype.setData.call(this,t,r);var a=t.name,i=t.nickName,n=t.score,o=t.rank,l=void 0===o?1:o,s=t.avatar,p=t.customAvatar;b.loadAvatar(s||p,this.avatarSprite);var m=Math.max(n,0);this.scoreLabel.string=b.formatNumber(m,5),this.userNameLabel.string=f.truncate(a||i,13),this.rankLabel.string=""+(l>0?l:"---"),this.badgeSprite.node.active=l>0&&l<=3,this.badgeSprite.node.active&&(this.badgeSprite.spriteFrame=this.rankBadgeSfs[c(l-1,0,2)]),this.getComponent(u).spriteFrame=this.bgSfs[1===l?0:1]},t}(p)).prototype,"rankLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(z.prototype,"userNameLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(z.prototype,"scoreLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(z.prototype,"avatarSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(z.prototype,"badgeSprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(z.prototype,"rankBadgeSfs",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=t(z.prototype,"bgSfs",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=z))||k));n._RF.pop()}}}));

System.register("chunks:///_virtual/ListItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,r,o;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,r=t._decorator,o=t.Component}],execute:function(){var s;i._RF.push({},"b9d37d/Wf1Oh6zJEok7GU8Q","ListItem",void 0);var c=r.ccclass;r.property,t("ListItem",c("ListItem")(s=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this)._index=-1,e}return e(i,t),i.prototype.setData=function(t,e){this.index=e},n(i,[{key:"index",get:function(){return this._index},set:function(t){this._index=t}}]),i}(o))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/ListView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ListItem.ts"],(function(t){var e,i,n,o,s,a,r,l,h,c,p,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,r=t.Vec3,l=t.ScrollView,h=t.instantiate,c=t.UITransform,p=t.Component},function(t){u=t.ListItem}],execute:function(){var _,g,f,d,m,v,w,y,C;s._RF.push({},"a52d9belhdDlZTGuz8dXs1k","ListView",void 0);var b=a.ccclass,D=a.property,V=a.menu,I=new r;t("ListViewCtrl",(_=b("ListViewCtrl"),g=V("UI/ListViewCtrl"),f=D(l),_(d=g((v=e((m=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,n(e,"scrollView",v,o(e)),n(e,"spawnCount",w,o(e)),n(e,"spacing",y,o(e)),n(e,"bufferZone",C,o(e)),e._content=null,e._items=[],e._updateTimer=0,e._updateInterval=.2,e._lastContentPosY=0,e._contentUITrans=void 0,e._itemHeight=0,e.template=null,e._listData=[],e}i(e,t);var s=e.prototype;return s.onLoad=function(){this._content=this.scrollView.content,this._updateTimer=0,this._updateInterval=.2,this._lastContentPosY=0},s.init=function(t){var e=t.template,i=t.listData;try{this.template=e,this._listData=i,this.initialize()}catch(t){console.error(t)}},s.initialize=function(){var t=h(this.template);this._itemHeight=t.getComponent(c).height,t.destroy(),this._contentUITrans=this._content.getComponent(c),this._contentUITrans.height=this._listData.length*(this._itemHeight+this.spacing)+this.spacing;for(var e=0;e<this.spawnCount;++e){if(null==this._listData[e])break;var i=h(this.template).getComponent(u);this._content.addChild(i.node);var n=i.getComponent(c);i.node.setPosition(0,-n.height*(.5+e)-this.spacing*(e+1),0),i.node.getComponent(u).setData(this._listData[e],e),this._items.push(i)}},s.getPositionInView=function(t){var e=t.parent.getComponent(c).convertToWorldSpaceAR(t.position);return this.scrollView.node.getComponent(c).convertToNodeSpaceAR(e)},s.update=function(t){if(this._updateTimer+=t,!(this._updateTimer<this._updateInterval)){this._updateTimer=0;for(var e=this._items,i=this.bufferZone,n=this.scrollView.content.position.y<this._lastContentPosY,o=(this._itemHeight+this.spacing)*e.length,s=0;s<e.length;++s){var a=e[s],r=this.getPositionInView(e[s].node);if(a.node.getPosition(I),n){if(r.y<-i&&I.y+o<0){I.y+=o,a.node.setPosition(I);var l=a.index-e.length;a.setData(this._listData[l],l)}}else if(r.y>i&&I.y-o>-this._contentUITrans.height){I.y-=o,a.node.setPosition(I);var h=a.index+e.length;a.setData(this._listData[h],h)}}this._lastContentPosY=this.scrollView.content.position.y}},e}(p)).prototype,"scrollView",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(m.prototype,"spawnCount",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=e(m.prototype,"spacing",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=e(m.prototype,"bufferZone",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=m))||d)||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/LoaderManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts"],(function(n){var e,t,i,u,r,o,c;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy,i=n.SpriteFrame,u=n.resources,r=n.assetManager,o=n.Prefab},function(n){c=n.SKU_ITEM}],execute:function(){t._RF.push({},"bbb32DMuLJHrp2ixKFYWi0D","LoaderManager",void 0),n("LoaderManager",function(){function n(){}var t=n.prototype;return t.loadSfToSprite=function(n,e){return this.loadAsset(n,i).then((function(n){e.isValid&&(e.spriteFrame=n)}))},t.loadAsset=function(n,e,t){return void 0===t&&(t=null),new Promise((function(i,r){u.load(n,e,(function(n,e){t&&t(n/e)}),(function(n,e){n?r(n):i(e)}))}))},t.loadDir=function(n,e,t){return void 0===t&&(t=null),new Promise((function(i,r){u.loadDir(n,e,(function(n,e){t&&t(n/e)}),(function(n,e){n?r(n):i(e)}))}))},t.loadScene=function(n,e){return void 0===e&&(e=null),new Promise((function(t,i){r.main.loadScene(n,null,(function(n,t){e&&e(n/t)}),(function(n,e){n?i(n):t(e)}))}))},t.loadDiceAnimPrefab=function(n){var e=this._getTrueDiceSku(n);return this.loadAsset("dice/anim/"+e.split(".")[1],o)},t.loadDiceThumb=function(n){var e=this._getTrueDiceSku(n);return this.loadAsset("dice/thumb/"+e.split(".")[1]+"/spriteFrame",i)},t._getTrueDiceSku=function(n){return Object.values(c).includes(n)?n:"dice.default"},e(n,null,[{key:"Instance",get:function(){return null==this._instance&&(this._instance=new n),this._instance}}]),n}())._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/Loading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mobx.cjs.development.mjs_cjs=&original=.js","./AndroidSDK.ts","./ArenaPreparingRoom.ts","./Constant.ts","./Global.ts","./AudioManager.ts","./LoaderManager.ts","./SceneManager.ts","./SubLoading.ts","./Networking.ts","./PopupManager.ts","./SDK.ts","./ToastUI.ts","./GameHelper.ts","./mobx.cjs.development.js"],(function(e){var n,t,r,o,a,s,i,c,u,l,p,d,g,f,h,m,v,I,b,y,S,x,_,R,w,k,T,P,C,A,N;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){i=e.cclegacy,c=e._decorator,u=e.ProgressBar,l=e.Sprite,p=e.Node,d=e.Button,g=e.AudioSource,f=e.director,h=e.sys,m=e.Component,v=e.sp},null,function(e){I=e.default},function(e){b=e.ArenaPreparingRoom},function(e){y=e.SceneName},function(e){S=e.default},function(e){x=e.AudioManager},function(e){_=e.LoaderManager},function(e){R=e.SceneManager},function(e){w=e.SubLoading},function(e){k=e.default},function(e){T=e.default},function(e){P=e.default},function(e){C=e.ToastUI},function(e){A=e.GameHelper},function(e){N=e.default}],execute:function(){var U,D,L,O,M,B,E,z,G,j,H,J,K,F,W,X,Y,Z,q,Q,V;i._RF.push({},"64506bWLPJJBIIZBQK+7laW","Loading",void 0);N.reaction;var $=c.ccclass,ee=c.property;e("Loading",(U=$("Loading"),D=ee(u),L=ee(l),O=ee(p),M=ee(p),B=ee(p),E=ee(p),z=ee(p),G=ee(d),j=ee(d),U((K=n((J=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return n=e.call.apply(e,[this].concat(a))||this,r(n,"progBar",K,o(n)),r(n,"loadingSprite",F,o(n)),r(n,"subLoadingNode",W,o(n)),r(n,"toastNode",X,o(n)),r(n,"popupContainer",Y,o(n)),r(n,"darkCover",Z,o(n)),r(n,"audioNode",q,o(n)),r(n,"androidSignInButton",Q,o(n)),r(n,"anonymousSignInButton",V,o(n)),n._progs=[],n._loadCount=0,n._mobXDisPosers=[],n._nextScene=y.HOME,n._curProgress=0,n._signInResolver=null,n}t(n,e);var i=n.prototype;return i.onLoad=function(){var e=this;this.androidSignInButton.node.active=!1,this.anonymousSignInButton.node.active=!1,_.Instance.loadSfToSprite("loading-screen/loading-ludo-1/spriteFrame",this.loadingSprite),this._initGame(),k.initializeClient(),w.Instance.init(this.subLoadingNode),C.Instance.init(this.toastNode);var n=this.audioNode.getComponentsInChildren(g),t=n[0],r=n[1];x.Instance.initAudioSrcs(t,r),f.addPersistRootNode(this.popupContainer),f.addPersistRootNode(this.darkCover),f.addPersistRootNode(this.audioNode);var o=h.localStorage.getItem("reddot-tree");null!=o&&S.setReddotTree(Object.assign(S.reddotTree,JSON.parse(o||"{}"))),h.isNative&&h.os===h.OS.ANDROID&&(this.androidSignInButton.node.on(d.EventType.CLICK,a(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,I.signIn(!0);case 3:return S.accountType="android",n.t0=S,n.next=7,k.getUserInfo();case 7:return n.t1=n.sent,n.t0.setUserInfo.call(n.t0,n.t1),e._setUpStartingData(),n.abrupt("return",R.Instance.moveToScene(e._nextScene));case 13:n.prev=13,n.t2=n.catch(0),console.error(n.t2),A.showAlert({message:"Login failed. Please try again later."});case 17:case"end":return n.stop()}}),n,null,[[0,13]])})))),this.anonymousSignInButton.node.on(d.EventType.CLICK,a(s().mark((function n(){var t;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=new Promise((function(n){e._signInResolver=n})),k.client.auth.onChange(a(s().mark((function n(t){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("auth data",t),n.prev=1,null==S.userClient){n.next=4;break}return n.abrupt("return");case 4:if(null!=t.user){n.next=9;break}return n.next=7,k.client.auth.signInAnonymously();case 7:return S.accountType="anonymous",n.abrupt("return");case 9:return S.accountType=(null==t||null==(r=t.user)?void 0:r.type)||"anonymous",n.t0=S,n.next=13,k.getUserInfo();case 13:n.t1=n.sent,n.t0.setUserInfo.call(n.t0,n.t1),e._signInResolver&&e._signInResolver(),n.next=22;break;case 18:n.prev=18,n.t2=n.catch(1),e._signInResolver&&e._signInResolver(),console.error(n.t2);case 22:case"end":return n.stop()}}),n,null,[[1,18]])})))),n.next=4,t;case 4:return e._setUpStartingData(),n.abrupt("return",R.Instance.moveToScene(e._nextScene));case 6:case"end":return n.stop()}}),n)})))))},i._initGame=function(){var e=a(s().mark((function e(){var n,t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("start init"),e.next=3,P.init();case 3:return console.log("end init"),e.next=6,null==(n=k.gameRoom)?void 0:n.leave(!1);case 6:return e.next=8,null==(t=k.lobbyRoom)?void 0:t.leave(!1);case 8:if(k.gameRoom=null,k.lobbyRoom=null,P.addAuthListener(a(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("user changed",n);try{A.tryToSignInCrazyGame(n)}catch(e){A.showErrorAlert(e.code),console.error(e)}case 2:case"end":return e.stop()}}),e)})))),P.loadingStart(),!h.isNative||h.os!==h.OS.ANDROID){e.next=33;break}return e.next=15,this._loadResource();case 15:return e.next=17,P.getUser();case 17:if(r=e.sent,console.log("ANDROID USER CLIENT",r),null!=r){e.next=23;break}this._showAndroidLoginUI(),e.next=31;break;case 23:return S.accountType="android",e.t0=S,e.next=27,k.getUserInfo();case 27:return e.t1=e.sent,e.t0.setUserInfo.call(e.t0,e.t1),this._setUpStartingData(),e.abrupt("return",R.Instance.moveToScene(this._nextScene));case 31:e.next=35;break;case 33:this._loginUser(),this._loadResource();case 35:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i._loadResource=function(){var e=a(s().mark((function e(){var n,t,r=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._progs=[0],n=function(e,n){r._progs[e]=n/r._progs.length,r.progBar.progress=Math.max(r.progBar.progress,r._curProgress+.9*r._progs.reduce((function(e,n){return e+n}),0))},e.next=4,v.loadWasmModuleSpine();case 4:return t=_.Instance.loadScene("Home",(function(e){n(0,e)})),e.next=7,Promise.all([t]).then((function(){r._loadCount++,console.log("LOAD RESOURCE done"),r._loadDone()}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i._login=function(){var e=a(s().mark((function e(){var n,t,r=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise((function(e){r._signInResolver=e})),e.next=3,P.getUser();case 3:if(t=e.sent,S.setUserClient(t),console.log("user client",t),null==t){e.next=15;break}return h.isNative&&h.os===h.OS.ANDROID?S.accountType="android":P.isCrazyGameEnable?S.accountType="crazygame":P.isZMPEnable&&(S.accountType="zmp"),k.client.auth.signOut(),e.t0=S,e.next=12,k.getUserInfo();case 12:e.t1=e.sent,e.t0.setUserInfo.call(e.t0,e.t1),this._signInResolver&&this._signInResolver();case 15:return k.client.auth.onChange(a(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("auth data",n),e.prev=1,null==S.userClient){e.next=4;break}return e.abrupt("return");case 4:if(null!=n.user){e.next=9;break}return e.next=7,k.client.auth.signInAnonymously();case 7:return S.accountType="anonymous",e.abrupt("return");case 9:return S.accountType=(null==n||null==(t=n.user)?void 0:t.type)||"anonymous",e.t0=S,e.next=13,k.getUserInfo();case 13:e.t1=e.sent,e.t0.setUserInfo.call(e.t0,e.t1),r._signInResolver&&r._signInResolver(),e.next=22;break;case 18:e.prev=18,e.t2=e.catch(1),r._signInResolver&&r._signInResolver(),console.error(e.t2);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})))),e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i._loginUser=function(){var e=a(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._login();case 3:return e.next=5,this._setUpStartingData();case 5:console.log("Login done"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:this._loadCount++,this._curProgress=.1,this.progBar.progress+=this._curProgress,this._loadDone();case 15:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),i._setUpStartingData=function(){var e=a(s().mark((function e(){var n,t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([k.getInventoryData(),this._tryToReconnect(),k.getSweetyModeConfig()]);case 2:n=e.sent,t=n[0],n[1],r=n[2].manaMetric,S.manaMetric=r,S.inventoryData=t,this._updateReddotStateIfPossible();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i._updateReddotStateIfPossible=function(){try{var e=h.localStorage.getItem("inventory-count"),n=null!=e?JSON.parse(e||"{}"):{};Object.keys(S.inventoryData).forEach((function(e){var t,r;n[e]!==(null==(t=S.inventoryData[e])?void 0:t.length)&&(n[e]=null==(r=S.inventoryData[e])?void 0:r.length,S.updateReddotTree("shop."+e,!0))})),h.localStorage.setItem("inventory-count",JSON.stringify(n)),h.localStorage.setItem("reddot-tree",JSON.stringify(S.reddotTree))}catch(e){console.error(e)}},i._tryToReconnect=function(){var e=a(s().mark((function e(){var n,t,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null==(n=h.localStorage.getItem("reconnectionToken"))){e.next=15;break}return e.next=5,k.reconnect(n);case 5:return t=e.sent,r=t.seatReservation,e.next=9,k.client.consumeSeatReservation(r);case 9:return k.gameRoom=e.sent,h.localStorage.setItem("reconnectionToken",k.gameRoom.reconnectionToken),o="ClassicModeRoom"===k.gameRoom.name?"classic":"sweety",e.next=14,A.loadAllRequireGameplayAsset(k.gameRoom.state,o);case 14:this._nextScene="classic"===o?y.GAMEPLAY_CLASSIC:y.GAMEPLAY_SUPER;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0),h.localStorage.removeItem("reconnectionToken");case 21:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),i._loadDone=function(){var e=a(s().mark((function e(){var n,t,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==this._loadCount){e.next=43;break}return w.Instance.show(),e.prev=2,e.next=5,P.getUrlParam("roomId");case 5:if(null==(n=e.sent)){e.next=15;break}return e.next=9,k.joinRoomById(n,{});case 9:return t=e.sent,r=t.seatReservation,e.next=13,k.client.consumeSeatReservation(r);case 13:return k.gameRoom=e.sent,e.abrupt("return",R.Instance.moveToScene(y.PREPARING_ROOM));case 15:return e.next=17,P.getUrlParam("pairCode");case 17:if(null==(o=e.sent)){e.next=24;break}return e.next=21,R.Instance.moveToScene(y.ARENA_PREPARING_ROOM);case 21:return e.sent.getComponentInChildren(b).setPairCodeParam(o),e.abrupt("return");case 24:return e.next=26,P.getUrlParam("instantJoin");case 26:if("true"!==e.sent){e.next=33;break}return e.next=30,R.Instance.moveToScene(y.HOME);case 30:return e.next=32,T.Instance.open("CreateRoomPopup",{isPublic:!1});case 32:return e.abrupt("return");case 33:if(null==S.userInfo||0!==S.getTotalMatch()||this._nextScene!==y.HOME){e.next=35;break}return e.abrupt("return",R.Instance.moveToScene(y.TUTORIAL));case 35:return e.abrupt("return",R.Instance.moveToScene(this._nextScene));case 38:return e.prev=38,e.t0=e.catch(2),console.error(e.t0),A.showErrorAlert(e.t0.code),e.abrupt("return",R.Instance.moveToScene(this._nextScene));case 43:case"end":return e.stop()}}),e,this,[[2,38]])})));return function(){return e.apply(this,arguments)}}(),i._showAndroidLoginUI=function(){this.androidSignInButton.node.active=!0,this.anonymousSignInButton.node.active=!0,this.progBar.node.active=!1},i.onDestroy=function(){this._mobXDisPosers.forEach((function(e){e()})),P.loadingStop()},n}(m)).prototype,"progBar",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(J.prototype,"loadingSprite",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(J.prototype,"subLoadingNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(J.prototype,"toastNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(J.prototype,"popupContainer",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=n(J.prototype,"darkCover",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=n(J.prototype,"audioNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=n(J.prototype,"androidSignInButton",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(J.prototype,"anonymousSignInButton",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=J))||H));i._RF.pop()}}}));

System.register("chunks:///_virtual/Lobby.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Constant.ts","./SimpleEventTarget.ts","./Global.ts","./LoaderManager.ts","./SceneManager.ts","./SubLoading.ts","./Networking.ts","./PopupManager.ts","./SDK.ts","./Shop.ts","./ColorSelector.ts","./GameHelper.ts","./RoomItem.ts","./SkinSelector.ts","./l10n-manager.ts"],(function(e){var t,n,o,r,i,a,s,c,u,l,h,p,d,f,m,b,g,v,_,y,S,C,I,k,w,B,x,T,D,R,A,L,E,O,P,z;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.Button,l=e.Prefab,h=e.Node,p=e.ScrollView,d=e.SpriteFrame,f=e.Sprite,m=e.instantiate,b=e.UITransform,g=e.resources,v=e.sp,_=e.Component,y=e.math},null,function(e){S=e.SceneName,C=e.SKU_ITEM},function(e){I=e.SimpleEventTarget},function(e){k=e.default},function(e){w=e.LoaderManager},function(e){B=e.SceneManager},function(e){x=e.SubLoading},function(e){T=e.default},function(e){D=e.default},function(e){R=e.default},function(e){A=e.Shop},function(e){L=e.ColorSelector},function(e){E=e.GameHelper},function(e){O=e.RoomItem},function(e){P=e.SkinSelector},function(e){z=e.default}],execute:function(){var M,q,N,V,K,H,F,j,G,U,W,Y,J,Q,X,Z,$,ee,te,ne,oe,re,ie,ae,se,ce,ue,le,he,pe,de,fe,me,be,ge,ve,_e,ye,Se,Ce,Ie;s._RF.push({},"3b5e5VN4v1OEq7Ml5uFPqM4","Lobby",void 0);var ke=c.ccclass,we=c.property;e("Lobby",(M=ke("Lobby"),q=we(u),N=we(u),V=we(u),K=we(l),H=we(h),F=we(h),j=we(p),G=we(h),U=we(P),W=we(u),Y=we(u),J=we(L),Q=we(h),X=we([u]),Z=we(h),$=we([d]),ee=we(h),te=we(u),ne=we(h),M((ie=t((re=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"quickPlayButton",ie,r(t)),o(t,"createButton",ae,r(t)),o(t,"backButton",se,r(t)),o(t,"roomItemTemplate",ce,r(t)),o(t,"noRoomText",ue,r(t)),o(t,"lobbyLoadingIcon",le,r(t)),o(t,"roomAvailableScrollView",he,r(t)),o(t,"lockBg",pe,r(t)),o(t,"skinSelector",de,r(t)),o(t,"diceSkinButton",fe,r(t)),o(t,"baseSkinButton",me,r(t)),o(t,"colorSelector",be,r(t)),o(t,"charSkinAnchor",ge,r(t)),o(t,"changeCharButtons",ve,r(t)),o(t,"loadingCharIcon",_e,r(t)),o(t,"buttonSfs",ye,r(t)),o(t,"lockedIcon",Se,r(t)),o(t,"tryByAdButton",Ce,r(t)),o(t,"trialIndicatior",Ie,r(t)),t._ownedDice=[],t._ownedBases=[],t._choosableChars=[],t._choosingDice="",t._choosingBase="",t._equippingChar="",t._curCharIdx=0,t._lobbyRoom=null,t._roomsData=[],t}n(t,e);var s=t.prototype;return s.onLoad=function(){var e=this;this._joinLobby(),this.quickPlayButton.node.on(u.EventType.CLICK,i(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{x.Instance.show(),E.quickPlay(k.getEquipOption())}catch(e){console.error(e),x.Instance.hide(),4006===((null==(t=e.response)||null==(t=t.data)?void 0:t.code)||e.code)?E.promptWatchAdPopup():E.showErrorAlert(e.message||e.code)}case 1:case"end":return e.stop()}}),e)})))),this.createButton.node.on(u.EventType.CLICK,i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x.Instance.show(),e.next=4,D.Instance.open("CreateRoomPopup");case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),E.showErrorAlert(e.t0.message||e.t0.code),x.Instance.hide();case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))),I.on("ON_ROOM_ITEM_CLICK",i(a().mark((function e(t){var n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x.Instance.show(),e.next=4,T.joinRoomById(t,k.getEquipOption());case 4:return n=e.sent,o=n.seatReservation,e.next=8,T.client.consumeSeatReservation(o);case 8:T.gameRoom=e.sent,B.Instance.moveToScene(S.PREPARING_ROOM),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),E.showErrorAlert(e.t0.message||e.t0.code),x.Instance.hide();case 17:case"end":return e.stop()}}),e,null,[[0,12]])}))),this),this.backButton.node.on(u.EventType.CLICK,(function(){B.Instance.moveToScene(S.HOME)})),this.tryByAdButton.node.on(u.EventType.CLICK,(function(){try{e._showTryByAdAlert()}catch(e){console.error(e),x.Instance.hide()}})),this.node.on(h.EventType.TOUCH_END,(function(t){t.target.isChildOf(e.skinSelector.node)||e.skinSelector.hide()}),this,!0),this.skinSelector.setChangeSkinCb((function(t){t.includes("dice.")?e._setDiceSkin(t):e._setBaseSkin(t)})),this._choosingDice=k.userInfo.equippingDice,this._choosingBase=k.userInfo.equippingBase,this._ownedDice=this._getAllOwnedCategoryItems("dice"),this._ownedBases=this._getAllOwnedCategoryItems("bases"),this.diceSkinButton.node.on(u.EventType.CLICK,(function(){e._setSkinSelectorToButtonPosition(e.diceSkinButton),e.skinSelector.setData(e._ownedDice,e._choosingDice)})),this.baseSkinButton.node.on(u.EventType.CLICK,(function(){e._setSkinSelectorToButtonPosition(e.baseSkinButton),e.skinSelector.setData(e._ownedBases,e._choosingBase)})),this._setBaseSkin(this._choosingBase),this._setDiceSkin(this._choosingDice),this._equippingChar=k.userInfo.equippingChar,this._choosableChars=k.inventoryData.characters.map((function(e){return e.sku})),this._curCharIdx=this._choosableChars.indexOf(this._equippingChar);this.changeCharButtons.forEach((function(t,n){t.node.on(u.EventType.CLICK,(function(){var t;t=0===n?-1:1,e._curCharIdx=y.repeat(e._curCharIdx+t,e._choosableChars.length),e._updateCharSkin()})),t.interactable=e._choosableChars.length>1,t.getComponent(f).spriteFrame=e.buttonSfs[t.interactable?1:0]})),this._updateCharSkin(),this.colorSelector.setChangeColorCb((function(){e._updateColor()})),this.loadingCharIcon.active=!1},s._joinLobby=function(){var e=i(a().mark((function e(){var t,n,o=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.noRoomText.active=!1,this.lobbyLoadingIcon.active=!0,e.next=4,T.joinLobby();case 4:return t=e.sent,n=t.seatReservation,e.next=8,T.client.consumeSeatReservation(n);case 8:this._lobbyRoom=e.sent,this._lobbyRoom.onMessage("rooms",(function(e){console.log("room data",e),o.isValid&&(o._roomsData=e.filter((function(e){return null!=e.metadata})),o._sortRoomData(),o._roomsData.slice(0,30).forEach((function(e){o._createRoomItem(e)})),o.lobbyLoadingIcon.active=!1,o._updateNoRoomText())})),this._lobbyRoom.onMessage("+",(function(e){var t=e[0],n=e[1];if(o.isValid&&null!=n.metadata){var r=o.roomAvailableScrollView.content.getComponentsInChildren(O),i=r.find((function(e){return e.roomId===t}));if(null!=i)i.setData(n);else{o._roomsData.push(n),o._sortRoomData();var a=o._roomsData.slice(0,30);a.forEach((function(e,t){null!=r[t]?r[t].setData(e):o._createRoomItem(e)}));for(var s=r.length-1;s>=a.length;s--)r[s].node.destroy()}o._updateNoRoomText()}})),this._lobbyRoom.onMessage("-",(function(e){if(o.isValid){var t=o.roomAvailableScrollView.content.getComponentsInChildren(O).find((function(t){return t.roomId===e}));null!=t&&t.node.destroy();var n=o._roomsData.findIndex((function(t){return t.roomId===e}));n>=0&&o._roomsData.splice(n,1),o._updateNoRoomText()}}));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s._sortRoomData=function(){var e=function(e){var t=e.metadata;return e.locked?-(2e5-t.bet+1):t.bet+1};this._roomsData.sort((function(t,n){return e(n)-e(t)}))},s._createRoomItem=function(e){var t=m(this.roomItemTemplate);t.getComponent(O).setData(e),t.setParent(this.roomAvailableScrollView.content)},s._setSkinSelectorToButtonPosition=function(e){var t=this.skinSelector.node.parent.getComponent(b).convertToNodeSpaceAR(e.node.worldPosition);t.y+=20,this.skinSelector.node.setPosition(t)},s._getAllOwnedCategoryItems=function(e){return k.userInfo.inventoryItems.filter((function(t){return t.sku.includes(e+".")&&t.owned})).map((function(e){return e.sku})).sort((function(e,t){var n=Object.values(C);return n.indexOf(e)-n.indexOf(t)}))},s._setBaseSkin=function(e){this._choosingBase=e,w.Instance.loadSfToSprite("bases/select-thumb/"+e.split(".")[1]+"/spriteFrame",this.baseSkinButton.getComponentInChildren(f))},s._setDiceSkin=function(e){var t=this;this._choosingDice=e,w.Instance.loadDiceThumb(e).then((function(e){t.diceSkinButton.getComponentInChildren(f).spriteFrame=e}))},s._updateCharSkin=function(){var e=this,t=this._curCharIdx,n=this._choosableChars[this._curCharIdx],o="characters/anim/"+n.split(".")[1];this.charSkinAnchor.children.forEach((function(e){e.destroy()}));var r=k.inventoryData.characters.find((function(e){return e.sku===n})).canTryByAd,i=void 0!==r&&r,a=k.isItemTrial(n);this.lockBg.active=!(a||k.isItemOwned(n)),this.trialIndicatior.active=a,this.lockedIcon.active=!i,this.tryByAdButton.node.active=i;var s=g.get(o);if(null!=s){this.loadingCharIcon.active=!1;var c=m(s);return c.setParent(this.charSkinAnchor),void this._updateColor(c.getComponent(v.Skeleton))}this.loadingCharIcon.active=!0,w.Instance.loadAsset(o,l).then((function(n){if(e._curCharIdx===t&&e.isValid){var o=m(n);o.setParent(e.charSkinAnchor),e._updateColor(o.getComponent(v.Skeleton)),e.loadingCharIcon.active=!1}}))},s._updateColor=function(e){void 0===e&&(e=null);var t=e||this.charSkinAnchor.getComponentInChildren(v.Skeleton);if(t){var n=this.colorSelector.choosingColorIdx;t.setSkin(["BLUE","RED","GREEN","YELLOW"][n])}},s._checkCharIsLocked=function(){var e=i(a().mark((function e(){var t,n,o,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._choosableChars[this._curCharIdx],n=k.isItemOwned(t),o=k.isCharTryable(t),r=k.isItemTrial(t),n||r){e.next=16;break}if(!o){e.next=12;break}return e.next=8,this._showTryByAdAlert();case 8:return i=e.sent,e.abrupt("return","AD"===i);case 12:return e.next=14,E.showAlert({message:z.t("alert-no-owned-skin"),cancelText:"Shop",showCancel:!0,showCloseButton:!0,resolveValues:["OK","SHOP"]});case 14:"SHOP"===e.sent&&this._moveToCharShop();case 16:return e.abrupt("return",n||r);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s._showTryByAdAlert=function(){var e=i(a().mark((function e(){var t,n,o,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.showAlert({message:z.t("try-skin"),okText:z.t("watch-ad"),cancelText:"Shop",resolveValues:["AD","SHOP"],showCancel:!0,showCloseButton:!0});case 2:if("AD"!==(t=e.sent)){e.next=21;break}return e.next=6,R.showRewardedAd();case 6:return n=this._choosableChars[this._curCharIdx],x.Instance.show(),e.next=10,T.tryItemByAd(n);case 10:return o=e.sent,r=o.inventoryItems,i=o.updatedItem,k.userInfo.inventoryItems=r,this._updateCharSkin(),x.Instance.hide(),e.next=18,D.Instance.open("ReceiveReward",{sku:i.sku});case 18:x.Instance.hide(),e.next=22;break;case 21:"SHOP"===t&&this._moveToCharShop();case 22:return e.abrupt("return",t);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s._moveToCharShop=function(){B.Instance.moveToScene(S.SHOP).then((function(e){e.getComponentInChildren(A).setData(2)}))},s._updateNoRoomText=function(){this.noRoomText.active=0===this._roomsData.length},s.onDestroy=function(){var e,t;null==(e=this._lobbyRoom)||e.removeAllListeners(),null==(t=this._lobbyRoom)||t.leave(),I.removeAll(this)},t}(_)).prototype,"quickPlayButton",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(re.prototype,"createButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(re.prototype,"backButton",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(re.prototype,"roomItemTemplate",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(re.prototype,"noRoomText",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(re.prototype,"lobbyLoadingIcon",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(re.prototype,"roomAvailableScrollView",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(re.prototype,"lockBg",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(re.prototype,"skinSelector",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(re.prototype,"diceSkinButton",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(re.prototype,"baseSkinButton",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(re.prototype,"colorSelector",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(re.prototype,"charSkinAnchor",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(re.prototype,"changeCharButtons",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_e=t(re.prototype,"loadingCharIcon",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(re.prototype,"buttonSfs",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Se=t(re.prototype,"lockedIcon",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=t(re.prototype,"tryByAdButton",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=t(re.prototype,"trialIndicatior",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=re))||oe));s._RF.pop()}}}));

System.register("chunks:///_virtual/localization-global.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"02d9etKgNBGqLPpvU7RX29o","localization-global",void 0);e("pluginName","Localization Editor"),e("mainName","localization-editor"),e("runtimeBundleName","l10n"),e("resourceListPath","resource-list"),e("resourceBundlePath","resource-bundle");t._RF.pop()}}}));

System.register("chunks:///_virtual/LoginCrazyGamePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mobx.cjs.development.mjs_cjs=&original=.js","./CrazySDK.ts","./Global.ts","./Networking.ts","./Popup.ts","./GameHelper.ts","./mobx.cjs.development.js"],(function(e){var t,n,o,r,a,i,s,c,u,l,p,f,y,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.Button},null,function(e){l=e.default},function(e){p=e.default},function(e){f=e.default},function(e){y=e.Popup},function(e){d=e.GameHelper},function(e){h=e.default}],execute:function(){var m,v,g,b,P;s._RF.push({},"a8d5d+I+lJP/Y1fDdhT32ky","LoginCrazyGamePopup",void 0);h.observable,h.makeObservable,h.autorun,h.reaction,h.action;var L=c.ccclass,x=c.property;e("LoginCrazyGamePopup",(m=L("LoginCrazyGamePopup"),v=x(u),m((P=t((b=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,o(t,"loginButton",P,r(t)),t}n(t,e);var s=t.prototype;return s.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.loginButton.node.on(u.EventType.CLICK,a(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.close(),e.prev=1,e.next=4,l.user.showAuthPrompt();case 4:if(n=e.sent,p.setUserClient(n),null==n){e.next=12;break}return e.t0=p,e.next=10,f.getUserInfo();case 10:e.t1=e.sent,e.t0.setUserInfo.call(e.t0,e.t1);case 12:e.next=18;break;case 14:e.prev=14,e.t2=e.catch(1),d.showErrorAlert(e.t2.code),console.error(e.t2);case 18:case"end":return e.stop()}}),e,null,[[1,14]])}))))},s.onDestroy=function(){e.prototype.onDestroy.call(this)},t}(y)).prototype,"loginButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=b))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AndroidSDK.ts","./PlaySignInACK.ts","./PlaySignInREQ.ts","./CrazySDK.ts","./CrazySDK.types.ts","./CrazySDKDemo.ts","./PokiSDK.ts","./AdmobTestRewarded.ts","./ArenaPreparingRoom.ts","./Axios.ts","./CaptureScreen.ts","./CellController.ts","./Character.ts","./ClassicModeGameplay.ts","./Commands.ts","./Constant.ts","./CustomSafeArea.ts","./SimpleEventTarget.ts","./FinalRankingPopup.ts","./AskUsePortalPopup.ts","./BaseCellContainer.ts","./BaseSkin.ts","./DeltaManaUI.ts","./DiceAnimation.ts","./DiceButtonAnimation.ts","./DiceRoller.ts","./FirstMoveAnimationScreen.ts","./ManaItem.ts","./SkillBadget.ts","./SkillButton.ts","./SlotController.ts","./StickerChatPopup.ts","./ThrowableItem.ts","./YouAreHereIndicator.ts","./YourTurnText.ts","./BombItem.ts","./CatItem.ts","./ThrowItemButton.ts","./TomatoItem.ts","./Global.ts","./HighLightTile.ts","./Home.ts","./Inventory.ts","./InventoryItem.ts","./ArenaLeaderboard.ts","./WeeklyLeaderboard.ts","./ListView.ts","./Loading.ts","./LeaderboardItem.ts","./Lobby.ts","./RoomItem.ts","./SkinSelector.ts","./MatchMakingPanel.ts","./Networking.ts","./Popup.ts","./PopupManager.ts","./PreparingPlayer.ts","./PreparingRoom.ts","./ResizeScreen.ts","./SDK.ts","./Shop.ts","./ShopItem.ts","./AdStore.ts","./SuperModeGameplay.ts","./Test.ts","./ToastUI.ts","./PathGraphics.ts","./Tutorial.ts","./ZMP.ts","./ZaloMiniAppSDK.ts","./DetailUserInfo.ts","./EmoCloud.ts","./GoToSceneController.ts","./GuideTooltip.ts","./ListItem.ts","./MyUserProfileReactor.ts","./OpenPopupButton.ts","./PlaySoundOnClick.ts","./PlayerButton.ts","./RankingProfile.ts","./ReddotController.ts","./RewardInfoTable.ts","./RotateAnimation.ts","./HttpHelper.ts","./AudioManager.ts","./LoaderManager.ts","./SceneManager.ts","./SubLoading.ts","./AlertPopup.ts","./ArenaInvitePopup.ts","./ArenaRewardInfoPopup.ts","./CreateRoomPopup.ts","./FindArenaMatchPopup.ts","./GameSharingPopup.ts","./HelpPopup.ts","./InviteLinkPopup.ts","./LoginCrazyGamePopup.ts","./PlayLocalPopup.ts","./PlayNowPopup.ts","./PlayWithFriendPopup.ts","./ProfileUpdatePopup.ts","./ReceiveReward.ts","./RewardAdPopup.ts","./RewardInfoPopup.ts","./RoomCodePopup.ts","./SelectModePopup.ts","./SettingPopup.ts","./WatchAdPopup.ts","./WeeklyRewardPopup.ts","./LanguageSelectorItem.ts","./ReceiveRewardItem.ts","./RewardAdMilestone.ts","./RewardInfoItem.ts","./RewardInfoListItem.ts","./BetCard.ts","./CircleRotating.ts","./ColorSelector.ts","./ExplodeAnimation.ts","./FadeInOut.ts","./FadeTransition.ts","./GameHelper.ts","./PingPongAnimation.ts","./RadiusRectangleGraphics.ts","./RoomLocalController.ts","./RoomNetworkControllerRefactor.ts","./RoundedRectangleGraphics.ts","./SmallFlags.ts","./StringUtils.ts","./SubLoadingScreen.ts","./SuperRoomNetworkController.ts","./TextCloudGraphics.ts","./Toast.ts","./UserPanel.ts","./colyseus.mjs_cjs=&original=.js","./TypeAlias.ts","./AdClient.ts","./AppOpenAdClient.ts","./BannerClient.ts","./InterstitialAdClient.ts","./NativeAdClient.ts","./RewardedAdClient.ts","./RewardedInterstitialAdClient.ts","./AdListener.ts","./AppOpenAdFullScreenContentCallback.ts","./AppOpenAdListener.ts","./AppOpenAdLoadCallback.ts","./BannerAdListener.ts","./FullScreenContentCallback.ts","./InterstitialAdListener.ts","./InterstitialAdLoadCallback.ts","./InterstitialFullScreenContentCallback.ts","./NativeAdListener.ts","./OnNativeAdLoadedListener.ts","./OnPaidEventListener.ts","./OnShowAdCompleteListener.ts","./OnUserEarnedRewardListener.ts","./RewardedAdFullScreenContentCallback.ts","./RewardedAdListener.ts","./RewardedAdLoadCallback.ts","./RewardedInterstitialAdLoadCallback.ts","./RewardedInterstitialFullScreenContentCallback.ts","./RewardedInterstitialListener.ts","./Bridge.ts","./Codec.ts","./INativeResponse.ts","./Route.ts","./Version2.ts","./BannerAlignment.ts","./BannerSize.ts","./BannerSizeOption.ts","./BannerSizeType.ts","./TestUnitId.ts","./AppOpenAd.ts","./BannerAd.ts","./Base.ts","./ICallbackNTF.ts","./InterstitailAd.ts","./NativeAd.ts","./PaidEventNTF.ts","./RewardedAd.ts","./RewardedInterstitialAd.ts","./Version.ts","./icu-component.ts","./l10n-component.ts","./l10n-label.ts","./auto-config-intl-manager.ts","./icu-options.ts","./icu-type.ts","./l10n-listen-event.ts","./l10n-manager.ts","./l10n-options.ts","./localization-global.ts","./resource-data-manager.ts","./l10n.ts","./Intl.PluralRules.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ManaItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,o,a,i,c,l,s,u,p,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,i=t._decorator,c=t.UIOpacity,l=t.Node,s=t.tween,u=t.Vec3,p=t.easing,y=t.Component}],execute:function(){var f,g,h,m,d,b,v;a._RF.push({},"e9ee1mN8PVJ+aq9kg7XHIRv","ManaItem",void 0);var w=i.ccclass,I=i.property;t("ManaItem",(f=w("ManaItem"),g=I(c),h=I(l),f((b=e((d=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a))||this,r(e,"glowFront",b,o(e)),r(e,"anchor",v,o(e)),e}return n(e,t),e.prototype.onLoad=function(){s(this.glowFront).set({opacity:0}).to(.075,{opacity:255}).delay(.1).to(.15,{opacity:0}).start(),s(this.anchor).set({scale:u.ZERO}).to(.5,{scale:u.ONE},{easing:p.elasticOut}).start()},e}(y)).prototype,"glowFront",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(d.prototype,"anchor",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/MatchMakingPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./AudioManager.ts","./GameHelper.ts","./StringUtils.ts"],(function(t){var e,n,i,a,o,r,s,l,u,c,p,d,f,y,m,h,b,v,g,_,P,N,A,w,x;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Sprite,l=t.Label,u=t.Node,c=t.Prefab,p=t.NodePool,d=t.instantiate,f=t.tween,y=t.v3,m=t.Vec3,h=t.UIOpacity,b=t.Tween,v=t.easing,g=t.Component,_=t.bezier,P=t.math},function(t){N=t.SOUND},function(t){A=t.AudioManager},function(t){w=t.GameHelper},function(t){x=t.StringUtils}],execute:function(){var T,S,z,C,L,M,O,E,R,k,D,U,Z,I,V,B,F,H,Y;o._RF.push({},"43463/fUOVBmrobLo2Y43Y9","MatchMakingPanel",void 0);var G=r.ccclass,j=r.property;t("MatchMakingPanel",(T=G("MatchMakingPanel"),S=j([s]),z=j([l]),C=j(l),L=j(u),M=j(u),O=j(u),E=j(u),R=j(c),T((U=e((D=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"avatarSprites",U,a(e)),i(e,"playerNames",Z,a(e)),i(e,"timer",I,a(e)),i(e,"horizontalLine",V,a(e)),i(e,"arrow",B,a(e)),i(e,"vsText",F,a(e)),i(e,"betAmountNode",H,a(e)),i(e,"rotatingCandyPrefab",Y,a(e)),e._time=0,e._candyPool=null,e._betAmountZoomTween=null,e._numPlayer=2,e._bet=0,e._frames=[],e._blurAnim=[],e}n(e,t);var o=e.prototype;return o.onLoad=function(){this._candyPool=new p;for(var t=0;t<10;t++)this._candyPool.put(d(this.rotatingCandyPrefab));this._betAmountZoomTween=f(this.betAmountNode).set({scale:y(1.1,1.1,1)}).to(.1,{scale:m.ONE}).start(),f(this.vsText).set({scale:m.ONE}).to(.5,{scale:y(1.05,1.05,1)}).to(.5,{scale:m.ONE}).union().repeatForever().start()},o._getCandy=function(){return this._candyPool.size()>0?this._candyPool.get():d(this.rotatingCandyPrefab)},o.setLayout=function(t){var e=this;void 0===t&&(t=2),this._numPlayer=t,this.node.children.forEach((function(t){t.name.includes("blur-avatar")?e._blurAnim.push(t):t.name.includes("frame")&&e._frames.push(t)})),2===t&&(this._updateNodesLayoutTo2Player(this.avatarSprites.map((function(t){return t.node.parent}))),this._updateNodesLayoutTo2Player(this._blurAnim),this._updateNodesLayoutTo2Player(this._frames),this.horizontalLine.active=!1,this.playerNames[0].node.setPosition(this.playerNames[0].node.position.x,-92),this.playerNames[2].node.setPosition(this.playerNames[2].node.position.x,-92),this.arrow.setPosition(this.arrow.position.x,0))},o._updateNodesLayoutTo2Player=function(t){var e=t[0],n=t[1],i=t[2],a=t[3];n.active=!1,a.active=!1,e.setPosition(e.position.x,0),i.setPosition(i.position.x,0)},o.setAvatar=function(t,e){if(this.playerNames[t].node.active=null!=e,null!=e){this.playerNames[t].string=x.truncate(e.name,14);var n=this.avatarSprites[t];w.loadAvatar(e.avatar,n),0!==t&&(n.node.setPosition(0,150),f(n.node).to(.3,{position:m.ZERO}).start())}else this.avatarSprites[t].spriteFrame=null},o.setBet=function(t){this._bet=t},o.fadeOut=function(){var t=this;f(this.getComponent(h)).to(.25,{opacity:0}).call((function(){t.node.active=!1})).start()},o.playReadyAnim=function(){var t=this;return new Promise((function(e,n){b.stopAllByTarget(t.vsText),f(t.vsText).to(.5,{scale:m.ZERO}).start(),f(t.betAmountNode).set({scale:m.ZERO,active:!0}).to(.5,{scale:m.ONE},{easing:v.backOut}).delay(.75).call((function(){t.avatarSprites.filter((function(t){return t.node.activeInHierarchy})).forEach((function(n,i){for(var a=n.node.parent.position,o=t.betAmountNode.position,r=m.subtract(y(),o,a).multiplyScalar(Math.sign(o.x-a.x)),s=y(-r.y,r.x).multiplyScalar(.25),u=m.lerp(y(),a,o,.33).add(s),c=m.lerp(y(),a,o,.66).add(s),p=function(n){var r=t._getCandy();r.setParent(t.betAmountNode.parent),r.active=!1;var s=f(r).delay(.125*n).set({position:a,active:!0}).to(.4,{},{onStart:function(){t.isValid&&A.Instance.playSound(N.CANDY_TO_JAR)},onUpdate:function(e,n){if(t.isValid){var i=_(a.x,u.x,c.x,o.x,n),s=_(a.y,u.y,c.y,o.y,n);r.setPosition(i,s)}},onComplete:function(){if(t.isValid){if(0===i){t._betAmountZoomTween.start();var e=Math.round(P.lerp(0,t._bet*t._numPlayer,(n+1)/10));t.betAmountNode.getComponentInChildren(l).string=w.pointNumber(e)}t._candyPool.put(r)}}});9===n&&s.delay(.75).call((function(){e()})),s.start()},d=0;d<10;d++)p(d)}))})).start()}))},o.start=function(){},o.update=function(t){this._time+=t,this.timer.string=w.convertToTimeString(this._time)},o.onDestroy=function(){},e}(g)).prototype,"avatarSprites",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=e(D.prototype,"playerNames",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=e(D.prototype,"timer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(D.prototype,"horizontalLine",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(D.prototype,"arrow",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(D.prototype,"vsText",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(D.prototype,"betAmountNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(D.prototype,"rotatingCandyPrefab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=D))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/MyUserProfileReactor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mobx.cjs.development.mjs_cjs=&original=.js","./Global.ts","./GameHelper.ts","./StringUtils.ts","./mobx.cjs.development.js"],(function(e){var t,r,n,a,o,i,u,l,s,c,f,p,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,u=e.Sprite,l=e.Label,s=e.Component},null,function(e){c=e.default},function(e){f=e.GameHelper},function(e){p=e.StringUtils},function(e){b=e.default}],execute:function(){var m,v,h,d,g,y,L,_,I,N,P;o._RF.push({},"bea17fH3QpJJppFUTbttM7a","MyUserProfileReactor",void 0);var U=i.ccclass,j=i.property,D=(b.observable,b.makeObservable,b.autorun);b.reaction,e("MyUserProfileReactor",(m=U("MyUserProfileReactor"),v=j(u),h=j(l),d=j(l),g=j(l),m((_=t((L=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,n(t,"avatar",_,a(t)),n(t,"userName",I,a(t)),n(t,"coinLabel",N,a(t)),n(t,"gemLabel",P,a(t)),t._mobXDisPosers=[],t}r(t,e);var o=t.prototype;return o.onLoad=function(){var e=this,t=D((function(){e._updateAvatar(),e._updateCoinLabel(),e._updateGemLabel(),e._updateUserName()}));this._mobXDisPosers.push(t)},o._updateAvatar=function(){this.avatar&&(this.avatar.node.active=null!=c.userInfo,null!=c.userInfo&&f.loadAvatar(c.userInfo.customAvatar||c.userInfo.avatar,this.avatar))},o._updateCoinLabel=function(){this.coinLabel&&(this.coinLabel.node.parent.active=null!=c.userInfo,null!=c.userInfo&&(this.coinLabel.string=f.formatNumber(c.userInfo.coins,5)))},o._updateGemLabel=function(){this.gemLabel&&(this.gemLabel.node.parent.active=null!=c.userInfo,null!=c.userInfo&&(this.gemLabel.string=f.formatNumber(c.userInfo.gems,5)))},o._updateUserName=function(){if(this.userName&&(this.userName.node.active=null!=c.userInfo,null!=c.userInfo)){var e=c.userInfo;e.name,e.nickName;this.userName.string=p.truncate(f.getNameFromPlayer(c.userInfo),9)}},o.onDestroy=function(){this._mobXDisPosers.forEach((function(e){e()}))},t}(s)).prototype,"avatar",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(L.prototype,"userName",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(L.prototype,"coinLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(L.prototype,"gemLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=L))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/NativeAd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Base.ts"],(function(t){var e,n,r,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator},function(t){i=t.Base}],execute:function(){var a,o,u,c,s,d;n._RF.push({},"7b7c2Gl5W9GoreLVP8oHwTY","NativeAd",void 0);var l=r.ccclass,v=(r.property,t("NativeAdTemplateSize",function(t){return t.Small="small",t.Medium="medium",t}({})));t("LoadNativeAdREQ",l("LoadNativeAdREQ")(a=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).size=v.Small,e}return e(n,t),n}(i))||a),t("LoadNativeAdACK",l("LoadNativeAdACK")(o=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n}(i))||o),t("NativeLoadedNTF",l("NativeLoadedNTF")(u=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n}(i))||u),t("NativeAdListenerNTF",l("NativeAdListenerNTF")(c=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).method=void 0,e.loadAdError=void 0,e}return e(n,t),n}(i))||c),t("DestroyNativeAdREQ",l("DestroyNativeAdREQ")(s=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n}(i))||s),t("DestroyNativeAdACK",l("DestroyNativeAdACK")(d=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n}(i))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/NativeAdClient.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Bridge.ts","./BannerAd.ts","./NativeAd.ts","./AdClient.ts","./Route.ts","./PaidEventNTF.ts"],(function(t){var e,i,n,a,s,o,d,r,v,N,u,A,l,c,h;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){n=t.cclegacy,a=t.log,s=t.js},function(t){o=t.bridge},function(t){d=t.DestroyBannerACK},function(t){r=t.LoadNativeAdREQ,v=t.LoadNativeAdACK,N=t.DestroyNativeAdREQ,u=t.NativeLoadedNTF,A=t.NativeAdListenerNTF},function(t){l=t.AdClient},function(t){c=t.route},function(t){h=t.NativePaidEventNTF}],execute:function(){n._RF.push({},"2051einid9F8YRS5orUMZnQ","NativeAdClient",void 0);var f="[NativeAdClient]";t("NativeAdClient",function(t){function n(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._nativeAdListener=void 0,e}e(n,t);var l=n.prototype;return l.load=function(t,e,i){a(f,"load","unitId = "+t),this.nativeAdListener=i;var n=new r(t);n.size=e,o.sendToNative(s.getClassName(r),n,s.getClassName(v),(function(t){a(f,"load","LoadNativeAdACK: "+t)}),this)},l.destroy=function(){a(f,"destroy"),this.nativeAdListener=null,o.sendToNative(s.getClassName(N),{unitId:this.unitId},s.getClassName(d),(function(t){a(f,"destroy","DestroyNativeAdACK = "+t)}))},l.onNativeLoadedNTF=function(t){if(this.nativeAdListener){var e=this.nativeAdListener;e&&e.onNativeAdLoaded&&e.onNativeAdLoaded()}},l.onNativeAdListenerNTF=function(t){var e=this.nativeAdListener[t.method];e&&e(t.loadAdError)},l.onPaidEvent=function(t){var e=this.nativeAdListener;e&&e.onPaidEvent&&e.onPaidEvent(t)},i(n,[{key:"nativeAdListener",get:function(){return this._nativeAdListener},set:function(t){this._nativeAdListener&&(c.off(s.getClassName(u),this.onNativeLoadedNTF,this),c.off(s.getClassName(A),this.onNativeAdListenerNTF,this),c.off(s.getClassName(h),this.onPaidEvent,this)),this._nativeAdListener=t,this._nativeAdListener&&(c.on(s.getClassName(u),this.onNativeLoadedNTF,this),c.on(s.getClassName(A),this.onNativeAdListenerNTF,this),c.on(s.getClassName(h),this.onPaidEvent,this))}}]),n}(l));n._RF.pop()}}}));

System.register("chunks:///_virtual/NativeAdListener.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"98273YC00NE6pnlSV02h9oy","NativeAdListener",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Networking.ts",["./rollupPluginModLoBabelHelpers.js","cc","./colyseus.mjs_cjs=&original=.js","./Constant.ts","./Global.ts","./HttpHelper.ts","./SDK.ts","./colyseus.js"],(function(t){var r,e,n,u,s,a,o,i,c,p,f,h;return{setters:[function(t){r=t.createClass,e=t.asyncToGenerator,n=t.regeneratorRuntime,u=t.extends},function(t){s=t.cclegacy},null,function(t){a=t.SERVER_URL,o=t.COLYSEUS_CONFIG,i=t.SKU_ITEM},function(t){c=t.default},function(t){p=t.httpRequest},function(t){f=t.default},function(t){h=t.default}],execute:function(){s._RF.push({},"d6e9c967oxJbJ8a3tI3BR5B","Networking",void 0);t("default",new(function(){function t(){this._accessToken="",this._client=null,this.lobbyRoom=null,this.gameRoom=null,this._seatReservation=null,this._domain="http://localhost:2567",this.myPlayer=null}var s=t.prototype;return s.initializeClient=function(){this._domain=a,this._client=new h.Client(o),console.log("URL and CONFIG",a,o)},s.reconnect=function(){var t=e(n().mark((function t(r){var e,u;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/reconnect","post",{reconnectionToken:r});case 2:if(e=t.sent,null!=(u=e.output.seatReservation)){t.next=6;break}throw new Error("No seat found");case 6:return u.reconnectionToken=r.split(":")[1],t.abrupt("return",e.output);case 8:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}(),s.getInventoryData=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/get-inventory-info");case 2:return r=t.sent,t.abrupt("return",r.output.inventoryData);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.getCCU=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/get-ccu");case 2:return r=t.sent,t.abrupt("return",r.output.ccu);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.getSweetyModeConfig=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/get-sweety-mode-config");case 2:return r=t.sent,t.abrupt("return",r.output);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.getUserInfo=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/get-user-info");case 2:return r=t.sent,console.log("respdata userinf",r),t.abrupt("return",r.output.player);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.getUserCoins=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/get-user-coins");case 2:return r=t.sent,t.abrupt("return",r.output);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.getAdInfo=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/get-reward-ad-info");case 2:return r=t.sent,t.abrupt("return",r.output);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.verifyRewardAd=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/verity-reward-ad","post");case 2:return r=t.sent,t.abrupt("return",r.output);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.verifyEndGameRewardAd=function(){var t=e(n().mark((function t(r){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=i.COIN),t.next=3,this.request("user/verify-reward-endgame-ad","post",{type:r});case 3:return e=t.sent,t.abrupt("return",e.output);case 5:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}(),s.getShareInfo=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/get-share-info");case 2:return r=t.sent,t.abrupt("return",r.output);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.receiveShareReward=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/share-reward","post");case 2:return r=t.sent,t.abrupt("return",r.output);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.joinRoomById=function(){var t=e(n().mark((function t(r,e){var s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/join-by-id","post",u({},e,{roomId:r}));case 2:return s=t.sent,t.abrupt("return",s.output);case 4:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}(),s.joinLobby=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/join-lobby","post");case 2:return r=t.sent,t.abrupt("return",r.output);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.equipItem=function(){var t=e(n().mark((function t(r){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/equip-item","post",{sku:r});case 2:return e=t.sent,t.abrupt("return",e.output.equipped);case 4:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}(),s.increaseAdCount=function(){var t=e(n().mark((function t(r){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/increase-ad-count","post",{sku:r});case 2:return e=t.sent,t.abrupt("return",e.output);case 4:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}(),s.buyItem=function(){var t=e(n().mark((function t(r,e){var u,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=0),u=0===e?i.COIN:i.GEM,t.next=4,this.request("user/buy-item","post",{sku:r,currency:u});case 4:return s=t.sent,t.abrupt("return",s.output);case 6:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}(),s.tryItemByAd=function(){var t=e(n().mark((function t(r){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/try-item-by-ad","post",{sku:r});case 2:return e=t.sent,t.abrupt("return",e.output);case 4:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}(),s.quickPlay=function(){var t=e(n().mark((function t(r){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/play-now","post",r);case 2:return e=t.sent,t.abrupt("return",e.output);case 4:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}(),s.createRoom=function(){var t=e(n().mark((function t(r,e,s,a,o,i){var c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=4),void 0===s&&(s="classic"),void 0===a&&(a=!1),void 0===o&&(o=!1),void 0===i&&(i={}),t.next=7,this.request("user/create-room","post",u({colorIdx:0,bet:r,roomSize:e,mode:s,isPublic:a,is2V2:o},i));case 7:return c=t.sent,t.abrupt("return",c.output);case 9:case"end":return t.stop()}}),t,this)})));return function(r,e,n,u,s,a){return t.apply(this,arguments)}}(),s.changeName=function(){var t=e(n().mark((function t(r){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/change-name","post",{newName:r});case 2:return e=t.sent,t.abrupt("return",e.output);case 4:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}(),s.changeAvatar=function(){var t=e(n().mark((function t(r){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/change-avatar","post",{avatar:r});case 2:return e=t.sent,t.abrupt("return",e.output);case 4:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}(),s.ping=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("ping"),t.next=3,this.request("user/ping","post");case 3:r=t.sent,console.log(r.output);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.getArenaLeaderboardInfo=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/get-arena-leaderboard-info");case 2:return r=t.sent,t.abrupt("return",r.output);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.claimArenaRewards=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/claim-arena-rewards","post");case 2:return r=t.sent,t.abrupt("return",r.output);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.getArenaConfig=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/get-arena-reward-config");case 2:return r=t.sent,t.abrupt("return",r.output);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.getWeeklyLeaderboardInfo=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/get-weekly-leaderboard-info");case 2:return r=t.sent,t.abrupt("return",r.output);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.claimWeeklyLeaderboardRewards=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/claim-weekly-leaderboard-rewards","post");case 2:return r=t.sent,t.abrupt("return",r.output);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.getWeeklyRewardConfig=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/get-weekly-reward-config");case 2:return r=t.sent,t.abrupt("return",r.output);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.joinArenaPreparingRoom=function(){var t=e(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request("user/join-arena-preparing","post");case 2:return r=t.sent,t.abrupt("return",r.output);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.request=function(){var t=e(n().mark((function t(r,e,u){var s,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e="get"),void 0===u&&(u={}),s={type:c.accountType},a=this._domain+"/"+r,!["crazygame","zmp","android"].includes(c.accountType)){t.next=11;break}return t.next=7,f.getUserToken();case 7:s.Authorization=t.sent,this.client.auth.token&&(a+="?token="+this.client.auth.token),t.next=12;break;case 11:s.Authorization="Bearer "+this.client.auth.token;case 12:return t.prev=12,t.next=15,p(e,a,s,u);case 15:return t.abrupt("return",t.sent);case 18:throw t.prev=18,t.t0=t.catch(12),console.error(t.t0),{code:t.t0.error};case 23:case"end":return t.stop()}}),t,this,[[12,18]])})));return function(r,e,n){return t.apply(this,arguments)}}(),r(t,[{key:"client",get:function(){return this._client}}]),t}()));s._RF.pop()}}}));

System.register("chunks:///_virtual/OnNativeAdLoadedListener.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"2a2e6fRYgBIe6tHmj67gL2S","OnNativeAdLoadedListener",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/OnPaidEventListener.ts",["cc"],(function(){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"0f711NbGkZBQ48WmxkneNNW","OnPaidEventListener",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/OnShowAdCompleteListener.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"62f0fffhWRH1rGcDJtj6FDT","OnShowAdCompleteListener",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/OnUserEarnedRewardListener.ts",["cc"],(function(){var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){e._RF.push({},"6d0a2WiUoRBA455UFNYwzFU","OnUserEarnedRewardListener",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/OpenPopupButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupManager.ts"],(function(t){var n,e,o,p,r,i,u,a,c,s;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,p=t.assertThisInitialized},function(t){r=t.cclegacy,i=t._decorator,u=t.Button,a=t.CCString,c=t.Component},function(t){s=t.default}],execute:function(){var l,f,y,d,h,g;r._RF.push({},"4df0f8tRzRAMYTpEENoCHQW","OpenPopupButton",void 0);var m=i.ccclass,v=i.property,C=i.requireComponent;t("OpenPopupButton",(l=m("OpenPopupButton"),f=C(u),y=v(a),l(d=f((g=n((h=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=t.call.apply(t,[this].concat(r))||this,o(n,"popupName",g,p(n)),n}return e(n,t),n.prototype.onLoad=function(){var t=this;this.getComponent(u).node.on(u.EventType.CLICK,(function(){s.Instance.open(t.popupName)}))},n}(c)).prototype,"popupName",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=h))||d)||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/PaidEventNTF.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Base.ts"],(function(t){var n,e,i,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator},function(t){r=t.Base}],execute:function(){var a,o,d,u,c,s,v;e._RF.push({},"e2d81qcvaVBva080tOWZBU/","PaidEventNTF",void 0);var p=i.ccclass,l=(i.property,t("PaidEventNTF",p("PaidEventNTF")(a=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(n=t.call.apply(t,[this].concat(i))||this).valueMicros=void 0,n.currencyCode=void 0,n.precision=void 0,n.adSourceName=void 0,n.adSourceId=void 0,n.adSourceInstanceName=void 0,n.adSourceInstanceId=void 0,n.mediationGroupName=void 0,n.mediationABTestName=void 0,n.mediationABTestVariant=void 0,n}return n(e,t),e}(r))||a));t("BannerPaidEventNTF",p("BannerPaidEventNTF")(o=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(l))||o),t("InterstitialPaidEventNTF",p("InterstitialPaidEventNTF")(d=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(l))||d),t("NativePaidEventNTF",p("NativePaidEventNTF")(u=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(l))||u),t("AppOpenPaidEventNTF",p("AppOpenPaidEventNTF")(c=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(l))||c),t("RewardedPaidEventNTF",p("RewardedPaidEventNTF")(s=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(l))||s),t("RewardedInterstitialPaidEventNTF",p("RewardedInterstitialPaidEventNTF")(v=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(l))||v);e._RF.pop()}}}));

System.register("chunks:///_virtual/PathGraphics.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,e,n,r,c;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,n=o._decorator,r=o.Graphics,c=o.Component}],execute:function(){var i;e._RF.push({},"91a99Hy6k9Ch5UzuLOjk/CF","PathGraphics",void 0);var s=n.ccclass;n.property,o("PathGraphics",s("PathGraphics")(i=function(o){function e(){return o.apply(this,arguments)||this}return t(e,o),e.prototype.onLoad=function(){var o=[[267.597,-243.146],[53,-115.712],[-53,-115.712],[-320,-274],[-425.553,-209.927],[-160,-50],[-160,12],[-427,171],[-320,236],[-51,76],[53,76],[320,237],[428,171],[162,11],[162,-50],[428,-209],[374,-241],[34,-38]],t=this.getComponent(r);t.moveTo(o[0][0],o[0][1]+22),o.slice(1).forEach((function(o){var e=o[0],n=o[1];t.lineTo(e,n+22)})),t.stroke(),t.moveTo(45,-65),t.lineTo(25,-9),t.lineTo(113,-21),t.close(),t.fill()},e}(c))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/PingPongAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,a,o,s,l,d,c,u,p,g,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.CCFloat,l=t.CCBoolean,d=t.Tween,c=t.v3,u=t.Vec3,p=t.easing,g=t.tween,f=t.Component}],execute:function(){var h,m,v,b,y,P,_,A,S,w,O,z,T;a._RF.push({},"bedb7u+2AxNQojlsg9AZl5v","PingPongAnimation",void 0);var V=o.ccclass,C=o.property;t("PingPongAnimation",(h=V("PingPongAnimation"),m=C(s),v=C(s),b=C(l),y=C(l),P=C(l),h((S=e((A=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"speed",S,r(e)),n(e,"range",w,r(e)),n(e,"isVertical",O,r(e)),n(e,"easing",z,r(e)),n(e,"randomStartOffset",T,r(e)),e._started=!1,e}i(e,t);var a=e.prototype;return a.start=function(){this._startAnim()},a.setData=function(t){var e=t.easing,i=void 0!==e&&e,n=t.isVertical,r=void 0!==n&&n,a=t.randomStartOffset,o=void 0!==a&&a,s=t.range,l=void 0===s?10:s,c=t.speed,u=void 0===c?1:c;this.easing=i,this.isVertical=r,this.randomStartOffset=o,this.range=l,this.speed=u,this._started=!1,d.stopAllByTarget(this.node),this._startAnim()},a._startAnim=function(){var t=this;if(!this._started){this._started=!0;var e=c(),i=this.isVertical?u.UNIT_Y:u.UNIT_X;this.node.getPosition(e);var n=this.randomStartOffset?u.ZERO:u.multiplyScalar(c(),i,(2*Math.random()-1)*this.range);this.node.setPosition(u.add(c(),e,n));var r=u.multiplyScalar(c(),i,this.range),a=.25/this.speed,o={easing:this.easing?p.sineInOut:p.linear};if(this.randomStartOffset){var s=.3*Math.random();g(this.node).to(a+s,{position:u.add(c(),e,r)},o).to(a+s,{position:u.add(c(),e,u.negate(c(),r))},o).call((function(){g(t.node).to(a,{position:u.add(c(),e,r)},o).to(a,{position:u.add(c(),e,u.negate(c(),r))},o).union().repeatForever().start()})).start()}else this.node.setPosition(u.add(c(),e,u.negate(c(),r))),g(this.node).to(a,{position:u.add(c(),e,r)},o).to(a,{position:u.add(c(),e,u.negate(c(),r))},o).union().repeatForever().start()}},a.onDestroy=function(){d.stopAllByTarget(this.node)},e}(f)).prototype,"speed",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),w=e(A.prototype,"range",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),O=e(A.prototype,"isVertical",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=e(A.prototype,"easing",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=e(A.prototype,"randomStartOffset",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=A))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./l10n-manager.ts"],(function(t){var e,r,i,n,o,a,l,u,c,s,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Node,u=t.Label,c=t.Button,s=t.Component},null,function(t){p=t.default}],execute:function(){var b,g,h,f,y,m,d,v,B,L,z;o._RF.push({},"9bd7aA/Wz5POLz1HBmE/Dgw","PlayerButton",void 0);var P=a.ccclass,w=a.property;t("PlayerButton",(b=P("PlayerButton"),g=w(l),h=w(l),f=w(u),y=w(u),b((v=e((d=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"highlightFrame",v,n(e)),i(e,"darkBg",B,n(e)),i(e,"topLabel",L,n(e)),i(e,"bottomLabel",z,n(e)),e}r(e,t);var o=e.prototype;return o.setData=function(t){var e=t||{},r=e.topText,i=void 0===r?"2":r,n=e.bottomText,o=void 0===n?p.t("players"):n,a=e.locked,l=void 0!==a&&a;this.topLabel.string=i,this.bottomLabel.string=o,this.darkBg.active=l,this.getComponent(c).interactable=!l},o.setHighlightEnable=function(t){this.highlightFrame.active=t},e}(s)).prototype,"highlightFrame",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(d.prototype,"darkBg",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(d.prototype,"topLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(d.prototype,"bottomLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/PlayLocalPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./Global.ts","./Popup.ts","./SceneManager.ts","./SubLoading.ts","./GameHelper.ts"],(function(t){var e,n,a,o,i,r,u,s,l,c,p,f,d,y,b,h,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,u=t.Button,s=t.SpriteFrame,l=t.EditBox,c=t.UIOpacity,p=t.Sprite},function(t){f=t.SceneName},function(t){d=t.default},function(t){y=t.Popup},function(t){b=t.SceneManager},function(t){h=t.SubLoading},function(t){g=t.GameHelper}],execute:function(){var m,B,S,v,P,L,_,I,E,C,w,x,z;i._RF.push({},"6ca67+M7opF35SB3djaWPeJ","PlayLocalPopup",void 0);var A=r.ccclass,F=r.property;t("PlayLocalPopup",(m=A("PlayLocalPopup"),B=F(u),S=F([s]),v=F([l]),P=F([u]),L=F([c]),m((E=e((I=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,a(e,"startButton",E,o(e)),a(e,"buttonIconSfs",C,o(e)),a(e,"nameEditboxes",w,o(e)),a(e,"stateButtons",x,o(e)),a(e,"playerBgOpa",z,o(e)),e._states=[0,0,0,0],e}n(e,t);var i=e.prototype;return i.onLoad=function(){var e=this;t.prototype.onLoad.call(this),this.startButton.node.on(u.EventType.CLICK,(function(){var t=[];e._states.forEach((function(n,a){if(2===n)t.push(null);else{var o={name:e.nameEditboxes[a].string,avatar:"1",colorIdx:a,isBot:1===n,equippingDice:"dice.default"};t.push(o)}})),t.filter((function(t){return null==t})).length>=3?g.showAlert({message:"The game need at least 2 players!"}):(d.localPlayers=t,h.Instance.show(),b.Instance.moveToScene(f.GAMEPLAY_CLASSIC))})),this.stateButtons.forEach((function(t,n){t.node.on(u.EventType.CLICK,(function(){e._states[n]=(e._states[n]+1)%3,e._updateButtonState(n)})),e._updateButtonState(n)}))},i._updateButtonState=function(t){var e=this._states[t];this.nameEditboxes[t].node.active=2!==e,this.playerBgOpa[t].opacity=2===e?153:255,this.stateButtons[t].getComponentInChildren(p).spriteFrame=this.buttonIconSfs[e]},e}(y)).prototype,"startButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(I.prototype,"buttonIconSfs",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=e(I.prototype,"nameEditboxes",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=e(I.prototype,"stateButtons",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=e(I.prototype,"playerBgOpa",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=I))||_));i._RF.pop()}}}));

System.register("chunks:///_virtual/PlayNowPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./Global.ts","./Popup.ts","./SubLoading.ts","./BetCard.ts","./ColorSelector.ts","./GameHelper.ts"],(function(t){var e,o,n,i,r,a,s,c,l,u,h,p,f,d,g,C,b,m,_,v,y,w,B,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t.cclegacy,c=t._decorator,l=t.Button,u=t.Node,h=t.Prefab,p=t.tween,f=t.Vec3,d=t.v3,g=t.instantiate,C=t.Sprite,b=t.Color},function(t){m=t.ENTRY_BETS},function(t){_=t.default},function(t){v=t.Popup},function(t){y=t.SubLoading},function(t){w=t.BetCard},function(t){B=t.ColorSelector},function(t){P=t.GameHelper}],execute:function(){var A,S,T,E,L,M,N,z,I,R,D,K,G,O,k,x,F,H,j,W,Y;s._RF.push({},"a1572vWGS1OnIYyFMj+1/da","PlayNowPopup",void 0);var Z=c.ccclass,V=c.property;t("PlayNowPopup",(A=Z("PlayNowPopup"),S=V([l]),T=V(l),E=V(l),L=V(l),M=V(l),N=V(u),z=V(h),I=V(l),R=V(B),A((G=e((K=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"numPlayerButtons",G,i(e)),n(e,"leftArrow",O,i(e)),n(e,"rightArrow",k,i(e)),n(e,"leftTouchArea",x,i(e)),n(e,"rightTouchArea",F,i(e)),n(e,"betCardContainer",H,i(e)),n(e,"betCardPrefab",j,i(e)),n(e,"playNowButton",W,i(e)),n(e,"colorSelector",Y,i(e)),e._choosingMode=0,e._isAnimating=!1,e._choosingBet=0,e}o(e,t);var s=e.prototype;return s.onLoad=function(){var e=this;t.prototype.onLoad.call(this);var o=this.betCardContainer.children,n=o[0],i=o[1],s=n.children,c=s[0],u=s[1],h=i.children[0];c.active=!1,this.leftArrow.node.active=!1,h.getComponent(w).setData(m[0],this._choosingMode),h.getComponent(w).focus(!0),u.getComponent(w).setData(m[1],this._choosingMode),u.getComponent(w).blur(!0),this.numPlayerButtons.forEach((function(t,o){t.node.on(l.EventType.CLICK,(function(){if(e._choosingMode!==o){e._choosingMode=o;var t=e.betCardContainer.children,n=t[0],i=t[1],r=n.children,a=r[0],s=r[1];[a,i.children[0],s].forEach((function(t){t.getComponent(w).setNumPlayerMode(e._choosingMode)})),e._updateModeButtonState()}}))})),this.leftTouchArea.node.on(l.EventType.CLICK,this._moveBetCardsLeft,this),this.rightTouchArea.node.on(l.EventType.CLICK,this._moveBetCardsRight,this),this.leftArrow.node.on(l.EventType.CLICK,this._moveBetCardsLeft,this),this.rightArrow.node.on(l.EventType.CLICK,this._moveBetCardsRight,this),this.playNowButton.node.on(l.EventType.CLICK,r(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(_.userInfo.coins<m[e._choosingBet])){t.next=3;break}return P.promptWatchAdPopup(),t.abrupt("return");case 3:y.Instance.show();case 4:case"end":return t.stop()}}),t)}))))},s._moveBetCardsLeft=function(){var t=this;if(!this._isAnimating&&0!==this._choosingBet){this._choosingBet--,this._isAnimating=!0;var e=this.betCardContainer.children,o=e[0],n=e[1],i=o.children,r=i[0],a=i[1],s=n.children[0],c=.15;p(a).to(c,{scale:f.ZERO}).call((function(){a.destroy(),t._isAnimating=!1})).start(),s.setParent(o),s.getComponent(w).blur(),p(s).to(c,{scale:d(.75,.75,1),position:d(195,0)}).start(),r.setParent(n),r.getComponent(w).focus(),p(r).to(c,{scale:f.ONE,position:d(0,14,0)}).start();var l=g(this.betCardPrefab);l.active=0!==this._choosingBet,l.setPosition(-195,0),o.insertChild(l,0),l.setScale(0,0);var u=m[this._choosingBet-1];u&&l.getComponent(w).setData(u,this._choosingMode),l.getComponent(w).blur(),p(l).to(c,{scale:d(.75,.75,1)}).start(),this._updateArrowState()}},s._moveBetCardsRight=function(){var t=this;if(!this._isAnimating&&this._choosingBet!==m.length-1){this._isAnimating=!0,this._choosingBet++;var e=this.betCardContainer.children,o=e[0],n=e[1],i=o.children,r=i[0],a=i[1],s=n.children[0],c=.15;p(r).to(c,{scale:f.ZERO}).call((function(){r.destroy(),t._isAnimating=!1})).start(),s.setParent(o),s.getComponent(w).blur(),p(s).to(c,{scale:d(.75,.75,1),position:d(-195,0)}).start(),a.setParent(n),a.getComponent(w).focus(),p(a).to(c,{scale:f.ONE,position:d(0,14,0)}).start();var l=g(this.betCardPrefab);l.active=this._choosingBet!==m.length-1,l.setPosition(195,0),l.setParent(o),l.setScale(0,0);var u=m[this._choosingBet+1];u&&l.getComponent(w).setData(u,this._choosingMode),l.getComponent(w).blur(),p(l).to(c,{scale:d(.75,.75,1)}).start(),this._updateArrowState()}},s._updateArrowState=function(){this.leftArrow.node.active=0!==this._choosingBet,this.rightArrow.node.active=this._choosingBet!==m.length-1},s._updateModeButtonState=function(){var t=this;this.numPlayerButtons.forEach((function(e,o){e.getComponent(C).color=new b(255,255,255,t._choosingMode===o?255:0)}))},s.start=function(){this._updateModeButtonState()},s.update=function(t){},e}(v)).prototype,"numPlayerButtons",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=e(K.prototype,"leftArrow",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(K.prototype,"rightArrow",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(K.prototype,"leftTouchArea",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(K.prototype,"rightTouchArea",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(K.prototype,"betCardContainer",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(K.prototype,"betCardPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(K.prototype,"playNowButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(K.prototype,"colorSelector",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=K))||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlaySignInACK.ts",["cc"],(function(n){var c,e;return{setters:[function(n){c=n.cclegacy,e=n._decorator}],execute:function(){var t;c._RF.push({},"cc29eDk0YZGj7WJ3RpuzTs5","PlaySignInACK",void 0);var r=e.ccclass;e.property,n("PlaySignInACK",r("PlaySignInACK")(t=function(){this.serverAuthToken=void 0})||t);c._RF.pop()}}}));

System.register("chunks:///_virtual/PlaySignInREQ.ts",["cc"],(function(n){var c,t;return{setters:[function(n){c=n.cclegacy,t=n._decorator}],execute:function(){var i;c._RF.push({},"d9b7fiP4SZIhL/VMYLXJtNX","PlaySignInREQ",void 0);var r=t.ccclass;t.property,n("PlaySignInREQ",r("PlaySignInREQ")(i=function(){this.forceSignIn=!1})||i);c._RF.pop()}}}));

System.register("chunks:///_virtual/PlaySoundOnClick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./AudioManager.ts"],(function(n){var t,e,o,i,r,a,u,s,l,c,p;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,u=n.Button,s=n.CCString,l=n.Component},function(n){c=n.SOUND},function(n){p=n.AudioManager}],execute:function(){var d,C,y,f,h,m,g;r._RF.push({},"2e3a6iDVwxFqYs10sV/ANiu","PlaySoundOnClick",void 0);var v=a.ccclass,N=a.property,S=a.requireComponent,L=a.disallowMultiple;n("PlaySoundOnClick",(d=v("PlaySoundOnClick"),C=S(u),y=L(!0),f=N(s),d(h=C(h=y((g=t((m=function(n){function t(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r))||this,o(t,"soundName",g,i(t)),t}return e(t,n),t.prototype.onLoad=function(){var n=this;null!=this.soundName&&""!==this.soundName||(this.soundName=c.CLICK),this.getComponent(u).node.on(u.EventType.CLICK,(function(){p.Instance.playSound(n.soundName)}))},t}(l)).prototype,"soundName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.CLICK}}),h=m))||h)||h)||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayWithFriendPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Networking.ts","./Popup.ts","./PopupManager.ts","./SceneManager.ts","./SubLoading.ts","./GameHelper.ts"],(function(t){var e,n,o,r,i,a,u,c,s,p,l,d,f,h,g,m,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){u=t.cclegacy,c=t._decorator,s=t.EditBox,p=t.Button,l=t.Sprite},function(t){d=t.default},function(t){f=t.Popup},function(t){h=t.default},function(t){g=t.SceneManager},function(t){m=t.SubLoading},function(t){y=t.GameHelper}],execute:function(){var B,v,b,P,x,I,E,w,L;u._RF.push({},"a5f04DnfkhHUKxte708rKLG","PlayWithFriendPopup",void 0);var R=c.ccclass,S=c.property;t("PlayWithFriendPopup",(B=R("PlayWithFriendPopup"),v=S(s),b=S(p),P=S(p),B((E=e((I=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,o(e,"roomIdEditBox",E,r(e)),o(e,"createButton",w,r(e)),o(e,"joinButton",L,r(e)),e}n(e,t);var u=e.prototype;return u.onLoad=function(){var e=this;t.prototype.onLoad.call(this),this._updateJoinButton(),this.roomIdEditBox.node.on(s.EventType.TEXT_CHANGED,(function(){e._updateJoinButton()})),this.createButton.node.on(p.EventType.CLICK,i(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:h.Instance.open("CreateRoomPopup",{isPublic:!1});case 1:case"end":return t.stop()}}),t)})))),this.joinButton.node.on(p.EventType.CLICK,i(a().mark((function t(){var n,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.roomIdEditBox.string.length){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,m.Instance.show(),t.next=6,d.joinRoomById(e.roomIdEditBox.string,{});case 6:return n=t.sent,o=n.seatReservation,t.next=10,d.client.consumeSeatReservation(o);case 10:d.gameRoom=t.sent,g.Instance.moveToScene("PreparingRoom"),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(2),m.Instance.hide(),console.error(t.t0),y.showErrorAlert(t.t0.code);case 19:case"end":return t.stop()}}),t,null,[[2,14]])}))))},u._updateJoinButton=function(){var t=this.roomIdEditBox.string.length>0;this.joinButton.interactable=t,this.joinButton.getComponent(l).grayscale=!t},e}(f)).prototype,"roomIdEditBox",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(I.prototype,"createButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(I.prototype,"joinButton",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=I))||x));u._RF.pop()}}}));

System.register("chunks:///_virtual/PokiSDK.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,e,n,s,i;return{setters:[function(t){r=t.asyncToGenerator,e=t.regeneratorRuntime,n=t.createClass},function(t){s=t.cclegacy,i=t.sys}],execute:function(){s._RF.push({},"fa48fsgDalH84lWFX4rBacc","PokiSDK",void 0);var a=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.REQUESTED=1]="REQUESTED",t[t.INITIALIZED=2]="INITIALIZED",t}(a||{});t("default",new(function(){function t(){this.initResolvers=[],this.initState=a.UNINITIALIZED,this.sdk=void 0,this._isEnabled=!0,this._version="1.0.0",this.isSupportedPlatform||(this._isEnabled=!1)}var s=t.prototype;return s.init=function(){var t=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureLoad();case 2:this.sdk.init().then((function(){console.log("Poki init success")})).catch((function(t){console.log("Poki init failed",t)}));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.gameLoadingFinished=function(){var t=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureLoad();case 2:return t.abrupt("return",this.sdk.gameLoadingFinished());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.gameplayStart=function(){var t=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureLoad();case 2:return t.abrupt("return",this.sdk.gameplayStart());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.gameplayStop=function(){var t=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureLoad();case 2:return t.abrupt("return",this.sdk.gameplayStop());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.commercialBreak=function(){var t=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureLoad();case 2:return t.abrupt("return",this.sdk.commercialBreak());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.shareableURL=function(){var t=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureLoad();case 2:return t.abrupt("return",this.sdk.shareableURL(r));case 3:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}(),s.rewardedBreak=function(){var t=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureLoad();case 2:return t.abrupt("return",this.sdk.rewardedBreak());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.getURLParam=function(){var t=r(e().mark((function t(r){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureLoad();case 2:return n=this.sdk.getURLParam(r),t.abrupt("return",""===n?null:n);case 4:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}(),s.loadJsSDK=function(){var t=this;if(this.initState===a.UNINITIALIZED){this.initState=a.REQUESTED;var n=document.createElement("script");n.src="https://game-cdn.poki.com/scripts/v2/poki-sdk.js",n.async=!0,n.onload=r(e().mark((function r(){return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.sdk=window.PokiSDK,t.initState=a.INITIALIZED,t.initResolvers.forEach((function(t){return t()})),t.initResolvers=[];case 4:case"end":return r.stop()}}),r)}))),n.onerror=function(){return console.error("Failed to load PokiSDK JS. Please check your internet connection.")},document.head.appendChild(n)}},s.ensureLoad=function(){var t=r(e().mark((function t(){var n=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.initState!==a.INITIALIZED){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:return this.loadJsSDK(),t.abrupt("return",new Promise((function(t){n.initResolvers.push(r(e().mark((function r(){return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t();case 1:case"end":return r.stop()}}),r)}))))})));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n(t,[{key:"isSupportedPlatform",get:function(){return[i.Platform.MOBILE_BROWSER,i.Platform.DESKTOP_BROWSER].indexOf(i.platform)>=0}}]),t}()));s._RF.pop()}}}));

System.register("chunks:///_virtual/Popup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,i,r,s,a,c,l,u,p,f,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Button,c=t.Node,l=t.tween,u=t.v3,p=t.easing,f=t.UIOpacity,h=t.Component}],execute:function(){var y,b,v,_,d,C,g;r._RF.push({},"2fafeefLaZF04b6L0EWBhfl","Popup",void 0);var D=s.ccclass,B=s.property;t("Popup",(y=D("Popup"),b=B(a),v=B(c),y((C=e((d=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"closeButton",C,i(e)),n(e,"container",g,i(e)),e._onDestroyCb=function(){},e._data={},e._resolveCb=null,e._resolveValue=null,e}o(e,t);var r=e.prototype;return r.onLoad=function(){var t;null==(t=this.closeButton)||t.node.on(a.EventType.CLICK,this.close,this),l(this.container).set({scale:u(.75,.75,1)}).to(.25,{scale:u(1,1,1)},{easing:p.backOut}).start(),l(this.container.getComponent(f)).set({opacity:100}).to(.25,{opacity:255},{easing:p.sineOut}).start()},r.setResolver=function(t){this._resolveCb=t},r.setData=function(t){this._data=t},r.setOnDestroyCb=function(t){this._onDestroyCb=t},r.forceClose=function(){this.close()},r.close=function(){this.node.destroy(),this._resolveCb(this._resolveValue)},r.onDestroy=function(){this._onDestroyCb()},e}(h)).prototype,"closeButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(d.prototype,"container",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=d))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/PopupManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubLoading.ts","./Popup.ts"],(function(n){var e,o,t,i,p,u,r,s,a,c;return{setters:[function(n){e=n.createClass},function(n){o=n.cclegacy,t=n.resources,i=n.Prefab,p=n.find,u=n.director,r=n.RenderRoot2D,s=n.instantiate},function(n){a=n.SubLoading},function(n){c=n.Popup}],execute:function(){o._RF.push({},"dc787Zu8lhGQ5TDv0bF/YwW","PopupManager",void 0),n("default",function(){function n(){this._openingPopups=[]}var o=n.prototype;return o.preloadAllPopup=function(){t.preloadDir("popups",i)},o.open=function(n,e,o){var l=this;return void 0===e&&(e={}),void 0===o&&(o=!1),new Promise((function(d,f){null==t.get("popups/"+n,i)&&a.Instance.show(),t.load("popups/"+n,i,(function(t,i){if(a.Instance.hide(),null!=t)return console.error("Load "+n+" failed",t),void f(t);if(null!=l._openingPopups.find((function(e){return e.node.name===n}))){var P="Popup "+n+" is already opened!";return console.warn("Popup "+n+" is already opened!"),void f(P)}var g=o?p("PopupContainer"):u.getScene().getComponentInChildren(r).node,h=s(i).getComponent(c);h.setResolver(d),h.setData(e),h.setOnDestroyCb((function(){l._openingPopups.splice(l._openingPopups.indexOf(h),1)})),g.addChild(h.node),l._openingPopups.push(h)}))})).catch((function(n){console.error(n)}))},o.closePopup=function(n){var e=this._openingPopups.find((function(e){return e.node.name===n}));if(null!=e)e.forceClose();else{var o="Popup "+n+" is not opened";console.warn(o)}},e(n,null,[{key:"Instance",get:function(){return null==this._instance&&(this._instance=new n),this._instance}}]),n}())._instance=null,o._RF.pop()}}}));

System.register("chunks:///_virtual/PreparingPlayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SimpleEventTarget.ts","./LoaderManager.ts","./ColorSelector.ts","./GameHelper.ts","./StringUtils.ts"],(function(e){var t,n,i,r,a,o,l,u,c,s,p,h,b,f,v,d,k,g,S,m,w,y,C,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){l=e.cclegacy,u=e._decorator,c=e.Sprite,s=e.Label,p=e.Node,h=e.Button,b=e.SpriteFrame,f=e.UIOpacity,v=e.Color,d=e.sp,k=e.Component,g=e.instantiate,S=e.Prefab},function(e){m=e.SimpleEventTarget},function(e){w=e.LoaderManager},function(e){y=e.ColorSelector},function(e){C=e.GameHelper},function(e){_=e.StringUtils}],execute:function(){var x,I,V,B,L,z,E,P,A,D,F,N,T,R,H,K,U,G,M,O,W,Y,j,X,q,J,Q,Z,$,ee,te,ne,ie,re,ae,oe,le;l._RF.push({},"ad5ac0WpCFIWKVIIv0XRE3Y","PreparingPlayer",void 0);var ue=u.ccclass,ce=u.property;e("PreparingPlayer",(x=ue("PreparingPlayer"),I=ce(y),V=ce(c),B=ce(s),L=ce(s),z=ce(s),E=ce(p),P=ce(p),A=ce(p),D=ce(p),F=ce(p),N=ce(p),T=ce(h),R=ce(h),H=ce(h),K=ce(p),U=ce([h]),G=ce([b]),x((W=t((O=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"colorSelector",W,r(t)),i(t,"avatarSprite",Y,r(t)),i(t,"goldLabel",j,r(t)),i(t,"arenaScoreLabel",X,r(t)),i(t,"playerName",q,r(t)),i(t,"hostBadge",J,r(t)),i(t,"infoView",Q,r(t)),i(t,"waitingView",Z,r(t)),i(t,"lockView",$,r(t)),i(t,"uiView",ee,r(t)),i(t,"inviteView",te,r(t)),i(t,"kickButton",ne,r(t)),i(t,"diceSkinButton",ie,r(t)),i(t,"baseSkinButton",re,r(t)),i(t,"charSkinAnchor",ae,r(t)),i(t,"changeCharButtons",oe,r(t)),i(t,"buttonSfs",le,r(t)),t._slotIdx=0,t._colorIdx=0,t._inviteCb=void 0,t._charSku=null,t._baseSku=null,t._diceSku=null,t.playerData=null,t}n(t,e);var l=t.prototype;return l.onLoad=function(){var e=this;this.infoView.active=!1,this.waitingView.getComponent(f).opacity=0,this.lockView.active=!1,this.hostBadge.active=!1,this.inviteView.active=!1,this.kickButton.node.active=!1,this.inviteView.on(h.EventType.CLICK,a(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null!=e._inviteCb&&e._inviteCb();case 1:case"end":return t.stop()}}),t)})))),this.kickButton.node.on(h.EventType.CLICK,(function(){m.emit("KICK_PLAYER",e._slotIdx)})),0===this.node.getSiblingIndex()&&(this.playerName.color=(new v).fromHEX("#FCB94E"))},l.setData=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.locked,r=void 0!==i&&i,a=e.player,o=e.isHost,l=void 0!==o&&o,u=e.idx;this._slotIdx=u;var c=null==a||C.isEmptyObject(a);if(t?(this.kickButton.node.active=!c&&!l&&n,this.inviteView.active=c):(this.lockView.active=r,this.waitingView.getComponent(f).opacity=null!=a||r?0:255),this.infoView.active=!c&&!r,c)this.playerData=null;else{if(this.playerData=a,C.loadAvatar(C.getAvatarStrFromPlayer(a),this.avatarSprite),this.playerName.string=_.truncate(C.getNameFromPlayer(a),9),this.goldLabel){var s=a.coins;this.goldLabel.string=C.formatNumber(s,5)}this.hostBadge.active=l}},l.setUIViewEnable=function(e){this.uiView.active=e},l.setDiceSkin=function(){var e=a(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this._diceSku!==t){e.next=3;break}return e.abrupt("return");case 3:if(this._diceSku=t,null!=this._diceSku){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,w.Instance.loadDiceThumb(this._diceSku);case 8:n=e.sent,this.diceSkinButton.getComponentInChildren(c).spriteFrame=n,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),l.setBaseSkin=function(){var e=a(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t!==this._baseSku){e.next=3;break}return e.abrupt("return");case 3:if(this._baseSku=t,null!=this._baseSku){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,w.Instance.loadSfToSprite("bases/select-thumb/"+t.split(".")[1]+"/spriteFrame",this.baseSkinButton.getComponentInChildren(c));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),l.setCharSkin=function(){var e=a(o().mark((function e(t){var n,i,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this._charSku!==t){e.next=3;break}return e.abrupt("return");case 3:if(this._charSku=t,null!=this._charSku){e.next=6;break}return e.abrupt("return");case 6:return n="characters/anim/"+t.split(".")[1],e.next=9,w.Instance.loadAsset(n,S);case 9:i=e.sent,this._charSku===t&&this.isValid&&(this.charSkinAnchor.children.forEach((function(e){e.destroy()})),(r=g(i)).setParent(this.charSkinAnchor),this.setColor(this._colorIdx,r.getComponent(d.Skeleton))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),l.setColor=function(e,t){void 0===t&&(t=null),this._colorIdx=e;var n=t||this.charSkinAnchor.getComponentInChildren(d.Skeleton);if(n){n.setSkin(["BLUE","RED","GREEN","YELLOW"][this._colorIdx])}},l.setArenaScore=function(e){this.arenaScoreLabel&&(this.arenaScoreLabel.string=""+e)},l.setInviteCb=function(e){void 0===e&&(e=function(){}),this._inviteCb=e},t}(k)).prototype,"colorSelector",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(O.prototype,"avatarSprite",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(O.prototype,"goldLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(O.prototype,"arenaScoreLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(O.prototype,"playerName",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(O.prototype,"hostBadge",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(O.prototype,"infoView",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(O.prototype,"waitingView",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(O.prototype,"lockView",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(O.prototype,"uiView",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(O.prototype,"inviteView",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(O.prototype,"kickButton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(O.prototype,"diceSkinButton",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(O.prototype,"baseSkinButton",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(O.prototype,"charSkinAnchor",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(O.prototype,"changeCharButtons",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),le=t(O.prototype,"buttonSfs",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=O))||M));l._RF.pop()}}}));

System.register("chunks:///_virtual/PreparingRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Constant.ts","./SimpleEventTarget.ts","./Global.ts","./SkinSelector.ts","./SceneManager.ts","./SubLoading.ts","./Networking.ts","./PopupManager.ts","./SDK.ts","./GameHelper.ts","./PreparingPlayer.ts","./l10n-manager.ts"],(function(t){var e,n,o,i,r,a,s,l,u,c,d,m,p,h,_,f,b,g,S,v,y,I,L,w,k,C,T,B,P,E,R,O,x,A,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,a=t.regeneratorRuntime,s=t.createClass},function(t){l=t.cclegacy,u=t._decorator,c=t.Button,d=t.Label,m=t.Node,p=t.tween,h=t.Vec3,_=t.v3,f=t.sys,b=t.macro,g=t.Sprite,S=t.math,v=t.UITransform,y=t.Component},null,function(t){I=t.SceneName,L=t.Transfer,w=t.SKU_ITEM},function(t){k=t.SimpleEventTarget},function(t){C=t.default},function(t){T=t.SkinSelector},function(t){B=t.SceneManager},function(t){P=t.SubLoading},function(t){E=t.default},function(t){R=t.default},function(t){O=t.default},function(t){x=t.GameHelper},function(t){A=t.PreparingPlayer},function(t){D=t.default}],execute:function(){var G,N,M,z,H,K,F,U,V,q,Y,j,Z,J,Q,W,X,$,tt,et,nt,ot,it,rt,at,st,lt;l._RF.push({},"a2c1bUknYpEVo89N+VmcKgT","PreparingRoom",void 0);var ut=u.ccclass,ct=u.property;t("PreparingRoom",(G=ut("PreparingRoom"),N=ct(c),M=ct(c),z=ct(d),H=ct(d),K=ct(d),F=ct([A]),U=ct(c),V=ct(d),q=ct(d),Y=ct(d),j=ct(T),Z=ct(m),G((W=e((Q=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"backButton",W,i(e)),o(e,"settingsButton",X,i(e)),o(e,"modeLabel",$,i(e)),o(e,"betLabel",tt,i(e)),o(e,"winLabel",et,i(e)),o(e,"preparingPlayers",nt,i(e)),o(e,"startButton",ot,i(e)),o(e,"startGameLabel",it,i(e)),o(e,"timerLabel",rt,i(e)),o(e,"roomCodeLabel",at,i(e)),o(e,"skinSelector",st,i(e)),o(e,"vsNode",lt,i(e)),e.diceSkinButton=null,e.baseSkinButton=null,e.colorSelector=null,e._room=null,e._disposer=[],e._timer=3,e._outRoomTimer=0,e._consentedLeave=!1,e._roomId="",e._ownedDice=[],e._ownedBases=[],e._choosableChars=[],e._inited=!1,e._startButtonTween=null,e}n(e,t);var l=e.prototype;return l.onLoad=function(){var t=this;this.settingsButton.node.on(c.EventType.CLICK,(function(){R.Instance.open("SettingPopup",{showSignOutButton:!1})})),this._startButtonTween=p(this.startButton.node).set({scale:h.ONE}).delay(2).to(.1,{scale:_(1.1,1.1,1)}).to(.1,{scale:_(1.05,1.05,1)}).to(.1,{scale:_(1.1,1.1,1)}).to(.1,{scale:h.ONE}).union().repeatForever(),this.node.on(m.EventType.TOUCH_END,(function(e){e.target.isChildOf(t.skinSelector.node)||t.skinSelector.hide()}),this,!0),this.preparingPlayers.forEach((function(e){e.setInviteCb(r(a().mark((function e(){var n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t._room.state.phase>0)){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!O.isZMPEnable){e.next=7;break}return n=C.userInfo.name+" mời bạn chơi Sweety Ludo phòng số "+t._roomId,e.next=7,O.sendInvite({roomId:t._roomId},n);case 7:if(!f.isNative||f.os!==f.OS.ANDROID){e.next=12;break}return e.next=10,R.Instance.open("RoomCodePopup",{code:t._roomId});case 10:e.next=17;break;case 12:return e.next=14,O.getInviteLink({roomId:t._roomId});case 14:return o=e.sent,e.next=17,R.Instance.open("InviteLinkPopup",{inviteLink:o});case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[2,19]])}))))})),this.backButton.node.on(c.EventType.CLICK,(function(){t._room.state.phase>0||(t._consentedLeave=!0,B.Instance.moveToScene(0===t._room.state.mode?I.LOBBY:I.HOME))})),this.startButton.node.active=!1,this.startGameLabel.node.active=!1,this.startGameLabel.string=D.t("waiting-host"),this.startButton.node.on(c.EventType.CLICK,(function(){t._room.send(L.START_GAME)})),k.on("KICK_PLAYER",(function(e){t._room.send(L.KICK_PLAYER,e)}),this),this._ownedDice=this._getAllOwnedCategoryItems("dice"),this._ownedBases=this._getAllOwnedCategoryItems("bases"),this._choosableChars=this._getAllOwnedCategoryItems("characters");var e=this.preparingPlayers[0];e.setUIViewEnable(!0),this.colorSelector=e.colorSelector,this.colorSelector.setChangeColorCb((function(){t._changeColorCb()})),this.diceSkinButton=e.diceSkinButton,this.diceSkinButton.node.on(c.EventType.CLICK,(function(){t._setSkinSelectorToNodePosition(t.diceSkinButton.node),t.skinSelector.setData(t._ownedDice,t.mySlot.equippingDice)})),this.baseSkinButton=e.baseSkinButton,this.baseSkinButton.node.on(c.EventType.CLICK,(function(){t._setSkinSelectorToNodePosition(t.baseSkinButton.node),t.skinSelector.setData(t._ownedBases,t.mySlot.equippingBase)})),e.charSkinAnchor.on(m.EventType.TOUCH_END,(function(){t._setSkinSelectorToNodePosition(e.charSkinAnchor,50),t.skinSelector.setData(t._choosableChars,t.mySlot.equippingChar)})),this.skinSelector.setChangeSkinCb((function(e){t._room.send(L.CHANGE_SKIN,e)}))},l.start=function(){var t=this;this._room=E.gameRoom,this._room.send(L.READY_PREPARING),this._room.send(L.ROOM_TIME_LEFT);var e=this._room.state.listen("slots",(function(e){if(0!==e.length&&!t._inited){t._inited=!0;var n=1===t._room.state.mode;t.timerLabel.node.active=n,t.roomCodeLabel.node.active=n,t._roomId=t._room.roomId,t.roomCodeLabel.string=D.t("room-code-x",{code:t._roomId}),e.forEach((function(t){var e;(null==(e=t.player)?void 0:e.uid)===C.userInfo._id&&(C.myIdx=t.idx)})),t.vsNode.active=t._room.state.is2V2,t.modeLabel.string=D.t("mode-x",{mode:D.t("classic"===t.mode?"classic":"sweety")}),t.betLabel.string=D.t("bet-x",{bet:x.formatNumber(t._room.state.bet,4)}),t.winLabel.string=D.t("win-x",{win:x.formatNumber(t._room.state.winAmount,4)}),n&&O.showInviteButton({roomId:t._roomId}),e.forEach((function(e){t._setSlotData(e);var n=e.listen("equippingChar",(function(n){var o;null!=e.player&&(null==(o=t._getPreparingPlayerOfSlot(e))||o.setCharSkin(n))})),o=e.listen("equippingDice",(function(n){var o;null==(o=t._getPreparingPlayerOfSlot(e))||o.setDiceSkin(n)})),i=e.listen("equippingBase",(function(n){var o;null==(o=t._getPreparingPlayerOfSlot(e))||o.setBaseSkin(n)})),r=e.listen("player",(function(n){t._setSlotData(e)}));t._updateReadySlotState();var a=e.listen("isReadyPreparing",(function(e){t._updateReadySlotState()})),s=e.listen("isHost",(function(){t._setSlotData(e),t._updateStartButtonState()}));t._disposer.push(n,r,a,s,i,o)})),t._initStateUI()}})),n=this._room.state.listen("phase",(function(e){1===e&&(f.localStorage.setItem("reconnectionToken",t._room.reconnectionToken),t.startGameLabel.node.active=!0,t._updateStartGameLabel(),t.schedule(t._countDownStartGame,1,b.REPEAT_FOREVER),t.startButton.interactable=!1,t.startButton.getComponent(g).grayscale=!0,t._startButtonTween.stop(),O.hideInviteButton())}));this._room.onMessage("*",(function(e,n){e===L.ROOM_TIME_LEFT&&(t._outRoomTimer=n,t._updateTimerLabel(),t.schedule(t._countDown,1,b.REPEAT_FOREVER))})),this._room.onLeave((function(e){!t._consentedLeave&&t.isValid&&(B.Instance.moveToScene(I.HOME),4e3!==e&&x.showErrorAlert(e))})),this._disposer.push(e,n)},l._initStateUI=function(){var t;this._updateStartButtonState(),this._changeColorCb(),this.colorSelector.setColor((null==(t=this.mySlot)?void 0:t.colorIdx)||0)},l._updateStartButtonState=function(){if(0===this._room.state.phase){var t=this.mySlot;t&&(this.startButton.node.active=t.isHost,this.startGameLabel.node.active=!t.isHost)}},l._setSlotData=function(t){var e=this._getPreparingPlayerOfSlot(t),n=this._room.state.slots.find((function(t){var e;return(null==(e=t.player)?void 0:e.uid)===C.userInfo._id})),o=(null==n?void 0:n.isHost)||!1;e.setData(t,1===this._room.state.mode,o),0===this._room.state.mode&&o&&n.player.total<1&&"classic"===this.mode&&this._room.send(L.START_GAME)},l._getPreparingPlayerOfSlot=function(t){return this.preparingPlayers[S.repeat(t.idx-C.myIdx,4)]},l._updateReadySlotState=function(){var t=1===this._room.state.phase,e=1===this._room.state.mode?2:this._room.state.roomSize,n=this._room.state.slots.filter((function(t){return t.isReadyPreparing&&null!=t.player})).length>=e;this.startButton.interactable=n&&!t,this.startButton.getComponent(g).grayscale=!this.startButton.interactable,this.startButton.interactable?this._startButtonTween.start():this._startButtonTween.stop()},l._countDownStartGame=function(){var t=r(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._timer-=1,this._updateStartGameLabel(),!(this._timer<=0)){t.next=22;break}if(this.unschedule(this._countDownStartGame),!this._consentedLeave){t.next=6;break}return t.abrupt("return");case 6:return e="classic"===this.mode,P.Instance.setBg(e?0:1),P.Instance.showFull(0),P.Instance.updateLoadingText(D.t("loading-desc-1")),t.prev=10,t.next=13,x.loadAllRequireGameplayAsset(this._room.state,this.mode,(function(t){P.Instance.showFull(t)})).catch((function(t){console.error(t)}));case 13:P.Instance.updateLoadingText(D.t("loading-desc-2")),B.Instance.moveToScene(e?I.GAMEPLAY_CLASSIC:I.GAMEPLAY_SUPER).then((function(){P.Instance.updateLoadingText(D.t("loading-desc-3"))})),t.next=22;break;case 17:t.prev=17,t.t0=t.catch(10),console.error(t.t0),this._consentedLeave=!0,B.Instance.moveToScene(I.HOME);case 22:case"end":return t.stop()}}),t,this,[[10,17]])})));return function(){return t.apply(this,arguments)}}(),l._updateStartGameLabel=function(){this.startGameLabel.string=D.t("start-in",{sec:this._timer.toString()})},l._updateTimerLabel=function(){this.timerLabel.string=Math.floor(this._outRoomTimer)+"s"},l._countDown=function(){this._outRoomTimer-=1,this._outRoomTimer<0?this.unschedule(this._countDown):this._updateTimerLabel()},l._setSkinSelectorToNodePosition=function(t,e){void 0===e&&(e=10);var n=this.skinSelector.node.parent.getComponent(v).convertToNodeSpaceAR(t.worldPosition);n.y+=e,this.skinSelector.node.setPosition(n)},l.onDestroy=function(){this._consentedLeave&&(this._room.leave(),E.gameRoom=null),k.removeAll(this),this._room.removeAllListeners(),this._disposer.forEach((function(t){t()})),O.hideInviteButton()},l._getAllOwnedCategoryItems=function(t){return C.userInfo.inventoryItems.filter((function(e){return e.sku.includes(t+".")&&(e.owned||e.isTrial)})).map((function(t){return t.sku})).sort((function(t,e){var n=Object.values(w);return n.indexOf(t)-n.indexOf(e)}))},l._changeColorCb=function(){var t=this,e=this.colorSelector.choosingColorIdx;this._room.send(L.CHANGE_COLOR,e),this._room.state.slots.forEach((function(n){var o=t._getPreparingPlayerOfSlot(n),i=t.preparingPlayers.indexOf(o);o.setColor((e+i)%4)}))},s(e,[{key:"mySlot",get:function(){return this._room.state.slots.find((function(t){var e;return(null==(e=t.player)?void 0:e.uid)===C.userInfo._id}))}},{key:"mode",get:function(){return"ClassicModeRoom"===this._room.name?"classic":"sweety"}}]),e}(y)).prototype,"backButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(Q.prototype,"settingsButton",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(Q.prototype,"modeLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(Q.prototype,"betLabel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(Q.prototype,"winLabel",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(Q.prototype,"preparingPlayers",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ot=e(Q.prototype,"startButton",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(Q.prototype,"startGameLabel",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(Q.prototype,"timerLabel",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(Q.prototype,"roomCodeLabel",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(Q.prototype,"skinSelector",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(Q.prototype,"vsNode",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=Q))||J));l._RF.pop()}}}));

System.register("chunks:///_virtual/ProfileUpdatePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Constant.ts","./Global.ts","./Networking.ts","./Popup.ts","./ToastUI.ts","./GameHelper.ts","./l10n-manager.ts"],(function(t){var e,a,n,o,r,i,u,s,c,l,p,v,d,m,f,h,b,B,g,A,N,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){u=t.cclegacy,s=t._decorator,c=t.Button,l=t.EditBox,p=t.Node,v=t.Sprite,d=t.instantiate,m=t.Label},null,function(t){f=t.EQUIPABLE_AVATARS,h=t.ErrorMessages},function(t){b=t.default},function(t){B=t.default},function(t){g=t.Popup},function(t){A=t.ToastUI},function(t){N=t.GameHelper},function(t){E=t.default}],execute:function(){var y,C,w,x,k,_,T,P,I,z,S,L,M,U,D,G,K,R,H;u._RF.push({},"7a43fzW5KNAiaYuhB8F3LzC","ProfileUpdatePopup",void 0);var F=s.ccclass,O=s.property;t("ProfileUpdatePopup",(y=F("ProfileUpdatePopup"),C=O(c),w=O(c),x=O(l),k=O(p),_=O(p),T=O(p),P=O(v),I=O(c),y((L=e((S=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r))||this,n(e,"submitNameButton",L,o(e)),n(e,"focusEditBoxButton",M,o(e)),n(e,"newNameEditBox",U,o(e)),n(e,"avatarsContainer",D,o(e)),n(e,"avatarTemplateNode",G,o(e)),n(e,"avatarCheckMark",K,o(e)),n(e,"choosingAvatarSprite",R,o(e)),n(e,"updateAvatarButton",H,o(e)),e._choosingAvatar=null,e}a(e,t);var u=e.prototype;return u.onLoad=function(){var e=this;t.prototype.onLoad.call(this),b.updateReddotTree("avatar",!1),this._choosingAvatar=b.myCurAvatar,f.forEach((function(t){var a=d(e.avatarTemplateNode);a.active=!0,N.loadAvatar(t.toString(),a.getComponent(v)),a.on(c.EventType.CLICK,(function(){e._choosingAvatar=t,e.avatarCheckMark.active=!0,e.avatarCheckMark.setParent(a),e._updateSubmitAvatarButton()})),a.setParent(e.avatarsContainer),t===e._choosingAvatar&&(e.avatarCheckMark.active=!0,e.avatarCheckMark.setParent(a),e._updateSubmitAvatarButton())})),this.updateAvatarButton.node.on(c.EventType.CLICK,r(i().mark((function t(){var a,n,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e._choosingAvatar!==b.myCurAvatar){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,B.changeAvatar(e._choosingAvatar);case 5:a=t.sent,n=a.customAvatar,b.setCustomeAvatar(n),e._updateSubmitAvatarButton(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),A.Instance.show(N.getErrorMessage((null==(o=t.t0.response)?void 0:o.data.code)||t.t0.code));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))),this.focusEditBoxButton.node.on(c.EventType.CLICK,(function(){e.newNameEditBox.focus()})),this.newNameEditBox.node.on(l.EventType.EDITING_DID_BEGAN,(function(){e.submitNameButton.node.active=!0,e.focusEditBoxButton.node.active=!e.submitNameButton.node.active})),this.node.on(p.EventType.TOUCH_END,(function(t){t.target.isChildOf(e.submitNameButton.node)||(e.submitNameButton.node.active=!1,e.focusEditBoxButton.node.active=!e.submitNameButton.node.active,e.newNameEditBox.string=b.myCurName)}),this,!0),this.newNameEditBox.string=b.myCurName,this.submitNameButton.node.on(c.EventType.CLICK,r(i().mark((function t(){var a,n,o,r,u;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,console.log("submit btn clic"),a=e.newNameEditBox.string,n=!1,0===a.length&&(A.Instance.show(E.t("empty-name")),n=!0),!n){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,B.changeName(e.newNameEditBox.string);case 9:o=t.sent,r=o.nickName,b.setNickName(r),e.newNameEditBox.blur(),e.submitNameButton.node.active=!1,e.focusEditBoxButton.node.active=!e.submitNameButton.node.active,t.next=22;break;case 17:t.prev=17,t.t0=t.catch(0),console.error(t.t0),e.newNameEditBox.focus(),4008===(null==(u=t.t0.response)?void 0:u.data.code)&&A.Instance.show(E.t(h[4008]));case 22:case"end":return t.stop()}}),t,null,[[0,17]])}))))},u._updateSubmitAvatarButton=function(){var t=this._choosingAvatar===b.myCurAvatar;this.updateAvatarButton.interactable=!t,this.updateAvatarButton.getComponent(v).grayscale=t,this.updateAvatarButton.getComponentInChildren(m).string=E.t(t?"used":"use"),N.loadAvatar(this._choosingAvatar.toString(),this.choosingAvatarSprite)},u.onEnable=function(){this._data},e}(g)).prototype,"submitNameButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(S.prototype,"focusEditBoxButton",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(S.prototype,"newNameEditBox",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(S.prototype,"avatarsContainer",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(S.prototype,"avatarTemplateNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(S.prototype,"avatarCheckMark",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(S.prototype,"choosingAvatarSprite",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(S.prototype,"updateAvatarButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=S))||z));u._RF.pop()}}}));

System.register("chunks:///_virtual/RadiusRectangleGraphics.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,i,n,o,a,u,l,c,s,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.extends},function(t){a=t.cclegacy,u=t._decorator,l=t.Graphics,c=t.CCFloat,s=t.CCBoolean,p=t.Component}],execute:function(){var b,h,d,f,g,y,m,v,w,z,R,C,T,G,x,_,q,B,L,D,F,P,k,E,I;a._RF.push({},"53b78YabzNPYLwbthuS8gpm","RadiusRectangleGraphics",void 0);var M=u.ccclass,S=u.property,Y=u.requireComponent,j=u.executeInEditMode;t("RadiusRectangleGraphics",(b=M("RadiusRectangleGraphics"),h=Y(l),d=j(!0),f=S(c),g=S(c),y=S(c),m=S(c),v=S(c),w=S(s),z=S(c),R=S(c),C=S(c),T=S(c),b(G=h(G=d((_=e((x=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"x",_,n(e)),i(e,"y",q,n(e)),i(e,"width",B,n(e)),i(e,"height",L,n(e)),i(e,"radius",D,n(e)),i(e,"seperateBorder",F,n(e)),i(e,"tl",P,n(e)),i(e,"tr",k,n(e)),i(e,"bl",E,n(e)),i(e,"br",I,n(e)),e}r(e,t);var a=e.prototype;return a.onLoad=function(){this._updateGrahpic()},a.onEnable=function(){this._updateGrahpic()},a._updateGrahpic=function(){var t=this.getComponent(l);t.clear(),this.seperateBorder?this.roundRect(t,this.x,this.y,this.width,this.height,{tl:this.bl,tr:this.br,bl:this.tl,br:this.tr},!0):this.roundRect(t,this.x,this.y,this.width,this.height,this.radius,!0)},a.roundRect=function(t,e,r,i,n,a,u,l){void 0===a&&(a=5),void 0===u&&(u=!1),void 0===l&&(l=!0),a="number"==typeof a?{tl:a,tr:a,br:a,bl:a}:o({},{tl:0,tr:0,br:0,bl:0},a),t.moveTo(e+a.tl,r),t.lineTo(e+i-a.tr,r),t.quadraticCurveTo(e+i,r,e+i,r+a.tr),t.lineTo(e+i,r+n-a.br),t.quadraticCurveTo(e+i,r+n,e+i-a.br,r+n),t.lineTo(e+a.bl,r+n),t.quadraticCurveTo(e,r+n,e,r+n-a.bl),t.lineTo(e,r+a.tl),t.quadraticCurveTo(e,r,e+a.tl,r),u&&t.fill(),l&&t.stroke()},a.start=function(){},a.update=function(t){},e}(p)).prototype,"x",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=e(x.prototype,"y",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=e(x.prototype,"width",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 250}}),L=e(x.prototype,"height",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 250}}),D=e(x.prototype,"radius",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 31}}),F=e(x.prototype,"seperateBorder",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=e(x.prototype,"tl",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=e(x.prototype,"tr",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=e(x.prototype,"bl",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=e(x.prototype,"br",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=x))||G)||G)||G));a._RF.pop()}}}));

System.register("chunks:///_virtual/RankingProfile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Constant.ts","./Global.ts","./SubLoading.ts","./Networking.ts","./SDK.ts","./GameHelper.ts","./l10n-manager.ts"],(function(e){var n,t,i,a,r,o,l,u,s,c,d,f,b,p,g,h,m,v,w,k;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){l=e.cclegacy,u=e._decorator,s=e.Sprite,c=e.Label,d=e.Node,f=e.Button,b=e.Component},null,function(e){p=e.SKU_ITEM},function(e){g=e.default},function(e){h=e.SubLoading},function(e){m=e.default},function(e){v=e.default},function(e){w=e.GameHelper},function(e){k=e.default}],execute:function(){var y,A,I,_,C,R,B,L,P,U,z,N,S,K,x,D,F,G,E,H,T,M,j;l._RF.push({},"6e51fnU4+1FBLEyXDbVDKMH","RankingProfile",void 0);var O=u.ccclass,V=u.property;e("RankingProfile",(y=O("RankingProfile"),A=V(s),I=V(c),_=V(c),C=V(c),R=V(d),B=V(d),L=V(d),P=V(d),U=V(d),z=V(f),y((K=n((S=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return n=e.call.apply(e,[this].concat(r))||this,i(n,"avatarSprite",K,a(n)),i(n,"kickedLabel",x,a(n)),i(n,"beingKickedLabel",D,a(n)),i(n,"userNameLabel",F,a(n)),i(n,"loseNode",G,a(n)),i(n,"winRankBadge",E,a(n)),i(n,"normalRankBadge",H,a(n)),i(n,"candiesAmountUI",T,a(n)),i(n,"arenaPointUI",M,a(n)),i(n,"adButton",j,a(n)),n._totalCoinReward=0,n._arenaPoint=0,n._isArena=!1,n}t(n,e);var l=n.prototype;return l.onLoad=function(){var e=this;this.adButton&&this.adButton.node.on(f.EventType.CLICK,r(o().mark((function n(){var t;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.showRewardedAd();case 3:return e.adButton.node.active=!1,h.Instance.show(),n.next=7,m.verifyEndGameRewardAd(e._isArena?"arena":p.COIN);case 7:t=n.sent,e._isArena?(e._arenaPoint+=t.reward,e.arenaPointUI.getComponentInChildren(c).string="+"+e._arenaPoint):(e._totalCoinReward+=t.reward,e._setCandiesAmountLabel(e._totalCoinReward)),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.error(n.t0),w.showAlert({message:k.t("no-ad")});case 15:return n.prev=15,h.Instance.hide(),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[0,11,15,18]])}))))},l.setData=function(e){if(this.node.active=!0,null!=e){var n=e.kickedAmount,t=void 0===n?0:n,i=e.beingKickedAmount,a=void 0===i?0:i,r=e.coins,o=void 0===r?0:r,l=e.slotIdx,u=void 0===l?0:l,d=e.adReward,f=void 0===d?0:d,b=e.arenaPoint,p=void 0===b?0:b;if(w.loadAvatar(w.getAvatarStrFromPlayer(e),this.avatarSprite),this.userNameLabel.string=w.getNameFromPlayer(e),this.kickedLabel.string=" "+t+" ",this.beingKickedLabel.string=" "+a+" ",this._totalCoinReward=o,this.candiesAmountUI&&(this.candiesAmountUI.active=o>0,this._setCandiesAmountLabel(o)),this._isArena=p>0,this._arenaPoint=p,this.arenaPointUI&&(this.arenaPointUI.active=p>0,this.arenaPointUI.getComponentInChildren(c).string="+"+p),this.adButton){var h=this._isArena?p>0:o>0;this.adButton.node.active=h&&u===g.myIdx&&f>0&&!g.hasAdBlock,this.adButton.getComponentInChildren(c).string="+"+w.formatNumber(f),this.adButton.getComponentInChildren(s).node.active=this._isArena}var m=e.isWin;this.winRankBadge&&(this.winRankBadge.active=m),this.loseNode.active=!(m||this._isArena),this.normalRankBadge.active=null==this.winRankBadge||!m}},l._setCandiesAmountLabel=function(e){this.candiesAmountUI.getComponentInChildren(c).string="+"+w.formatNumber(e,4)},n}(b)).prototype,"avatarSprite",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(S.prototype,"kickedLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(S.prototype,"beingKickedLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(S.prototype,"userNameLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(S.prototype,"loseNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(S.prototype,"winRankBadge",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(S.prototype,"normalRankBadge",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(S.prototype,"candiesAmountUI",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(S.prototype,"arenaPointUI",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(S.prototype,"adButton",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=S))||N));l._RF.pop()}}}));

System.register("chunks:///_virtual/ReceiveReward.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./Popup.ts","./AudioManager.ts","./ReceiveRewardItem.ts"],(function(e){var r,t,n,a,i,o,c,u,l,s,d,p,f;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,c=e.Node,u=e.Prefab,l=e.instantiate},function(e){s=e.SOUND},function(e){d=e.Popup},function(e){p=e.AudioManager},function(e){f=e.ReceiveRewardItem}],execute:function(){var R,w,v,b,h,y,g;i._RF.push({},"a158e7IzM5CjoZ9g94icRqZ","ReceiveReward",void 0);var m=o.ccclass,I=o.property;e("ReceiveReward",(R=m("ReceiveReward"),w=I(c),v=I(u),R((y=r((h=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i))||this,n(r,"rewardContainer",y,a(r)),n(r,"rewardItemPrefab",g,a(r)),r}return t(r,e),r.prototype.onEnable=function(){var e=l(this.rewardItemPrefab);e.getComponent(f).setData(this._data),this.rewardContainer.addChild(e),p.Instance.playSound(s.SHOW_REWARD)},r}(d)).prototype,"rewardContainer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=r(h.prototype,"rewardItemPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=h))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/ReceiveRewardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Constant.ts","./LoaderManager.ts","./GameHelper.ts","./l10n-manager.ts"],(function(e){var t,n,r,a,i,s,o,l,c,u,p,d,f,m,v,h,b,w,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){o=e.cclegacy,l=e._decorator,c=e.Label,u=e.Component,p=e.Node,d=e.Sprite,f=e.instantiate,m=e.Prefab},null,function(e){v=e.FULL_ITEM_NAME,h=e.SKU_ITEM},function(e){b=e.LoaderManager},function(e){w=e.GameHelper},function(e){g=e.default}],execute:function(){var I,L,y,S,R;o._RF.push({},"5ddc9BTkiJDlr47EV6+/jKo","ReceiveRewardItem",void 0);var k=l.ccclass,x=l.property;e("ReceiveRewardItem",(I=k("ReceiveRewardItem"),L=x(c),I((R=t((S=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,r(t,"valueLabel",R,a(t)),t}return n(t,e),t.prototype.setData=function(){var e=i(s().mark((function e(t){var n,r,a,i,o,l,c,u,I,L,y,S,R,k;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.amount,r=void 0===n?0:n,a=t.sku,i=void 0===a?h.COIN:a,o=null,![h.COIN,h.GEM].includes(i)){e.next=10;break}(o=new p).setScale(2,2),l=o.addComponent(d),b.Instance.loadSfToSprite("reward-icon/"+i+"/spriteFrame",l),this.valueLabel.string="x"+w.formatNumber(r),e.next=21;break;case 10:if(!i.includes("characters")){e.next=20;break}return this.valueLabel.string=g.t(v[i]||""),c=i.split(".")[1],e.next=15,b.Instance.loadAsset("characters/anim/"+c,m);case 15:u=e.sent,(o=f(u)).setScale(.75,.75),e.next=21;break;case 20:i.includes("throwables")?(this.valueLabel.string=g.t(v[i]||""),(o=new p).setScale(1.5,1.5),I=o.addComponent(d),L=i.split(".")[1],b.Instance.loadSfToSprite("inventory/throwables/"+L+"/spriteFrame",I)):(this.valueLabel.string=g.t(v[i]||""),o=new p,y=o.addComponent(d),S=i.split("."),R=S[0],k=S[1],b.Instance.loadSfToSprite(R+"/thumb/"+k+"/spriteFrame",y));case 21:null!=o&&this.node.insertChild(o,0);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(u)).prototype,"valueLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=S))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/ReddotController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mobx.cjs.development.mjs_cjs=&original=.js","./Global.ts","./mobx.cjs.development.js"],(function(e){var t,o,n,r,i,s,c,a,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,c=e.CCString,a=e.Component},null,function(e){l=e.default},function(e){u=e.default}],execute:function(){var d,p,f,v,y;i._RF.push({},"c5881CjXNxCaa16LpCc6lzd","ReddotController",void 0);var h=s.ccclass,b=s.property,C=(u.observable,u.makeObservable,u.autorun);u.reaction,e("ReddotController",(d=h("ReddotController"),p=b(c),d((y=t((v=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,n(t,"key",y,r(t)),t._disposers=[],t}o(t,e);var i=t.prototype;return i.onLoad=function(){var e=this,t=C((function(){e.node.active=l.isReddotActive(e.key)}));this._disposers.push(t)},i.onDestroy=function(){this._disposers.forEach((function(e){e()}))},i.setKey=function(e){this.key=e,this.node.active=l.isReddotActive(this.key)},t}(a)).prototype,"key",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=v))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/ResizeScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts"],(function(e){var t,i,n,o,s,r,c,a,l;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,o=e.director,s=e.view,r=e.screen,c=e.ResolutionPolicy,a=e.Component},function(e){l=e.MAX_DESIGN_RES_SIZE}],execute:function(){var u;i._RF.push({},"18fd5GHCc9FKaVUIkbnQR85","ResizeScreen",void 0);var h=n.ccclass;n.property,e("ResizeScreen",h("ResizeScreen")(u=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this)._curRatio="normal",t}t(i,e);var n=i.prototype;return n.onLoad=function(){o.addPersistRootNode(this.node),this.screenResizeCallback(),s.setResizeCallback(this.screenResizeCallback.bind(this))},n.screenResizeCallback=function(){var e=l.width/l.height,t=r.windowSize.width/r.windowSize.height,i=this._curRatio;this._curRatio=t<16/9?"small":t>e?"large":"normal",i!==this._curRatio&&("small"===this._curRatio?s.setDesignResolutionSize(1280,720,c.SHOW_ALL):"large"===this._curRatio?s.setDesignResolutionSize(l.width,l.height,c.SHOW_ALL):s.setDesignResolutionSize(1280,720,c.FIXED_HEIGHT))},n.start=function(){},n.update=function(e){},i}(a))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/resource-data-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./localization-global.ts"],(function(r){var e,n,t,u,a,s,c,o,i,p,f;return{setters:[function(r){e=r.asyncToGenerator,n=r.regeneratorRuntime},function(r){t=r.cclegacy,u=r.settings,a=r.Settings,s=r.assetManager},function(r){c=r.resourceListPath,o=r.pluginName,i=r.resourceBundlePath,p=r.mainName,f=r.runtimeBundleName}],execute:function(){t._RF.push({},"0a95a0kirtJnJnMnZWSRaFn","resource-data-manager",void 0);r("default",function(){function r(){}var t=r.prototype;return t.readResourceList=function(){var r=e(n().mark((function r(){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=4;break;case 4:return console.log("["+o+"] this is build env"),r.abrupt("return",this.runtimeLoad(c));case 9:return r.abrupt("return",this.previewLoad(c));case 10:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),t.readResourceBundle=function(){var r=e(n().mark((function r(e){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=4;break;case 4:return r.abrupt("return",this.runtimeLoad(i));case 8:return r.abrupt("return",this.previewLoad(i));case 9:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}(),t.editorLoad=function(){var r=e(n().mark((function r(e){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Editor.Message.request(p,"get-resource-bundle",e));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),t.runtimeLoad=function(){var r=e(n().mark((function r(e){var t,u;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getBundle(f);case 2:if(t=r.sent){r.next=5;break}return r.abrupt("return",void 0);case 5:return r.next=7,this.getResource(t,e);case 7:if((u=r.sent)&&u.json){r.next=10;break}return r.abrupt("return",void 0);case 10:return r.abrupt("return",u.json);case 11:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}(),t.previewLoad=function(){var r=e(n().mark((function r(e){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch(p+"/"+e);case 3:return r.next=5,r.sent.json();case 5:return r.abrupt("return",r.sent);case 8:return r.prev=8,r.t0=r.catch(0),r.abrupt("return",void 0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}(),t.checkBundle=function(){var r=e(n().mark((function r(e){var t,s;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=u.querySettings(a.Category.ASSETS,"preloadBundles"),s=null==t?void 0:t.find((function(r){return r.bundle===e})),r.abrupt("return",!!s);case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),t.getBundle=function(){var r=e(n().mark((function r(e){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r){s.loadBundle(e,(function(e,n){r(e?void 0:n)}))})));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),t.getResource=function(){var r=e(n().mark((function r(e,t){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r){e.load(t,(function(e,n){r(e?void 0:n)}))})));case 1:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}(),r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/RewardAdMilestone.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./GameHelper.ts"],(function(e){var t,i,r,n,a,o,l,u,s,c,p,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Label,u=e.Node,s=e.Sprite,c=e.SpriteFrame,p=e.Component},function(e){f=e.SKU_ITEM},function(e){h=e.GameHelper}],execute:function(){var g,b,m,d,v,y,w,C,z,S,x,L,_,F,M,A,I,R,D,k,B;a._RF.push({},"dfac0/KzVJEDbf2AUVWZYNu","RewardAdMilestone",void 0);var H=o.ccclass,N=o.property;e("RewardAdMilestone",(g=H("RewardAdMilestone"),b=N(l),m=N(l),d=N(u),v=N([u]),y=N(u),w=N(u),C=N(u),z=N(s),S=N([c]),g((_=t((L=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"amountLabel",_,n(t)),r(t,"milestoneIdxLabel",F,n(t)),r(t,"greenCircle",M,n(t)),r(t,"progContainers",A,n(t)),r(t,"highlightFrame",I,n(t)),r(t,"darkBg",R,n(t)),r(t,"effect",D,n(t)),r(t,"itemSprite",k,n(t)),r(t,"itemSfs",B,n(t)),t._idx=0,t}i(t,e);var a=t.prototype;return a.setData=function(e){var t=e.idx,i=e.type,r=e.amount;this._idx=t,this.milestoneIdxLabel.string=""+(t+1),this.amountLabel.string="x"+h.formatNumber(r),0===t&&(this.progContainers[0].active=!1);var n=0;i===f.COIN?r>=3e3?n=2:r>=1e3&&(n=1):i===f.GEM&&(n=3,r>=30?n=5:r>=15&&(n=4)),this.itemSprite.spriteFrame=this.itemSfs[n]},a.setHighlightState=function(e){this.highlightFrame.active=e},a.updateProgress=function(e){var t=this._idx<e,i=this._idx===e;this.darkBg.active=t,this.highlightFrame.active=i,this.greenCircle.active=t||i,this.progContainers[0]&&(this.progContainers[0].children[0].active=t||i),this.progContainers[1]&&(this.progContainers[1].children[0].active=t),this.effect&&(this.effect.active=!(t||i))},t}(p)).prototype,"amountLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(L.prototype,"milestoneIdxLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(L.prototype,"greenCircle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(L.prototype,"progContainers",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=t(L.prototype,"highlightFrame",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(L.prototype,"darkBg",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(L.prototype,"effect",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(L.prototype,"itemSprite",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(L.prototype,"itemSfs",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=L))||x));a._RF.pop()}}}));

System.register("chunks:///_virtual/RewardAdPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mobx.cjs.development.mjs_cjs=&original=.js","./l10n.ts","./Global.ts","./Popup.ts","./PopupManager.ts","./SDK.ts","./AdStore.ts","./SubLoading.ts","./GameHelper.ts","./StringUtils.ts","./RewardAdMilestone.ts","./mobx.cjs.development.js","./l10n-manager.ts"],(function(e){var t,n,r,o,i,a,s,l,u,c,d,p,f,m,h,b,w,g,v,_,y,L,A,R,P,x,D,T,M,E;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime,s=e.extends},function(e){l=e.cclegacy,u=e._decorator,c=e.Button,d=e.Label,p=e.ScrollView,f=e.Prefab,m=e.instantiate,h=e.misc,b=e.v2,w=e.macro,g=e.Layout,v=e.UITransform},null,null,function(e){_=e.default},function(e){y=e.Popup},function(e){L=e.default},function(e){A=e.default},function(e){R=e.AdStore},function(e){P=e.SubLoading},function(e){x=e.GameHelper},function(e){D=e.StringUtils},function(e){T=e.RewardAdMilestone},function(e){M=e.default},function(e){E=e.default}],execute:function(){var S,V,j,z,C,I,k,B,G,F,H,O,U;l._RF.push({},"cc86bEV51RPoJolEnWxRnAa","RewardAdPopup",void 0);M.observable,M.makeObservable;var X=M.autorun,K=(M.reaction,M.action,u.ccclass),J=u.property;e("RewardAdPopup",(S=K("RewardAdPopup"),V=J(c),j=J(d),z=J(p),C=J(f),I=J(T),S((G=t((B=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"watchAdButton",G,o(t)),r(t,"timerLabel",F,o(t)),r(t,"scrollView",H,o(t)),r(t,"rewardAdMilestonePrefab",O,o(t)),r(t,"lastMilestone",U,o(t)),t._timeLeft=0,t._rewards=[],t._mobXDisosers=[],t}n(t,e);var l=t.prototype;return l.onLoad=function(){var t=this;e.prototype.onLoad.call(this),R.fetchData(),this.watchAdButton.node.on(c.EventType.CLICK,i(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==R.adRemaining){e.next=3;break}return x.showAlert({message:E.t("ad-limit-reached")}),e.abrupt("return");case 3:return e.prev=3,e.next=6,A.showRewardedAd();case 6:return P.Instance.show(),e.next=9,R.watchAd();case 9:t=e.sent,_.setCoins(t.coins),_.setGems(t.gems),n=t.reward,L.Instance.open("ReceiveReward",{amount:n.amount,sku:n.type}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),x.showAlert({message:E.t("no-ad")});case 19:return e.prev=19,P.Instance.hide(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[3,16,19,22]])}))));var n=X((function(){var e=R.resetTime,n=R.nextRewardIdx,r=R.rewards;0===t._rewards.length&&(t._rewards=r,r.forEach((function(e,n){if(n===r.length-1)t.lastMilestone.setData(s({idx:n},e));else{var o=m(t.rewardAdMilestonePrefab);o.setParent(t.scrollView.content),o.getComponent(T).setData(s({idx:n},e))}})));var o=t.scrollView.content.children.map((function(e){return e.getComponent(T)}));o.push(t.lastMilestone),o.forEach((function(e){e.updateProgress(n)}));var i=o[h.clampf(n,0,t._rewards.length-2)],a=b(i.node.position.x-530,0);t.scrollView.scrollToOffset(a,.5),t._timeLeft=Math.ceil(e/1e3),t._updateTimer(),t._updateTimerTextLayout(),t.schedule(t._countDown,1,w.REPEAT_FOREVER)}));this._mobXDisosers.push(n)},l._countDown=function(){this._timeLeft-=1,this._updateTimer(),this._timeLeft<0&&this.unschedule(this._countDown)},l._updateTimer=function(){var e=this._timeLeft>0;this.timerLabel.node.parent.active=e,e&&(this.timerLabel.string=D.formatTime(this._timeLeft))},l._updateTimerTextLayout=function(){this.timerLabel.updateRenderData(!0),this.timerLabel.node.parent.getComponent(g).updateLayout();var e=this.timerLabel.node.parent.getComponent(v);e.setAnchorPoint(0,.5),e.node.setPosition(-e.width/2,e.node.position.y)},l.onDestroy=function(){e.prototype.onDestroy.call(this),this._mobXDisosers.forEach((function(e){e()}))},t}(y)).prototype,"watchAdButton",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(B.prototype,"timerLabel",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(B.prototype,"scrollView",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(B.prototype,"rewardAdMilestonePrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(B.prototype,"lastMilestone",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=B))||k));l._RF.pop()}}}));

System.register("chunks:///_virtual/RewardedAd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Base.ts"],(function(r){var e,n,t,d;return{setters:[function(r){e=r.inheritsLoose},function(r){n=r.cclegacy,t=r._decorator},function(r){d=r.Base}],execute:function(){var a,o,c,i,u,l,s;n._RF.push({},"a19d623UwdAurbcHSnuSt4c","RewardedAd",void 0);var h=t.ccclass;t.property,r("LoadRewardedAdREQ",h("LoadRewardedAdREQ")(a=function(r){function n(){return r.apply(this,arguments)||this}return e(n,r),n}(d))||a),r("LoadRewardedAdACK",h("LoadRewardedAdACK")(o=function(r){function n(){for(var e,n=arguments.length,t=new Array(n),d=0;d<n;d++)t[d]=arguments[d];return(e=r.call.apply(r,[this].concat(t))||this).method=void 0,e.loadAdError=void 0,e}return e(n,r),n}(d))||o),r("ShowRewardedAdREQ",h("ShowRewardedAdREQ")(c=function(r){function n(){return r.apply(this,arguments)||this}return e(n,r),n}(d))||c),r("ShowRewardedAdACK",h("ShowRewardedAdACK")(i=function(r){function n(){return r.apply(this,arguments)||this}return e(n,r),n}(d))||i),r("OnUserEarnedRewardListenerNTF",h("OnUserEarnedRewardListenerNTF")(u=function(r){function n(){for(var e,n=arguments.length,t=new Array(n),d=0;d<n;d++)t[d]=arguments[d];return(e=r.call.apply(r,[this].concat(t))||this).rewardType=void 0,e.rewardAmount=void 0,e}return e(n,r),n}(d))||u),r("RewardedAdLoadCallbackNTF",h("RewardedAdLoadCallbackNTF")(l=function(r){function n(){for(var e,n=arguments.length,t=new Array(n),d=0;d<n;d++)t[d]=arguments[d];return(e=r.call.apply(r,[this].concat(t))||this).method=void 0,e.loadAdError=void 0,e}return e(n,r),n}(d))||l),r("RewardedFullScreenContentCallbackNTF",h("RewardedFullScreenContentCallbackNTF")(s=function(r){function n(){for(var e,n=arguments.length,t=new Array(n),d=0;d<n;d++)t[d]=arguments[d];return(e=r.call.apply(r,[this].concat(t))||this).method=void 0,e.adError=void 0,e}return e(n,r),n}(d))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/RewardedAdClient.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Bridge.ts","./RewardedAd.ts","./AdClient.ts","./Route.ts","./PaidEventNTF.ts"],(function(e){var t,n,d,r,a,i,s,o,l,c,h,u,w,C,f,L;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){d=e.cclegacy,r=e.log,a=e.js},function(e){i=e.bridge},function(e){s=e.LoadRewardedAdREQ,o=e.LoadRewardedAdACK,l=e.ShowRewardedAdREQ,c=e.ShowRewardedAdACK,h=e.RewardedAdLoadCallbackNTF,u=e.RewardedFullScreenContentCallbackNTF,w=e.OnUserEarnedRewardListenerNTF},function(e){C=e.AdClient},function(e){f=e.route},function(e){L=e.RewardedPaidEventNTF}],execute:function(){d._RF.push({},"9c823kMEqhG354V3pAi+6bv","RewardedAdClient",void 0);var R="[RewardedAdClient]";e("RewardedAdClient",function(e){function d(){for(var t,n=arguments.length,d=new Array(n),r=0;r<n;r++)d[r]=arguments[r];return(t=e.call.apply(e,[this].concat(d))||this)._rewardedListener=void 0,t}t(d,e);var C=d.prototype;return C.load=function(e,t){r(R,"load, unitId = "+e),this.unitId=e,this.rewardedListener=t,i.sendToNative(a.getClassName(s),{unitId:e},a.getClassName(o),(function(e){r(R,"LoadRewardedAdACK, "+e)}),this)},C.destroy=function(){r(R,"destroy"),this.rewardedListener=null},C.show=function(){r(R,"show"),i.sendToNative(a.getClassName(l),{unitId:this.unitId},a.getClassName(c),(function(e){r(R,"ShowRewardedAdREQ, "+e)}),this)},C.onRewardedAdLoadCallbackNTF=function(e){if(r(R,"onRewardedAdLoadCallbackNTF"),this.rewardedListener){var t=this.rewardedListener[e.method];t&&t()}},C.onFullScreenContentCallback=function(e){if(r(R,"onFullScreenContentCallback"),this.rewardedListener){var t=this.rewardedListener[e.method];t&&t(e.adError)}},C.onOnUserEarnedRewardListenerNTF=function(e){if(r(R,"onOnUserEarnedRewardListenerNTF"),this.rewardedListener){var t=this.rewardedListener;t&&t.onEarn&&t.onEarn(e.rewardType,e.rewardAmount)}},C.onPaidEvent=function(e){var t=this.rewardedListener;t&&t.onPaidEvent&&t.onPaidEvent(e)},n(d,[{key:"rewardedListener",get:function(){return this._rewardedListener},set:function(e){this._rewardedListener&&(f.off(a.getClassName(h),this.onRewardedAdLoadCallbackNTF,this),f.off(a.getClassName(u),this.onFullScreenContentCallback,this),f.off(a.getClassName(w),this.onOnUserEarnedRewardListenerNTF,this),f.off(a.getClassName(L),this.onPaidEvent,this)),this._rewardedListener=e,this._rewardedListener&&(f.on(a.getClassName(h),this.onRewardedAdLoadCallbackNTF,this),f.on(a.getClassName(u),this.onFullScreenContentCallback,this),f.on(a.getClassName(w),this.onOnUserEarnedRewardListenerNTF,this),f.on(a.getClassName(L),this.onPaidEvent,this))}}]),d}(C));d._RF.pop()}}}));

System.register("chunks:///_virtual/RewardedAdFullScreenContentCallback.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"ccbcclTM5BLeaQxYmDylXnq","RewardedAdFullScreenContentCallback",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/RewardedAdListener.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"b10b1DUlehJBrliYcPlp/9I","RewardedAdListener",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/RewardedAdLoadCallback.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"59c6ayhqOxKuIKCFYiHSxfo","RewardedAdLoadCallback",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/RewardedInterstitialAd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Base.ts"],(function(t){var e,r,n,i;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator},function(t){i=t.Base}],execute:function(){var a,d,o,s,l,u;r._RF.push({},"f35b0ZWnitHd4mL4VnNo7Th","RewardedInterstitialAd",void 0);var c=n.ccclass;n.property,t("LoadRewardedInterstitialAdREQ",c("LoadRewardedInterstitialAdREQ")(a=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r}(i))||a),t("LoadRewardedInterstitialAdACK",c("LoadRewardedInterstitialAdACK")(d=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r}(i))||d),t("ShowRewardedInterstitialAdREQ",c("ShowRewardedInterstitialAdREQ")(o=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r}(i))||o),t("ShowRewardedInterstitialAdACK",c("ShowRewardedInterstitialAdACK")(s=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r}(i))||s),t("RewardedInterstitialAdLoadCallbackNTF",c("RewardedInterstitialAdLoadCallbackNTF")(l=function(t){function r(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).method=void 0,e.loadAdError=void 0,e}return e(r,t),r}(i))||l),t("OnUserEarnedRewardedInterstitialListenerNTF",c("OnUserEarnedRewardedInterstitialListenerNTF")(u=function(t){function r(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).rewardType=void 0,e.rewardAmount=void 0,e}return e(r,t),r}(i))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/RewardedInterstitialAdClient.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdClient.ts","./RewardedInterstitialAd.ts","./Bridge.ts","./Route.ts","./PaidEventNTF.ts"],(function(t){var e,i,n,r,a,s,d,o,l,u,c,h,w,I,f;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){n=t.cclegacy,r=t.js,a=t.log},function(t){s=t.AdClient},function(t){d=t.LoadRewardedInterstitialAdREQ,o=t.LoadRewardedInterstitialAdACK,l=t.ShowRewardedInterstitialAdREQ,u=t.ShowRewardedInterstitialAdACK,c=t.RewardedInterstitialAdLoadCallbackNTF,h=t.OnUserEarnedRewardedInterstitialListenerNTF},function(t){w=t.bridge},function(t){I=t.route},function(t){f=t.RewardedInterstitialPaidEventNTF}],execute:function(){n._RF.push({},"bcd464DuS9EHZFqL+Wv7Zc9","RewardedInterstitialAdClient",void 0);var L="[RewardedInterstitialAdClient]";t("RewardedInterstitialAdClient",function(t){function n(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this)._rewardedInterstitialListener=void 0,e}e(n,t);var s=n.prototype;return s.load=function(t,e){this.destroy(),this.unitId=t,this.rewardedInterstitialListener=e,w.sendToNative(r.getClassName(d),{unitId:t},r.getClassName(o),(function(t){}),this)},s.destroy=function(){this.rewardedInterstitialListener=null},s.show=function(){w.sendToNative(r.getClassName(l),{unitId:this.unitId},r.getClassName(u),(function(t){}),this)},s.onRewardedInterstitialAdLoadCallbackNTF=function(t){a(L,"onRewardedInterstitialAdLoadCallbackNTF",t.method);var e=this.rewardedInterstitialListener[t.method];e&&e(t.loadAdError)},s.onOnUserEarnedRewardListenerNTF=function(t){if(a(L,"onOnUserEarnedRewardListenerNTF"),this.rewardedInterstitialListener){var e=this.rewardedInterstitialListener;e&&e.onEarn&&e.onEarn(t.rewardType,t.rewardAmount)}},s.onPaidEvent=function(t){var e=this.rewardedInterstitialListener;e&&e.onPaidEvent&&e.onPaidEvent(t)},i(n,[{key:"rewardedInterstitialListener",get:function(){return this._rewardedInterstitialListener},set:function(t){this._rewardedInterstitialListener&&(I.off(r.getClassName(c),this.onRewardedInterstitialAdLoadCallbackNTF,this),I.off(r.getClassName(h),this.onOnUserEarnedRewardListenerNTF,this),I.off(r.getClassName(f),this.onPaidEvent,this)),this._rewardedInterstitialListener=t,this._rewardedInterstitialListener&&(I.on(r.getClassName(c),this.onRewardedInterstitialAdLoadCallbackNTF,this),I.on(r.getClassName(h),this.onOnUserEarnedRewardListenerNTF,this),I.on(r.getClassName(f),this.onPaidEvent,this))}}]),n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/RewardedInterstitialAdLoadCallback.ts",["cc"],(function(t){var a;return{setters:[function(t){a=t.cclegacy}],execute:function(){a._RF.push({},"31b4agsy/RARJF/0v6HTKzC","RewardedInterstitialAdLoadCallback",void 0);t("RewardedInterstitialAdLoadCallback",(function(){this.onAdLoaded=void 0,this.onAdFailedToLoad=void 0}));a._RF.pop()}}}));

System.register("chunks:///_virtual/RewardedInterstitialFullScreenContentCallback.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"684a9OsAopPXKs/PNqQRKhv","RewardedInterstitialFullScreenContentCallback",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/RewardedInterstitialListener.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"2ce66tAXYJKTYcwXNbPTkD2","RewardedInterstitialListener",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/RewardInfoItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Constant.ts","./LoaderManager.ts","./GameHelper.ts","./l10n-manager.ts"],(function(e){var t,n,r,a,i,o,s,c,u,l,p,d,f,m,h,b,I,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.Label,l=e.Component,p=e.instantiate,d=e.Sprite,f=e.Prefab,m=e.Node},null,function(e){h=e.SKU_ITEM},function(e){b=e.LoaderManager},function(e){I=e.GameHelper},function(e){v=e.default}],execute:function(){var y,g,w,L,x;s._RF.push({},"3b0b4bVW09M1oQZqXR+RLiV","RewardInfoItem",void 0);var R=c.ccclass,C=c.property;e("RewardInfoItem",(y=R("RewardInfoItem"),g=C(u),y((x=t((L=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"valueLabel",x,a(t)),t}return n(t,e),t.prototype.setData=function(){var e=i(o().mark((function e(t){var n,r,a,i,s,c,u,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.sku,r=t.amount,a=void 0===r?0:r,i=t.expireTime,s=null,![h.COIN,h.GEM].includes(n)){e.next=9;break}s=new m,c=s.addComponent(d),b.Instance.loadSfToSprite("reward-icon/"+n+"/spriteFrame",c),this.valueLabel.string=I.formatNumber(a),e.next=19;break;case 9:if(!n.includes("characters")){e.next=19;break}return e.next=12,b.Instance.loadAsset("reward-icon/CharItem",f);case 12:if(u=e.sent,this.isValid){e.next=15;break}return e.abrupt("return");case 15:s=p(u),l=s.getComponentInChildren(d),b.Instance.loadSfToSprite("inventory/characters/"+n.split(".")[1]+"/spriteFrame",l),this.valueLabel.string=v.t("xday",{count:Math.round(i/864e5)});case 19:null!=s&&this.node.addChild(s);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(l)).prototype,"valueLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=L))||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/RewardInfoListItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RewardInfoItem.ts"],(function(e){var t,r,n,a,i,o,l,c,u,s,f,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,l=e.Label,c=e.Prefab,u=e.Node,s=e.instantiate,f=e.Component},function(e){p=e.RewardInfoItem}],execute:function(){var d,b,m,I,w,h,y,L,g;i._RF.push({},"cb227iPmKhPM4cMzbdZpM15","RewardInfoListItem",void 0);var v=o.ccclass,P=o.property;e("RewardInfoListItem",(d=v("RewardInfoListItem"),b=P(l),m=P(c),I=P(u),d((y=t((h=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"rankLabel",y,a(t)),n(t,"rewardItemPrefab",L,a(t)),n(t,"container",g,a(t)),t}return r(t,e),t.prototype.setData=function(e){var t=this,r=e.from,n=e.to,a=e.rewards,i=void 0===a?[]:a,o=""+r;null!=n&&n!==r&&(o+="-"+n),null==n&&(o+="+"),this.rankLabel.string=o,i.forEach((function(e){var r=s(t.rewardItemPrefab);r.getComponent(p).setData(e),t.container.addChild(r)}))},t}(f)).prototype,"rankLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(h.prototype,"rewardItemPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(h.prototype,"container",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=h))||w));i._RF.pop()}}}));

System.register("chunks:///_virtual/RewardInfoPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RewardInfoTable.ts","./Global.ts","./Networking.ts","./Popup.ts"],(function(e){var t,r,n,a,o,i,u,c,s,l,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){u=e.cclegacy,c=e._decorator},function(e){s=e.RewardInfoTable},function(e){l=e.default},function(e){p=e.default},function(e){f=e.Popup}],execute:function(){var d,w,y,h,R;u._RF.push({},"a846bV5kU9KNY2wyyJ96lJ0","RewardInfoPopup",void 0);var b=c.ccclass,g=c.property;e("RewardInfoPopup",(d=b("RewardInfoPopup"),w=g(s),d((R=t((h=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,n(t,"rewardTable",R,a(t)),t}r(t,e);var u=t.prototype;return u.onLoad=function(){e.prototype.onLoad.call(this),this.fetctData()},u.fetctData=function(){var e=o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=l.weeklyRewardsConfig){e.next=4;break}return e.next=3,p.getWeeklyRewardConfig();case 3:l.weeklyRewardsConfig=e.sent;case 4:this.rewardTable.setData(l.weeklyRewardsConfig);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(f)).prototype,"rewardTable",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=h))||y));u._RF.pop()}}}));

System.register("chunks:///_virtual/RewardInfoTable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RewardInfoListItem.ts"],(function(e){var t,n,r,a,i,o,c,l,s,u,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,c=e.Prefab,l=e.Node,s=e.instantiate,u=e.Component},function(e){f=e.RewardInfoListItem}],execute:function(){var p,b,d,h,I,y,m;i._RF.push({},"a2971WkNp9H8LA9t4QSlnAp","RewardInfoTable",void 0);var w=o.ccclass,v=o.property;e("RewardInfoTable",(p=w("RewardInfoTable"),b=v(c),d=v(l),p((y=t((I=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"listItemPrefab",y,a(t)),r(t,"container",m,a(t)),t}return n(t,e),t.prototype.setData=function(e){var t=this;this.container.children.forEach((function(e){e.destroy()})),e.forEach((function(e){var n=s(t.listItemPrefab).getComponent(f);n.node.setParent(t.container),n.setData(e)}))},t}(u)).prototype,"listItemPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(I.prototype,"container",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=I))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/RoomCodePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Popup.ts"],(function(o){var e,t,r,n,i,a,c,p;return{setters:[function(o){e=o.applyDecoratedDescriptor,t=o.inheritsLoose,r=o.initializerDefineProperty,n=o.assertThisInitialized},function(o){i=o.cclegacy,a=o._decorator,c=o.Label},function(o){p=o.Popup}],execute:function(){var l,u,s,d,f;i._RF.push({},"6b284oTfMVKkrJOoKWYgBNi","RoomCodePopup",void 0);var h=a.ccclass,b=a.property;o("RoomCodePopup",(l=h("RoomCodePopup"),u=b(c),l((f=e((d=function(o){function e(){for(var e,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return e=o.call.apply(o,[this].concat(i))||this,r(e,"codeLabel",f,n(e)),e}t(e,o);var i=e.prototype;return i.onLoad=function(){o.prototype.onLoad.call(this)},i.onEnable=function(){if(null!=this._data){var o=this._data.code,e=void 0===o?"":o;this.codeLabel.string=e}},e}(p)).prototype,"codeLabel",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=d))||s));i._RF.pop()}}}));

System.register("chunks:///_virtual/RoomItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./SimpleEventTarget.ts","./ToastUI.ts","./GameHelper.ts","./l10n-manager.ts"],(function(e){var t,r,o,n,i,a,l,u,s,c,p,m,d,f,b,g,v,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){l=e.cclegacy,u=e._decorator,s=e.Label,c=e.Sprite,p=e.SpriteFrame,m=e.Node,d=e.Button,f=e.Component},null,function(e){b=e.SimpleEventTarget},function(e){g=e.ToastUI},function(e){v=e.GameHelper},function(e){h=e.default}],execute:function(){var y,I,S,L,w,z,T,R,k,A,_,B,C,D,E;l._RF.push({},"69c126evShD1qSvtsYygToZ","RoomItem",void 0);var F=u.ccclass,G=u.property;e("RoomItem",(y=F("RoomItem"),I=G(s),S=G(s),L=G([c]),w=G([p]),z=G(m),T=G(m),y((A=t((k=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"modeLabel",A,n(t)),o(t,"goldAmountLabel",_,n(t)),o(t,"playerAmountSprites",B,n(t)),o(t,"dotSfs",C,n(t)),o(t,"darkBg",D,n(t)),o(t,"seperator",E,n(t)),t.roomId="",t}r(t,e);var l=t.prototype;return l.onLoad=function(){var e=this;this.getComponent(d).node.on(d.EventType.CLICK,i(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.darkBg.active?g.Instance.show(h.t("noti-room-started")):b.emit("ON_ROOM_ITEM_CLICK",e.roomId);case 1:case"end":return t.stop()}}),t)}))))},l.setData=function(e){var t=this,r=e.clients,o=e.roomId,n=e.metadata,i=e.locked,a=void 0!==i&&i,l=n.bet,u=n.roomSize,s=n.mode,c=void 0===s?"classic":s,p=n.is2V2,m=void 0!==p&&p;this.roomId=o,this.modeLabel.string=h.t(c),this.goldAmountLabel.string=v.formatNumber(l,6),this.seperator.active=m,this.darkBg.active=a,this.playerAmountSprites.forEach((function(e,o){e.node.active=o<u,e.node.active&&(e.spriteFrame=t.dotSfs[a||o<r?1:0])}))},t}(f)).prototype,"modeLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(k.prototype,"goldAmountLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(k.prototype,"playerAmountSprites",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(k.prototype,"dotSfs",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(k.prototype,"darkBg",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(k.prototype,"seperator",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=k))||R));l._RF.pop()}}}));

System.register("chunks:///_virtual/RoomLocalController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./SimpleEventTarget.ts","./Global.ts"],(function(t){var e,n,s,o,r,i,l,a,u,c;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass,s=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){r=t.cclegacy,i=t._decorator,l=t.Component},function(t){a=t.LAST_INDEX},function(t){u=t.SimpleEventTarget},function(t){c=t.default}],execute:function(){var h;r._RF.push({},"4d485acUMBDi43VdJqZT2g9","RoomLocalController",void 0);var d=i.ccclass,f=(i.property,[1,14,27,40]),p=[1,9,14,22,27,35,40,48],k=[],_=[[],[],[],[]];t("RoomLocalController",d("RoomLocalController")(h=function(t){function r(){for(var e,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))||this)._boardState=void 0,e._roll6Streak=0,e.firstRank=0,e.lastRank=3,e.maxClients=4,e._count=0,e}e(r,t);var i=r.prototype;return i.onLoad=function(){var t=s(o().mark((function t(){var e,n,s,r,i,l,a,h,d,f,p=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=[],n=0;n<4;n++){for(i=[],l=0;l<4;l++)a=_[n][l]||-1,h={posIdx:a,playerIdx:n,id:l},i.push(h);d={idx:n,rank:-1,finished:!1,player:c.localPlayers[n],tokens:i,locked:!1,disconnected:!1,isReady:!1,kickedAmount:0,beingKickedAmount:0,rolled6:!1,equippingBase:"bases.default",equippingChar:"characters.chicken",equippingDice:"dice.default",colorIdx:(null==(s=c.localPlayers[n])?void 0:s.colorIdx)||0,isBot:(null==(r=c.localPlayers[n])?void 0:r.isBot)||!1},e.push(d)}f={slots:e,curTurn:0,phase:1,rollResult:0,action:0,bet:0,mode:2,stepAmount:0,turnDuration:3},this._boardState=f,u.on("LEAVE",(function(){u.emit("ON_LEAVE")}),this),u.on("CHOOSING_TOKEN",(function(t){var e=p._curSlot.tokens[t];(e.posIdx<0&&p.state.rollResult>=6||e.posIdx>=0&&e.posIdx+p.state.rollResult<=57+6*e.playerIdx)&&p.moveToken(e)}),this),u.on("REQUEST_ROLL_DICE",(function(){p._rollDice()}),this);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){u.emit("ON_GET_ROOM_STATE"),u.emit("slots",this.state.slots),this._boardState.slots.forEach((function(t,e){t.tokens.forEach((function(t){u.emit("slot."+t.playerIdx+".token."+t.id+".posIdx",{curPos:t.posIdx,prePos:null})})),u.emit("slot."+e+".player",t.player),u.emit("slot."+e+".rank",t.rank)})),u.emit("action",0),u.emit("phase",{curPhase:1,prePhase:null}),this.maxClients=this.state.slots.filter((function(t){return null!=t.player})).length;var t=this.state.slots.findIndex((function(t){return null!=t.player}));this.state.curTurn=t,u.emit("curTurn",{curTurn:this.state.curTurn,preTurn:null}),this._toRollDiceState()},i.onDestroy=function(){u.removeAll(this)},i.getPlayableTokens=function(){var t=this,e=this._curSlot.tokens,n=[];return e.filter((function(t,e,n){return n.findIndex((function(e){return e.posIdx===t.posIdx}))===e})).forEach((function(e){(e.posIdx<0&&t.state.rollResult>=6||e.posIdx>=0&&e.posIdx+t.state.stepAmount<=57+6*e.playerIdx)&&n.push(e)})),n},i._nextPlayer=function(){this._roll6Streak=0;for(var t=1;t<=4;t++){var e=(this.state.curTurn+t)%4,n=this.state.slots[e];if(null!=n.player&&n.rank<0){this.setCurTurn(e);break}}},i._toRollDiceState=function(){var t=this;if(2!==this.state.phase){this.unscheduleAllCallbacks(),this.state.turnDuration=3,this.setAction(0);var e=this._curSlot.isBot?.5*Math.random()+.5:3;this.scheduleOnce((function(){t._rollDice()}),e)}},i._rollDice=function(){var t,e=this;this.setAction(2),this.unscheduleAllCallbacks(),null!=k[this._count]?(this._boardState.rollResult=k[this._count],this._count++):this._curSlot.rolled6?this._boardState.rollResult=Math.ceil(6*Math.random()):this.state.rollResult=Math.random()>=.5?6:Math.ceil(5*Math.random()),(t=this._curSlot).rolled6||(t.rolled6=this.state.rollResult>=6),this.state.stepAmount=this.state.rollResult,this._boardState.rollResult>=6&&this._roll6Streak++,this.scheduleOnce((function(){var t=e.getPlayableTokens();if(0===t.length||e._roll6Streak>=3)e.scheduleOnce((function(){e._nextPlayer(),e._toRollDiceState()}),.5);else if(1!==t.length){e.state.turnDuration=10;var n=e._curSlot.isBot?.5*Math.random()+.5:10;e.scheduleOnce((function(){var n=t[Math.floor(Math.random()*t.length)];e.moveToken(n)}),n),e.setAction(1)}else{var s=t[0];e.moveToken(s)}}),.8),u.emit("ON_ROLL_DICE_RESULT",this._boardState.rollResult)},i.moveToken=function(t){var e=this;this.unscheduleAllCallbacks();var n=t.posIdx,s=t.playerIdx;if(n<0)this.setTokenPosIdx(t,f[this.state.curTurn]);else{for(var o=n,r=0;r<this.state.rollResult;r++)(o=(o+1)%(o<=51?52:76))===f[s]-1&&(o=52+6*s);this.setTokenPosIdx(t,o)}var i=[];this.state.slots.forEach((function(e,n){if(n!==s){var o=e.tokens.filter((function(e){return t.posIdx===e.posIdx&&p.indexOf(e.posIdx)<0}));1===o.length&&i.push(o[0])}})),i.forEach((function(t){e.setTokenPosIdx(t,-1),e._roll6Streak=0}));var l=[t].concat(i).map((function(t){return{slotIdx:t.playerIdx,tokenIdx:t.id,curPos:t.posIdx,type:"normal"}}));u.emit("ON_MOVE_CHAR",l),i.length>0&&(this.state.slots[i[0].playerIdx].beingKickedAmount++,this.state.slots[t.playerIdx].kickedAmount++);var c=this._isAllTokenFinished(this._curSlot);c&&(this.setSlotRank(this._curSlot,this.firstRank),this.firstRank++);var h=175*(this.state.rollResult-1)+350;if(n<0)h=350;else if(a.includes(t.posIdx)&&!c)h+=700;else if(c)h+=2500;else if(i.length>0){h+=350+700*this._getAllCellInRange(f[i[0].playerIdx],t.posIdx).length/15}h+=100;var d=this.checkEndCondition();this.setAction(2),this.scheduleOnce((function(){if(c&&d){e.unscheduleAllCallbacks();var n=e._getCurrentRankingData();u.emit("ON_SHOW_RANKING_POPUP",n)}else{e._curSlot.rank<0&&(e.state.rollResult>=6||i.length>0||t.posIdx===57+6*s)||e._nextPlayer(),e._toRollDiceState()}}),h/1e3)},i._getAllCellInRange=function(t,e){var n=[],s=t;for(n.push(t);s!==e;)s=(s+1)%52,n.push(s);return n},i.isAllTokenFinished=function(t){var e=t.tokens.every((function(e){return e.posIdx===57+6*t.idx}));return e&&(t.finished=!0),e},i.checkEndCondition=function(){var t=this,e=this.state.slots.filter((function(e){return t._isSlotWin(e)})).length,n=this.state.slots.filter((function(t){return null!=t.player&&t.rank<0})),s=!1;return e!==Math.ceil(this.maxClients/2)&&1!==n.length||(this.setPhase(2),n.forEach((function(e){t.setSlotRank(e,t.firstRank),t.firstRank++})),s=!0),s},i._getCurrentRankingData=function(){var t=this,e=[];return this.state.slots.filter((function(t){return null!=t.player})).sort((function(t,e){return(t.rank>=0?t.rank:4)-(e.rank>=0?e.rank:4)})).forEach((function(n){var s=null,o=t._isSlotWin(n);-1!==n.rank&&(s={isWin:o,adReward:0,slotIdx:n.idx,coins:0,name:n.player.name,kickedAmount:n.kickedAmount,beingKickedAmount:n.beingKickedAmount,avatar:n.player.avatar}),e.push(s)})),e},i.setCurTurn=function(t){var e=this.state.curTurn;e!==t&&(this.state.curTurn=t,u.emit("curTurn",{curTurn:t,preTurn:e}))},i.setPhase=function(t){var e=this.state.phase;e!==t&&(this.state.phase=t,u.emit("phase",{curPhase:t,prePhase:e}))},i.setAction=function(t){this.state.action!==t&&(this.state.action=t,u.emit("action",t))},i.setSlotRank=function(t,e){var n=t.rank;n!==e&&(t.rank=e,u.emit("slot."+t.idx+".rank",{curRank:e,preRank:n}))},i.setSlotPlayer=function(t,e){t.player!==e&&(t.player=e,u.emit("slot."+t.idx+".player",e))},i.setTokenPosIdx=function(t,e){var n=t.posIdx;n!==e&&(t.posIdx=e,u.emit("slot."+t.playerIdx+".token."+t.id+".posIdx",{curPos:e,prePos:n}))},i._isAllTokenFinished=function(t){return t.tokens.every((function(e){return e.posIdx===57+6*t.idx}))},i._isSlotWin=function(t){return t.rank>=0&&t.rank<Math.ceil(this.maxClients/2)},n(r,[{key:"state",get:function(){return this._boardState}},{key:"_curSlot",get:function(){return this.state.slots[this.state.curTurn]}}]),r}(l))||h);r._RF.pop()}}}));

System.register("chunks:///_virtual/RoomNetworkControllerRefactor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Commands.ts","./Constant.ts","./SimpleEventTarget.ts","./Networking.ts","./GameHelper.ts"],(function(t){var o,e,n,r,s,i,a,c,l,u,m,_,f;return{setters:[function(t){o=t.inheritsLoose,e=t.asyncToGenerator,n=t.regeneratorRuntime,r=t.createClass},function(t){s=t.cclegacy,i=t._decorator,a=t.Component,c=t.sys},function(t){l=t.Command},function(t){u=t.Transfer},function(t){m=t.SimpleEventTarget},function(t){_=t.default},function(t){f=t.GameHelper}],execute:function(){var h;s._RF.push({},"b92f6Ws4r9AwIKDL4NahZro","RoomNetworkControllerRefactor",void 0);var E=i.ccclass;i.property,t("RoomNetworkControllerRefactor",E("RoomNetworkControllerRefactor")(h=function(t){function s(){for(var o,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(o=t.call.apply(t,[this].concat(n))||this)._room=null,o._disposers=[],o}o(s,t);var i=s.prototype;return i.onLoad=function(){var t=e(n().mark((function t(){var o,e,r,s,i,a,l=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this._room=_.gameRoom,this._registerEvent(),this._room.onLeave((function(t){var o;console.log("leave code",t,null!=_.gameRoom),null!=_.gameRoom&&2===_.gameRoom.state.phase||m.emit("ON_LEAVE"),1006===t||1005===t||2===t?f.showReconnectAlert(t):4e3===t?c.localStorage.removeItem("reconnectionToken"):f.showErrorAlert(t),null==(o=l._room)||o.removeAllListeners(),l._room=null,_.gameRoom=null})),this._room.onMessage("*",(function(t,o){0===t&&m.emit("ON_ROLL_DICE_RESULT",o),2===t&&m.emit("ON_SHOW_RANKING_POPUP",o),5===t&&m.emit("ALL_READY",o),7===t&&m.emit("NOTI_BET",o),12===t&&m.emit("THROW_ITEM",o),13===t&&m.emit("SHOW_STICKER",o),14===t&&m.emit("START_ROOM_TIMER",o),19===t&&m.emit("ON_MOVE_CHAR",o),26===t&&m.emit("ON_SPECIAL_NOTI",o)})),o=this._room.state.listen("slots",(function(t){console.log("Slot emit"),m.emit("slots",t),t.forEach((function(t,o){var e=t.listen("rank",(function(t,e){m.emit("slot."+o+".rank",{curRank:t,preRank:e})})),n=t.listen("player",(function(t){m.emit("slot."+o+".player",t)})),r=t.listen("autoPlay",(function(t){m.emit("slot."+o+".autoPlay",t)}));t.tokens.forEach((function(t,e){var n=t.listen("posIdx",(function(t,n){var r="slot."+o+".token."+e+".posIdx";m.emit(r,{curPos:t,prePos:n})}));l._disposers.push(n)})),l._disposers.push(e,n,r)}))})),e=this._room.state.listen("bet",(function(t){m.emit("bet",t)})),r=this._room.state.listen("phase",(function(t,o){m.emit("phase",{curPhase:t,prePhase:o})})),s=this._room.state.listen("rollResult",(function(t,o){null==o&&m.emit("rollResult",{curRollResult:t,preRollResult:o})})),i=this._room.state.listen("gameStarted",(function(t,o){m.emit("gameStarted",{curGameStarted:t,preGameStarted:o})})),a=this._room.state.onChange((function(){var t=l._room.state,o=t.curTurn,e=t.action;m.emit("onChangeTurnAndAction",{curTurn:o,action:e})})),this._disposers.push(o,s,r,e,i,a)}catch(t){console.error("err room network controller",t,t.code,t.message),f.showErrorAlert(t.code),m.emit("ON_LEAVE")}case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i._registerEvent=function(){var t=this;m.emit("ON_GET_ROOM_STATE"),m.on("LEAVE",e(n().mark((function o(){return n().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,!t._room){o.next=4;break}return o.next=4,t._room.leave();case 4:o.next=9;break;case 6:o.prev=6,o.t0=o.catch(0),console.error(o.t0);case 9:m.emit("ON_LEAVE");case 10:case"end":return o.stop()}}),o,null,[[0,6]])}))),this),m.on("USE_X2_DICE",(function(){t._room.send(22)}),this),m.on("USE_DICE_CONTROL",(function(o){t._room.send(23,o)}),this),m.on("USE_SHIELD",(function(){t._room.send(24)}),this),m.on("PORTAL_DECISION",(function(o){t._room.send(21,o?1:0)}),this),m.on("CHOOSING_TOKEN",(function(o){t._room.send(l.CHOOSING_TOKEN,o)}),this),m.on("REQUEST_START_MATCH",(function(){t._room.send(3)}),this),m.on("REQUEST_KICK_PLAYER",(function(o){t._room.send(6,o)}),this),m.on("REQUEST_ROLL_DICE",(function(){t._room.send(l.ROLL_DICE)}),this),m.on("STOP_AUTO_PLAY",(function(){var o;null==(o=t._room)||o.send(11)}),this),m.on("REQUEST_THROW_ITEM",(function(o){var e=o[0],n=o[1];t._room.send(12,[e,n]),m.emit("THROW_ITEM",[-1,e,n])}),this),m.on("REQUEST_STICKER",(function(o){t._room.send(13,o),m.emit("SHOW_STICKER",[-1,o])}),this)},i.start=function(){this._room.send(u.READY_PLAYING);var t=this._room.state,o=t.curTurn,e=t.action;m.emit("onChangeTurnAndAction",{curTurn:o,action:e})},i.onDestroy=function(){var t;m.removeAll(this),null==(t=this._room)||t.removeAllListeners(),this._disposers.forEach((function(t){t()}))},r(s,[{key:"state",get:function(){return this._room.state}}]),s}(a))||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/RotateAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,i,r,a,c,l,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.CCFloat,l=e.CCBoolean,s=e.tween,u=e.Component}],execute:function(){var p,f,d,h,y,v,g;r._RF.push({},"f4d84KRkGJNlp/XtNxvdVn4","RotateAnimation",void 0);var m=a.ccclass,C=a.property;e("RotateAnimation",(p=m("RotateAnimation"),f=C(c),d=C(l),p((v=t((y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"speed",v,i(t)),o(t,"counterClockWise",g,i(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){},r.start=function(){s(this.node).set({angle:0}).to(1/this.speed,{angle:this.counterClockWise?360:-360}).union().repeatForever().start()},r.update=function(e){},t}(u)).prototype,"speed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),g=t(y.prototype,"counterClockWise",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=y))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/RoundedRectangleGraphics.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,a,u,l,c,p,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.extends},function(e){a=e.cclegacy,u=e._decorator,l=e.Graphics,c=e.CCFloat,p=e.CCBoolean,b=e.Component}],execute:function(){var s,d,f,h,y,g,m,v,w,z,C,R,T,G,x,_,q,B,D,k,F,L,E,I,M;a._RF.push({},"e9a58qpoGpDs6C1B8xTcmya","RoundedRectangleGraphics",void 0);var P=u.ccclass,j=u.property,A=u.requireComponent,H=u.executeInEditMode;e("RoundedRectangleGraphics",(s=P("RoundedRectangleGraphics"),d=A(l),f=H(!0),h=j(c),y=j(c),g=j(c),m=j(c),v=j(c),w=j(p),z=j(c),C=j(c),R=j(c),T=j(c),s(G=d(G=f((_=t((x=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"x",_,n(t)),i(t,"y",q,n(t)),i(t,"width",B,n(t)),i(t,"height",D,n(t)),i(t,"radius",k,n(t)),i(t,"seperateBorder",F,n(t)),i(t,"tl",L,n(t)),i(t,"tr",E,n(t)),i(t,"bl",I,n(t)),i(t,"br",M,n(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){this._updateGrahpic()},a.onEnable=function(){this._updateGrahpic()},a._updateGrahpic=function(){var e=this.getComponent(l);e.clear(),e.roundRect(this.x,this.y,this.width,this.height,this.radius),e.fill(),e.stroke()},a.roundRect=function(e,t,r,i,n,a,u,l){void 0===a&&(a=5),void 0===u&&(u=!1),void 0===l&&(l=!0),a="number"==typeof a?{tl:a,tr:a,br:a,bl:a}:o({},{tl:0,tr:0,br:0,bl:0},a),e.moveTo(t+a.tl,r),e.lineTo(t+i-a.tr,r),e.quadraticCurveTo(t+i,r,t+i,r+a.tr),e.lineTo(t+i,r+n-a.br),e.quadraticCurveTo(t+i,r+n,t+i-a.br,r+n),e.lineTo(t+a.bl,r+n),e.quadraticCurveTo(t,r+n,t,r+n-a.bl),e.lineTo(t,r+a.tl),e.quadraticCurveTo(t,r,t+a.tl,r),u&&e.fill(),l&&e.stroke()},a.start=function(){},a.update=function(e){},t}(b)).prototype,"x",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-125}}),q=t(x.prototype,"y",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-125}}),B=t(x.prototype,"width",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 250}}),D=t(x.prototype,"height",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 250}}),k=t(x.prototype,"radius",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 31}}),F=t(x.prototype,"seperateBorder",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=t(x.prototype,"tl",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=t(x.prototype,"tr",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=t(x.prototype,"bl",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=t(x.prototype,"br",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=x))||G)||G)||G));a._RF.pop()}}}));

System.register("chunks:///_virtual/Route.ts",["cc","./Codec.ts"],(function(t){var e,n,o,i;return{setters:[function(t){e=t.cclegacy,n=t.log,o=t.EventTarget},function(t){i=t.Codec}],execute:function(){e._RF.push({},"d7d2caHkbhJx7OojQtGJlDF","Route",void 0);var c="[Route]",u=t("Route",function(){function t(){this.codec=void 0,this._eventTarget=new o}var e=t.prototype;return e.init=function(t){return n(c,"init"),this.codec=t,this},e.destroy=function(){},e.once=function(t,e,o){n(c,"once",t),this._eventTarget.once(t,e,o)},e.off=function(t,e,o){n(c,"off",t),this._eventTarget.off(t,e,o)},e.on=function(t,e,o){n(c,"on",t),this._eventTarget.on(t,e,o)},e.dispatch=function(t,e){n(c,"dispatch",t),this._eventTarget.emit(t,e)},t}());t("route",(new u).init(new i));e._RF.pop()}}}));

System.register("chunks:///_virtual/SceneManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubLoading.ts"],(function(e){var n,t,c,o;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy,c=e.director},function(e){o=e.SubLoading}],execute:function(){t._RF.push({},"83c82ZZQplAYYCkS4mETSRB","SceneManager",void 0),e("SceneManager",function(){function e(){this._loadedScene=new Set,this._prevScene="Home"}var t=e.prototype;return t.moveToPreviousScene=function(){return this.moveToScene(this._prevScene)},t.moveToScene=function(e){return this._prevScene=c.getScene().name,new Promise((function(n,t){o.Instance.show(),c.loadScene(e,(function(e,c){if(o.Instance.hide(),e)return console.error(e),void t(e);n(c)}))}))},n(e,null,[{key:"Instance",get:function(){return null==this._instance&&(this._instance=new e),this._instance}}]),e}())._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/SDK.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AndroidSDK.ts","./CrazySDK.ts","./PokiSDK.ts","./ZMP.ts","./AudioManager.ts","./SubLoading.ts"],(function(e){var t,r,n,a,i,s,u,o,c,p,h;return{setters:[function(e){t=e.createClass,r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){a=e.cclegacy,i=e.sys},function(e){s=e.default},function(e){u=e.default},function(e){o=e.default},function(e){c=e.default},function(e){p=e.AudioManager},function(e){h=e.SubLoading}],execute:function(){a._RF.push({},"a482egIKBxCjohL5/E9ZHQA","SDK",void 0);e("default",new(function(){function e(){this._isCrazyGameEnabled=!1,this._isLoaded=!1,this._authListenerAdded=!1,this._provider=null,this._accessToken=null,i.isNative&&i.os===i.OS.ANDROID?this._provider="android":this._provider="crazygame"}var a=e.prototype;return a.init=function(){var e=r(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isLoaded){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,"android"===this._provider&&(s.preloadRewardedAd(),s.preloadInterstitialAd()),"poki"===this._provider&&o.init(),"crazygame"!==this._provider){e.next=10;break}return e.next=8,u.init();case 8:return e.next=10,u.createUserToken();case 10:if("zmp"!==this._provider){e.next=13;break}return e.next=13,c.init();case 13:this._isLoaded=!0,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.error(e.t0);case 19:case"end":return e.stop()}}),e,this,[[2,16]])})));return function(){return e.apply(this,arguments)}}(),a.loadingStart=function(){this._crazyGameEnable()&&u.game.loadingStart()},a.loadingStop=function(){"poki"===this._provider&&o.gameLoadingFinished(),this._crazyGameEnable()&&u.game.loadingStop()},a.gameplayStart=function(){this._crazyGameEnable()&&u.game.gameplayStart(),this._pokiEnable()&&o.gameplayStart()},a.gameplayStop=function(){this._crazyGameEnable()&&u.game.gameplayStop(),this._pokiEnable()&&o.gameplayStop()},a.getUser=function(){var e=r(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCrazyGameEnable){e.next=10;break}return e.prev=1,e.next=4,u.user.getUser();case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:if("zmp"!==this._provider){e.next=27;break}return e.prev=11,e.next=14,c.getUserInfo();case 14:if(e.t1=e.sent,e.t1){e.next=17;break}e.t1={};case 17:if(t=e.t1,""!==(null==(r=t.userInfo)?void 0:r.name)){e.next=21;break}throw new Error("No user info");case 21:return e.abrupt("return",r);case 24:e.prev=24,e.t2=e.catch(11),console.error(e.t2);case 27:if(!i.isNative||i.os!==i.OS.ANDROID){e.next=37;break}return e.prev=28,e.next=31,s.getUser();case 31:return e.abrupt("return",e.sent);case 34:e.prev=34,e.t3=e.catch(28),console.error(e.t3);case 37:return e.abrupt("return",null);case 38:case"end":return e.stop()}}),e,this,[[1,7],[11,24],[28,34]])})));return function(){return e.apply(this,arguments)}}(),a.addAuthListener=function(e){this._crazyGameEnable()&&!this._authListenerAdded&&(this._authListenerAdded=!0,console.log("ADD AUTH LISTENER!"),u.user.addAuthListener(e))},a.hasAdBlock=function(){var e=r(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._crazyGameEnable()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,u.ad.hasAdblock();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),a.getInviteLink=function(){var e=r(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._crazyGameEnable()){e.next=5;break}return e.next=4,u.game.inviteLink(t);case 4:return e.abrupt("return",e.sent);case 5:if(!this.isPokiEnable){e.next=9;break}return e.next=8,o.shareableURL(t);case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return","");case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),a.sendInvite=function(){var e=r(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isZMPEnable){e.next=2;break}return e.abrupt("return",c.sendInvite(t,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),a.showInviteButton=function(e){if(this._crazyGameEnable())return u.game.showInviteButton(e)},a.hideInviteButton=function(){if(this._crazyGameEnable())return u.game.hideInviteButton()},a.showRewardedAd=function(){var e=r(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=null,this.isCrazyGameEnable?t=u.showRewardedAd():this.isPokiEnable?t=o.rewardedBreak():this.isZMPEnable?t=c.displayAd():this.isAndroidEnable&&(t=s.showRewardedAd()),null!=t){e.next=5;break}return e.abrupt("return");case 5:return h.Instance.show(),p.Instance.mute(),e.next=9,t;case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),console.error(e.t0),e.t0;case 15:return e.prev=15,p.Instance.unMute(),h.Instance.hide(),e.finish(15);case 19:case"end":return e.stop()}}),e,this,[[0,11,15,19]])})));return function(){return e.apply(this,arguments)}}(),a.showMidGameAd=function(){var e=r(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=null,this.isCrazyGameEnable?t=u.showMidgameAd():this.isPokiEnable?t=o.commercialBreak():this.isAndroidEnable&&(t=s.showInterstitialAd()),null!=t){e.next=5;break}return e.abrupt("return");case 5:return h.Instance.show(),p.Instance.mute(),e.next=9,t;case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),console.error(e.t0),e.t0;case 15:return e.prev=15,p.Instance.unMute(),h.Instance.hide(),e.finish(15);case 19:case"end":return e.stop()}}),e,this,[[0,11,15,19]])})));return function(){return e.apply(this,arguments)}}(),a.getUserToken=function(){var e=r(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCrazyGameEnable){e.next=4;break}return e.next=3,u.getUserToken();case 3:return e.abrupt("return",e.sent);case 4:if(!this.isZMPEnable){e.next=9;break}return e.next=7,c.getAccessToken();case 7:return t=e.sent,e.abrupt("return",t);case 9:if(!i.isNative||i.os!==i.OS.ANDROID){e.next=11;break}return e.abrupt("return",s.token);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.showAuthPrompt=function(){var e=r(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this._crazyGameEnable()){e.next=5;break}return e.next=4,u.user.showAuthPrompt();case 4:return e.abrupt("return",e.sent);case 5:if(!this.isZMPEnable){e.next=9;break}return e.next=8,c.authorize();case 8:return e.abrupt("return",e.sent);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),a.getUrlParam=function(){var e=r(n().mark((function e(t){var r,a,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.isNative){e.next=2;break}return e.abrupt("return",null);case 2:if(!this._crazyGameEnable()){e.next=4;break}return e.abrupt("return",u.game.getInviteParam(t));case 4:if(!this.isPokiEnable){e.next=6;break}return e.abrupt("return",o.getURLParam(t));case 6:if(!this.isZMPEnable){e.next=11;break}return r=window.location.search,a=new URLSearchParams(r),s=a.get("roomId"),e.abrupt("return",s);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.shareGameOnPostFeed=function(){var e=r(n().mark((function e(){var t,r,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isZMPEnable){e.next=12;break}return e.next=3,c.openPostFeed();case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:if(t=e.t0,r=t.status,a=void 0===r?1:r,console.log("status",a),1===a){e.next=12;break}throw new Error("Share cancelled");case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a._crazyGameEnable=function(){return"crazygame"===this._provider&&u.isSupportedPlatform},a._pokiEnable=function(){return"poki"===this._provider},t(e,[{key:"isCrazyGameEnable",get:function(){return u.isSupportedPlatform&&"crazygame"===this._provider}},{key:"isPokiEnable",get:function(){return this._pokiEnable()}},{key:"isZMPEnable",get:function(){return"zmp"===this._provider}},{key:"isAndroidEnable",get:function(){return"android"===this._provider}}]),e}()));a._RF.pop()}}}));

System.register("chunks:///_virtual/SelectModePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Popup.ts"],(function(e){var t,o,n,r,i,c,u,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,u=e.Button},function(e){a=e.Popup}],execute:function(){var p,l,s,f,d;i._RF.push({},"a5cf6F1uaVBpKgStibFpBVU","SelectModePopup",void 0);var h=c.ccclass,v=c.property;e("SelectModePopup",(p=h("SelectModePopup"),l=v([u]),p((d=t((f=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,n(t,"modeButtons",d,r(t)),t._resolveValue=null,t}o(t,e);var i=t.prototype;return i.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.modeButtons.forEach((function(e,o){e.node.on(u.EventType.CLICK,(function(){t._resolveValue=0===o?"classic":"super",t.close()}))}))},i.setData=function(e){},t}(a)).prototype,"modeButtons",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=f))||s));i._RF.pop()}}}));

System.register("chunks:///_virtual/SettingPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./SimpleEventTarget.ts","./Global.ts","./Networking.ts","./Popup.ts","./SDK.ts","./ToastUI.ts","./AudioManager.ts","./SubLoading.ts","./GameHelper.ts","./LanguageSelectorItem.ts","./l10n-manager.ts"],(function(e){var t,n,a,o,i,r,u,s,c,l,g,f,p,h,d,b,L,m,v,I,y,S,_,w,T,C,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){u=e.cclegacy,s=e._decorator,c=e.Button,l=e.Label,g=e.Node,f=e.Prefab,p=e.sys,h=e.Sprite,d=e.instantiate,b=e.UITransform},null,function(e){L=e.SimpleEventTarget},function(e){m=e.default},function(e){v=e.default},function(e){I=e.Popup},function(e){y=e.default},function(e){S=e.ToastUI},function(e){_=e.AudioManager},function(e){w=e.SubLoading},function(e){T=e.GameHelper},function(e){C=e.LanguageSelectorItem},function(e){P=e.default}],execute:function(){var E,B,O,x,z,D,N,A,M,G,H,U,k,K,V,R,j,F,Z,q,Q;u._RF.push({},"b7054ZtjeVMQr7+2iba725i","SettingPopup",void 0);var J=s.ccclass,W=s.property,X=[{code:"en",languageName:"English"},{code:"vi",languageName:"Tiếng Việt"}];e("SettingPopup",(E=J("SettingPopup"),B=W([c]),O=W([c]),x=W(l),z=W(l),D=W(l),N=W(c),A=W(c),M=W(g),G=W(f),E((k=t((U=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,a(t,"musicToggles",k,o(t)),a(t,"sfxToggles",K,o(t)),a(t,"musicLabel",V,o(t)),a(t,"sfxLabel",R,o(t)),a(t,"userIdLabel",j,o(t)),a(t,"changeLanguageButton",F,o(t)),a(t,"signOutButton",Z,o(t)),a(t,"otherLanguagePanel",q,o(t)),a(t,"languageSelectorItemPrefab",Q,o(t)),t._userId="",t._curLanguage="en",t}n(t,e);var u=t.prototype;return u.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this._curLanguage=P.currentLanguage,this._updateCurLanguageState(),this.otherLanguagePanel.parent.active=!(y.isZMPEnable||p.isNative&&p.os===p.OS.ANDROID),this.musicToggles.forEach((function(e){e.node.on(c.EventType.CLICK,(function(){_.Instance.toggleMusic(),t._updateButtonState()}))})),this.sfxToggles.forEach((function(e){e.node.on(c.EventType.CLICK,(function(){_.Instance.toggleSound(),t._updateButtonState()}))})),this._updateButtonState(),m.userInfo?(this._userId=m.userInfo._id,this.userIdLabel.string="ID: "+m.userInfo._id):this.userIdLabel.node.active=!1,p.isBrowser&&this.userIdLabel.node.on(g.EventType.TOUCH_END,(function(){navigator.permissions.query({name:"clipboard-write"}).then((function(e){"granted"!==e.state&&"prompt"!==e.state||navigator.clipboard.writeText(t._userId).then((function(){S.Instance.show(P.t("copy-id"))}))}))})),this.node.on(g.EventType.TOUCH_END,(function(e){e.target.isChildOf(t.otherLanguagePanel)||(t.otherLanguagePanel.active=!1)}),this,!0),L.on("CHANGE_LANGUAGE",(function(e){t._curLanguage=e,t._updateCurLanguageState(),t.otherLanguagePanel.active=!1,T.showAlert({message:P.t("restart-alert"),showCancel:!0}).then((function(e){"Ok"===e&&P.changeLanguage(t._curLanguage)}))}),this),this.changeLanguageButton.node.on(c.EventType.CLICK,(function(){t.otherLanguagePanel.active=!0})),this.signOutButton.node.on(c.EventType.CLICK,i(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w.Instance.show(),e.next=4,v.client.auth.signOut();case 4:t._data.showSignOutButton=!1,t._updateView(),t.close(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:return e.prev=12,w.Instance.hide(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])}))))},u._updateButtonState=function(){var e=this;this.musicToggles.forEach((function(t){t.getComponent(h).grayscale=!_.Instance.isMusicOn(),e.musicLabel.string=P.t(_.Instance.isMusicOn()?"on":"off")})),this.sfxToggles.forEach((function(t){t.getComponent(h).grayscale=!_.Instance.isSoundOn(),e.sfxLabel.string=P.t(_.Instance.isSoundOn()?"on":"off")}))},u._updateCurLanguageState=function(){var e=this;this.changeLanguageButton.getComponentInChildren(l).string=X.find((function(t){return t.code===e._curLanguage})).languageName,X.filter((function(t){return t.code!==e._curLanguage})).forEach((function(t,n){var a;e.otherLanguagePanel.children[n]?a=e.otherLanguagePanel.children[n].getComponent(C):(a=d(e.languageSelectorItemPrefab).getComponent(C)).node.setParent(e.otherLanguagePanel),a.setData(t)}))},u.start=function(){this._updateView()},u._updateView=function(){var e=this._data.showSignOutButton,t=(void 0===e||e)&&"google"===m.accountType;this.signOutButton.node.active=t;var n=this.container.getComponent(b);n.setContentSize(n.width,t?574:484)},u.onDestroy=function(){e.prototype.onDestroy.call(this),L.removeAll(this)},t}(I)).prototype,"musicToggles",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=t(U.prototype,"sfxToggles",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=t(U.prototype,"musicLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(U.prototype,"sfxLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(U.prototype,"userIdLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(U.prototype,"changeLanguageButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(U.prototype,"signOutButton",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(U.prototype,"otherLanguagePanel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(U.prototype,"languageSelectorItemPrefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=U))||H));u._RF.pop()}}}));

System.register("chunks:///_virtual/Shop.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./Global.ts","./SceneManager.ts","./SubLoading.ts","./ShopItem.ts"],(function(t){var e,n,o,a,i,r,s,c,u,l,b,h,f,p,d,I,m,v,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,s=t.Node,c=t.Button,u=t.Prefab,l=t.ScrollView,b=t.Sprite,h=t.Color,f=t.instantiate,p=t.Component},function(t){d=t.SKU_ITEM},function(t){I=t.default},function(t){m=t.SceneManager},function(t){v=t.SubLoading},function(t){T=t.ShopItem}],execute:function(){var _,C,g,y,x,S,w,D,E,L,P,k,z;i._RF.push({},"66b5d8+smlIPImJnixT9klw","Shop",void 0);var A=r.ccclass,B=r.property;t("Shop",(_=A("Shop"),C=B([s]),g=B([s]),y=B(c),x=B(u),S=B(s),_((E=e((D=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,o(e,"tabs",E,a(e)),o(e,"tabContents",L,a(e)),o(e,"backButton",P,a(e)),o(e,"shopItemPrefab",k,a(e)),o(e,"noItemAvailableText",z,a(e)),e._curTabIdx=0,e._mobXDisPosers=[],e._tabContentsLoaded=[],e}n(e,t);var i=e.prototype;return i.onLoad=function(){var t=this;this._tabContentsLoaded=Array(this.tabs.length).fill(!1),v.Instance.hide(),this.tabContents.forEach((function(e){e.getComponent(l).content.on(s.EventType.CHILD_REMOVED,(function(){var e=t.tabContents[t._curTabIdx].getComponent(l).content;t.noItemAvailableText.active=0===e.children.length}))})),this.tabs.forEach((function(e,n){e.on(c.EventType.CLICK,(function(){t._curTabIdx!==n&&(t._curTabIdx=n,t._updateTabContents())}))})),this.backButton.node.on(c.EventType.CLICK,(function(){m.Instance.moveToPreviousScene()}))},i._updateTabContents=function(){var t=this;this.tabs.forEach((function(e,n){e.getComponent(b).color=(new h).fromHEX(t._curTabIdx===n?"#F7D2A8":"#BB9063"),t.tabContents[n].active=t._curTabIdx===n}));var e=this.tabContents[this._curTabIdx].getComponent(l).content;if(!this._tabContentsLoaded[this._curTabIdx]){this._tabContentsLoaded[this._curTabIdx]=!0;var n=Object.values(d);I.inventoryData[["dice","throwables","characters","bases"][this._curTabIdx]].filter((function(t){return!I.isItemOwned(t.sku)&&n.includes(t.sku)})).forEach((function(n){var o=f(t.shopItemPrefab);o.setParent(e),o.getComponent(T).setData(n)}))}this.noItemAvailableText.active=0===e.children.length;I.updateReddotTree("shop."+["dice","throwables","characters","bases"][this._curTabIdx],!1)},i.setData=function(t){this._curTabIdx=t},i.start=function(){this._updateTabContents()},i.onDestroy=function(){this._mobXDisPosers.forEach((function(t){t()}))},e}(p)).prototype,"tabs",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=e(D.prototype,"tabContents",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=e(D.prototype,"backButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(D.prototype,"shopItemPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(D.prototype,"noItemAvailableText",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=D))||w));i._RF.pop()}}}));

System.register("chunks:///_virtual/ShopItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Constant.ts","./Global.ts","./AudioManager.ts","./LoaderManager.ts","./SubLoading.ts","./Networking.ts","./PopupManager.ts","./SDK.ts","./GameHelper.ts","./l10n-manager.ts"],(function(e){var t,n,r,o,i,a,u,s,c,p,l,d,h,f,m,y,v,b,I,_,g,A,w,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){u=e.cclegacy,s=e._decorator,c=e.Label,p=e.Sprite,l=e.Button,d=e.UITransform,h=e.Component},null,function(e){f=e.SKU_ITEM,m=e.ITEM_NAME},function(e){y=e.default},function(e){v=e.AudioManager},function(e){b=e.LoaderManager},function(e){I=e.SubLoading},function(e){_=e.default},function(e){g=e.default},function(e){A=e.default},function(e){w=e.GameHelper},function(e){T=e.default}],execute:function(){var k,D,L,C,G,S,M,R,x;u._RF.push({},"2f192xPR3ZNsYNjBTPGo3TE","ShopItem",void 0);var E=s.ccclass,B=s.property,z=function(e){return e[e.GOLD=0]="GOLD",e[e.GEM=1]="GEM",e[e.AD=2]="AD",e}(z||{});e("ShopItem",(k=E("ShopItem"),D=B(c),L=B(p),C=B(l),k((M=t((S=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"nameLabel",M,o(t)),r(t,"thumbSprite",R,o(t)),r(t,"actionButton",x,o(t)),t._sku="",t._currencyType=z.GOLD,t._currencyAmount=0,t}n(t,e);var u=t.prototype;return u.onLoad=function(){var e=this;this.actionButton.node.on(l.EventType.CLICK,i(a().mark((function t(){var n,r,o,i,u,s,c,p,l,d;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,I.Instance.show(),e._currencyType===z.AD){t.next=16;break}return t.next=5,_.buyItem(e._sku,e._currencyType);case 5:n=t.sent,r=n.inventoryItems,o=n.updatedItem,i=n.coins,u=n.gems,y.userInfo.inventoryItems=r,y.setCoins(i),y.setGems(u),o.owned&&e._showRewardAndRemove(),t.next=39;break;case 16:return s=!0,t.prev=17,t.next=20,A.showRewardedAd();case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(17),s=!1;case 25:return t.prev=25,v.Instance.unMute(),I.Instance.hide(),t.finish(25);case 29:if(s){t.next=31;break}return t.abrupt("return");case 31:return t.next=33,_.increaseAdCount(e._sku);case 33:c=t.sent,p=c.inventoryItems,l=c.updatedItem,y.userInfo.inventoryItems=p,e.setData(l),l.owned&&e._showRewardAndRemove();case 39:t.next=50;break;case 41:if(t.prev=41,t.t1=t.catch(0),console.error(t.t1),4006!==(null==(d=t.t1.response)||null==(d=d.data)?void 0:d.error.code)){t.next=49;break}return w.promptWatchAdPopup(0===e._currencyType?f.COIN:f.GEM),t.abrupt("return");case 49:w.showErrorAlert(t.t1.code);case 50:return t.prev=50,I.Instance.hide(),t.finish(50);case 53:case"end":return t.stop()}}),t,null,[[0,41,50,53],[17,22,25,29]])}))))},u.setData=function(e){var t=e.sku;this._sku=t,this.nameLabel.string=T.t(m[t]);var n=t.split("."),r=n[0],o=n[1];b.Instance.loadSfToSprite(r+"/thumb/"+o+"/spriteFrame",this.thumbSprite);var i=(y.userInfo.inventoryItems.find((function(e){return e.sku===t}))||{}).watchedAdCount,a=void 0===i?0:i,u=w.getItemConfig(this._sku),s=u.requireAdCount,p=void 0===s?0:s,l=u.goldAmount,h=void 0===l?0:l,f=u.gemAmount,v=void 0===f?0:f;v>0?(this._currencyType=z.GEM,this._currencyAmount=v):h>0?(this._currencyType=z.GOLD,this._currencyAmount=h):this._currencyType=z.AD;var I=this.actionButton.node.children,_=I[0],g=I[1];_.getComponentInChildren(c).string=w.formatNumber(this._currencyAmount,5),g.getComponentInChildren(c).string=a+"/"+p;var A=_.children,k=(A[0],A[1]),D=A[2];if(k.active=this._currencyType===z.GOLD,D.active=this._currencyType===z.GEM,_.active=this._currencyType!==z.AD,g.active=this._currencyType===z.AD,"characters"===r){var L=this.getComponent(d);L.setContentSize(543,L.height)}},u._showRewardAndRemove=function(){g.Instance.open("ReceiveReward",{sku:this._sku}),this.node.destroy()},t}(h)).prototype,"nameLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(S.prototype,"thumbSprite",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(S.prototype,"actionButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=S))||G));u._RF.pop()}}}));

System.register("chunks:///_virtual/SimpleEventTarget.ts",["cc"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy,n=e.EventTarget}],execute:function(){t._RF.push({},"cf24f+UE/RI0qUJpCbIfOrM","SimpleEventTarget",void 0);e("SimpleEventTarget",new n);t._RF.pop()}}}));

System.register("chunks:///_virtual/SkillBadget.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,l,o,s,a,c,p,u,f,g,y,d,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,l=t.createClass},function(t){o=t.cclegacy,s=t._decorator,a=t.Sprite,c=t.SpriteFrame,p=t.tween,u=t.v3,f=t.Vec3,g=t.easing,y=t.UIOpacity,d=t.Tween,h=t.Component}],execute:function(){var k,S,m,b,v,B,_;o._RF.push({},"8f2a8YWcZZNQq996XBJqa6O","SkillBadget",void 0);var w=s.ccclass,D=s.property;t("SkillBadget",(k=w("SkillBadget"),S=D(a),m=D([c]),k((B=e((v=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return e=t.call.apply(t,[this].concat(l))||this,n(e,"iconSprite",B,r(e)),n(e,"skillSfs",_,r(e)),e._skill=null,e}i(e,t);var o=e.prototype;return o.fadeIn=function(){p(this.node).set({scale:u(2.5,2.5,1)}).to(.5,{scale:f.ONE},{easing:g.bounceOut}).start(),p(this.getComponent(y)).set({opacity:0}).to(.15,{opacity:255}).start()},o.setData=function(t){this._skill=t,this.iconSprite.spriteFrame=this.skillSfs[["shield","x2-dice","dice-control"].indexOf(t)]},o.onDestroy=function(){d.stopAllByTarget(this.node),d.stopAllByTarget(this.getComponent(y))},l(e,[{key:"skillName",get:function(){return this._skill}}]),e}(h)).prototype,"iconSprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(v.prototype,"skillSfs",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=v))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/SkillButton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,a,o,l,c,u,s,p,b,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Node,c=e.SpriteFrame,u=e.Sprite,s=e.Button,p=e.tween,b=e.Tween,f=e.Component}],execute:function(){var y,v,g,h,S,L,d,m,_,k,w;a._RF.push({},"0627bWTfUZG7J687WN2mkHf","SkillButton",void 0);var B=o.ccclass,z=o.property;e("SkillButton",(y=B("SkillButton"),v=z(l),g=z(l),h=z([c]),S=z(u),y((m=t((d=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"deactiveLayer",m,n(t)),r(t,"activeLayer",_,n(t)),r(t,"bgSfs",k,n(t)),r(t,"bgSprite",w,n(t)),t._cb=null,t}i(t,e);var a=t.prototype;return a.onLoad=function(){var e=this;this.node.on(s.EventType.CLICK,(function(){e._cb&&e._cb()})),p(this.activeLayer).set({angle:0}).to(2.25,{angle:720}).union().repeatForever().start()},a.setCallback=function(e){this._cb=e},a.setActive=function(e){this.activeLayer.active=e,this.deactiveLayer.active=!e,this.bgSprite.spriteFrame=this.bgSfs[e?1:0],this.getComponent(s).interactable=e},a.onDestroy=function(){b.stopAllByTarget(this.activeLayer)},t}(f)).prototype,"deactiveLayer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(d.prototype,"activeLayer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(d.prototype,"bgSfs",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=t(d.prototype,"bgSprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=d))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/SkinSelector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoaderManager.ts"],(function(e){var t,n,a,i,r,o,c,s,u,l,h,f,d,p,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,c=e.Button,s=e.Node,u=e.Prefab,l=e.UITransform,h=e.Sprite,f=e.instantiate,d=e.Component,p=e.misc},function(e){S=e.LoaderManager}],execute:function(){var _,v,g,b,P,m,y,C,k;r._RF.push({},"6f17eXHQIRB1YVvDSaoVfJR","SkinSelector",void 0);var I=o.ccclass,w=o.property;e("SkinSelector",(_=I("SkinSelector"),v=w([c]),g=w(s),b=w(u),_((y=t((m=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"navButtons",y,i(t)),a(t,"container",C,i(t)),a(t,"charItemPrefab",k,i(t)),t._changeSkinCb=function(e){},t._ownedSkus=[],t._curPage=0,t._maxPage=0,t}n(t,e);var r=t.prototype;return r.onLoad=function(){var e=this;this.navButtons.forEach((function(t,n){t.node.on(c.EventType.CLICK,(function(){var t,a;t=0===n?-1:1,a=e._curPage,e._curPage=p.clampf(e._curPage+t,0,e._maxPage),a!==e._curPage&&e._updateSelection()}))}))},r.setChangeSkinCb=function(e){this._changeSkinCb=e},r.setData=function(e,t){this._ownedSkus=e,this._maxPage=Math.floor((this._ownedSkus.length-1)/3);var n=this._ownedSkus.indexOf(t),a=Math.floor(n/3);this._curPage=a,this._updateSelection(),this.node.active=!0;var i="characters"===t.split(".")[0]?1.5:1;this.node.setScale(i,i)},r._updateSelection=function(){var e=this;this.container.destroyAllChildren(),this._ownedSkus.slice(3*this._curPage,3*this._curPage+3).forEach((function(t,n){var a=t.split("."),i=a[0],r=a[1];if(["dice","bases"].includes(i)){var o=new s;o.addComponent(l),o.setParent(e.container),o.setPosition(57*n-57,0),o.on(s.EventType.TOUCH_END,(function(){e._changeSkinCb(t),e.hide()}));var c=o.addComponent(h);"dice"===i?(o.setScale(.4,.4,1),S.Instance.loadSfToSprite("dice/thumb/"+r+"/spriteFrame",c)):"bases"===i&&(o.setScale(.6,.6,1),S.Instance.loadSfToSprite("bases/select-thumb/"+r+"/spriteFrame",c))}else if("characters"===i){var u=f(e.charItemPrefab);u.setParent(e.container),u.setPosition(57*n-57,0),u.on(s.EventType.TOUCH_END,(function(){e._changeSkinCb(t),e.hide()}));var d=u.getComponentInChildren(h);S.Instance.loadSfToSprite("inventory/characters/"+r+"/spriteFrame",d)}})),this.navButtons[0].node.active=0!==this._curPage,this.navButtons[1].node.active=this._curPage!==this._maxPage},r.hide=function(){this.node.active=!1},t}(d)).prototype,"navButtons",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(m.prototype,"container",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(m.prototype,"charItemPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=m))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/SlotController.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"eeecbAte2VHYo544Eh2KHKK","SlotController",void 0);t("SlotController",(function(){this.userPanel=null,this.characters=[],this.charFinishedIndicator=null,this.rankLabel=null,this.diceRoller=null}));e._RF.pop()}}}));

System.register("chunks:///_virtual/SmallFlags.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var a,n,e,l,o,i,r,s;return{setters:[function(t){a=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){o=t.cclegacy,i=t._decorator,r=t.Node,s=t.Component}],execute:function(){var u,c,f,g,p;o._RF.push({},"7a7ba3ofG5Bgo4Zfkll5VfB","SmallFlags",void 0);var h=i.ccclass,F=i.property;t("SmallFlags",(u=h("SmallFlags"),c=F(r),u((p=a((g=function(t){function a(){for(var a,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return a=t.call.apply(t,[this].concat(o))||this,e(a,"flags",p,l(a)),a._flagCount=0,a}n(a,t);var o=a.prototype;return o.onLoad=function(){this._updateFlags()},o.increaseFlagCount=function(){this._flagCount++,this._updateFlags()},o.setFlagAmount=function(t){this._flagCount=t,this._updateFlags()},o._updateFlags=function(){var t=this;this.flags.forEach((function(a,n){a.active=n<t._flagCount}))},a}(s)).prototype,"flags",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=g))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/StickerChatPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Constant.ts","./SimpleEventTarget.ts","./l10n-manager.ts"],(function(t){var n,e,i,o,r,a,s,c,l,u,h,p,f,C,b,g,d,T,y,v,_;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,c=t.Button,l=t.Label,u=t.UIOpacity,h=t.Tween,p=t.tween,f=t.v3,C=t.Vec3,b=t.easing,g=t.Sprite,d=t.Color,T=t.Component},null,function(t){y=t.CHAT_TEXT},function(t){v=t.SimpleEventTarget},function(t){_=t.default}],execute:function(){var E,S,m,w,I,k,B,L,A,z,F;r._RF.push({},"e981djKWlBFALeTnbkh2L90","StickerChatPopup",void 0);var K=a.ccclass,P=a.property;t("StickerChatPopup",(E=K("StickerChatPopup"),S=P([s]),m=P([s]),w=P(s),I=P(s),E((L=n((B=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,i(n,"tabs",L,o(n)),i(n,"tabContents",A,o(n)),i(n,"stickerContainer",z,o(n)),i(n,"chatContainer",F,o(n)),n._curTabIdx=0,n._isShowing=!1,n}e(n,t);var r=n.prototype;return r.onLoad=function(){var t=this;this.stickerContainer.children.forEach((function(n,e){n.on(c.EventType.CLICK,(function(){v.emit("REQUEST_STICKER",e),t.hide()}))})),this.chatContainer.children.forEach((function(n,e){n.getComponent(l).string=_.t(y[e]),n.on(c.EventType.CLICK,(function(){v.emit("REQUEST_STICKER",e+t.stickerContainer.children.length),t.hide()}))})),this.tabs.forEach((function(n,e){n.on(c.EventType.CLICK,(function(){t._curTabIdx!==e&&(t._curTabIdx=e,t._updateTabContents())}))})),this._updateTabContents()},r.show=function(){if(!this._isShowing){this._isShowing=!0;var t=this.getComponent(u);h.stopAllByTarget(t),h.stopAllByTarget(this.node),p(this.node).set({scale:f(.75,.75,1)}).to(.1,{scale:C.ONE}).start(),p(t).set({opacity:0}).to(.1,{opacity:255}).start(),this._updateTabContents(),this.node.active=!0}},r.hide=function(){var t=this;if(this._isShowing){this._isShowing=!1;var n=this.getComponent(u);h.stopAllByTarget(n),h.stopAllByTarget(this.node),p(this.node).set({scale:C.ONE}).to(.1,{scale:f(.75,.75,1)}).start(),p(n).set({opacity:255}).to(.1,{opacity:0},{easing:b.cubicIn}).call((function(){t.node.active=!1})).start()}},r.isShowing=function(){return this._isShowing},r._updateTabContents=function(){var t=this;this.tabs.forEach((function(n,e){var i=t._curTabIdx===e;n.getComponent(g).color=(new d).fromHEX(i?"#F7D2A8":"#BB9063"),n.getComponentInChildren(g).color=(new d).fromHEX(i?"#92522F":"#F1C596"),t.tabContents[e].active=i}))},n}(T)).prototype,"tabs",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=n(B.prototype,"tabContents",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=n(B.prototype,"stickerContainer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(B.prototype,"chatContainer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=B))||k));r._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtils.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"22b47CYsI1HdokMU8rqowFo","StringUtils",void 0);var n=RegExp("(?=[\t\n\v\f\r   ᠎             \u2028\u2029　\ufeff])");t("StringUtils",function(){function t(){}return t.formatTime=function(t,r){if(void 0===r&&(r=!1),t<=0)return"00:00";var n=Math.abs(t),i=n/86400|0,e=(n/3600|0)%24,u=(n/60|0)%60;if(i>0)return i+"d "+e+"h";var o=n%60|0;return(e>0?e.toString()+"h":"")+" "+(u>0?u.toString()+"m":"")+" "+(o>0&&!r?o.toString()+"s":"")},t.padStart=function(t,r,n){return void 0===n&&(n="0"),(""+t).padStart(r,n)},t.truncate=function(t,r,n,i){return void 0===n&&(n="right"),void 0===i&&(i="..."),this._truncateString(t,r,n,i)},t._truncateOnWord=function(t,r,i){if(void 0===i&&(i=!1),i)return this.reverseString(this._truncateOnWord(this.reverseString(t),r));var e=t.split(n),u=0;return e.filter((function(t){return(u+=t.length)<=r})).join("")},t._truncateString=function(t,r,n,i,e){void 0===n&&(n="right"),void 0===i&&(i="..."),void 0===e&&(e=!1);var u=0,o=0;if(t.length<=r)return t.toString();switch(n){case"left":return i+(e?this._truncateOnWord(t,r,!0):t.slice(t.length-r));case"middle":return u=Math.ceil(r/2),o=Math.floor(r/2),(e?this._truncateOnWord(t,u):t.slice(0,u))+i+(e?this._truncateOnWord(t,o,!0):t.slice(t.length-o));default:return(e?this._truncateOnWord(t,r):t.slice(0,r))+i}},t.reverseString=function(t){return t.split("").reverse().join("")},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/SubLoading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubLoadingScreen.ts"],(function(n){var e,t,i,o;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy,i=n.director},function(n){o=n.SubLoadingScreen}],execute:function(){t._RF.push({},"2c719amJPNEH6FEvxSRmyr3","SubLoading",void 0),n("SubLoading",function(){function n(){this._loadingScreen=null}var t=n.prototype;return t.init=function(n){i.addPersistRootNode(n),this._loadingScreen=n.getComponent(o)},t.show=function(){this._loadingScreen.showIcon()},t.hide=function(){this._loadingScreen.hideIcon()},t.showFull=function(n){this._loadingScreen.showFull(n)},t.hideFull=function(){this._loadingScreen.hideFull()},t.updateLoadingText=function(n){this._loadingScreen.updateLoadingText(n)},t.setBg=function(n){this._loadingScreen.setBg(n)},e(n,null,[{key:"Instance",get:function(){return null==this._instance&&(this._instance=new n),this._instance}}]),n}())._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/SubLoadingScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoaderManager.ts"],(function(e){var n,r,i,t,o,l,a,c,u,s,p,f,g,S,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Node,c=e.ProgressBar,u=e.Label,s=e.Sprite,p=e.SpriteFrame,f=e.resources,g=e.Color,S=e.Component},function(e){d=e.LoaderManager}],execute:function(){var b,h,L,y,v,m,B,w,z,F,I,k,D,_,M;o._RF.push({},"368561ojLFHvqEmnhb5q6aV","SubLoadingScreen",void 0);var P=l.ccclass,T=l.property;e("SubLoadingScreen",(b=P("SubLoadingScreen"),h=T(a),L=T(a),y=T(c),v=T(u),m=T(s),B=T(p),b((F=n((z=function(e){function n(){for(var n,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return n=e.call.apply(e,[this].concat(o))||this,i(n,"loadingIconScreen",F,t(n)),i(n,"fullLoadingScreen",I,t(n)),i(n,"progBar",k,t(n)),i(n,"loadingLabel",D,t(n)),i(n,"fullScreenBgSprite",_,t(n)),i(n,"blackSf",M,t(n)),n}r(n,e);var o=n.prototype;return o.onLoad=function(){this.scheduleOnce((function(){f.preloadDir("loading-screen")}),10)},o.showIcon=function(){this.loadingIconScreen.active=!0},o.hideIcon=function(){this.loadingIconScreen.active=!1},o.showFull=function(e){this.progBar.progress=e,this.fullLoadingScreen.active=!0},o.hideFull=function(){this.fullLoadingScreen.active=!1},o.updateLoadingText=function(e){this.loadingLabel.string=e},o.setBg=function(e){var n=this;this.fullScreenBgSprite.spriteFrame=this.blackSf,this.fullScreenBgSprite.color=new g(0,0,0,255),d.Instance.loadSfToSprite("loading-screen/loading-ludo-"+(e+2)+"/spriteFrame",this.fullScreenBgSprite).then((function(){n.fullScreenBgSprite.color=new g(255,255,255,255)}))},n}(S)).prototype,"loadingIconScreen",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(z.prototype,"fullLoadingScreen",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(z.prototype,"progBar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(z.prototype,"loadingLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(z.prototype,"fullScreenBgSprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(z.prototype,"blackSf",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=z))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/SuperModeGameplay.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./CellController.ts","./Character.ts","./DetailUserInfo.ts","./EmoCloud.ts","./Constant.ts","./SimpleEventTarget.ts","./FinalRankingPopup.ts","./AskUsePortalPopup.ts","./BaseCellContainer.ts","./DeltaManaUI.ts","./DiceRoller.ts","./FirstMoveAnimationScreen.ts","./ManaItem.ts","./SkillButton.ts","./SlotController.ts","./StickerChatPopup.ts","./ThrowableItem.ts","./YouAreHereIndicator.ts","./YourTurnText.ts","./Global.ts","./AudioManager.ts","./LoaderManager.ts","./SceneManager.ts","./SubLoading.ts","./Networking.ts","./PopupManager.ts","./SDK.ts","./ToastUI.ts","./ExplodeAnimation.ts","./FadeTransition.ts","./GameHelper.ts","./PingPongAnimation.ts","./RoomLocalController.ts","./SmallFlags.ts","./SuperRoomNetworkController.ts","./UserPanel.ts","./l10n-manager.ts"],(function(t){var e,n,o,i,a,r,l,s,u,c,d,h,f,p,m,_,g,C,y,I,v,P,S,b,A,k,x,T,E,w,R,N,M,B,O,L,U,D,F,H,z,G,K,q,V,Y,W,X,J,Z,j,Q,$,tt,et,nt,ot,it,at,rt,lt,st,ut,ct,dt,ht,ft,pt,mt,_t,gt,Ct,yt,It,vt,Pt;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.createClass,r=t.asyncToGenerator,l=t.regeneratorRuntime},function(t){s=t.cclegacy,u=t._decorator,c=t.Node,d=t.Prefab,h=t.Button,f=t.ParticleSystem2D,p=t.v3,m=t.Tween,_=t.tween,g=t.Vec3,C=t.easing,y=t.UITransform,I=t.instantiate,v=t.Widget,P=t.Sprite,S=t.SpriteFrame,b=t.Label,A=t.Color,k=t.bezier,x=t.game,T=t.Game,E=t.sys,w=t.Component,R=t.resources},null,function(t){N=t.CellController},function(t){M=t.Character},function(t){B=t.DetailUserInfo},function(t){O=t.EmoCloud},function(t){L=t.MUSIC,U=t.SOUND,D=t.LAST_INDEX,F=t.SAFE_SQUARE_INDEX,H=t.START_INDEX,z=t.SKU_ITEM,G=t.MULTI_TOKEN_POS,K=t.SceneName,q=t.THROW_TYPE},function(t){V=t.SimpleEventTarget},function(t){Y=t.FinalRankingPopup},function(t){W=t.AskUsePortalPopup},function(t){X=t.BaseCellContainer},function(t){J=t.DeltaManaUI},function(t){Z=t.DiceRoller},function(t){j=t.FirstMoveAnimationScreen},function(t){Q=t.ManaItem},function(t){$=t.SkillButton},function(t){tt=t.SlotController},function(t){et=t.StickerChatPopup},function(t){nt=t.ThrowableItem},function(t){ot=t.YouAreHereIndicator},function(t){it=t.YourTurnText},function(t){at=t.default},function(t){rt=t.AudioManager},function(t){lt=t.LoaderManager},function(t){st=t.SceneManager},function(t){ut=t.SubLoading},function(t){ct=t.default},function(t){dt=t.default},function(t){ht=t.default},function(t){ft=t.ToastUI},function(t){pt=t.ExplodeAnimation},function(t){mt=t.FadeTransition},function(t){_t=t.GameHelper},function(t){gt=t.PingPongAnimation},function(t){Ct=t.RoomLocalController},function(t){yt=t.SmallFlags},function(t){It=t.SuperRoomNetworkController},function(t){vt=t.UserPanel},function(t){Pt=t.default}],execute:function(){var St,bt,At,kt,xt,Tt,Et,wt,Rt,Nt,Mt,Bt,Ot,Lt,Ut,Dt,Ft,Ht,zt,Gt,Kt,qt,Vt,Yt,Wt,Xt,Jt,Zt,jt,Qt,$t,te,ee,ne,oe,ie,ae,re,le,se,ue,ce,de,he,fe,pe,me,_e,ge,Ce,ye,Ie,ve,Pe,Se,be,Ae,ke,xe,Te,Ee,we,Re;s._RF.push({},"faf71/uUgxMjbApLxC/qm09","SuperModeGameplay",void 0);var Ne=u.ccclass,Me=u.property,Be=["1e69aa","d8434f","529c2d","eca83c"];t("SuperModeGameplay",(St=Ne("SuperModeGameplay"),bt=Me([X]),At=Me(c),kt=Me(j),xt=Me(d),Tt=Me(h),Et=Me(h),wt=Me(h),Rt=Me([vt]),Nt=Me(c),Mt=Me(d),Bt=Me([yt]),Ot=Me(c),Lt=Me(c),Ut=Me(d),Dt=Me(d),Ft=Me(Y),Ht=Me(c),zt=Me(ot),Gt=Me(c),Kt=Me(d),qt=Me(c),Vt=Me(W),Yt=Me(d),Wt=Me(f),Xt=Me(d),Jt=Me(d),Zt=Me(h),jt=Me([$]),Qt=Me(et),$t=Me(it),St((ne=e((ee=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"charBases",ne,i(e)),o(e,"cellContainer",oe,i(e)),o(e,"firstMoveScreen",ie,i(e)),o(e,"charPrefab",ae,i(e)),o(e,"rollButton",re,i(e)),o(e,"quitRoomButton",le,i(e)),o(e,"settingButton",se,i(e)),o(e,"userPanels",ue,i(e)),o(e,"detailUserContainer",ce,i(e)),o(e,"detailUserInfoPrefab",de,i(e)),o(e,"smallFlagContainers",he,i(e)),o(e,"diceResultAnchor",fe,i(e)),o(e,"diceRollingAnchor",pe,i(e)),o(e,"manaItemPrefab",me,i(e)),o(e,"deltaManaUIPrefab",_e,i(e)),o(e,"finalRankingPopup",ge,i(e)),o(e,"uiAnimLayer",Ce,i(e)),o(e,"youAreHereIndicator",ye,i(e)),o(e,"autoPlayScreen",Ie,i(e)),o(e,"kickFogPrefab",ve,i(e)),o(e,"portalGate",Pe,i(e)),o(e,"askUsePortalPopup",Se,i(e)),o(e,"portalPrefab",be,i(e)),o(e,"portalParticle",Ae,i(e)),o(e,"emoCloudPrefab",ke,i(e)),o(e,"finishParticlePrefab",xe,i(e)),o(e,"stickerButton",Te,i(e)),o(e,"skillButtons",Ee,i(e)),o(e,"stickerChatPopup",we,i(e)),o(e,"yourTurnText",Re,i(e)),e.bigFlagLabels=[],e._diceRollers=[],e._slotCtrls=[],e._cellNodes=[],e._baseCellContainers=[],e._myIdx=-1,e._toBeKickedTokens=[],e._toBeLosedShieldTokens=[],e._centerCellPos=p(0,20),e._roomState=null,e._isLeaving=!1,e._curManasPos=[],e._preTurn=null,e._preAction=null,e}n(e,t);var s=e.prototype;return s.onLoad=function(){var t=r(l().mark((function t(){var e,n,o,i=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:rt.Instance.stopMusic(),R.preloadDir("audio/sound"),this.scheduleOnce((function(){ut.Instance.hideFull()}),20),this._initBoard(),this.stickerButton.node.active=!this.isLocal,x.on(T.EVENT_SHOW,(function(){var t;i.isLocal||1!==(null==(t=i._roomState)?void 0:t.phase)||st.Instance.moveToScene(K.GAMEPLAY_SUPER)})),this.skillButtons[0].setCallback((function(){V.emit("USE_SHIELD")})),this.skillButtons[1].setCallback((function(){V.emit("USE_X2_DICE")})),e=this.skillButtons[2].node.getChildByName("dice-value-buttons"),this.skillButtons[2].setCallback((function(){e.getComponent(mt).show()})),e.children.forEach((function(t,n){t.on(h.EventType.CLICK,(function(){V.emit("USE_DICE_CONTROL",n+1),e.getComponent(mt).hide()}))})),this.node.on(c.EventType.TOUCH_END,(function(t){t.target.isChildOf(i.detailUserContainer)||i.detailUserContainer.destroyAllChildren(),t.target.isChildOf(i.stickerChatPopup.node)||i.stickerChatPopup.hide(),t.target.isChildOf(e)||e.getComponent(mt).hide()}),this,!0),this.stickerButton.node.on(h.EventType.CLICK,(function(){i.stickerChatPopup.isShowing()?i.stickerChatPopup.hide():i.stickerChatPopup.show()})),this.autoPlayScreen.on(c.EventType.TOUCH_END,(function(){V.emit("STOP_AUTO_PLAY"),i.autoPlayScreen.active=!1})),V.on("ON_UPDATE_MANA_AMOUNT",(function(t){if(i._inited){var e=t.desc,n=void 0===e?"":e,o=t.amount,a=void 0===o?0:o,r=t.slotIdx,l=["shield","x2-dice","dice-control"].indexOf(n);l>=0&&i._myIdx===r?i._showDeltaManaAtNode(i.skillButtons[l].node,a):"in-base-too-long"===n&&(i._showDeltaManaAtNode(i._baseCellContainers[r].node,a),i._updateManaAmount(r))}}),this),V.on("ON_SPECIAL_NOTI",(function(t){if(i._inited){var e=t.desc;"third-six"===e?ft.Instance.show(Pt.t("roll-6-3-times")):"not-enough-candy-portal"===e&&ft.Instance.show(Pt.t("not-enough-candy-portal"))}}),this),V.on("slots",(function(t){if(console.log("start init slot"),!i._inited)try{i.initSlots(t)}catch(t){console.error(t)}}),this),V.on("action",(function(t){i._inited&&i.onActionChange(t)}),this),V.on("phase",(function(t){var e=t.curPhase,n=t.prePhase;i._inited&&i.onPhaseChange(e,n)}),this),V.on("curTurn",(function(t){var e=t.curTurn,n=t.preTurn;i._inited&&i.onTurnChange(e,n)}),this),V.on("actionContext",(function(t){var e=t.curCtx;t.preCtx;if(i._inited)if("portal"===e.type&&i.isMyTurn()){var n=e.fromPos,o=e.toPos,a=e.tokenId,r=e.slotIdx;i.askUsePortalPopup.show((function(t){V.emit("PORTAL_DECISION",t)}),[n,o].map((function(t){return i._cellNodes[t].getChildByName("Portal")})),i._slotCtrls[r].characters[a].node)}else i.askUsePortalPopup.hide()}),this),V.on("gameStarted",r(l().mark((function t(e){var n,o,a,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.curGameStarted,o=e.preGameStarted,n&&ut.Instance.hideFull(),i._inited){t.next=4;break}return t.abrupt("return");case 4:if(null!=o){t.next=6;break}return t.abrupt("return");case 6:return a=i._roomState.slots,(r=i.userPanels.map((function(t){return t.avatarSprite.node}))).forEach((function(t){t.active=!1})),i.userPanels.forEach((function(t){t.setHighlightEnable(!1)})),i.skillButtons[0].node.parent.active=!1,i.firstMoveScreen.setData(a,a[i._myIdx],r),t.next=14,i.firstMoveScreen.startAnimation(i.curTurn);case 14:r.forEach((function(t){t.active=!0})),i.skillButtons[0].node.parent.active=!0,i.youAreHereIndicator.show(i._roomState.is2V2),i._slotCtrls[i.curTurn].userPanel.setHighlightEnable(!0);case 18:case"end":return t.stop()}}),t)}))),this),V.on("onChangeTurnAndAction",(function(t){var e=t.curTurn,n=t.action;e!==i._preTurn&&(i.onTurnChange(e,i._preTurn),i._preTurn=e),i.onActionChange(n)}),this),V.on("ON_GET_ROOM_STATE",(function(){i.isLocal?i._roomState=i.getComponent(Ct).state:i._roomState=i.getComponent(It).state}),this),V.on("ON_ROLL_DICE_RESULT",(function(t){i._inited&&(i._onRollResult(t),i._clearHightLight())}),this),V.on("ON_MOVE_CHAR",(function(t){i._inited&&t.forEach((function(t){var e=t.slotIdx,n=t.tokenIdx,o=t.curPos,a=t.type,r=i._slotCtrls[e].characters[n],l=r.posIdx;if("normal"===a)-1===l?i._moveCharToFirstCell(r):-1===o?i._toBeKickedTokens.push(r):i._onChoosingToken(r,l,o);else if("portal"===a){r.posIdx=o,i._transitionOutCell(l);var s=g.add(p(),i.cellContainer.getComponent(y).convertToNodeSpaceAR(i._cellNodes[o].worldPosition),i._centerCellPos);rt.Instance.playSound(U.TELEPORT),r.node.setPosition(i._centerCellPos),r.node.setParent(i.cellContainer,!0),_(r.node).set({active:!0,scale:g.ONE}).to(.6,{scale:g.ZERO},{easing:C.elasticIn}).delay(.2).set({position:s}).to(.6,{scale:g.ONE},{easing:C.elasticOut}).call((function(){r.node.setParent(i._cellNodes[o]),r.node.setPosition(i._centerCellPos),i._transitionInCell(o),i._updateTokenCharRotation(r)})).start(),i._showDeltaManaAtNode(i._cellNodes[l],at.getManaDelta("PORTAL")),i._updateManaAmount(e)}}))}),this),V.on("rollResult",(function(t){var e,n=t.curRollResult,o=t.preRollResult;i._inited&&(null==o&&0!==i._roomState.action&&(null==(e=i._slotCtrls[i.curTurn])||e.diceRoller.showResult(n)))}),this),V.on("ON_SHOW_RANKING_POPUP",r(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i._inited){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,ht.showMidGameAd();case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.error(t.t0);case 10:i.finalRankingPopup.show(),i.finalRankingPopup.setData(e);case 12:case"end":return t.stop()}}),t,null,[[2,7]])}))),this),V.on("SHOW_STICKER",(function(t){var e=t[0],n=t[1];if(i._inited){var o=e<0?i._myIdx:e;i._slotCtrls[o].userPanel.showEmo(n)}}),this),V.on("THROW_ITEM",(function(t){var e=t[0],n=t[1],o=t[2];if(i._inited){var a=q[o];lt.Instance.loadAsset("throwables/anim/"+a,d).then((function(t){var o=I(t).getComponent(nt);o.node.setParent(i._slotCtrls[0].userPanel.node.parent);var a=[e<0?i._myIdx:e,n].map((function(t){var e=i._slotCtrls[t].userPanel;return e.node.parent.getComponent(y).convertToNodeSpaceAR(e.avatarSprite.node.worldPosition)})),r=a[0],l=a[1];o.playThrowAnim(r,l)}))}}),this),V.on("ON_LEAVE",(function(){!i._isLeaving&&i.isValid&&(i._isLeaving=!0,i._roomState.phase>0&&at.gameCounter++,st.Instance.moveToScene(K.HOME))}),this),this.rollButton.node.on(h.EventType.CLICK,this._onRollBtnClick,this),n=l().mark((function t(e){var n,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:V.on("slot."+e+".rank",(function(t){var n=t.curRank,o=t.preRank;if(i._inited){var a=i._roomState.slots[e].disconnected,r=i._slotCtrls[e].rankLabel,l=i._slotCtrls[e].userPanel;if(r.string=""+(n+1),a)l.disabled=!0,r.node.parent.active=!1,i._slotCtrls[e].characters.forEach((function(t){t.setHideByFinished(!0)})),i._roomState.slots.every((function(t){return null==t.player||t.rank>=0}))&&i._roomState.slots.forEach((function(t,e){i._slotCtrls[e].rankLabel.node.parent.active=t.rank>=0&&!t.disconnected}));else null==o&&(r.node.parent.active=n>=0,n>=0&&i._slotCtrls[e].characters.forEach((function(t){t.setHideByFinished(!0)})))}}),i),V.on("slot."+e+".player",(function(t){if(i._inited){var n=i._getUiIdxFromSlotIdx(e);i._slotCtrls[e].userPanel.setData(t,i.getColorBySlotIdx(e)),i._slotCtrls[e].userPanel.node.on(h.EventType.CLICK,(function(o){var a;if(o.target===i._slotCtrls[e].userPanel.node&&!i.isLocal&&(o.propagationStopped=!0,(null==(a=i.detailUserContainer.getComponentInChildren(B))?void 0:a.slotIdx)!==e)){i.detailUserContainer.destroyAllChildren();var r=I(i.detailUserInfoPrefab);r.setParent(i.detailUserContainer),r.getComponent(B).setData(t,e,n,i._myIdx!==e)}}))}}),i),V.on("slot."+e+".autoPlay",(function(t){e===i._myIdx&&(i.autoPlayScreen.active=t)}),i),V.on("slot."+e+".manaAmount",(function(t){var n=t.curManaAmount,o=t.preManaAmount;i._inited&&null==o&&i._slotCtrls[e].userPanel.setManaAmount(n)}),i),V.on("slot."+e+".usingSkills",(function(t){var n=t.item;t.key;if(i._inited){i._updateManaAmount(e),i._updateSkillButtonStates();var o=i._slotCtrls[e].userPanel;null!=n?(o.useSkill(n),rt.Instance.playSound(U.SKILL_ACTIVATE)):o.setUsingSkillStatus(i._roomState.slots[e].usingSkills.toArray())}}),i),n=l().mark((function t(n){var o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o="slot."+e+".token."+n+".shielded",V.on(o,(function(t){var o=t.curShielded,a=t.preShielded;if(i._inited){var r=i._slotCtrls[e].characters[n];null==a?r.shieldEffect.active=o:0===i._roomState.action?!1===a?r.showShield():r.hideShield():2===i._roomState.action&&i._toBeLosedShieldTokens.push(r)}}),i);case 2:case"end":return t.stop()}}),t)})),o=0;case 7:if(!(o<4)){t.next=12;break}return t.delegateYield(n(o),"t0",9);case 9:o++,t.next=7;break;case 12:case"end":return t.stop()}}),t)})),o=0;case 34:if(!(o<4)){t.next=39;break}return t.delegateYield(n(o),"t0",36);case 36:o++,t.next=34;break;case 39:this.isLocal&&(this.quitRoomButton.node.setPosition(this.quitRoomButton.node.position.x,0),this.settingButton.node.setPosition(this.settingButton.node.position.x,0)),this.settingButton.node.on(h.EventType.CLICK,(function(){dt.Instance.open("SettingPopup",{showSignOutButton:!1})})),this.quitRoomButton.node.on(h.EventType.CLICK,(function(){if(1===i._roomState.phase){var t=Pt.t("ask-quit-game");(i._roomState.slots[i._myIdx].rank<0||i._roomState.is2V2)&&i._roomState.bet>0&&(t=Pt.t(i._roomState.isArena?"ask-quit-game-lose-cake":"ask-quit-game-lose-candy",{amount:_t.formatNumber(i._roomState.bet,5)})),_t.showAlert({message:t,okCb:function(){ut.Instance.show(),V.emit("LEAVE")},showCancel:!0})}else ut.Instance.show(),V.emit("LEAVE")})),V.on("TOKEN_CHOOSED",(function(t){i._inited&&(i._clearHightLight(),V.emit("CHOOSING_TOKEN",t))}),this);case 43:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.start=function(){this.isLocal?this.addComponent(Ct):this.addComponent(It),ht.gameplayStart()},s.onPhaseChange=function(t,e){var n=this;ut.Instance.hide(),null==e&&t>=1&&(rt.Instance.playMusic(L.GAME_ROOM_SWEETY),this._roomState.slots.forEach((function(t,e){var o=null!=t.player;t.tokens.forEach((function(t){n._slotCtrls[t.playerIdx].characters[t.id].setHidePlayerNull(!o)})),n._slotCtrls[e].userPanel.node.active=o})))},s._onRollBtnClick=function(){V.emit("REQUEST_ROLL_DICE")},s._highlightPlayableChars=function(t){var e=this._slotCtrls[t.playerIdx].characters[t.id];try{e.playReady()}catch(t){console.error(t)}this.isMyTurn()&&e.setHighlightEnable(!0)},s._getAllCellIdxInRange=function(t,e){var n=[];if(e<0||t<0)return[];if(t<52&&e<52){var o=(e-t+52)%52;n=Array.from({length:o},(function(e,n){return(t+n+1)%52}))}else if(t<52&&e>=52){var i=Math.floor((e-52)/6),a=(H[i]-2+52)%52,r=Array.from({length:(a-t+52)%52},(function(e,n){return(t+n+1)%52})),l=52+6*i,s=Array.from({length:e-l+1},(function(t,e){return l+e}));n=[].concat(r,s)}else if(t>=52&&e>=52){var u=(e-t+76)%76;n=Array.from({length:u},(function(e,n){return(t+n+1)%76}))}return n},s._onChoosingToken=function(t,e,n){var o=this;this._slotCtrls[this.curTurn].diceRoller.hideResult(),this._clearHightLight(),m.stopAllByTarget(t.node),m.stopAllByTarget(t.charAnchor);var i=_(t.node),a=_(t.charAnchor),r=this._getAllCellIdxInRange(e,n);t.posIdx=n;var l=.175;try{t.playJump()}catch(t){console.error(t)}this._transitionOutCell(e),t.node.setParent(this.cellContainer,!0),t.node.setScale(g.ONE),t.setHideBySamePos(!1),t.setAmount(1);var s=D.includes(n);r.forEach((function(n,u){var c=o._cellNodes[n],d=u===r.length-1,h=d?.35:l;d&&s&&(h=3*l);var f=0===u?o._cellNodes[e]:o._cellNodes[r[u-1]];i.call((function(){t.playJump(h),d&&s&&(m.stopAllByTarget(o.portalGate),_(o.portalGate).set({active:!0,scale:g.ZERO}).to(.15,{scale:g.ONE}).start());var e=c.position.x-f.position.x<0?-1:1;t.charAnchor.setScale(e,1)})).to(h,{position:p(c.position.x,c.position.y+20)},{onUpdate:function(t,e){if(o.isValid&&d&&s&&e>=.5){var n=1-C.quintIn(2*(e-.5));t.setScale(n,n)}}}).call((function(){D.includes(n)?(rt.Instance.playSound(U.JUMP_IN_PORTAL),o.portalParticle.resetSystem(),m.stopAllByTarget(o.portalGate),_(o.portalGate).set({scale:g.ONE}).delay(.5).to(.15,{scale:g.ZERO}).set({active:!1}).call((function(){var e=o.cellContainer.getComponent(y),i=o._baseCellContainers[t.playerIdx],a=e.convertToNodeSpaceAR(i.node.worldPosition);if(o._showDeltaManaAtNode(o._cellNodes[n],at.getManaDelta("TOKEN_FINISHED")),o._updateManaAmount(t.playerIdx),o._slotCtrls[t.playerIdx].characters.every((function(t){return D.includes(t.posIdx)}))){rt.Instance.playSound(U.FINISHED);var r=I(o.finishParticlePrefab);r.setParent(o.cellContainer),r.setPosition(a),o.scheduleOnce((function(){r.destroy(),o._updateManaAmount(t.playerIdx),o._updateManaAmount((t.playerIdx+2)%4)}),2),o._roomState.slots.forEach((function(t,e){o.bigFlagLabels[o._getUiIdxFromSlotIdx(e)].node.parent.active=t.rank>=0&&!t.disconnected}))}else{var l=I(o.emoCloudPrefab).getComponent(O);l.node.setParent(o.cellContainer),l.node.setPosition(a),l.playAnim(3)}})).start()):c.getComponent(N).playUpDownAnim()}));var v=d?80:20;a.set({position:t.skinOriginPos}).by(h/2,{position:p(0,v,0)},{easing:C.quartOut}).by(h/2,{position:p(0,-v,0)},{easing:C.quartIn})}));var u=this.isMyTurn();i.call((function(){try{t.playIdle()}catch(t){console.error(t)}t.playOnLandAnim();var e=o._cellNodes[n];t.node.setParent(e),t.node.setPosition(o._centerCellPos),o._updateTokenCharRotation(t);var i=o.cellContainer.getComponent(y),a=i.convertToNodeSpaceAR(t.node.worldPosition);if(t.canPlayShameSticker()){F.includes(t.posIdx)||(t.shameStickerPlayed=!0);var r=I(o.emoCloudPrefab).getComponent(O);r.node.setParent(o.cellContainer),r.node.setPosition(g.add(p(),a,p(10,60))),r.playAnim(1)}o._toBeKickedTokens.forEach((function(t){var r=I(o.kickFogPrefab);r.setParent(o.cellContainer),r.setPosition(g.add(p(),e.position,o._centerCellPos)),r.getComponent(pt).play(),t.posIdx=-1;var l=o._baseCellContainers[t.playerIdx].cells[t.tokenId];t.node.setParent(o.cellContainer),t.node.setPosition(a),t.showKickParticles();var s=i.convertToNodeSpaceAR(l.worldPosition),u=_(t.node);o._getAllCellIdxInRange(H[t.playerIdx],n).filter((function(t,e,n){if(0===e||e===n.length-1)return!0;var i=[e-1,e,e+1].map((function(t){return o._cellNodes[n[t]].position})),a=i[0],r=i[1],l=i[2],s=g.subtract(p(),r,a).normalize(),u=g.subtract(p(),l,r).normalize();return g.dot(s,u)<.9})).map((function(t){return p(o._cellNodes[t].position.x,o._cellNodes[t].position.y+20)})).reverse().forEach((function(t,e,n){if(0!==e){var o=g.subtract(p(),t,n[e-1]).length();u.to(o/1500,{position:t})}}));var c=.35;u.call((function(){_(t.charAnchor).set({position:t.skinOriginPos}).by(.175,{position:p(0,100)},{easing:C.quartOut}).by(.175,{position:p(0,-100)},{easing:C.quartIn}).start()})).to(c,{position:s}).call((function(){t.node.setParent(l),t.node.setPosition(0,0),t.hideKickParticles(),o._updateTokenCharRotation(t);var e=i.convertToNodeSpaceAR(l.parent.worldPosition),n=I(o.emoCloudPrefab).getComponent(O);n.node.setParent(o.cellContainer),n.node.setPosition(e),n.playAnim(0)}));var d=I(o.emoCloudPrefab).getComponent(O);d.node.setParent(o.cellContainer),d.node.setPosition(g.add(p(),a,p(10,60))),d.playAnim(2),u.start()})),o._toBeLosedShieldTokens.forEach((function(t){!1===o._roomState.slots[t.playerIdx].tokens[t.tokenId].shielded&&t.hideShield()})),o._toBeLosedShieldTokens.length=0,o._toBeKickedTokens.length=0,o._transitionInCell(n);var l=o._curManasPos.indexOf(n)>=0;o._updateManaPos(t),l&&o._curManasPos.indexOf(n)>=0&&u&&ft.Instance.show(Pt.t("noti-max-mana")),o._toBeKickedTokens.length>0&&(o._updateManaAmount(t.playerIdx),o._showDeltaManaAtNode(o._cellNodes[n],at.getManaDelta("KICK")*o._toBeKickedTokens.length))})).start(),a.start()},s.onTurnChange=function(t,e){if(!(t<0||this.firstMoveScreen.node.active)){this._tryToShowClickOnAvatarGuide();var n=this._slotCtrls[t].userPanel;if(null==n||n.setHighlightEnable(!0),null!=e&&e>=0&&(this._slotCtrls[e].userPanel.setHighlightEnable(!1),this._slotCtrls[e].diceRoller.hideResult()),this.isLocal){var o=this._getUiIdxFromSlotIdx(t),i=this.rollButton.getComponent(v);i.left=12,i.right=12,i.top=120,i.bottom=120,i.isAlignLeft=1===o||2===o,i.isAlignBottom=0===o||1===o,i.isAlignRight=0===o||3===o,i.isAlignTop=2===o||3===o}}},s.initSlots=function(t){var e=this;if(this.isLocal?this._myIdx=0:t.forEach((function(t,n){var o;e.isMe(null==(o=t.player)?void 0:o.uid)&&(e._myIdx=n,at.myIdx=e._myIdx)})),console.assert(-1!==this._myIdx),console.log("my idx",this._myIdx),this._myIdx<0)console.log("abnormal my idx",this._myIdx);else{this._initCellIdxAndColor(),this._roomState.portals.forEach((function(t){e._cellNodes[t].addChild(I(e.portalPrefab))})),this._curManasPos=this._roomState.manas.toArray(),this._curManasPos.forEach((function(t){e._cellNodes[t].addChild(I(e.manaItemPrefab))}));var n=new Set;this._slotCtrls.forEach((function(t,o){var i=e._roomState.slots[o],a=e._getUiIdxFromSlotIdx(o);t.diceRoller=e._diceRollers[a],t.diceRoller.setSkin(i.equippingDice),t.userPanel=e.userPanels[a],t.userPanel.setUsingSkillStatus(i.usingSkills.toArray()),t.charFinishedIndicator=e.smallFlagContainers[a],t.rankLabel=e.bigFlagLabels[a],t.characters.forEach((function(t,r){var l=i.tokens[r],s=l.posIdx,u=s<0?e._baseCellContainers[o].cells[r]:e._cellNodes[s];t.node.setParent(u),t.init(o,s,r,e.getColorBySlotIdx(o),a),t.initSkin(i.equippingChar),e._updateTokenCharRotation(t),s>=0&&n.add(l.posIdx)}))}));var o=this._roomState.slots[this._myIdx].equippingDice||z.DICE_DEFAULT;lt.Instance.loadDiceThumb(o).then((function(t){e.isValid&&(e.rollButton.getComponentInChildren(P).spriteFrame=t)})),n.forEach((function(t){e._updateCharPosInOneSquare(t)}))}},s.onActionChange=function(t){var e,n=this;if(this._updateSkillButtonStates(),!(this.curTurn<0)){var o=this.isMyTurn();this.rollButton.node.active=0===t&&o;var i=null==(e=this._slotCtrls[this.curTurn])?void 0:e.userPanel;if(null!=i)if(0===t&&(i.startCountDown(this._roomState.turnDuration),o&&this.yourTurnText.show()),1===t)this.getPlayableTokens().forEach((function(t){n._highlightPlayableChars(t)})),i.startCountDown(this._roomState.turnDuration)}},s._initBoard=function(){this.userPanels.forEach((function(t){t.node.active=!1}));for(var t=0;t<4;t++){for(var e=new tt,n=0;n<4;n++){var o=I(this.charPrefab).getComponent(M);o.setHidePlayerNull(!0),e.characters.push(o)}this._slotCtrls.push(e);var i=new c("dice-roller"),a=i.addComponent(Z);a.init(this.diceRollingAnchor,this.diceResultAnchor,t),i.setParent(this.diceRollingAnchor),this._diceRollers.push(a)}},s._initCellIdxAndColor=function(){var t=this;this.cellContainer.walk((function(e){var n=parseInt(e.name,10);if(!Number.isNaN(n))return n=n<52?(n+13*t._myIdx)%52:52+(n-52+6*t._myIdx)%24,t._cellNodes[n]=e,void e.addComponent(N);var o=e.name.split("-"),i=o[0],a=o[1],r=t._getSlotIdxFromUiIdx(parseInt(a,10)),l=t.getColorBySlotIdx(r);if(["base_skin","des","flower","arrow","big_flag","last"].includes(i)){if("base_skin"===i){var s=t._roomState.slots[r].equippingBase||"bases.default";return"bases.default"===s&&(s+="-sweety"),void lt.Instance.loadAsset("bases/ingame/"+s.split(".")[1],d).then((function(n){if(t.isValid){var o=I(n);e.addChild(o),t._slotCtrls[r].userPanel.setBaseSkin(o,l)}}))}var u=(["des","flower","arrow","big_flag"].includes(i)?"gameplay-common":"color-tile-sweety")+"/"+i+"-"+l+"/spriteFrame";lt.Instance.loadAsset(u,S).then((function(t){e.getComponent(P).spriteFrame=t})),"des"===i&&lt.Instance.loadAsset("gameplay-common/small-flag-"+l+"/spriteFrame",S).then((function(t){e.children.forEach((function(e){e.getComponent(P).spriteFrame=t}))})),"big_flag"===i&&(t.bigFlagLabels[a]=e.getComponentInChildren(b),e.getComponentInChildren(b).color=(new A).fromHEX("#"+Be[l]))}})),this.charBases.forEach((function(e,n){t._baseCellContainers[n]=t.charBases[(n-t._myIdx+4)%4]}))},s._moveCharToFirstCell=function(t){var e,n=this,o=H[t.playerIdx],i=this._cellNodes[o];null==(e=this._slotCtrls[this.curTurn])||e.diceRoller.hideResult(),this._clearHightLight();var a=this.cellContainer.getComponent(y).convertToNodeSpaceAR(i.worldPosition);t.node.setParent(this.cellContainer,!0),t.posIdx=o;var r=.35;rt.Instance.playSound(U.MOVE_FROM_START),m.stopAllByTarget(t.node),m.stopAllByTarget(t.charAnchor);var l=_(t.node),s=_(t.charAnchor);l.to(r,{position:p(a.x,a.y+20)}).call((function(){t.node.setParent(i),t.node.setPosition(n._centerCellPos),t.playIdle(),i.getComponent(N).playUpDownAnim(),t.playOnLandAnim(),n._updateTokenCharRotation(t),n._transitionInCell(o),n._updateManaPos(t),n._curManasPos.indexOf(o)>=0&&n.isMyTurn()&&ft.Instance.show(Pt.t("noti-max-mana"))})).start(),t.playJump(),s.set({position:t.skinOriginPos}).by(.175,{position:p(0,100)},{easing:C.quartOut}).by(.175,{position:p(0,-100)},{easing:C.quartIn}).start()},s._updateCharPosInOneSquare=function(t){var e=this;if(!(t<0||D.includes(t))){var n=this._getAllTokensInCellMap(t),o=n.reduce((function(t,e){return e.length>0?t+1:t}),0);if(0!==o)if(o>1){[2,1,3,0].forEach((function(t,o){var i=e._getSlotIdxFromUiIdx(t),a=n[i],r=G[t],l=r[0],s=r[1];a.forEach((function(t,n){var o=e._slotCtrls[t.playerIdx].characters[t.tokenId];o.node.setSiblingIndex(-1),o.setHideBySamePos(n!==a.length-1),o.setAmount(a.length),o.node.setRTS(null,p(l,s),p(.8,.8,1))}))}))}else{var i=n.find((function(t){return t.length>0}));i.forEach((function(t,n){var o=e._slotCtrls[t.playerIdx].characters[t.tokenId];o.node.setRTS(null,e._centerCellPos,g.ONE),o.setHideBySamePos(n!==i.length-1),o.setAmount(i.length)}))}}},s._transitionInCell=function(t){var e=this;if(!(t<0||D.includes(t))){var n=this._getAllTokensInCellMap(t),o=n.reduce((function(t,e){return e.length>0?t+1:t}),0);if(0!==o)if(o>1){[2,1,3,0].forEach((function(t,o){var i=e._getSlotIdxFromUiIdx(t),a=n[i],r=G[t],l=r[0],s=r[1];a.forEach((function(t,n){var o=e._slotCtrls[t.playerIdx].characters[t.tokenId];o.node.setSiblingIndex(-1),_(o.node).to(.35,{position:p(l,s),scale:p(.8,.8,1)}).call((function(){o.setHideBySamePos(n!==a.length-1),o.setAmount(a.length)})).start()}))}))}else{var i=n.find((function(t){return t.length>0}));i.forEach((function(t,n){var o=e._slotCtrls[t.playerIdx].characters[t.tokenId];_(o.node).to(.25,{position:e._centerCellPos,scale:p(1,1,1)}).call((function(){o.setHideBySamePos(n!==i.length-1),o.setAmount(i.length)})).start()}))}}},s._transitionOutCell=function(t){var e=this,n=this._getAllTokensInCellMap(t),o=n.reduce((function(t,e){return e.length>0?t+1:t}),0);if(0!==o)if(o>1){[2,1,3,0].forEach((function(t,o){var i=e._getSlotIdxFromUiIdx(t),a=n[i];a.forEach((function(t,n){var o=e._slotCtrls[t.playerIdx].characters[t.tokenId];o.setHideBySamePos(n!==a.length-1),o.setAmount(a.length)}))}))}else{var i=n.find((function(t){return t.length>0}));i.forEach((function(t,n){var o=e._slotCtrls[t.playerIdx].characters[t.tokenId];o.setHideBySamePos(n!==i.length-1),o.setAmount(i.length),_(o.node).to(.25,{position:e._centerCellPos,scale:g.ONE}).start()}))}},s._getAllTokensInCellMap=function(t){var e=this,n=[];return this._slotCtrls.forEach((function(o,i){var a=e._roomState.slots[i],r=a.player,l=a.rank;null==r||l>=0?n.push([]):n.push(o.characters.filter((function(e){return e.posIdx===t})))})),n},s._showDeltaManaAtNode=function(t,e){var n=I(this.deltaManaUIPrefab);n.setParent(this.uiAnimLayer);var o=this.uiAnimLayer.getComponent(y).convertToNodeSpaceAR(t.worldPosition);n.setPosition(o.x,o.y+60,0),n.getComponent(J).setAmount(e)},s._updateManaPos=function(t){var e=this,n=this._roomState.manas.toArray();this._curManasPos.forEach((function(o,i){if(o!==n[i]){var a=e._cellNodes[o].getComponentInChildren(Q),r=I(e.manaItemPrefab);r.setParent(e.uiAnimLayer);var l=e.uiAnimLayer.getComponent(y),s=l.convertToNodeSpaceAR(a.node.worldPosition),u=l.convertToNodeSpaceAR(e._slotCtrls[t.playerIdx].userPanel.manaAmountLabel.node.worldPosition),c=p(),d=g.subtract(c,u,s).length();c.set(-c.y,c.x,c.z).normalize();var h=function(t){var e=p();return g.lerp(e,s,u,t),g.add(e,e,g.multiplyScalar(p(),c,.2*d)),e},f=h(.33),m=h(.66);r.getComponent(gt).destroy(),r.setPosition(s),e.scheduleOnce((function(){_(r).to(1*d/700,{},{onUpdate:function(t,n){if(e.isValid){var o=k(s.x,f.x,m.x,u.x,n),i=k(s.y,f.y,m.y,u.y,n);t.setPosition(o,i)}}}).destroySelf().start()}),.5),a.node.destroy(),e._cellNodes[n[i]].addChild(I(e.manaItemPrefab)),e._showDeltaManaAtNode(e._cellNodes[o],at.getManaDelta("MANA_CELL")),rt.Instance.playSound(U.COLLECT_GOLDEN_CANDY)}})),this._curManasPos=n,this._updateManaAmount(t.playerIdx)},s._updateManaAmount=function(t){this._slotCtrls[t].userPanel.setManaAmount(this._roomState.slots[t].manaAmount)},s._updateSkillButtonStates=function(){var t=this.skillButtons[0].node.parent.getChildByName("arrow-anchor");if(this.isMyTurn()&&0===this._roomState.action){var e=this._roomState.slots[this.curTurn];e.rank>=0&&this._roomState.is2V2&&(e=this._roomState.slots[(this.curTurn+2)%4]);var n=e.manaAmount,o=void 0===n?0:n,i=function(t){return e.usingSkills.includes(t)};this.skillButtons[0].setActive(!i("shield")&&o>=2),this.skillButtons[1].setActive(!i("x2-dice")&&o>=3),this.skillButtons[2].setActive(!i("dice-control")&&o>=4),t.active=10===e.manaAmount&&0===e.usingSkills.length}else t.active=!1,this.skillButtons.forEach((function(t){t.setActive(!1)}))},s.getPlayableTokens=function(){var t=this,e=this._roomState.slots[this.curTurn];e.tokens.every((function(t){return t.posIdx===57+6*e.idx}))&&(e=this._roomState.slots[(this.curTurn+2)%4]);var n=e.tokens,o=[];return n.forEach((function(e){(e.posIdx<0&&t._roomState.rollResult>=6||e.posIdx>=0&&e.posIdx+t._roomState.stepAmount<=57+6*e.playerIdx)&&o.push(e)})),o},s._clearHightLight=function(){try{this._slotCtrls.forEach((function(t){t.userPanel.node.active&&t.characters.forEach((function(t){t.setHighlightEnable(!1);var e=t.skin.getCurrent(0);null!=e&&["Idle","Idle_Random_1"].includes(e.animation.name)||t.playIdle()}))}))}catch(t){console.error(t)}this._slotCtrls[this.curTurn].userPanel.stopCountDown()},s._onRollResult=function(t){this._slotCtrls[this.curTurn].diceRoller.rollDice(t)},s.isMyTurn=function(){return this.isLocal?!this._roomState.slots[this.curTurn].isBot:this.curTurn===this._myIdx},s.isMe=function(t){return at.userInfo._id===t},s.getColorBySlotIdx=function(t){var e;return(((null==(e=this._roomState)?void 0:e.slots[this._myIdx].colorIdx)||0)+this._getUiIdxFromSlotIdx(t))%4},s._getNextCellOfToken=function(t){var e=(t.posIdx+1)%(t.posIdx<=51?52:this._cellNodes.length);return e===H[t.playerIdx]&&(e=52+6*t.playerIdx),this._cellNodes[e]},s._updateTokenCharRotation=function(t){var e=1;t.posIdx<0?e=0===t.uiIdx||1===t.uiIdx?1:-1:e=this._getNextCellOfToken(t).position.x-this._cellNodes[t.posIdx].position.x<0?-1:1;t.charAnchor.setScale(e,1),D.includes(t.posIdx)&&(this._updateFlagAmount(t.playerIdx),t.setHideByFinished(!0))},s._updateFlagAmount=function(t){var e=this._roomState.slots[t].tokens.filter((function(t){return D.includes(t.posIdx)})).length||0;this._slotCtrls[t].charFinishedIndicator.setFlagAmount(e)},s._getUiIdxFromSlotIdx=function(t){return(4-this._myIdx+t)%4},s._getSlotIdxFromUiIdx=function(t){return(this._myIdx+t)%4},s._setSkillButtonEnable=function(t,e){t.getComponent(P).color=(new A).fromHEX(e?"#FF0000":"750000"),t.interactable=e},s.onDestroy=function(){V.removeAll(this),ht.gameplayStop(),x.off(T.EVENT_SHOW)},s._tryToShowClickOnAvatarGuide=function(){var t=this;this.isLocal||this._roomState.curTurn===this._myIdx||"0"===(E.localStorage.getItem("click-on-avatar")||"0")&&(lt.Instance.loadAsset("first-time-guide/ClickOnAvatarGuide",d).then((function(e){t.isValid&&t.detailUserContainer.addChild(I(e))})),E.localStorage.setItem("click-on-avatar","1"))},a(e,[{key:"curTurn",get:function(){var t;return null==(t=this._roomState)?void 0:t.curTurn}},{key:"isLocal",get:function(){return null==ct.gameRoom}},{key:"_inited",get:function(){return this._myIdx>=0}}]),e}(w)).prototype,"charBases",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),oe=e(ee.prototype,"cellContainer",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=e(ee.prototype,"firstMoveScreen",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=e(ee.prototype,"charPrefab",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=e(ee.prototype,"rollButton",[Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=e(ee.prototype,"quitRoomButton",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=e(ee.prototype,"settingButton",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=e(ee.prototype,"userPanels",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ce=e(ee.prototype,"detailUserContainer",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=e(ee.prototype,"detailUserInfoPrefab",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=e(ee.prototype,"smallFlagContainers",[Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fe=e(ee.prototype,"diceResultAnchor",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=e(ee.prototype,"diceRollingAnchor",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=e(ee.prototype,"manaItemPrefab",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=e(ee.prototype,"deltaManaUIPrefab",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=e(ee.prototype,"finalRankingPopup",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=e(ee.prototype,"uiAnimLayer",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=e(ee.prototype,"youAreHereIndicator",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=e(ee.prototype,"autoPlayScreen",[Gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=e(ee.prototype,"kickFogPrefab",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=e(ee.prototype,"portalGate",[qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=e(ee.prototype,"askUsePortalPopup",[Vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=e(ee.prototype,"portalPrefab",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=e(ee.prototype,"portalParticle",[Wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=e(ee.prototype,"emoCloudPrefab",[Xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=e(ee.prototype,"finishParticlePrefab",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=e(ee.prototype,"stickerButton",[Zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=e(ee.prototype,"skillButtons",[jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),we=e(ee.prototype,"stickerChatPopup",[Qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=e(ee.prototype,"yourTurnText",[$t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=ee))||te));s._RF.pop()}}}));

System.register("chunks:///_virtual/SuperRoomNetworkController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Commands.ts","./Constant.ts","./SimpleEventTarget.ts","./Networking.ts","./GameHelper.ts"],(function(t){var e,o,n,r,s,i,a,c,u,m,l,_,h;return{setters:[function(t){e=t.inheritsLoose,o=t.asyncToGenerator,n=t.regeneratorRuntime,r=t.createClass},function(t){s=t.cclegacy,i=t._decorator,a=t.Component,c=t.sys},function(t){u=t.Command},function(t){m=t.Transfer},function(t){l=t.SimpleEventTarget},function(t){_=t.default},function(t){h=t.GameHelper}],execute:function(){var f;s._RF.push({},"74147bhGqhKjbQ9mPeWrPHT","SuperRoomNetworkController",void 0);var E=i.ccclass;i.property,t("SuperRoomNetworkController",E("SuperRoomNetworkController")(f=function(t){function s(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this)._room=null,e._disposers=[],e}e(s,t);var i=s.prototype;return i.onLoad=function(){var t=o(n().mark((function t(){var e,o,r,s,i,a,u,m,f,E=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this._room=_.gameRoom,this._registerEvent(),this._room.onLeave((function(t){var e;console.log("leave code",t,null!=_.gameRoom),null!=_.gameRoom&&2===_.gameRoom.state.phase||l.emit("ON_LEAVE"),1006===t||1005===t?h.showReconnectAlert(t):4e3===t?c.localStorage.removeItem("reconnectionToken"):h.showErrorAlert(t),null==(e=E._room)||e.removeAllListeners(),E._room=null,_.gameRoom=null})),this._room.onMessage("*",(function(t,e){0===t&&l.emit("ON_ROLL_DICE_RESULT",e),2===t&&l.emit("ON_SHOW_RANKING_POPUP",e),5===t&&l.emit("ALL_READY",e),7===t&&l.emit("NOTI_BET",e),12===t&&l.emit("THROW_ITEM",e),13===t&&l.emit("SHOW_STICKER",e),14===t&&l.emit("START_ROOM_TIMER",e),19===t&&l.emit("ON_MOVE_CHAR",e),25===t&&l.emit("ON_UPDATE_MANA_AMOUNT",e),26===t&&l.emit("ON_SPECIAL_NOTI",e)})),e=this._room.state.listen("slots",(function(t){l.emit("slots",t),t.forEach((function(t,e){var o=t.listen("rank",(function(t,o){l.emit("slot."+e+".rank",{curRank:t,preRank:o})})),n=t.listen("player",(function(t){l.emit("slot."+e+".player",t)})),r=t.listen("autoPlay",(function(t){l.emit("slot."+e+".autoPlay",t)})),s=t.listen("manaAmount",(function(t,o){l.emit("slot."+e+".manaAmount",{curManaAmount:t,preManaAmount:o})})),i=t.usingSkills.onChange((function(t,o){l.emit("slot."+e+".usingSkills",{item:t,key:o})}));t.tokens.forEach((function(t,o){var n=t.listen("posIdx",(function(t,n){var r="slot."+e+".token."+o+".posIdx";l.emit(r,{curPos:t,prePos:n})})),r=t.listen("shielded",(function(t,n){var r="slot."+e+".token."+o+".shielded";l.emit(r,{curShielded:t,preShielded:n})}));E._disposers.push(n,r)})),E._disposers.push(o,n,r,s,i)}))})),o=this._room.state.listen("bet",(function(t){l.emit("bet",t)})),r=this._room.state.listen("phase",(function(t,e){l.emit("phase",{curPhase:t,prePhase:e})})),s=this._room.state.listen("rollResult",(function(t,e){null==e&&l.emit("rollResult",{curRollResult:t,preRollResult:e})})),i=this._room.state.listen("manas",(function(t,e){l.emit("manas",{curManas:t,preManas:e})})),a=this._room.state.manas.onChange((function(t,e){l.emit("manasOnChange",{item:t,key:e})})),u=this._room.state.listen("actionContext",(function(t,e){l.emit("actionContext",{curCtx:t,preCtx:e})})),m=this._room.state.listen("gameStarted",(function(t,e){l.emit("gameStarted",{curGameStarted:t,preGameStarted:e})})),f=this._room.state.onChange((function(){var t=E._room.state,e=t.curTurn,o=t.action;l.emit("onChangeTurnAndAction",{curTurn:e,action:o})})),this._disposers.push(e,s,r,o,i,a,u,m,f)}catch(t){console.error("err room network controller",t,t.code),h.showErrorAlert(t.code),l.emit("ON_LEAVE")}case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i._registerEvent=function(){var t=this;l.emit("ON_GET_ROOM_STATE"),l.on("LEAVE",o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t._room){e.next=4;break}return e.next=4,t._room.leave();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:l.emit("ON_LEAVE");case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),this),l.on("USE_X2_DICE",(function(){t._room.send(22)}),this),l.on("USE_DICE_CONTROL",(function(e){t._room.send(23,e)}),this),l.on("USE_SHIELD",(function(){t._room.send(24)}),this),l.on("PORTAL_DECISION",(function(e){t._room.send(21,e?1:0)}),this),l.on("CHOOSING_TOKEN",(function(e){t._room.send(u.CHOOSING_TOKEN,e)}),this),l.on("REQUEST_START_MATCH",(function(){t._room.send(3)}),this),l.on("REQUEST_KICK_PLAYER",(function(e){t._room.send(6,e)}),this),l.on("REQUEST_ROLL_DICE",(function(){t._room.send(u.ROLL_DICE)}),this),l.on("STOP_AUTO_PLAY",(function(){var e;null==(e=t._room)||e.send(11)}),this),l.on("REQUEST_THROW_ITEM",(function(e){var o=e[0],n=e[1];t._room.send(12,[o,n]),l.emit("THROW_ITEM",[-1,o,n])}),this),l.on("REQUEST_STICKER",(function(e){t._room.send(13,e),l.emit("SHOW_STICKER",[-1,e])}),this)},i.start=function(){this._room.send(m.READY_PLAYING);var t=this._room.state,e=t.curTurn,o=t.action;l.emit("onChangeTurnAndAction",{curTurn:e,action:o})},i.onDestroy=function(){var t;l.removeAll(this),null==(t=this._room)||t.removeAllListeners(),this._disposers.forEach((function(t){t()}))},r(s,[{key:"state",get:function(){return this._room.state}}]),s}(a))||f);s._RF.pop()}}}));

System.register("chunks:///_virtual/Test.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,r,n,i,c,s,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,s=e.Node,a=e.NodePool,l=e.Component}],execute:function(){var u,p,d,f,y;i._RF.push({},"c148e4smNdJkY30t4FyEpMU","Test",void 0);var h=c.ccclass,v=c.property;e("Test",(u=h("Test"),p=v(s),u((y=t((f=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,r(t,"desNode",y,n(t)),t._nodePool=new a,t}o(t,e);var i=t.prototype;return i.onLoad=function(){},i.start=function(){},t}(l)).prototype,"desNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=f))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/TestUnitId.ts",["cc"],(function(e){var t,a;return{setters:[function(e){t=e.cclegacy,a=e.sys}],execute:function(){e("getTestAdUnitId",(function(e){switch(e){case p.AppOpen:return r()?"ca-app-pub-3940256099942544/9257395921":"ca-app-pub-3940256099942544/5575463023";case p.Banner:return r()?"ca-app-pub-3940256099942544/6300978111":"ca-app-pub-3940256099942544/2934735716";case p.Interstitial:return r()?"ca-app-pub-3940256099942544/1033173712":"ca-app-pub-3940256099942544/4411468910";case p.Rewarded:return r()?"ca-app-pub-3940256099942544/5224354917":"ca-app-pub-3940256099942544/1712485313";case p.RewardedInterstitial:return r()?"ca-app-pub-3940256099942544/5354046379":"ca-app-pub-3940256099942544/6978759866";case p.Native:return r()?"ca-app-pub-3940256099942544/2247696110":"ca-app-pub-3940256099942544/3986624511";default:throw new Error("Unexpected format: "+e)}})),t._RF.push({},"82ff3DgPcxO9pSnl1qmYr+u","TestUnitId",void 0);var p=e("AdFormat",function(e){return e[e.AppOpen=0]="AppOpen",e[e.Banner=1]="Banner",e[e.Interstitial=2]="Interstitial",e[e.Rewarded=3]="Rewarded",e[e.RewardedInterstitial=4]="RewardedInterstitial",e[e.Native=5]="Native",e}({}));function r(){return a.os===a.OS.ANDROID}t._RF.pop()}}}));

System.register("chunks:///_virtual/TextCloudGraphics.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,o,a,l,u,c,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.extends},function(t){a=t.cclegacy,l=t._decorator,u=t.Graphics,c=t.CCFloat,s=t.Component}],execute:function(){var p,f,d,b,h,y,v,T,g,C,m,w,x,z,q,G,R;a._RF.push({},"34023RBE+lPD77jtZwgQobC","TextCloudGraphics",void 0);var D=l.ccclass,_=l.property,F=l.requireComponent,L=l.executeInEditMode;t("TextCloudGraphics",(p=D("TextCloudGraphics"),f=F(u),d=L(!0),b=_(c),h=_(c),y=_(c),v=_(c),T=_(c),g=_(c),p(C=f(C=d((w=e((m=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"x",w,n(e)),r(e,"y",x,n(e)),r(e,"width",z,n(e)),r(e,"height",q,n(e)),r(e,"radius",G,n(e)),r(e,"tailOffset",R,n(e)),e}i(e,t);var a=e.prototype;return a.onLoad=function(){var t=this.getComponent(u);this.roundRect(t,this.x,this.y,this.width,this.height,this.radius,this.tailOffset,!0)},a.roundRect=function(t,e,i,r,n,a,l,u,c){void 0===a&&(a=5),void 0===l&&(l=.5),void 0===u&&(u=!1),void 0===c&&(c=!0),a="number"==typeof a?{tl:a,tr:a,br:a,bl:a}:o({},{tl:0,tr:0,br:0,bl:0},a),t.moveTo(e+a.tl,i),t.lineTo(e+r*l-10,i),t.lineTo(e+r*l,i-15),t.lineTo(e+r*l+10,i),t.lineTo(e+r-a.tr,i),t.quadraticCurveTo(e+r,i,e+r,i+a.tr),t.lineTo(e+r,i+n-a.br),t.quadraticCurveTo(e+r,i+n,e+r-a.br,i+n),t.lineTo(e+a.bl,i+n),t.quadraticCurveTo(e,i+n,e,i+n-a.bl),t.lineTo(e,i+a.tl),t.quadraticCurveTo(e,i,e+a.tl,i),u&&t.fill(),c&&t.stroke()},a.start=function(){},a.update=function(t){},e}(s)).prototype,"x",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=e(m.prototype,"y",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=e(m.prototype,"width",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 250}}),q=e(m.prototype,"height",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 250}}),G=e(m.prototype,"radius",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),R=e(m.prototype,"tailOffset",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.25}}),C=m))||C)||C)||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/ThrowableItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,n,o,e,r,s,a,c;return{setters:[function(t){i=t.inheritsLoose,n=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){e=t.cclegacy,r=t._decorator,s=t.Vec3,a=t.v3,c=t.Component}],execute:function(){var h;e._RF.push({},"8cc5dz7VktIqIKwyxQV0r2h","ThrowableItem",void 0);var u=r.ccclass,l=(r.property,1600);t("ThrowableItem",u("ThrowableItem")(h=function(t){function e(){for(var i,n=arguments.length,o=new Array(n),e=0;e<n;e++)o[e]=arguments[e];return(i=t.call.apply(t,[this].concat(o))||this)._flying=!1,i._dir=a(),i._duration=0,i._timeNeedToTravel=0,i._fromPos=a(),i._toPos=a(),i}i(e,t);var r=e.prototype;return r._startFlyingAnim=function(){},r._stopFlyingAnim=function(){},r._playContactAnim=function(){var t=n(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r.playThrowAnim=function(t,i){this._toPos=i,this._fromPos=t;var n=s.subtract(a(),i,t);this._timeNeedToTravel=n.length()/l,this._dir=n.normalize(),this.node.setPosition(t),this._flying=!0,this._startFlyingAnim()},r.update=function(t){var i=this;if(this._flying){if(this._duration+=t,this._duration>=this._timeNeedToTravel)return this.node.setPosition(this._toPos),this._stopFlyingAnim(),this._playContactAnim().then((function(){i.node.destroy()})),void(this._flying=!1);var n=this.node.position,o=n.x,e=n.y;this.node.setPosition(o+l*t*this._dir.x,e+l*t*this._dir.y)}},e}(c))||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/ThrowItemButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SimpleEventTarget.ts"],(function(t){var e,n,o,r,i,a,c,u,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,c=t.CCInteger,u=t.Button,l=t.Component},function(t){p=t.SimpleEventTarget}],execute:function(){var s,f,h,T,m;i._RF.push({},"fbfe1fdWJRB6IPuUkj0UPYc","ThrowItemButton",void 0);var y=a.ccclass,I=a.property;t("ThrowItemButton",(s=y("ThrowItemButton"),f=I(c),s((m=e((T=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,o(e,"itemType",m,r(e)),e._toSlotIdx=0,e}n(e,t);var i=e.prototype;return i.setData=function(t){this._toSlotIdx=t},i.onLoad=function(){var t=this;this.node.on(u.EventType.CLICK,(function(){p.emit("REQUEST_THROW_ITEM",[t._toSlotIdx,t.itemType])}))},e}(l)).prototype,"itemType",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=T))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/Toast.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,r,a,c,l,s,p,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Label,l=t.UIOpacity,s=t.Tween,p=t.tween,u=t.Component}],execute:function(){var y,f,h,b,v;r._RF.push({},"e5bdc4EZjJGb7/OBEqBsNV/","Toast",void 0);var d=a.ccclass,g=a.property;t("Toast",(y=d("Toast"),f=g(c),y((v=e((b=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"label",v,n(e)),e}return o(e,t),e.prototype.show=function(t){var e=this;this.label.string=t,this.node.active=!0;var o=this.getComponent(l);s.stopAllByTarget(o),o.opacity=0,p(o).to(.25,{opacity:255}).delay(3).to(.1,{opacity:0}).call((function(){e.node.active=!1})).start()},e}(u)).prototype,"label",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=b))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/ToastUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Toast.ts"],(function(t){var n,s,o,e;return{setters:[function(t){n=t.createClass},function(t){s=t.cclegacy,o=t.director},function(t){e=t.Toast}],execute:function(){s._RF.push({},"cc7f6VL9npHWZBve/4qDr5b","ToastUI",void 0),t("ToastUI",function(){function t(){this._toast=null}var s=t.prototype;return s.init=function(t){o.addPersistRootNode(t),this._toast=t.getComponent(e)},s.show=function(t){this._toast.show(t)},n(t,null,[{key:"Instance",get:function(){return null==this._instance&&(this._instance=new t),this._instance}}]),t}())._instance=null,s._RF.pop()}}}));

System.register("chunks:///_virtual/TomatoItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./AudioManager.ts","./ThrowableItem.ts"],(function(t){var e,n,o,i,a,r,c,l,s,u,p,f,y,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,c=t.Node,l=t.tween,s=t.Vec3,u=t.easing,p=t.UIOpacity},function(t){f=t.SOUND},function(t){y=t.AudioManager},function(t){d=t.ThrowableItem}],execute:function(){var m,h,g,b,v,N,I;a._RF.push({},"48bdbmcR4BPq4yvkFOx6XFO","TomatoItem",void 0);var O=r.ccclass,T=r.property;t("TomatoItem",(m=O("TomatoItem"),h=T(c),g=T(c),m((N=e((v=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"flyingNode",N,i(e)),o(e,"splashNode",I,i(e)),e}n(e,t);var a=e.prototype;return a.onLoad=function(){this.splashNode.active=!1},a._startFlyingAnim=function(){y.Instance.playSound(f.THROW)},a._stopFlyingAnim=function(){this.flyingNode.active=!1},a._playContactAnim=function(){var t=this;return new Promise((function(e){y.Instance.playSound(f.SPLASH),l(t.splashNode).set({scale:s.ZERO,active:!0}).to(.15,{scale:s.ONE},{easing:u.cubicOut}).delay(2).call((function(){l(t.splashNode.getComponent(p)).to(.5,{opacity:0}).call((function(){e()})).start()})).start()}))},e}(d)).prototype,"flyingNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(v.prototype,"splashNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=v))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/Tutorial.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./CellController.ts","./Character.ts","./EmoCloud.ts","./Constant.ts","./BaseCellContainer.ts","./DiceRoller.ts","./SlotController.ts","./Global.ts","./AudioManager.ts","./LoaderManager.ts","./SceneManager.ts","./SDK.ts","./ExplodeAnimation.ts","./GameHelper.ts","./SmallFlags.ts","./UserPanel.ts","./l10n-manager.ts"],(function(e){var t,n,o,i,r,a,l,s,c,u,d,p,h,f,m,g,C,_,v,I,y,b,P,A,x,S,k,w,T,R,B,E,F,N,O,D,G,M,q,z,H,U,L,K,V,J,X;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){l=e.cclegacy,s=e._decorator,c=e.Node,u=e.Prefab,d=e.Button,p=e.ParticleSystem2D,h=e.v3,f=e.instantiate,m=e.SpriteFrame,g=e.Sprite,C=e.Label,_=e.Color,v=e.Tween,I=e.tween,y=e.Vec3,b=e.easing,P=e.UITransform,A=e.Component},null,function(e){x=e.CellController},function(e){S=e.Character},function(e){k=e.EmoCloud},function(e){w=e.MUSIC,T=e.SceneName,R=e.LAST_INDEX,B=e.START_INDEX,E=e.SOUND,F=e.SAFE_SQUARE_INDEX,N=e.MULTI_TOKEN_POS},function(e){O=e.BaseCellContainer},function(e){D=e.DiceRoller},function(e){G=e.SlotController},function(e){M=e.default},function(e){q=e.AudioManager},function(e){z=e.LoaderManager},function(e){H=e.SceneManager},function(e){U=e.default},function(e){L=e.ExplodeAnimation},function(e){K=e.GameHelper},function(e){V=e.SmallFlags},function(e){J=e.UserPanel},function(e){X=e.default}],execute:function(){var Z,j,Q,W,Y,$,ee,te,ne,oe,ie,re,ae,le,se,ce,ue,de,pe,he,fe,me,ge,Ce,_e,ve,Ie,ye,be,Pe,Ae,xe,Se,ke,we,Te,Re,Be,Ee,Fe,Ne,Oe,De;l._RF.push({},"46adcAlRFdC0oiZZRtTzPFe","Tutorial",void 0);var Ge=s.ccclass,Me=s.property,qe=["1e69aa","d8434f","529c2d","eca83c"];e("Tutorial",(Z=Ge("Tutorial"),j=Me(c),Q=Me([O]),W=Me([V]),Y=Me([J]),$=Me(u),ee=Me(c),te=Me(c),ne=Me(d),oe=Me(d),ie=Me(c),re=Me(c),ae=Me(c),le=Me(c),se=Me(c),ce=Me(c),ue=Me(u),de=Me(u),pe=Me(c),he=Me(p),fe=Me(u),Z((Ce=t((ge=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"cellContainer",Ce,i(t)),o(t,"charBases",_e,i(t)),o(t,"smallFlagContainers",ve,i(t)),o(t,"userPanels",Ie,i(t)),o(t,"charPrefab",ye,i(t)),o(t,"diceResultAnchor",be,i(t)),o(t,"diceRollingAnchor",Pe,i(t)),o(t,"quitButton",Ae,i(t)),o(t,"rollButton",xe,i(t)),o(t,"promptAnchor",Se,i(t)),o(t,"pathGraphics",ke,i(t)),o(t,"safeSquareArrowContainer",we,i(t)),o(t,"rollDicePrompt",Te,i(t)),o(t,"selectPawnPrompt",Re,i(t)),o(t,"handIndicator",Be,i(t)),o(t,"emoCloudPrefab",Ee,i(t)),o(t,"finishParticlePrefab",Fe,i(t)),o(t,"portalGate",Ne,i(t)),o(t,"portalParticle",Oe,i(t)),o(t,"kickFogPrefab",De,i(t)),t._centerCellPos=h(0,20),t._baseCellContainers=[],t._cellNodes=[],t._myIdx=0,t.bigFlagLabels=[],t.baseSkinAnchors=[],t._slotCtrls=[],t._diceRollers=[],t._roomState=null,t._curStep=-1,t._toBeKickedTokens=[],t._commands=[{execute:function(){t._welcome()}},{execute:function(){t._showGameGoal()},cleanUp:function(){t._cleanUpGameGoal()}},{execute:function(){t._guideRollDice()}},{execute:function(){t._showGuideRoll6()}},{execute:function(){t._showGuideBumpToken()}},{execute:function(){t._showGuideSafeSquare()}},{execute:function(){t._showGuideEndGame()}},{execute:function(){t._showAlertPlayNow()}}],t}n(t,e);var l=t.prototype;return l.onLoad=function(){var e=this;U.gameplayStart(),q.Instance.playMusic(w.GAME_ROOM_CLASSIC),this.rollButton.node.on(d.EventType.CLICK,this._onRollBtnClick,this),this.quitButton.node.on(d.EventType.CLICK,r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.showAlert({message:X.t("live-tut-quit"),showCancel:!0});case 3:if("Ok"!==e.sent){e.next=12;break}if(0!==M.getTotalMatch()){e.next=11;break}return e.next=8,K.quickPlay();case 8:q.Instance.playMusic(w.HOME_BGM),e.next=12;break;case 11:H.Instance.moveToScene(T.HOME);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),H.Instance.moveToScene(T.HOME);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))),this._initCellIdxAndColor(),this.promptAnchor.getComponentInChildren(d).node.on(d.EventType.CLICK,(function(){e._processTut()})),this._processTut()},l._processTut=function(){var e=this._commands[this._curStep];e&&e.cleanUp&&e.cleanUp(),this._curStep++,this._commands[this._curStep].execute()},l._initSlotCtls=function(){for(var e=0;e<4;e++){for(var t=new G,n=0;n<4;n++){var o=f(this.charPrefab).getComponent(S);o.setHidePlayerNull(e%2==1),t.characters.push(o)}this._slotCtrls.push(t);var i=new c("dice-roller"),r=i.addComponent(D);r.init(this.diceRollingAnchor,this.diceResultAnchor,e),i.setParent(this.diceRollingAnchor),this._diceRollers.push(r)}},l._initCellIdxAndColor=function(){var e=this;this._initBoardStateData(),this._initSlotCtls(),this.cellContainer.walk((function(t){var n=parseInt(t.name,10);if(!Number.isNaN(n))return n=n<52?(n+13*e._myIdx)%52:52+(n-52+6*e._myIdx)%24,e._cellNodes[n]=t,void t.addComponent(x);var o=t.name.split("-"),i=o[0],r=o[1],a=e._getSlotIdxFromUiIdx(parseInt(r,10)),l=e.getColorBySlotIdx(a);if(["base_skin","des","flower","arrow","big_flag","last"].includes(i))if("base_skin"!==i){var s=(["des","flower","arrow","big_flag"].includes(i)?"gameplay-common":"color-tile-classic")+"/"+i+"-"+l+"/spriteFrame";z.Instance.loadAsset(s,m).then((function(e){t.getComponent(g).spriteFrame=e})),"des"===i&&z.Instance.loadAsset("gameplay-common/small-flag-"+l+"/spriteFrame",m).then((function(e){t.children.forEach((function(t){t.getComponent(g).spriteFrame=e}))})),"big_flag"===i&&(e.bigFlagLabels[r]=t.getComponentInChildren(C),t.getComponentInChildren(C).color=(new _).fromHEX("#"+qe[l]))}else e.baseSkinAnchors[r]=t})),this.charBases.forEach((function(t,n){e._baseCellContainers[n]=e.charBases[(n-e._myIdx+4)%4]})),this.bigFlagLabels.forEach((function(e){e.node.parent.active=!1})),this._slotCtrls.forEach((function(t,n){var o=e._roomState.slots[n],i=e._getUiIdxFromSlotIdx(n);t.diceRoller=e._diceRollers[i],t.diceRoller.setSkin("dice.default"),t.userPanel=e.userPanels[i],t.userPanel.setData(o.player,n),z.Instance.loadAsset("bases/ingame/default",u).then((function(t){if(e.isValid){var o=f(t);e.baseSkinAnchors[i].addChild(o),e._slotCtrls[n].userPanel.setBaseSkin(o,n)}})),t.charFinishedIndicator=e.smallFlagContainers[i],t.rankLabel=e.bigFlagLabels[i],t.characters.forEach((function(t,r){var a=o.tokens[r].posIdx,l=a<0?e._baseCellContainers[n].cells[r]:e._cellNodes[a];t.node.setParent(l),t.init(n,a,r,e.getColorBySlotIdx(n),i),t.initSkin(o.equippingChar),e._updateTokenCharRotation(t)}))})),z.Instance.loadDiceThumb("default").then((function(t){e.isValid&&(e.rollButton.getComponentInChildren(g).spriteFrame=t)}))},l._getSlotIdxFromUiIdx=function(e){return(this._myIdx+e)%4},l._initBoardStateData=function(){for(var e=[],t=[],n=0;n<4;n++)if(n%2==1)t.push(null);else{var o,i,r={name:0===n?(null==(o=M.userInfo)?void 0:o.name)||"Player":"Computer",avatar:0===n?(null==(i=M.userInfo)?void 0:i.avatar)||"1":"2",colorIdx:n,isBot:!1,equippingDice:"dice.default"};t.push(r)}for(var a=0;a<4;a++){for(var l=[],s=0;s<4;s++){var c={posIdx:-1,playerIdx:a,id:s};l.push(c)}var u={idx:a,rank:-1,finished:!1,player:t[a],tokens:l,locked:!1,disconnected:!1,isReady:!1,kickedAmount:0,beingKickedAmount:0,rolled6:!1,equippingBase:"bases.default",equippingChar:"characters.chicken",equippingDice:"dice.default",colorIdx:a,isBot:!1};e.push(u)}var d={slots:e,curTurn:0,phase:1,rollResult:0,action:0,bet:0,mode:2,stepAmount:0};this._roomState=d},l._updateTokenCharRotation=function(e){var t=1;e.posIdx<0?t=0===e.uiIdx||1===e.uiIdx?1:-1:t=this._getNextCellOfToken(e).position.x-this._cellNodes[e.posIdx].position.x<0?-1:1;e.charAnchor.setScale(t,1),R.includes(e.posIdx)&&(this._updateFlagAmount(e.playerIdx),e.setHideByFinished(!0))},l._getNextCellOfToken=function(e){var t=(e.posIdx+1)%(e.posIdx<=51?52:this._cellNodes.length);return t===B[e.playerIdx]&&(t=52+6*e.playerIdx),this._cellNodes[t]},l._updateFlagAmount=function(e){var t=this._roomState.slots[e].tokens.filter((function(e){return R.includes(e.posIdx)})).length||0;this._slotCtrls[e].charFinishedIndicator.setFlagAmount(t)},l._onRollBtnClick=function(){var e=this;this.rollDicePrompt.active=!1,this.rollButton.node.active=!1,this.handIndicator.active=!1;var t=this._slotCtrls[0].characters[0];2===this._curStep?(this._slotCtrls[0].diceRoller.rollDice(6),this.scheduleOnce((function(){e._moveCharToFirstCell(t),e._processTut()}),1)):4===this._curStep?(this._slotCtrls[0].diceRoller.rollDice(3),this.scheduleOnce((function(){e.selectPawnPrompt.active=!0,e._setHighlightPawn(!0),t.node.once(c.EventType.TOUCH_END,(function(){e._onChoosingToken(t,1,4),e.selectPawnPrompt.active=!1,e.scheduleOnce((function(){e._processTut()}),3)}))}),1)):6===this._curStep&&(this._slotCtrls[0].diceRoller.rollDice(4),this.scheduleOnce((function(){e._setHighlightPawn(!0),e.handIndicator.active=!0,e.handIndicator.setPosition(340,-85),e.handIndicator.setScale(-1,1),e.handIndicator.angle=135,t.node.once(c.EventType.TOUCH_END,(function(){e._onChoosingToken(t,53,57),e.handIndicator.active=!1,e.scheduleOnce((function(){e._processTut()}),3)}))}),1))},l._setHighlightPawn=function(e){var t=this._slotCtrls[0].characters[0];t.highlightCircle.active=e,e?t.playReady():t.playIdle()},l._onChoosingToken=function(e,t,n){var o=this;this._slotCtrls[0].diceRoller.hideResult(),this._setHighlightPawn(!1),v.stopAllByTarget(e.node),v.stopAllByTarget(e.charAnchor);var i=I(e.node),r=I(e.charAnchor),a=this._getAllCellIdxInRange(t,n);e.posIdx=n;var l=.175;try{e.playJump()}catch(e){console.error(e)}this._transitionOutCell(t),e.node.setParent(this.cellContainer,!0),e.node.setScale(y.ONE),e.setHideBySamePos(!1),e.setAmount(1);var s=R.includes(n);a.forEach((function(n,c){var u=o._cellNodes[n],d=c===a.length-1,p=d?.35:l;d&&s&&(p=3*l);var m=0===c?o._cellNodes[t]:o._cellNodes[a[c-1]];i.call((function(){e.playJump(p),d&&s&&(v.stopAllByTarget(o.portalGate),I(o.portalGate).set({active:!0,scale:y.ZERO}).to(.15,{scale:y.ONE}).start());var t=u.position.x-m.position.x<0?-1:1;e.charAnchor.setScale(t,1)})).to(p,{position:h(u.position.x,u.position.y+20)},{onUpdate:function(e,t){if(o.isValid&&d&&s&&t>=.5){var n=1-b.quintIn(2*(t-.5));e.setScale(n,n)}}}).call((function(){R.includes(n)?(q.Instance.playSound(E.JUMP_IN_PORTAL),o.portalParticle.resetSystem(),v.stopAllByTarget(o.portalGate),I(o.portalGate).set({scale:y.ONE}).delay(.5).to(.15,{scale:y.ZERO}).set({active:!1}).call((function(){var t=o.cellContainer.getComponent(P),n=o._baseCellContainers[e.playerIdx],i=t.convertToNodeSpaceAR(n.node.worldPosition);if(o._slotCtrls[e.playerIdx].characters.every((function(e){return R.includes(e.posIdx)}))){q.Instance.playSound(E.FINISHED);var r=f(o.finishParticlePrefab);r.setParent(o.cellContainer),r.setPosition(i),o.scheduleOnce((function(){r.destroy()}),2),o.bigFlagLabels[o._getUiIdxFromSlotIdx(0)].node.parent.active=!0,o._slotCtrls[0].rankLabel.string="1"}else{var a=f(o.emoCloudPrefab).getComponent(k);a.node.setParent(o.cellContainer),a.node.setPosition(i),a.playAnim(3)}})).start()):u.getComponent(x).playUpDownAnim()}));var g=d?80:20;r.set({position:e.skinOriginPos}).by(p/2,{position:h(0,g,0)},{easing:b.quartOut}).by(p/2,{position:h(0,-g,0)},{easing:b.quartIn})})),i.call((function(){try{e.playIdle()}catch(e){console.error(e)}e.playOnLandAnim();var t=o._cellNodes[n];e.node.setParent(t),e.node.setPosition(o._centerCellPos),o._updateTokenCharRotation(e);var i=o.cellContainer.getComponent(P),r=i.convertToNodeSpaceAR(e.node.worldPosition);if(e.canPlayShameSticker()){F.includes(e.posIdx)||(e.shameStickerPlayed=!0);var a=f(o.emoCloudPrefab).getComponent(k);a.node.setParent(o.cellContainer),a.node.setPosition(y.add(h(),r,h(10,60))),a.playAnim(1)}o._toBeKickedTokens.forEach((function(e){var a=f(o.kickFogPrefab);a.setParent(o.cellContainer),a.setPosition(y.add(h(),t.position,o._centerCellPos)),a.getComponent(L).play(),e.posIdx=-1;var l=o._baseCellContainers[e.playerIdx].cells[e.tokenId];e.node.setParent(o.cellContainer),e.node.setPosition(r),e.showKickParticles();var s=i.convertToNodeSpaceAR(l.worldPosition),c=I(e.node);o._getAllCellIdxInRange(B[e.playerIdx],n).filter((function(e,t,n){if(0===t||t===n.length-1)return!0;var i=[t-1,t,t+1].map((function(e){return o._cellNodes[n[e]].position})),r=i[0],a=i[1],l=i[2],s=y.subtract(h(),a,r).normalize(),c=y.subtract(h(),l,a).normalize();return y.dot(s,c)<.9})).map((function(e){return h(o._cellNodes[e].position.x,o._cellNodes[e].position.y+20)})).reverse().forEach((function(e,t,n){if(0!==t){var o=y.subtract(h(),e,n[t-1]).length();c.to(o/1500,{position:e})}}));var u=.35;c.call((function(){I(e.charAnchor).set({position:e.skinOriginPos}).by(.175,{position:h(0,100)},{easing:b.quartOut}).by(.175,{position:h(0,-100)},{easing:b.quartIn}).start()})).to(u,{position:s}).call((function(){e.node.setParent(l),e.node.setPosition(0,0),e.hideKickParticles(),o._updateTokenCharRotation(e);var t=i.convertToNodeSpaceAR(l.parent.worldPosition),n=f(o.emoCloudPrefab).getComponent(k);n.node.setParent(o.cellContainer),n.node.setPosition(t),n.playAnim(0)}));var d=f(o.emoCloudPrefab).getComponent(k);d.node.setParent(o.cellContainer),d.node.setPosition(y.add(h(),r,h(10,60))),d.playAnim(2),c.start()})),o._transitionInCell(n),o._toBeKickedTokens.length=0})).start(),r.start()},l._getAllCellIdxInRange=function(e,t){var n=[];if(t<0||e<0)return[];if(e<52&&t<52){var o=(t-e+52)%52;n=Array.from({length:o},(function(t,n){return(e+n+1)%52}))}else if(e<52&&t>=52){var i=Math.floor((t-52)/6),r=(B[i]-2+52)%52,a=Array.from({length:(r-e+52)%52},(function(t,n){return(e+n+1)%52})),l=52+6*i,s=Array.from({length:t-l+1},(function(e,t){return l+t}));n=[].concat(a,s)}else if(e>=52&&t>=52){var c=(t-e+76)%76;n=Array.from({length:c},(function(t,n){return(e+n+1)%76}))}return n},l.getColorBySlotIdx=function(e){return e},l._moveCharToFirstCell=function(e){var t=this,n=B[e.playerIdx],o=this._cellNodes[n];this._slotCtrls[0].diceRoller.hideResult();var i=this.cellContainer.getComponent(P).convertToNodeSpaceAR(o.worldPosition);e.node.setParent(this.cellContainer,!0),e.posIdx=n;var r=.35;q.Instance.playSound(E.MOVE_FROM_START),v.stopAllByTarget(e.node),v.stopAllByTarget(e.charAnchor);var a=I(e.node),l=I(e.charAnchor);a.to(r,{position:h(i.x,i.y+20)}).call((function(){e.node.setParent(o),e.node.setPosition(t._centerCellPos),e.playIdle(),o.getComponent(x).playUpDownAnim(),e.playOnLandAnim(),t._updateTokenCharRotation(e),t._transitionInCell(n)})).start(),e.playJump(),l.set({position:e.skinOriginPos}).by(.175,{position:h(0,100)},{easing:b.quartOut}).by(.175,{position:h(0,-100)},{easing:b.quartIn}).start()},l._transitionInCell=function(e){var t=this;if(!(e<0||R.includes(e))){var n=this._getAllTokensInCellMap(e),o=n.reduce((function(e,t){return t.length>0?e+1:e}),0);if(0!==o)if(o>1){[2,1,3,0].forEach((function(e){var o=t._getSlotIdxFromUiIdx(e),i=n[o],r=N[e],a=r[0],l=r[1];i.forEach((function(e,n){var o=t._slotCtrls[e.playerIdx].characters[e.tokenId];o.node.setSiblingIndex(-1),I(o.node).to(.35,{position:h(a,l),scale:h(.8,.8,1)}).call((function(){o.setHideBySamePos(n!==i.length-1),o.setAmount(i.length)})).start()}))}))}else{var i=n.find((function(e){return e.length>0}));i.forEach((function(e,n){var o=t._slotCtrls[e.playerIdx].characters[e.tokenId];I(o.node).to(.25,{position:t._centerCellPos,scale:h(1,1,1)}).call((function(){o.setHideBySamePos(n!==i.length-1),o.setAmount(i.length)})).start()}))}}},l._transitionOutCell=function(e){var t=this,n=this._getAllTokensInCellMap(e),o=n.reduce((function(e,t){return t.length>0?e+1:e}),0);if(0!==o)if(o>1){[2,1,3,0].forEach((function(e,o){var i=t._getSlotIdxFromUiIdx(e),r=n[i];r.forEach((function(e,n){var o=t._slotCtrls[e.playerIdx].characters[e.tokenId];o.setHideBySamePos(n!==r.length-1),o.setAmount(r.length)}))}))}else{var i=n.find((function(e){return e.length>0}));i.forEach((function(e,n){var o=t._slotCtrls[e.playerIdx].characters[e.tokenId];o.setHideBySamePos(n!==i.length-1),o.setAmount(i.length),I(o.node).to(.25,{position:t._centerCellPos,scale:y.ONE}).start()}))}},l._getAllTokensInCellMap=function(e){var t=this,n=[];return this._slotCtrls.forEach((function(o,i){var r=t._roomState.slots[i],a=r.player,l=r.rank;null==a||l>=0?n.push([]):n.push(o.characters.filter((function(t){return t.posIdx===e})))})),n},l._welcome=function(){var e=X.t("live-tut-1");this.promptAnchor.getComponentInChildren(C).string=e,this.promptAnchor.setPosition(0,100),this.promptAnchor.active=!0},l._showGameGoal=function(){this.promptAnchor.getComponentInChildren(C).string=X.t("live-tut-2"),this.promptAnchor.setPosition(0,350),this.pathGraphics.active=!0},l._cleanUpGameGoal=function(){this.pathGraphics.active=!1},l._guideRollDice=function(){this.promptAnchor.active=!1,this.rollDicePrompt.active=!0,this.rollButton.node.active=!0},l._showGuideRoll6=function(){this.promptAnchor.active=!0,this.promptAnchor.getComponentInChildren(C).string=X.t("live-tut-3")},l._showGuideBumpToken=function(){var e=this._slotCtrls[2].characters[0];e.posIdx=4,e.node.setParent(this._cellNodes[4]),e.node.setPosition(this._centerCellPos),this._toBeKickedTokens.push(e),this._updateTokenCharRotation(e),this.promptAnchor.getComponentInChildren(d).node.active=!1,this.promptAnchor.getComponentInChildren(C).string=X.t("live-tut-4"),this.rollButton.node.active=!0,this.rollDicePrompt.active=!0,this.rollDicePrompt.children[0].active=!1},l._showGuideSafeSquare=function(){this.safeSquareArrowContainer.active=!0,this.promptAnchor.getComponentInChildren(d).node.active=!0,this.promptAnchor.getComponentInChildren(C).string=X.t("live-tut-5"),this.promptAnchor.setPosition(0,100)},l._showGuideEndGame=function(){var e=this;this.safeSquareArrowContainer.active=!1,[1,2,3].forEach((function(t){var n=e._slotCtrls[0].characters[t];n.posIdx=57,n.setHideByFinished(!0)})),this._slotCtrls[0].charFinishedIndicator.setFlagAmount(3),this.promptAnchor.setPosition(0,350),this.promptAnchor.getComponentInChildren(d).node.active=!1,this.promptAnchor.getComponentInChildren(C).string=X.t("live-tut-6");var t=this._slotCtrls[0].characters[0];t.posIdx=53,t.node.setParent(this._cellNodes[53]),t.node.setPosition(this._centerCellPos),this.rollDicePrompt.active=!0,this.rollButton.node.active=!0},l._showAlertPlayNow=function(){var e=r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.promptAnchor.active=!1,e.next=4,K.showAlert({message:X.t("live-tut-play-now"),okText:X.t("quick-play"),showCancel:0!==M.getTotalMatch(),cancelText:X.t("go-home")});case 4:if("Ok"!==e.sent){e.next=11;break}return e.next=8,K.quickPlay();case 8:q.Instance.playMusic(w.HOME_BGM),e.next=12;break;case 11:H.Instance.moveToScene(T.HOME);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),H.Instance.moveToScene(T.HOME);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),l._getUiIdxFromSlotIdx=function(e){return(4-this._myIdx+e)%4},l.onDestroy=function(){U.gameplayStop()},t}(A)).prototype,"cellContainer",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=t(ge.prototype,"charBases",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ve=t(ge.prototype,"smallFlagContainers",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ie=t(ge.prototype,"userPanels",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ye=t(ge.prototype,"charPrefab",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(ge.prototype,"diceResultAnchor",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=t(ge.prototype,"diceRollingAnchor",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=t(ge.prototype,"quitButton",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=t(ge.prototype,"rollButton",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(ge.prototype,"promptAnchor",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=t(ge.prototype,"pathGraphics",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=t(ge.prototype,"safeSquareArrowContainer",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=t(ge.prototype,"rollDicePrompt",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=t(ge.prototype,"selectPawnPrompt",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=t(ge.prototype,"handIndicator",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=t(ge.prototype,"emoCloudPrefab",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=t(ge.prototype,"finishParticlePrefab",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(ge.prototype,"portalGate",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=t(ge.prototype,"portalParticle",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=t(ge.prototype,"kickFogPrefab",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=ge))||me));l._RF.pop()}}}));

System.register("chunks:///_virtual/TypeAlias.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"5738fx85WpMp6bb3Q7WK7YX","TypeAlias",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/UserPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Constant.ts","./BaseSkin.ts","./SkillBadget.ts","./LoaderManager.ts","./GameHelper.ts","./StringUtils.ts","./l10n-manager.ts"],(function(t){var e,i,n,a,o,r,l,s,c,u,h,g,m,d,p,b,f,_,S,w,k,C,v,y,D,T,L,P,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,l=t._decorator,s=t.Sprite,c=t.Label,u=t.Node,h=t.Prefab,g=t.tween,m=t.UIOpacity,d=t.SpriteFrame,p=t.Tween,b=t.Vec3,f=t.v3,_=t.macro,S=t.easing,w=t.instantiate,k=t.clamp01,C=t.Component},null,function(t){v=t.CHAT_TEXT},function(t){y=t.BaseSkin},function(t){D=t.SkillBadget},function(t){T=t.LoaderManager},function(t){L=t.GameHelper},function(t){P=t.StringUtils},function(t){E=t.default}],execute:function(){var F,A,B,I,z,O,H,N,R,U,M,x,V,j,G,Z,Q,X,q,J,K,W,Y;r._RF.push({},"f5a98gbb/hPQ4+kmPItiybH","UserPanel",void 0);var $=l.ccclass,tt=l.property;t("UserPanel",(F=$("UserPanel"),A=tt(s),B=tt(c),I=tt(s),z=tt(s),O=tt(c),H=tt(c),N=tt(s),R=tt(u),U=tt(u),M=tt(h),F((j=e((V=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"avatarSprite",j,a(e)),n(e,"nameLabel",G,a(e)),n(e,"highlightFrame",Z,a(e)),n(e,"timerCircle",Q,a(e)),n(e,"countDownLabel",X,a(e)),n(e,"manaAmountLabel",q,a(e)),n(e,"stickerSprite",J,a(e)),n(e,"cloudChat",K,a(e)),n(e,"usingSkillContainer",W,a(e)),n(e,"skillBadgetPrefab",Y,a(e)),e._baseSkin=null,e._curDuration=3,e._time=0,e._countDownTime=0,e._obj={r:0},e._highlightIsSet=!1,e._cloudTween=null,e._disabled=!1,e}i(e,t);var r=e.prototype;return r.onLoad=function(){g(this.highlightFrame.getComponent(m)).to(.65,{opacity:0}).to(.65,{opacity:255}).union().repeatForever().start(),this._highlightIsSet||this.setHighlightEnable(!1)},r.setData=function(t,e){var i=this;null!=t?(L.loadAvatar(L.getAvatarStrFromPlayer(t),this.avatarSprite),this.nameLabel.string=P.truncate(L.getNameFromPlayer(t),9),T.Instance.loadAsset("gameplay-common/frame-"+e+"/spriteFrame",d).then((function(t){i.isValid&&(i.node.getChildByPath("avatar/frame").getComponent(s).spriteFrame=t)})),T.Instance.loadAsset("gameplay-common/name-"+e+"/spriteFrame",d).then((function(t){i.isValid&&(i.node.getChildByPath("avatar/name-panel").getComponent(s).spriteFrame=t)}))):this.node.active=!1},r.setHighlightEnable=function(t){var e;this._highlightIsSet=!0,this.highlightFrame.node.active=t,null==(e=this._baseSkin)||e.setHighlightEnable(t),t&&(p.stopAllByTarget(this.avatarSprite.node),g(this.avatarSprite.node).set({scale:b.ONE}).to(.1,{scale:f(1.1,1.1,1)}).to(.1,{scale:b.ONE}).to(.1,{scale:f(1.1,1.1,1)}).to(.1,{scale:b.ONE}).start())},r.startCountDown=function(t){this._time=t,this._countDownTime=t,this._curDuration=t,this.timerCircle.node.active=!0,this.countDownLabel.node.active=!0,this.countDownLabel.string=""+Math.ceil(this._countDownTime),this.schedule(this._countDownTextLabel,1,_.REPEAT_FOREVER)},r._countDownTextLabel=function(){this._countDownTime-=1,this.countDownLabel.string=""+Math.ceil(this._countDownTime),this.countDownLabel.node.setScale(0,0),g(this.countDownLabel.node).to(.25,{scale:b.ONE},{easing:S.backOut}).start(),this._countDownTime<=0&&this.unschedule(this._countDownTextLabel)},r.stopCountDown=function(){this.timerCircle.node.active=!1,this.countDownLabel.node.active=!1,this.unschedule(this._countDownTextLabel)},r.showEmo=function(t){this.cloudChat.active=!1,this._hideSticker(),t>=9?this._showChat(t-9):this._showSticker(t)},r.setManaAmount=function(t){this.manaAmountLabel.string=" "+t+" "},r._showSticker=function(t){this.stickerSprite.node.active=!0,T.Instance.loadSfToSprite("emo-sticker/"+t+"/spriteFrame",this.stickerSprite),this.unschedule(this._hideSticker),this.scheduleOnce(this._hideSticker,3.5)},r._showChat=function(t){this.cloudChat.getComponentInChildren(c).string=E.t(v[t]),this._getCloudTween().start()},r._hideSticker=function(){this.stickerSprite.node.active=!1},r._getCloudTween=function(){return null==this._cloudTween&&(this._cloudTween=g(this.cloudChat).set({active:!0,scale:b.ZERO}).to(.25,{scale:b.ONE},{easing:S.backOut}).delay(3).to(.1,{scale:b.ZERO}).set({active:!1})),this._cloudTween},r.setBaseSkin=function(t,e){var i;this._baseSkin=t.getComponent(y),this._disabled?this.disabled=!0:(null==(i=this._baseSkin)||i.setHighlightEnable(this.highlightFrame.node.active),this._baseSkin.setColor(e))},r.useSkill=function(t){var e=w(this.skillBadgetPrefab);e.setParent(this.usingSkillContainer);var i=e.getComponent(D);i.setData(t),i.fadeIn()},r.removeSkill=function(t){var e;null==(e=this.usingSkillContainer.children.find((function(e){return e.getComponent(D).skillName===t})))||e.destroy()},r.setUsingSkillStatus=function(t){var e=this;this.usingSkillContainer.children.forEach((function(t){t.destroy()})),t.forEach((function(t){var i=w(e.skillBadgetPrefab);i.setParent(e.usingSkillContainer),i.getComponent(D).setData(t)}))},r.update=function(t){this.timerCircle.node.active&&(this._time-=t,this.timerCircle.fillRange=k(this._time/this._curDuration),this._time<0&&this.stopCountDown())},r.onDestroy=function(){p.stopAllByTarget(this._obj)},o(e,[{key:"disabled",set:function(t){var e=this;if(this._disabled=t,this._disabled){T.Instance.loadAsset("gameplay-common/base-gray/spriteFrame",d).then((function(t){e.isValid&&null!=e._baseSkin&&(e._baseSkin.getComponentInChildren(s).spriteFrame=t)}))}}}]),e}(C)).prototype,"avatarSprite",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(V.prototype,"nameLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(V.prototype,"highlightFrame",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(V.prototype,"timerCircle",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(V.prototype,"countDownLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(V.prototype,"manaAmountLabel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(V.prototype,"stickerSprite",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(V.prototype,"cloudChat",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(V.prototype,"usingSkillContainer",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(V.prototype,"skillBadgetPrefab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=V))||x));r._RF.pop()}}}));

System.register("chunks:///_virtual/Version.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Base.ts"],(function(e){var n,r,s,t;return{setters:[function(e){n=e.inheritsLoose},function(e){r=e.cclegacy,s=e._decorator},function(e){t=e.Base}],execute:function(){var i;r._RF.push({},"54026AUb3NNTbcYO88Ecs9i","Version",void 0);var o=s.ccclass;s.property,e("VersionREQ",o("VersionREQ")(i=function(e){function r(n,r){var s;return(s=e.call(this,n)||this).engineVersion=r,s}return n(r,e),r}(t))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/Version2.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"aca25+juFNMM5K8dGC0LPU/","Version",void 0);e("ExtensionVersion","1.0.3");n._RF.pop()}}}));

System.register("chunks:///_virtual/WatchAdPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mobx.cjs.development.mjs_cjs=&original=.js","./l10n.ts","./Global.ts","./Popup.ts","./PopupManager.ts","./SDK.ts","./AdStore.ts","./SubLoading.ts","./GameHelper.ts","./StringUtils.ts","./mobx.cjs.development.js","./l10n-manager.ts"],(function(e){var t,n,r,a,o,i,s,u,c,l,p,f,d,m,h,b,L,w,v,g,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,u=e._decorator,c=e.Button,l=e.Label,p=e.macro},null,null,function(e){f=e.default},function(e){d=e.Popup},function(e){m=e.default},function(e){h=e.default},function(e){b=e.AdStore},function(e){L=e.SubLoading},function(e){w=e.GameHelper},function(e){v=e.StringUtils},function(e){g=e.default},function(e){A=e.default}],execute:function(){var _,y,D,R,P,T,x,S,j,k,z;s._RF.push({},"59f2fGpH5JNhq9KCToOOfvP","WatchAdPopup",void 0);g.observable,g.makeObservable;var E=g.autorun,G=(g.reaction,g.action,u.ccclass),B=u.property;e("WatchAdPopup",(_=G("WatchAdPopup"),y=B(c),D=B(l),R=B(l),P=B(l),_((S=t((x=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,r(t,"watchAdButton",S,a(t)),r(t,"adLeftLabel",j,a(t)),r(t,"rewardAmountLabel",k,a(t)),r(t,"timerLabel",z,a(t)),t._timeLeft=0,t._mobXDisosers=[],t}n(t,e);var s=t.prototype;return s.onLoad=function(){var t=this;e.prototype.onLoad.call(this),b.fetchData(),this.watchAdButton.node.on(c.EventType.CLICK,o(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==b.adRemaining){e.next=3;break}return w.showAlert({message:"Ads limit reached. Come back later for more!"}),e.abrupt("return");case 3:return e.prev=3,e.next=6,h.showRewardedAd();case 6:return L.Instance.show(),e.next=9,b.watchAd();case 9:t=e.sent,f.setCoins(t.coins),f.setGems(t.gems),m.Instance.open("ReceiveReward",{amount:t.reward}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),w.showAlert({message:A.t("no-ad")});case 18:return e.prev=18,L.Instance.hide(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[3,15,18,21]])}))));var n=E((function(){var e=b.resetTime,n=b.adRemaining,r=b.nextReward;t.adLeftLabel.string="Ad lefts: "+n,t.rewardAmountLabel.node.parent.active=n>0,t.rewardAmountLabel.string=""+r,t._timeLeft=Math.ceil(e/1e3),t._updateTimer(),t.schedule(t._countDown,1,p.REPEAT_FOREVER)}));this._mobXDisosers.push(n)},s._countDown=function(){this._timeLeft-=1,this._updateTimer(),this._timeLeft<0&&this.unschedule(this._countDown)},s._updateTimer=function(){var e=this._timeLeft>0;this.timerLabel.node.parent.active=e,e&&(this.timerLabel.string=v.formatTime(this._timeLeft))},s.start=function(){},s.update=function(e){},s.onDestroy=function(){e.prototype.onDestroy.call(this),this._mobXDisosers.forEach((function(e){e()}))},t}(d)).prototype,"watchAdButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(x.prototype,"adLeftLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(x.prototype,"rewardAmountLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(x.prototype,"timerLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=x))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/WeeklyLeaderboard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ListView.ts","./LeaderboardItem.ts","./Networking.ts","./PopupManager.ts","./StringUtils.ts"],(function(e){var t,i,r,n,a,o,l,u,c,s,d,f,p,b,h,m,L,y,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){l=e.cclegacy,u=e._decorator,c=e.Prefab,s=e.Node,d=e.Label,f=e.Button,p=e.Component,b=e.macro},function(e){h=e.ListViewCtrl},function(e){m=e.LeaderboardItem},function(e){L=e.default},function(e){y=e.default},function(e){g=e.StringUtils}],execute:function(){var v,w,_,I,k,P,T,D,z,R,E,V,B,C,W;l._RF.push({},"3ef8cDJTd1PZYE6O4o0pQMk","WeeklyLeaderboard",void 0);var x=u.ccclass,M=u.property;e("WeeklyLeaderboard",(v=x("WeeklyLeaderboard"),w=M(c),_=M(h),I=M(m),k=M(s),P=M(d),T=M(f),v((R=t((z=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"listItemPrefab",R,n(t)),r(t,"listView",E,n(t)),r(t,"myLeaderboardItem",V,n(t)),r(t,"loadingIndicator",B,n(t)),r(t,"timerLabel",C,n(t)),r(t,"helpButton",W,n(t)),t._timeLeft=0,t}i(t,e);var l=t.prototype;return l.onLoad=function(){this._fetchLeaderboard(),this.helpButton.node.on(f.EventType.CLICK,(function(){y.Instance.open("RewardInfoPopup")}))},l._fetchLeaderboard=function(){var e=a(o().mark((function e(){var t,i,r,n,a,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loadingIndicator.active=!0,e.next=4,L.getWeeklyLeaderboardInfo();case 4:t=e.sent,this.loadingIndicator.active=!1,i=t.ranking,r=void 0===i?[]:i,n=t.resetTime,a=void 0===n?0:n,null!=(l=t.me)&&this.myLeaderboardItem.setData(l),this.listView.init({template:this.listItemPrefab,listData:r}),this._timeLeft=Math.ceil(a/1e3),this._updateTimer(),this.schedule(this._countDown,1,b.REPEAT_FOREVER),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:return e.prev=17,this.loadingIndicator.active=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[0,14,17,20]])})));return function(){return e.apply(this,arguments)}}(),l.start=function(){},l._countDown=function(){this._timeLeft-=1,this._updateTimer(),this._timeLeft<0&&this.unschedule(this._countDown)},l._updateTimer=function(){var e=this._timeLeft>0;this.timerLabel.node.parent.active=e,e&&(this.timerLabel.string=g.formatTime(this._timeLeft,!0).toUpperCase())},t}(p)).prototype,"listItemPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(z.prototype,"listView",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(z.prototype,"myLeaderboardItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(z.prototype,"loadingIndicator",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(z.prototype,"timerLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(z.prototype,"helpButton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=z))||D));l._RF.pop()}}}));

System.register("chunks:///_virtual/WeeklyRewardPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./l10n.ts","./Constant.ts","./Popup.ts","./AudioManager.ts","./ReceiveRewardItem.ts","./l10n-manager.ts"],(function(e){var r,n,t,a,i,o,l,u,c,s,p,d,f,b,w;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,l=e.Label,u=e.Node,c=e.Prefab,s=e.instantiate},null,function(e){p=e.SOUND},function(e){d=e.Popup},function(e){f=e.AudioManager},function(e){b=e.ReceiveRewardItem},function(e){w=e.default}],execute:function(){var y,g,h,k,v,P,R,m,I;i._RF.push({},"8de64N/6gBGnZeoOJsG2S/X","WeeklyRewardPopup",void 0);var C=o.ccclass,D=o.property;e("WeeklyRewardPopup",(y=C("WeeklyRewardPopup"),g=D(l),h=D(u),k=D(c),y((R=r((P=function(e){function r(){for(var r,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i))||this,t(r,"rankLabel",R,a(r)),t(r,"rewardContainer",m,a(r)),t(r,"rewardItemPrefab",I,a(r)),r}return n(r,e),r.prototype.onEnable=function(){var e=this,r=this._data,n=r.rank,t=void 0===n?0:n,a=r.rewards;(void 0===a?[]:a).forEach((function(r){var n=s(e.rewardItemPrefab);n.getComponent(b).setData(r),e.rewardContainer.addChild(n)})),this.rankLabel.string=w.t("your-weekly-rank-is",{rank:""+t}),f.Instance.playSound(p.SHOW_REWARD)},r}(d)).prototype,"rankLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=r(P.prototype,"rewardContainer",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=r(P.prototype,"rewardItemPrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=P))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/YouAreHereIndicator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,o,i,n,a,c,u;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,c=e.Node,u=e.Component}],execute:function(){var s,l,d,p,h;n._RF.push({},"0b20dXPFgxBkbsjxWG5rdpi","YouAreHereIndicator",void 0);var f=a.ccclass,y=a.property;e("YouAreHereIndicator",(s=f("YouAreHereIndicator"),l=y(c),s((h=r((p=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r=e.call.apply(e,[this].concat(n))||this,o(r,"yourTeammateHereNode",h,i(r)),r}return t(r,e),r.prototype.show=function(e){var r=this;void 0===e&&(e=!1),this.node.active=!0,this.yourTeammateHereNode.active=e,this.scheduleOnce((function(){r.node.active=!1}),3)},r}(u)).prototype,"yourTeammateHereNode",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=p))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/YourTurnText.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./AudioManager.ts"],(function(t){var n,o,e,r,c,a,i,s,u,p,l;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,r=t.UIOpacity,c=t.tween,a=t.v3,i=t.Vec3,s=t.easing,u=t.Component},function(t){p=t.SOUND},function(t){l=t.AudioManager}],execute:function(){var y;o._RF.push({},"c68baN+jWlHipBmSc+/9Doh","YourTurnText",void 0);var f=e.ccclass;e.property,t("YourTurnText",f("YourTurnText")(y=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var e=o.prototype;return e.onLoad=function(){this.getComponent(r).opacity=0},e.show=function(){l.Instance.playSound(p.NOTI_MY_TURN),c(this.node).set({scale:a(.25,.25,1)}).to(.3,{scale:i.ONE},{easing:s.backOut}).start(),c(this.getComponent(r)).set({opacity:0}).to(.15,{opacity:255}).delay(.75).to(.15,{opacity:0}).start()},o}(u))||y);o._RF.pop()}}}));

System.register("chunks:///_virtual/ZaloMiniAppSDK.ts",["cc"],(function(){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"96d75lWODFMnon2+2hr7STp","ZaloMiniAppSDK",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/ZMP.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,r,s;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime,r=e.extends},function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"28389z56z9HpbzyvOwx45hE","ZMP",void 0);var o=function(e){return e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.REQUESTED=1]="REQUESTED",e[e.INITIALIZED=2]="INITIALIZED",e}(o||{}),a=function(e){return e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.REQUESTED=1]="REQUESTED",e[e.INITIALIZED=2]="INITIALIZED",e}(a||{});e("default",new(function(){function e(){this.sdk=null,this.initResolvers=[],this.initState=o.UNINITIALIZED,this._logoUrl=null,this._loadedAd=!1,this._adState=a.UNINITIALIZED,this._requestAdPromise=Promise.resolve(!1)}var s=e.prototype;return s.init=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureLoad();case 2:return e.abrupt("return",this.setupAd());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s._loadJsSDK=function(){var e=this;if(this.initState===o.UNINITIALIZED){this.initState=o.REQUESTED;var r=document.createElement("script");r.src="https://cdn.jsdelivr.net/npm/zmp-sdk@2.39.0/browser.min.js",r.async=!0,r.onload=n(t().mark((function n(){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.sdk=window.ZaloMiniAppSDK,e.initState=o.INITIALIZED,e.initResolvers.forEach((function(e){return e()})),e.initResolvers=[];case 4:case"end":return n.stop()}}),n)}))),r.onerror=function(){console.error("Failed to load ZaloMiniApp SDk. Please check your internet connection.")},document.head.appendChild(r)}},s.setupAd=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureLoad();case 2:this.sdk.setupAd();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.displayAd=function(){var e=n(t().mark((function e(){var n=this;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureLoad();case 2:return e.abrupt("return",new Promise((function(e,t){var r=setTimeout((function(){t("Ad timed out")}),1e4);n.sdk.loadAd({ids:["ZMA_Reward"],config:{zoneId:"390656643630065053",type:"reward",display:!0,onLoad:function(e){console.log("on load ad",e),clearTimeout(r)},onShow:function(e){console.log("on show ad",e)},onClose:function(t){console.log("on closed ad",t),n.sdk.refreshAd({id:"ZMA_Reward"}),e(!0)},rewardConfig:{displayType:"popup",screenMode:"landscape"}}})})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.openShareSheet=function(){var e=n(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureLoad();case 2:return e.abrupt("return",this.sdk.openShareSheet({type:"image",data:{imageUrl:n}}));case 3:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),s.saveImageToGallery=function(){var e=n(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureLoad();case 2:return e.abrupt("return",this.sdk.saveImageToGallery({imageBase64Data:n}));case 3:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),s.authorize=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureLoad();case 2:return e.abrupt("return",this.sdk.authorize({scopes:["scope.userInfo"]}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.getUserInfo=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureLoad();case 2:return e.abrupt("return",this.sdk.getUserInfo({autoRequestPermission:!0}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.getAccessToken=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureLoad();case 2:return e.abrupt("return",this.sdk.getAccessToken({}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.sendInvite=function(){var e=n(t().mark((function e(n,s){var o,a,i,u,c,p;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===s&&(s=""),e.next=3,this.ensureLoad();case 3:if(null!=this._logoUrl){e.next=7;break}return e.next=6,this.sdk.getAppInfo();case 6:this._logoUrl=e.sent.logoUrl;case 7:return i="/?"+new URLSearchParams(r({},n,{env:null!=(o=new URLSearchParams(location.search).get("env"))?o:"",version:null!=(a=new URLSearchParams(location.search).get("version"))?a:""})),e.next=10,this.sdk.getAppInfo({});case 10:return u=e.sent,c=u.name,p={type:"zmp",data:{title:c,description:s,thumbnail:this._logoUrl,path:i}},console.log("obj",p),e.abrupt("return",this.sdk.openShareSheet(p));case 15:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}(),s.openPostFeed=function(){var e=n(t().mark((function e(){var n,r,s,o,a,i,u,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="?"+new URLSearchParams({env:null!=(n=new URLSearchParams(location.search).get("env"))?n:"",version:null!=(r=new URLSearchParams(location.search).get("version"))?r:""}),e.next=3,this.sdk.getAppInfo({});case 3:return o=e.sent,console.log("app info",o),console.log("path",s),a=o.name,i=o.description,u=o.appUrl,c=window.APP_VERSION?window.location.origin+window.location.pathname+window.APP_VERSION+"/":"",console.log("thumb",c+"images/sweety-ludo-banner-1.jpg"),e.abrupt("return",this.sdk.openPostFeed({type:"link",data:{link:u+s,title:a,description:i,thumb:c+"images/sweety-ludo-banner-1.jpg"}}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.ensureLoad=function(){var e=n(t().mark((function e(){var r=this;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.initState!==o.INITIALIZED){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return this._loadJsSDK(),e.abrupt("return",new Promise((function(e){r.initResolvers.push(n(t().mark((function n(){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e();case 1:case"end":return n.stop()}}),n)}))))})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}()));s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});